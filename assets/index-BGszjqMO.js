function PI(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Kv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function II(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var _x={exports:{}},lp={},Ax={exports:{}},tn={};var gw;function BI(){if(gw)return tn;gw=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function y(z){return z===null||typeof z!="object"?null:(z=m&&z[m]||z["@@iterator"],typeof z=="function"?z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(z,Y,pe){this.props=z,this.context=Y,this.refs=w,this.updater=pe||v}S.prototype.isReactComponent={},S.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function M(){}M.prototype=S.prototype;function C(z,Y,pe){this.props=z,this.context=Y,this.refs=w,this.updater=pe||v}var b=C.prototype=new M;b.constructor=C,x(b,S.prototype),b.isPureReactComponent=!0;var R=Array.isArray,O=Object.prototype.hasOwnProperty,F={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function U(z,Y,pe){var Ne,oe={},ve=null,be=null;if(Y!=null)for(Ne in Y.ref!==void 0&&(be=Y.ref),Y.key!==void 0&&(ve=""+Y.key),Y)O.call(Y,Ne)&&!N.hasOwnProperty(Ne)&&(oe[Ne]=Y[Ne]);var Ie=arguments.length-2;if(Ie===1)oe.children=pe;else if(1<Ie){for(var Xe=Array(Ie),rt=0;rt<Ie;rt++)Xe[rt]=arguments[rt+2];oe.children=Xe}if(z&&z.defaultProps)for(Ne in Ie=z.defaultProps,Ie)oe[Ne]===void 0&&(oe[Ne]=Ie[Ne]);return{$$typeof:i,type:z,key:ve,ref:be,props:oe,_owner:F.current}}function J(z,Y){return{$$typeof:i,type:z.type,key:Y,ref:z.ref,props:z.props,_owner:z._owner}}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function L(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return Y[pe]})}var ne=/\/+/g;function ie(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):Y.toString(36)}function ce(z,Y,pe,Ne,oe){var ve=typeof z;(ve==="undefined"||ve==="boolean")&&(z=null);var be=!1;if(z===null)be=!0;else switch(ve){case"string":case"number":be=!0;break;case"object":switch(z.$$typeof){case i:case e:be=!0}}if(be)return be=z,oe=oe(be),z=Ne===""?"."+ie(be,0):Ne,R(oe)?(pe="",z!=null&&(pe=z.replace(ne,"$&/")+"/"),ce(oe,Y,pe,"",function(rt){return rt})):oe!=null&&(B(oe)&&(oe=J(oe,pe+(!oe.key||be&&be.key===oe.key?"":(""+oe.key).replace(ne,"$&/")+"/")+z)),Y.push(oe)),1;if(be=0,Ne=Ne===""?".":Ne+":",R(z))for(var Ie=0;Ie<z.length;Ie++){ve=z[Ie];var Xe=Ne+ie(ve,Ie);be+=ce(ve,Y,pe,Xe,oe)}else if(Xe=y(z),typeof Xe=="function")for(z=Xe.call(z),Ie=0;!(ve=z.next()).done;)ve=ve.value,Xe=Ne+ie(ve,Ie++),be+=ce(ve,Y,pe,Xe,oe);else if(ve==="object")throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return be}function de(z,Y,pe){if(z==null)return z;var Ne=[],oe=0;return ce(z,Ne,"","",function(ve){return Y.call(pe,ve,oe++)}),Ne}function le(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var ye={current:null},G={transition:null},Z={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:G,ReactCurrentOwner:F};return tn.Children={map:de,forEach:function(z,Y,pe){de(z,function(){Y.apply(this,arguments)},pe)},count:function(z){var Y=0;return de(z,function(){Y++}),Y},toArray:function(z){return de(z,function(Y){return Y})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},tn.Component=S,tn.Fragment=t,tn.Profiler=r,tn.PureComponent=C,tn.StrictMode=n,tn.Suspense=c,tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,tn.cloneElement=function(z,Y,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ne=x({},z.props),oe=z.key,ve=z.ref,be=z._owner;if(Y!=null){if(Y.ref!==void 0&&(ve=Y.ref,be=F.current),Y.key!==void 0&&(oe=""+Y.key),z.type&&z.type.defaultProps)var Ie=z.type.defaultProps;for(Xe in Y)O.call(Y,Xe)&&!N.hasOwnProperty(Xe)&&(Ne[Xe]=Y[Xe]===void 0&&Ie!==void 0?Ie[Xe]:Y[Xe])}var Xe=arguments.length-2;if(Xe===1)Ne.children=pe;else if(1<Xe){Ie=Array(Xe);for(var rt=0;rt<Xe;rt++)Ie[rt]=arguments[rt+2];Ne.children=Ie}return{$$typeof:i,type:z.type,key:oe,ref:ve,props:Ne,_owner:be}},tn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},tn.createElement=U,tn.createFactory=function(z){var Y=U.bind(null,z);return Y.type=z,Y},tn.createRef=function(){return{current:null}},tn.forwardRef=function(z){return{$$typeof:l,render:z}},tn.isValidElement=B,tn.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:le}},tn.memo=function(z,Y){return{$$typeof:f,type:z,compare:Y===void 0?null:Y}},tn.startTransition=function(z){var Y=G.transition;G.transition={};try{z()}finally{G.transition=Y}},tn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},tn.useCallback=function(z,Y){return ye.current.useCallback(z,Y)},tn.useContext=function(z){return ye.current.useContext(z)},tn.useDebugValue=function(){},tn.useDeferredValue=function(z){return ye.current.useDeferredValue(z)},tn.useEffect=function(z,Y){return ye.current.useEffect(z,Y)},tn.useId=function(){return ye.current.useId()},tn.useImperativeHandle=function(z,Y,pe){return ye.current.useImperativeHandle(z,Y,pe)},tn.useInsertionEffect=function(z,Y){return ye.current.useInsertionEffect(z,Y)},tn.useLayoutEffect=function(z,Y){return ye.current.useLayoutEffect(z,Y)},tn.useMemo=function(z,Y){return ye.current.useMemo(z,Y)},tn.useReducer=function(z,Y,pe){return ye.current.useReducer(z,Y,pe)},tn.useRef=function(z){return ye.current.useRef(z)},tn.useState=function(z){return ye.current.useState(z)},tn.useSyncExternalStore=function(z,Y,pe){return ye.current.useSyncExternalStore(z,Y,pe)},tn.useTransition=function(){return ye.current.useTransition()},tn.version="18.2.0",tn}var yw;function fd(){return yw||(yw=1,Ax.exports=BI()),Ax.exports}var vw;function DI(){if(vw)return lp;vw=1;var i=fd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,f){var p,m={},y=null,v=null;f!==void 0&&(y=""+f),c.key!==void 0&&(y=""+c.key),c.ref!==void 0&&(v=c.ref);for(p in c)n.call(c,p)&&!s.hasOwnProperty(p)&&(m[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)m[p]===void 0&&(m[p]=c[p]);return{$$typeof:e,type:l,key:y,ref:v,props:m,_owner:r.current}}return lp.Fragment=t,lp.jsx=o,lp.jsxs=o,lp}var xw;function LI(){return xw||(xw=1,_x.exports=DI()),_x.exports}var te=LI(),q=fd();const Zh=Kv(q),FI=PI({__proto__:null,default:Zh},[q]);var Og={},Sx={exports:{}},Qr={},Mx={exports:{}},wx={};var _w;function NI(){return _w||(_w=1,(function(i){function e(G,Z){var z=G.length;G.push(Z);e:for(;0<z;){var Y=z-1>>>1,pe=G[Y];if(0<r(pe,Z))G[Y]=Z,G[z]=pe,z=Y;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Z=G[0],z=G.pop();if(z!==Z){G[0]=z;e:for(var Y=0,pe=G.length,Ne=pe>>>1;Y<Ne;){var oe=2*(Y+1)-1,ve=G[oe],be=oe+1,Ie=G[be];if(0>r(ve,z))be<pe&&0>r(Ie,ve)?(G[Y]=Ie,G[be]=z,Y=be):(G[Y]=ve,G[oe]=z,Y=oe);else if(be<pe&&0>r(Ie,z))G[Y]=Ie,G[be]=z,Y=be;else break e}}return Z}function r(G,Z){var z=G.sortIndex-Z.sortIndex;return z!==0?z:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],f=[],p=1,m=null,y=3,v=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=G)n(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function R(G){if(w=!1,b(G),!x)if(t(c)!==null)x=!0,le(O);else{var Z=t(f);Z!==null&&ye(R,Z.startTime-G)}}function O(G,Z){x=!1,w&&(w=!1,M(U),U=-1),v=!0;var z=y;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||G&&!L());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,y=m.priorityLevel;var pe=Y(m.expirationTime<=Z);Z=i.unstable_now(),typeof pe=="function"?m.callback=pe:m===t(c)&&n(c),b(Z)}else n(c);m=t(c)}if(m!==null)var Ne=!0;else{var oe=t(f);oe!==null&&ye(R,oe.startTime-Z),Ne=!1}return Ne}finally{m=null,y=z,v=!1}}var F=!1,N=null,U=-1,J=5,B=-1;function L(){return!(i.unstable_now()-B<J)}function ne(){if(N!==null){var G=i.unstable_now();B=G;var Z=!0;try{Z=N(!0,G)}finally{Z?ie():(F=!1,N=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,de=ce.port2;ce.port1.onmessage=ne,ie=function(){de.postMessage(null)}}else ie=function(){S(ne,0)};function le(G){N=G,F||(F=!0,ie())}function ye(G,Z){U=S(function(){G(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){x||v||(x=!0,le(O))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var z=y;y=Z;try{return G()}finally{y=z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=y;y=G;try{return Z()}finally{y=z}},i.unstable_scheduleCallback=function(G,Z,z){var Y=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,G){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=z+pe,G={id:p++,callback:Z,priorityLevel:G,startTime:z,expirationTime:pe,sortIndex:-1},z>Y?(G.sortIndex=z,e(f,G),t(c)===null&&G===t(f)&&(w?(M(U),U=-1):w=!0,ye(R,z-Y))):(G.sortIndex=pe,e(c,G),x||v||(x=!0,le(O))),G},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(G){var Z=y;return function(){var z=y;y=Z;try{return G.apply(this,arguments)}finally{y=z}}}})(wx)),wx}var Aw;function OI(){return Aw||(Aw=1,Mx.exports=NI()),Mx.exports}var Sw;function kI(){if(Sw)return Qr;Sw=1;var i=fd(),e=OI();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function s(a,u){o(a,u),o(a+"Capture",u)}function o(a,u){for(r[a]=u,a=0;a<u.length;a++)n.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function y(a){return c.call(m,a)?!0:c.call(p,a)?!1:f.test(a)?m[a]=!0:(p[a]=!0,!1)}function v(a,u,g,A){if(g!==null&&g.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return A?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,u,g,A){if(u===null||typeof u>"u"||v(a,u,g,A))return!0;if(A)return!1;if(g!==null)switch(g.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(a,u,g,A,T,I,k){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=A,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=a,this.type=u,this.sanitizeURL=I,this.removeEmptyString=k}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];S[u]=new w(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(M,C);S[u]=new w(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(M,C);S[u]=new w(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(M,C);S[u]=new w(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function b(a,u,g,A){var T=S.hasOwnProperty(u)?S[u]:null;(T!==null?T.type!==0:A||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(x(u,g,T,A)&&(g=null),A||T===null?y(u)&&(g===null?a.removeAttribute(u):a.setAttribute(u,""+g)):T.mustUseProperty?a[T.propertyName]=g===null?T.type===3?!1:"":g:(u=T.attributeName,A=T.attributeNamespace,g===null?a.removeAttribute(u):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,A?a.setAttributeNS(A,u,g):a.setAttribute(u,g))))}var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),F=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),L=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),G=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var z=Object.assign,Y;function pe(a){if(Y===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Y=u&&u[1]||""}return`
`+Y+a}var Ne=!1;function oe(a,u){if(!a||Ne)return"";Ne=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Me){var A=Me}Reflect.construct(a,[],u)}else{try{u.call()}catch(Me){A=Me}a.call(u.prototype)}else{try{throw Error()}catch(Me){A=Me}a()}}catch(Me){if(Me&&A&&typeof Me.stack=="string"){for(var T=Me.stack.split(`
`),I=A.stack.split(`
`),k=T.length-1,Q=I.length-1;1<=k&&0<=Q&&T[k]!==I[Q];)Q--;for(;1<=k&&0<=Q;k--,Q--)if(T[k]!==I[Q]){if(k!==1||Q!==1)do if(k--,Q--,0>Q||T[k]!==I[Q]){var ee=`
`+T[k].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=k&&0<=Q);break}}}finally{Ne=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?pe(a):""}function ve(a){switch(a.tag){case 5:return pe(a.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return a=oe(a.type,!1),a;case 11:return a=oe(a.type.render,!1),a;case 1:return a=oe(a.type,!0),a;default:return""}}function be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case F:return"Portal";case J:return"Profiler";case U:return"StrictMode";case ie:return"Suspense";case ce:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case L:return(a.displayName||"Context")+".Consumer";case B:return(a._context.displayName||"Context")+".Provider";case ne:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case de:return u=a.displayName||null,u!==null?u:be(a.type)||"Memo";case le:u=a._payload,a=a._init;try{return be(a(u))}catch{}}return null}function Ie(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(u);case 8:return u===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Xe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function rt(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function pt(a){var u=rt(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),A=""+a[u];if(!a.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,I=g.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return T.call(this)},set:function(k){A=""+k,I.call(this,k)}}),Object.defineProperty(a,u,{enumerable:g.enumerable}),{getValue:function(){return A},setValue:function(k){A=""+k},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function We(a){a._valueTracker||(a._valueTracker=pt(a))}function Pe(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var g=u.getValue(),A="";return a&&(A=rt(a)?a.checked?"true":"false":a.value),a=A,a!==g?(u.setValue(a),!0):!1}function j(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Je(a,u){var g=u.checked;return z({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function Ke(a,u){var g=u.defaultValue==null?"":u.defaultValue,A=u.checked!=null?u.checked:u.defaultChecked;g=Xe(u.value!=null?u.value:g),a._wrapperState={initialChecked:A,initialValue:g,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Ue(a,u){u=u.checked,u!=null&&b(a,"checked",u,!1)}function Ge(a,u){Ue(a,u);var g=Xe(u.value),A=u.type;if(g!=null)A==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(A==="submit"||A==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?tt(a,u.type,g):u.hasOwnProperty("defaultValue")&&tt(a,u.type,Xe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function xt(a,u,g){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var A=u.type;if(!(A!=="submit"&&A!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,g||u===a.value||(a.value=u),a.defaultValue=u}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function tt(a,u,g){(u!=="number"||j(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var X=Array.isArray;function H(a,u,g,A){if(a=a.options,u){u={};for(var T=0;T<g.length;T++)u["$"+g[T]]=!0;for(g=0;g<a.length;g++)T=u.hasOwnProperty("$"+a[g].value),a[g].selected!==T&&(a[g].selected=T),T&&A&&(a[g].defaultSelected=!0)}else{for(g=""+Xe(g),u=null,T=0;T<a.length;T++){if(a[T].value===g){a[T].selected=!0,A&&(a[T].defaultSelected=!0);return}u!==null||a[T].disabled||(u=a[T])}u!==null&&(u.selected=!0)}}function me(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return z({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Te(a,u){var g=u.value;if(g==null){if(g=u.children,u=u.defaultValue,g!=null){if(u!=null)throw Error(t(92));if(X(g)){if(1<g.length)throw Error(t(93));g=g[0]}u=g}u==null&&(u=""),g=u}a._wrapperState={initialValue:Xe(g)}}function Fe(a,u){var g=Xe(u.value),A=Xe(u.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),u.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),A!=null&&(a.defaultValue=""+A)}function Be(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function gt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?gt(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var lt,Qt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,g,A,T){MSApp.execUnsafeLocalFunction(function(){return a(u,g,A,T)})}:a})(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(lt=lt||document.createElement("div"),lt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=lt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function ze(a,u){if(u){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=u;return}}a.textContent=u}var st={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ft=["Webkit","ms","Moz","O"];Object.keys(st).forEach(function(a){Ft.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),st[u]=st[a]})});function It(a,u,g){return u==null||typeof u=="boolean"||u===""?"":g||typeof u!="number"||u===0||st.hasOwnProperty(a)&&st[a]?(""+u).trim():u+"px"}function ht(a,u){a=a.style;for(var g in u)if(u.hasOwnProperty(g)){var A=g.indexOf("--")===0,T=It(g,u[g],A);g==="float"&&(g="cssFloat"),A?a.setProperty(g,T):a[g]=T}}var re=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Re(a,u){if(u){if(re[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function et(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $=null;function je(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var we=null,Le=null,nt=null;function ct(a){if(a=so(a)){if(typeof we!="function")throw Error(t(280));var u=a.stateNode;u&&(u=Jf(u),we(a.stateNode,a.type,u))}}function kt(a){Le?nt?nt.push(a):nt=[a]:Le=a}function rn(){if(Le){var a=Le,u=nt;if(nt=Le=null,ct(a),u)for(a=0;a<u.length;a++)ct(u[a])}}function Fn(a,u){return a(u)}function Xt(){}var bn=!1;function ui(a,u,g){if(bn)return a(u,g);bn=!0;try{return Fn(a,u,g)}finally{bn=!1,(Le!==null||nt!==null)&&(Xt(),rn())}}function Oo(a,u){var g=a.stateNode;if(g===null)return null;var A=Jf(g);if(A===null)return null;g=A[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(a=a.type,A=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!A;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,u,typeof g));return g}var fl=!1;if(l)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){fl=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{fl=!1}function hl(a,u,g,A,T,I,k,Q,ee){var Me=Array.prototype.slice.call(arguments,3);try{u.apply(g,Me)}catch(ke){this.onError(ke)}}var Es=!1,da=null,_r=!1,dl=null,pl={onError:function(a){Es=!0,da=a}};function ff(a,u,g,A,T,I,k,Q,ee){Es=!1,da=null,hl.apply(pl,arguments)}function hf(a,u,g,A,T,I,k,Q,ee){if(ff.apply(this,arguments),Es){if(Es){var Me=da;Es=!1,da=null}else throw Error(t(198));_r||(_r=!0,dl=Me)}}function qs(a){var u=a,g=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(g=u.return),a=u.return;while(a)}return u.tag===3?g:null}function df(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function pf(a){if(qs(a)!==a)throw Error(t(188))}function V(a){var u=a.alternate;if(!u){if(u=qs(a),u===null)throw Error(t(188));return u!==a?null:a}for(var g=a,A=u;;){var T=g.return;if(T===null)break;var I=T.alternate;if(I===null){if(A=T.return,A!==null){g=A;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===g)return pf(T),a;if(I===A)return pf(T),u;I=I.sibling}throw Error(t(188))}if(g.return!==A.return)g=T,A=I;else{for(var k=!1,Q=T.child;Q;){if(Q===g){k=!0,g=T,A=I;break}if(Q===A){k=!0,A=T,g=I;break}Q=Q.sibling}if(!k){for(Q=I.child;Q;){if(Q===g){k=!0,g=I,A=T;break}if(Q===A){k=!0,A=I,g=T;break}Q=Q.sibling}if(!k)throw Error(t(189))}}if(g.alternate!==A)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:u}function ue(a){return a=V(a),a!==null?Ae(a):null}function Ae(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Ae(a);if(u!==null)return u;a=a.sibling}return null}var Se=e.unstable_scheduleCallback,he=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,ft=e.unstable_requestPaint,Ze=e.unstable_now,vt=e.unstable_getCurrentPriorityLevel,Rt=e.unstable_ImmediatePriority,Bt=e.unstable_UserBlockingPriority,Mt=e.unstable_NormalPriority,cn=e.unstable_LowPriority,un=e.unstable_IdlePriority,sn=null,Ot=null;function bt(a){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(sn,a,void 0,(a.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:ni,on=Math.log,zt=Math.LN2;function ni(a){return a>>>=0,a===0?32:31-(on(a)/zt|0)|0}var Ii=64,mn=4194304;function Nr(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function An(a,u){var g=a.pendingLanes;if(g===0)return 0;var A=0,T=a.suspendedLanes,I=a.pingedLanes,k=g&268435455;if(k!==0){var Q=k&~T;Q!==0?A=Nr(Q):(I&=k,I!==0&&(A=Nr(I)))}else k=g&~T,k!==0?A=Nr(k):I!==0&&(A=Nr(I));if(A===0)return 0;if(u!==0&&u!==A&&(u&T)===0&&(T=A&-A,I=u&-u,T>=I||T===16&&(I&4194240)!==0))return u;if((A&4)!==0&&(A|=g&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=A;0<u;)g=31-ot(u),T=1<<g,A|=a[g],u&=~T;return A}function is(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(a,u){for(var g=a.suspendedLanes,A=a.pingedLanes,T=a.expirationTimes,I=a.pendingLanes;0<I;){var k=31-ot(I),Q=1<<k,ee=T[k];ee===-1?((Q&g)===0||(Q&A)!==0)&&(T[k]=is(Q,u)):ee<=u&&(a.expiredLanes|=Q),I&=~Q}}function Mi(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Bi(){var a=Ii;return Ii<<=1,(Ii&4194240)===0&&(Ii=64),a}function Cc(a){for(var u=[],g=0;31>g;g++)u.push(a);return u}function Uo(a,u,g){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-ot(u),a[u]=g}function W0(a,u){var g=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var A=a.eventTimes;for(a=a.expirationTimes;0<g;){var T=31-ot(g),I=1<<T;u[T]=0,A[T]=-1,a[T]=-1,g&=~I}}function ml(a,u){var g=a.entangledLanes|=u;for(a=a.entanglements;g;){var A=31-ot(g),T=1<<A;T&u|a[A]&u&&(a[A]|=u),g&=~T}}var hn=0;function gl(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var bc,Ad,Vm,mf,gf,pa=!1,yf=[],Cs=null,Zt=null,Qs=null,ma=new Map,yl=new Map,zo=[],j0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(a,u){switch(a){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":ma.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(u.pointerId)}}function ga(a,u,g,A,T,I){return a===null||a.nativeEvent!==I?(a={blockedOn:u,domEventName:g,eventSystemFlags:A,nativeEvent:I,targetContainers:[T]},u!==null&&(u=so(u),u!==null&&Ad(u)),a):(a.eventSystemFlags|=A,u=a.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),a)}function X0(a,u,g,A,T){switch(u){case"focusin":return Cs=ga(Cs,a,u,g,A,T),!0;case"dragenter":return Zt=ga(Zt,a,u,g,A,T),!0;case"mouseover":return Qs=ga(Qs,a,u,g,A,T),!0;case"pointerover":var I=T.pointerId;return ma.set(I,ga(ma.get(I)||null,a,u,g,A,T)),!0;case"gotpointercapture":return I=T.pointerId,yl.set(I,ga(yl.get(I)||null,a,u,g,A,T)),!0}return!1}function vf(a){var u=Jo(a.target);if(u!==null){var g=qs(u);if(g!==null){if(u=g.tag,u===13){if(u=df(g),u!==null){a.blockedOn=u,gf(a.priority,function(){Vm(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xf(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var g=kr(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var A=new g.constructor(g.type,g);$=A,g.target.dispatchEvent(A),$=null}else return u=so(g),u!==null&&Ad(u),a.blockedOn=g,!1;u.shift()}return!0}function Tc(a,u,g){xf(a)&&g.delete(u)}function bs(){pa=!1,Cs!==null&&xf(Cs)&&(Cs=null),Zt!==null&&xf(Zt)&&(Zt=null),Qs!==null&&xf(Qs)&&(Qs=null),ma.forEach(Tc),yl.forEach(Tc)}function Rc(a,u){a.blockedOn===u&&(a.blockedOn=null,pa||(pa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,bs)))}function Pc(a){function u(T){return Rc(T,a)}if(0<yf.length){Rc(yf[0],a);for(var g=1;g<yf.length;g++){var A=yf[g];A.blockedOn===a&&(A.blockedOn=null)}}for(Cs!==null&&Rc(Cs,a),Zt!==null&&Rc(Zt,a),Qs!==null&&Rc(Qs,a),ma.forEach(u),yl.forEach(u),g=0;g<zo.length;g++)A=zo[g],A.blockedOn===a&&(A.blockedOn=null);for(;0<zo.length&&(g=zo[0],g.blockedOn===null);)vf(g),g.blockedOn===null&&zo.shift()}var Hi=R.ReactCurrentBatchConfig,Or=!0;function _f(a,u,g,A){var T=hn,I=Hi.transition;Hi.transition=null;try{hn=1,Af(a,u,g,A)}finally{hn=T,Hi.transition=I}}function Sd(a,u,g,A){var T=hn,I=Hi.transition;Hi.transition=null;try{hn=4,Af(a,u,g,A)}finally{hn=T,Hi.transition=I}}function Af(a,u,g,A){if(Or){var T=kr(a,u,g,A);if(T===null)Hf(a,u,A,Sf,g),ii(a,A);else if(X0(T,a,u,g,A))A.stopPropagation();else if(ii(a,A),u&4&&-1<j0.indexOf(a)){for(;T!==null;){var I=so(T);if(I!==null&&bc(I),I=kr(a,u,g,A),I===null&&Hf(a,u,A,Sf,g),I===T)break;T=I}T!==null&&A.stopPropagation()}else Hf(a,u,A,null,g)}}var Sf=null;function kr(a,u,g,A){if(Sf=null,a=je(A),a=Jo(a),a!==null)if(u=qs(a),u===null)a=null;else if(g=u.tag,g===13){if(a=df(u),a!==null)return a;a=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Sf=a,null}function Wm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vt()){case Rt:return 1;case Bt:return 4;case Mt:case cn:return 16;case un:return 536870912;default:return 16}default:return 16}}var rs=null,Md=null,tr=null;function Ic(){if(tr)return tr;var a,u=Md,g=u.length,A,T="value"in rs?rs.value:rs.textContent,I=T.length;for(a=0;a<g&&u[a]===T[a];a++);var k=g-a;for(A=1;A<=k&&u[g-A]===T[I-A];A++);return tr=T.slice(a,1<A?1-A:void 0)}function ya(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Zs(){return!0}function Mf(){return!1}function Gi(a){function u(g,A,T,I,k){this._reactName=g,this._targetInst=T,this.type=A,this.nativeEvent=I,this.target=k,this.currentTarget=null;for(var Q in a)a.hasOwnProperty(Q)&&(g=a[Q],this[Q]=g?g(I):I[Q]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Zs:Mf,this.isPropagationStopped=Mf,this}return z(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),u}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=Gi(va),xa=z({},va,{view:0,detail:0}),vl=Gi(xa),nr,Ur,zr,xl=z({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==zr&&(zr&&a.type==="mousemove"?(nr=a.screenX-zr.screenX,Ur=a.screenY-zr.screenY):Ur=nr=0,zr=a),nr)},movementY:function(a){return"movementY"in a?a.movementY:Ur}}),wd=Gi(xl),$s=z({},xl,{dataTransfer:0}),Ho=Gi($s),wf=z({},xa,{relatedTarget:0}),Ef=Gi(wf),Cf=z({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),jm=Gi(Cf),Xm=z({},va,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ed=Gi(Xm),bf=z({},va,{data:0}),Cd=Gi(bf),Jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Km={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _l(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=bd[a])?!!u[a]:!1}function Go(){return _l}var Tf=z({},xa,{key:function(a){if(a.key){var u=Jm[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=ya(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Km[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(a){return a.type==="keypress"?ya(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ya(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rf=Gi(Tf),Hr=z({},xl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Gi(Hr),_a=z({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),eo=Gi(_a),to=z({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aa=Gi(to),Ym=z({},xl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Td=Gi(Ym),Rd=[9,13,27,32],Vi=l&&"CompositionEvent"in window,wi=null;l&&"documentMode"in document&&(wi=document.documentMode);var In=l&&"TextEvent"in window&&!wi,Al=l&&(!Vi||wi&&8<wi&&11>=wi),Gr=" ",Pd=!1;function Id(a,u){switch(a){case"keyup":return Rd.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Vo=!1;function qm(a,u){switch(a){case"compositionend":return Pf(u);case"keypress":return u.which!==32?null:(Pd=!0,Gr);case"textInput":return a=u.data,a===Gr&&Pd?null:a;default:return null}}function Dc(a,u){if(Vo)return a==="compositionend"||!Vi&&Id(a,u)?(a=Ic(),tr=Md=rs=null,Vo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Al&&u.locale!=="ko"?null:u.data;default:return null}}var Sl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function If(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Sl[a.type]:u==="textarea"}function Ml(a,u,g,A){kt(A),u=Gf(u,"onChange"),0<u.length&&(g=new Bc("onChange","change",null,g,A),a.push({event:g,listeners:u}))}var Wo=null,wl=null;function Qm(a){Tl(a,0)}function no(a){var u=Vn(a);if(Pe(u))return a}function Zm(a,u){if(a==="change")return u}var El=!1;if(l){var ir;if(l){var Sa="oninput"in document;if(!Sa){var Ma=document.createElement("div");Ma.setAttribute("oninput","return;"),Sa=typeof Ma.oninput=="function"}ir=Sa}else ir=!1;El=ir&&(!document.documentMode||9<document.documentMode)}function ss(){Wo&&(Wo.detachEvent("onpropertychange",Bf),wl=Wo=null)}function Bf(a){if(a.propertyName==="value"&&no(wl)){var u=[];Ml(u,wl,a,je(a)),ui(Qm,u)}}function Cl(a,u,g){a==="focusin"?(ss(),Wo=u,wl=g,Wo.attachEvent("onpropertychange",Bf)):a==="focusout"&&ss()}function $m(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return no(wl)}function Bd(a,u){if(a==="click")return no(u)}function Nn(a,u){if(a==="input"||a==="change")return no(u)}function Df(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Sr=typeof Object.is=="function"?Object.is:Df;function wa(a,u){if(Sr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var g=Object.keys(a),A=Object.keys(u);if(g.length!==A.length)return!1;for(A=0;A<g.length;A++){var T=g[A];if(!c.call(u,T)||!Sr(a[T],u[T]))return!1}return!0}function Lc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Mr(a,u){var g=Lc(a);a=0;for(var A;g;){if(g.nodeType===3){if(A=a+g.textContent.length,a<=u&&A>=u)return{node:g,offset:u-a};a=A}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Lc(g)}}function Ea(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?Ea(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function On(){for(var a=window,u=j();u instanceof a.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)a=u.contentWindow;else break;u=j(a.document)}return u}function fi(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function hi(a){var u=On(),g=a.focusedElem,A=a.selectionRange;if(u!==g&&g&&g.ownerDocument&&Ea(g.ownerDocument.documentElement,g)){if(A!==null&&fi(g)){if(u=A.start,a=A.end,a===void 0&&(a=u),"selectionStart"in g)g.selectionStart=u,g.selectionEnd=Math.min(a,g.value.length);else if(a=(u=g.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var T=g.textContent.length,I=Math.min(A.start,T);A=A.end===void 0?I:Math.min(A.end,T),!a.extend&&I>A&&(T=A,A=I,I=T),T=Mr(g,I);var k=Mr(g,A);T&&k&&(a.rangeCount!==1||a.anchorNode!==T.node||a.anchorOffset!==T.offset||a.focusNode!==k.node||a.focusOffset!==k.offset)&&(u=u.createRange(),u.setStart(T.node,T.offset),a.removeAllRanges(),I>A?(a.addRange(u),a.extend(k.node,k.offset)):(u.setEnd(k.node,k.offset),a.addRange(u)))}}for(u=[],a=g;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<u.length;g++)a=u[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Lf=l&&"documentMode"in document&&11>=document.documentMode,Ts=null,Ca=null,Fc=null,di=!1;function Ff(a,u,g){var A=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;di||Ts==null||Ts!==j(A)||(A=Ts,"selectionStart"in A&&fi(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Fc&&wa(Fc,A)||(Fc=A,A=Gf(Ca,"onSelect"),0<A.length&&(u=new Bc("onSelect","select",null,u,g),a.push({event:u,listeners:A}),u.target=Ts)))}function bl(a,u){var g={};return g[a.toLowerCase()]=u.toLowerCase(),g["Webkit"+a]="webkit"+u,g["Moz"+a]="moz"+u,g}var jo={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},os={},as={};l&&(as=document.createElement("div").style,"AnimationEvent"in window||(delete jo.animationend.animation,delete jo.animationiteration.animation,delete jo.animationstart.animation),"TransitionEvent"in window||delete jo.transitionend.transition);function Rs(a){if(os[a])return os[a];if(!jo[a])return a;var u=jo[a],g;for(g in u)if(u.hasOwnProperty(g)&&g in as)return os[a]=u[g];return a}var Nc=Rs("animationend"),Oc=Rs("animationiteration"),Dd=Rs("animationstart"),Ld=Rs("transitionend"),Fd=new Map,Nd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function io(a,u){Fd.set(a,u),s(u,[a])}for(var Nf=0;Nf<Nd.length;Nf++){var kc=Nd[Nf],Uc=kc.toLowerCase(),eg=kc[0].toUpperCase()+kc.slice(1);io(Uc,"on"+eg)}io(Nc,"onAnimationEnd"),io(Oc,"onAnimationIteration"),io(Dd,"onAnimationStart"),io("dblclick","onDoubleClick"),io("focusin","onFocus"),io("focusout","onBlur"),io(Ld,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Of=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function kf(a,u,g){var A=a.type||"unknown-event";a.currentTarget=g,hf(A,u,void 0,a),a.currentTarget=null}function Tl(a,u){u=(u&4)!==0;for(var g=0;g<a.length;g++){var A=a[g],T=A.event;A=A.listeners;e:{var I=void 0;if(u)for(var k=A.length-1;0<=k;k--){var Q=A[k],ee=Q.instance,Me=Q.currentTarget;if(Q=Q.listener,ee!==I&&T.isPropagationStopped())break e;kf(T,Q,Me),I=ee}else for(k=0;k<A.length;k++){if(Q=A[k],ee=Q.instance,Me=Q.currentTarget,Q=Q.listener,ee!==I&&T.isPropagationStopped())break e;kf(T,Q,Me),I=ee}}}if(_r)throw a=dl,_r=!1,dl=null,a}function wn(a,u){var g=u[Ra];g===void 0&&(g=u[Ra]=new Set);var A=a+"__bubble";g.has(A)||(zf(u,a,2,!1),g.add(A))}function Uf(a,u,g){var A=0;u&&(A|=4),zf(g,a,A,u)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Rl(a){if(!a[zc]){a[zc]=!0,n.forEach(function(g){g!=="selectionchange"&&(Of.has(g)||Uf(g,!1,a),Uf(g,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[zc]||(u[zc]=!0,Uf("selectionchange",!1,u))}}function zf(a,u,g,A){switch(Wm(u)){case 1:var T=_f;break;case 4:T=Sd;break;default:T=Af}g=T.bind(null,u,g,a),T=void 0,!fl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),A?T!==void 0?a.addEventListener(u,g,{capture:!0,passive:T}):a.addEventListener(u,g,!0):T!==void 0?a.addEventListener(u,g,{passive:T}):a.addEventListener(u,g,!1)}function Hf(a,u,g,A,T){var I=A;if((u&1)===0&&(u&2)===0&&A!==null)e:for(;;){if(A===null)return;var k=A.tag;if(k===3||k===4){var Q=A.stateNode.containerInfo;if(Q===T||Q.nodeType===8&&Q.parentNode===T)break;if(k===4)for(k=A.return;k!==null;){var ee=k.tag;if((ee===3||ee===4)&&(ee=k.stateNode.containerInfo,ee===T||ee.nodeType===8&&ee.parentNode===T))return;k=k.return}for(;Q!==null;){if(k=Jo(Q),k===null)return;if(ee=k.tag,ee===5||ee===6){A=I=k;continue e}Q=Q.parentNode}}A=A.return}ui(function(){var Me=I,ke=je(g),He=[];e:{var Oe=Fd.get(a);if(Oe!==void 0){var mt=Bc,At=a;switch(a){case"keypress":if(ya(g)===0)break e;case"keydown":case"keyup":mt=Rf;break;case"focusin":At="focus",mt=Ef;break;case"focusout":At="blur",mt=Ef;break;case"beforeblur":case"afterblur":mt=Ef;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Ho;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=eo;break;case Nc:case Oc:case Dd:mt=jm;break;case Ld:mt=Aa;break;case"scroll":mt=vl;break;case"wheel":mt=Td;break;case"copy":case"cut":case"paste":mt=Ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Ar}var Et=(u&4)!==0,oi=!Et&&a==="scroll",ge=Et?Oe!==null?Oe+"Capture":null:Oe;Et=[];for(var se=Me,xe;se!==null;){xe=se;var qe=xe.stateNode;if(xe.tag===5&&qe!==null&&(xe=qe,ge!==null&&(qe=Oo(se,ge),qe!=null&&Et.push(Pl(se,qe,xe)))),oi)break;se=se.return}0<Et.length&&(Oe=new mt(Oe,At,null,g,ke),He.push({event:Oe,listeners:Et}))}}if((u&7)===0){e:{if(Oe=a==="mouseover"||a==="pointerover",mt=a==="mouseout"||a==="pointerout",Oe&&g!==$&&(At=g.relatedTarget||g.fromElement)&&(Jo(At)||At[wr]))break e;if((mt||Oe)&&(Oe=ke.window===ke?ke:(Oe=ke.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,mt?(At=g.relatedTarget||g.toElement,mt=Me,At=At?Jo(At):null,At!==null&&(oi=qs(At),At!==oi||At.tag!==5&&At.tag!==6)&&(At=null)):(mt=null,At=Me),mt!==At)){if(Et=wd,qe="onMouseLeave",ge="onMouseEnter",se="mouse",(a==="pointerout"||a==="pointerover")&&(Et=Ar,qe="onPointerLeave",ge="onPointerEnter",se="pointer"),oi=mt==null?Oe:Vn(mt),xe=At==null?Oe:Vn(At),Oe=new Et(qe,se+"leave",mt,g,ke),Oe.target=oi,Oe.relatedTarget=xe,qe=null,Jo(ke)===Me&&(Et=new Et(ge,se+"enter",At,g,ke),Et.target=xe,Et.relatedTarget=oi,qe=Et),oi=qe,mt&&At)t:{for(Et=mt,ge=At,se=0,xe=Et;xe;xe=ba(xe))se++;for(xe=0,qe=ge;qe;qe=ba(qe))xe++;for(;0<se-xe;)Et=ba(Et),se--;for(;0<xe-se;)ge=ba(ge),xe--;for(;se--;){if(Et===ge||ge!==null&&Et===ge.alternate)break t;Et=ba(Et),ge=ba(ge)}Et=null}else Et=null;mt!==null&&tg(He,Oe,mt,Et,!1),At!==null&&oi!==null&&tg(He,oi,At,Et,!0)}}e:{if(Oe=Me?Vn(Me):window,mt=Oe.nodeName&&Oe.nodeName.toLowerCase(),mt==="select"||mt==="input"&&Oe.type==="file")var Ct=Zm;else if(If(Oe))if(El)Ct=Nn;else{Ct=$m;var Dt=Cl}else(mt=Oe.nodeName)&&mt.toLowerCase()==="input"&&(Oe.type==="checkbox"||Oe.type==="radio")&&(Ct=Bd);if(Ct&&(Ct=Ct(a,Me))){Ml(He,Ct,g,ke);break e}Dt&&Dt(a,Oe,Me),a==="focusout"&&(Dt=Oe._wrapperState)&&Dt.controlled&&Oe.type==="number"&&tt(Oe,"number",Oe.value)}switch(Dt=Me?Vn(Me):window,a){case"focusin":(If(Dt)||Dt.contentEditable==="true")&&(Ts=Dt,Ca=Me,Fc=null);break;case"focusout":Fc=Ca=Ts=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,Ff(He,g,ke);break;case"selectionchange":if(Lf)break;case"keydown":case"keyup":Ff(He,g,ke)}var Lt;if(Vi)e:{switch(a){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else Vo?Id(a,g)&&(Gt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Gt="onCompositionStart");Gt&&(Al&&g.locale!=="ko"&&(Vo||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&Vo&&(Lt=Ic()):(rs=ke,Md="value"in rs?rs.value:rs.textContent,Vo=!0)),Dt=Gf(Me,Gt),0<Dt.length&&(Gt=new Cd(Gt,a,null,g,ke),He.push({event:Gt,listeners:Dt}),Lt?Gt.data=Lt:(Lt=Pf(g),Lt!==null&&(Gt.data=Lt)))),(Lt=In?qm(a,g):Dc(a,g))&&(Me=Gf(Me,"onBeforeInput"),0<Me.length&&(ke=new Cd("onBeforeInput","beforeinput",null,g,ke),He.push({event:ke,listeners:Me}),ke.data=Lt))}Tl(He,u)})}function Pl(a,u,g){return{instance:a,listener:u,currentTarget:g}}function Gf(a,u){for(var g=u+"Capture",A=[];a!==null;){var T=a,I=T.stateNode;T.tag===5&&I!==null&&(T=I,I=Oo(a,g),I!=null&&A.unshift(Pl(a,I,T)),I=Oo(a,u),I!=null&&A.push(Pl(a,I,T))),a=a.return}return A}function ba(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function tg(a,u,g,A,T){for(var I=u._reactName,k=[];g!==null&&g!==A;){var Q=g,ee=Q.alternate,Me=Q.stateNode;if(ee!==null&&ee===A)break;Q.tag===5&&Me!==null&&(Q=Me,T?(ee=Oo(g,I),ee!=null&&k.unshift(Pl(g,ee,Q))):T||(ee=Oo(g,I),ee!=null&&k.push(Pl(g,ee,Q)))),g=g.return}k.length!==0&&a.push({event:u,listeners:k})}var J0=/\r\n?/g,ng=/\u0000|\uFFFD/g;function Od(a){return(typeof a=="string"?a:""+a).replace(J0,`
`).replace(ng,"")}function Hc(a,u,g){if(u=Od(u),Od(a)!==u&&g)throw Error(t(425))}function Gc(){}var Il=null,kd=null;function Ud(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var zd=typeof setTimeout=="function"?setTimeout:void 0,Hd=typeof clearTimeout=="function"?clearTimeout:void 0,Vf=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof Vf<"u"?function(a){return Vf.resolve(null).then(a).catch(ig)}:zd;function ig(a){setTimeout(function(){throw a})}function Wf(a,u){var g=u,A=0;do{var T=g.nextSibling;if(a.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(A===0){a.removeChild(T),Pc(u);return}A--}else g!=="$"&&g!=="$?"&&g!=="$!"||A++;g=T}while(g);Pc(u)}function ro(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function Gd(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return a;u--}else g==="/$"&&u++}a=a.previousSibling}return null}var Ta=Math.random().toString(36).slice(2),ri="__reactFiber$"+Ta,Bl="__reactProps$"+Ta,wr="__reactContainer$"+Ta,Ra="__reactEvents$"+Ta,jf="__reactListeners$"+Ta,Xf="__reactHandles$"+Ta;function Jo(a){var u=a[ri];if(u)return u;for(var g=a.parentNode;g;){if(u=g[wr]||g[ri]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(a=Gd(a);a!==null;){if(g=a[ri])return g;a=Gd(a)}return u}a=g,g=a.parentNode}return null}function so(a){return a=a[ri]||a[wr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Vn(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Jf(a){return a[Bl]||null}var Vd=[],pi=-1;function Hn(a){return{current:a}}function En(a){0>pi||(a.current=Vd[pi],Vd[pi]=null,pi--)}function Sn(a,u){pi++,Vd[pi]=a.current,a.current=u}var oo={},Ei=Hn(oo),Wi=Hn(!1),ao=oo;function Pa(a,u){var g=a.type.contextTypes;if(!g)return oo;var A=a.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===u)return A.__reactInternalMemoizedMaskedChildContext;var T={},I;for(I in g)T[I]=u[I];return A&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=T),T}function Di(a){return a=a.childContextTypes,a!=null}function Vc(){En(Wi),En(Ei)}function Wd(a,u,g){if(Ei.current!==oo)throw Error(t(168));Sn(Ei,u),Sn(Wi,g)}function Wc(a,u,g){var A=a.stateNode;if(u=u.childContextTypes,typeof A.getChildContext!="function")return g;A=A.getChildContext();for(var T in A)if(!(T in u))throw Error(t(108,Ie(a)||"Unknown",T));return z({},g,A)}function Ia(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||oo,ao=Ei.current,Sn(Ei,a),Sn(Wi,Wi.current),!0}function jd(a,u,g){var A=a.stateNode;if(!A)throw Error(t(169));g?(a=Wc(a,u,ao),A.__reactInternalMemoizedMergedChildContext=a,En(Wi),En(Ei),Sn(Ei,a)):En(Wi),Sn(Wi,g)}var ls=null,jc=!1,Kf=!1;function Xc(a){ls===null?ls=[a]:ls.push(a)}function rg(a){jc=!0,Xc(a)}function Ps(){if(!Kf&&ls!==null){Kf=!0;var a=0,u=hn;try{var g=ls;for(hn=1;a<g.length;a++){var A=g[a];do A=A(!0);while(A!==null)}ls=null,jc=!1}catch(T){throw ls!==null&&(ls=ls.slice(a+1)),Se(Rt,Ps),T}finally{hn=u,Kf=!1}}return null}var Ba=[],rr=0,Yf=null,qf=0,ji=[],mi=0,Da=null,$e=1,Vr="";function lo(a,u){Ba[rr++]=qf,Ba[rr++]=Yf,Yf=a,qf=u}function Xd(a,u,g){ji[mi++]=$e,ji[mi++]=Vr,ji[mi++]=Da,Da=a;var A=$e;a=Vr;var T=32-ot(A)-1;A&=~(1<<T),g+=1;var I=32-ot(u)+T;if(30<I){var k=T-T%5;I=(A&(1<<k)-1).toString(32),A>>=k,T-=k,$e=1<<32-ot(u)+T|g<<T|A,Vr=I+a}else $e=1<<I|g<<T|A,Vr=a}function Jd(a){a.return!==null&&(lo(a,1),Xd(a,1,0))}function co(a){for(;a===Yf;)Yf=Ba[--rr],Ba[rr]=null,qf=Ba[--rr],Ba[rr]=null;for(;a===Da;)Da=ji[--mi],ji[mi]=null,Vr=ji[--mi],ji[mi]=null,$e=ji[--mi],ji[mi]=null}var Ci=null,Xi=null,Tn=!1,Wr=null;function Kd(a,u){var g=Ns(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=a,u=a.deletions,u===null?(a.deletions=[g],a.flags|=16):u.push(g)}function Yd(a,u){switch(a.tag){case 5:var g=a.type;return u=u.nodeType!==1||g.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Ci=a,Xi=ro(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Ci=a,Xi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(g=Da!==null?{id:$e,overflow:Vr}:null,a.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},g=Ns(18,null,null,0),g.stateNode=u,g.return=a,a.child=g,Ci=a,Xi=null,!0):!1;default:return!1}}function Qf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Zf(a){if(Tn){var u=Xi;if(u){var g=u;if(!Yd(a,u)){if(Qf(a))throw Error(t(418));u=ro(g.nextSibling);var A=Ci;u&&Yd(a,u)?Kd(A,g):(a.flags=a.flags&-4097|2,Tn=!1,Ci=a)}}else{if(Qf(a))throw Error(t(418));a.flags=a.flags&-4097|2,Tn=!1,Ci=a}}}function $f(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Ci=a}function Dl(a){if(a!==Ci)return!1;if(!Tn)return $f(a),Tn=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Ud(a.type,a.memoizedProps)),u&&(u=Xi)){if(Qf(a))throw qd(),Error(t(418));for(;u;)Kd(a,u),u=ro(u.nextSibling)}if($f(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(u===0){Xi=ro(a.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++}a=a.nextSibling}Xi=null}}else Xi=Ci?ro(a.stateNode.nextSibling):null;return!0}function qd(){for(var a=Xi;a;)a=ro(a.nextSibling)}function Ko(){Xi=Ci=null,Tn=!1}function Ll(a){Wr===null?Wr=[a]:Wr.push(a)}var Y0=R.ReactCurrentBatchConfig;function cs(a,u){if(a&&a.defaultProps){u=z({},u),a=a.defaultProps;for(var g in a)u[g]===void 0&&(u[g]=a[g]);return u}return u}var Jc=Hn(null),Kc=null,La=null,eh=null;function Fl(){eh=La=Kc=null}function Nl(a){var u=Jc.current;En(Jc),a._currentValue=u}function Ol(a,u,g){for(;a!==null;){var A=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,A!==null&&(A.childLanes|=u)):A!==null&&(A.childLanes&u)!==u&&(A.childLanes|=u),a===g)break;a=a.return}}function uo(a,u){Kc=a,eh=La=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(dt=!0),a.firstContext=null)}function Ji(a){var u=a._currentValue;if(eh!==a)if(a={context:a,memoizedValue:u,next:null},La===null){if(Kc===null)throw Error(t(308));La=a,Kc.dependencies={lanes:0,firstContext:a}}else La=La.next=a;return u}var us=null;function Yc(a){us===null?us=[a]:us.push(a)}function th(a,u,g,A){var T=u.interleaved;return T===null?(g.next=g,Yc(u)):(g.next=T.next,T.next=g),u.interleaved=g,fs(a,A)}function fs(a,u){a.lanes|=u;var g=a.alternate;for(g!==null&&(g.lanes|=u),g=a,a=a.return;a!==null;)a.childLanes|=u,g=a.alternate,g!==null&&(g.childLanes|=u),g=a,a=a.return;return g.tag===3?g.stateNode:null}var fo=!1;function qc(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sg(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function jr(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Is(a,u,g){var A=a.updateQueue;if(A===null)return null;if(A=A.shared,(gn&2)!==0){var T=A.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),A.pending=u,fs(a,g)}return T=A.interleaved,T===null?(u.next=u,Yc(A)):(u.next=T.next,T.next=u),A.interleaved=u,fs(a,g)}function Bn(a,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194240)!==0)){var A=u.lanes;A&=a.pendingLanes,g|=A,u.lanes=g,ml(a,g)}}function Kt(a,u){var g=a.updateQueue,A=a.alternate;if(A!==null&&(A=A.updateQueue,g===A)){var T=null,I=null;if(g=g.firstBaseUpdate,g!==null){do{var k={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};I===null?T=I=k:I=I.next=k,g=g.next}while(g!==null);I===null?T=I=u:I=I.next=u}else T=I=u;g={baseState:A.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:A.shared,effects:A.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=u:a.next=u,g.lastBaseUpdate=u}function kn(a,u,g,A){var T=a.updateQueue;fo=!1;var I=T.firstBaseUpdate,k=T.lastBaseUpdate,Q=T.shared.pending;if(Q!==null){T.shared.pending=null;var ee=Q,Me=ee.next;ee.next=null,k===null?I=Me:k.next=Me,k=ee;var ke=a.alternate;ke!==null&&(ke=ke.updateQueue,Q=ke.lastBaseUpdate,Q!==k&&(Q===null?ke.firstBaseUpdate=Me:Q.next=Me,ke.lastBaseUpdate=ee))}if(I!==null){var He=T.baseState;k=0,ke=Me=ee=null,Q=I;do{var Oe=Q.lane,mt=Q.eventTime;if((A&Oe)===Oe){ke!==null&&(ke=ke.next={eventTime:mt,lane:0,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null});e:{var At=a,Et=Q;switch(Oe=u,mt=g,Et.tag){case 1:if(At=Et.payload,typeof At=="function"){He=At.call(mt,He,Oe);break e}He=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Et.payload,Oe=typeof At=="function"?At.call(mt,He,Oe):At,Oe==null)break e;He=z({},He,Oe);break e;case 2:fo=!0}}Q.callback!==null&&Q.lane!==0&&(a.flags|=64,Oe=T.effects,Oe===null?T.effects=[Q]:Oe.push(Q))}else mt={eventTime:mt,lane:Oe,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ke===null?(Me=ke=mt,ee=He):ke=ke.next=mt,k|=Oe;if(Q=Q.next,Q===null){if(Q=T.shared.pending,Q===null)break;Oe=Q,Q=Oe.next,Oe.next=null,T.lastBaseUpdate=Oe,T.shared.pending=null}}while(!0);if(ke===null&&(ee=He),T.baseState=ee,T.firstBaseUpdate=Me,T.lastBaseUpdate=ke,u=T.shared.interleaved,u!==null){T=u;do k|=T.lane,T=T.next;while(T!==u)}else I===null&&(T.shared.lanes=0);iu|=k,a.lanes=k,a.memoizedState=He}}function Wn(a,u,g){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var A=a[u],T=A.callback;if(T!==null){if(A.callback=null,A=g,typeof T!="function")throw Error(t(191,T));T.call(A)}}}var gi=new i.Component().refs;function Ki(a,u,g,A){u=a.memoizedState,g=g(A,u),g=g==null?u:z({},u,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var ho={isMounted:function(a){return(a=a._reactInternals)?qs(a)===a:!1},enqueueSetState:function(a,u,g){a=a._reactInternals;var A=Tr(),T=Kl(a),I=jr(A,T);I.payload=u,g!=null&&(I.callback=g),u=Is(a,I,T),u!==null&&(yo(u,a,T,A),Bn(u,a,T))},enqueueReplaceState:function(a,u,g){a=a._reactInternals;var A=Tr(),T=Kl(a),I=jr(A,T);I.tag=1,I.payload=u,g!=null&&(I.callback=g),u=Is(a,I,T),u!==null&&(yo(u,a,T,A),Bn(u,a,T))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var g=Tr(),A=Kl(a),T=jr(g,A);T.tag=2,u!=null&&(T.callback=u),u=Is(a,T,A),u!==null&&(yo(u,a,A,g),Bn(u,a,A))}};function qn(a,u,g,A,T,I,k){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(A,I,k):u.prototype&&u.prototype.isPureReactComponent?!wa(g,A)||!wa(T,I):!0}function kl(a,u,g){var A=!1,T=oo,I=u.contextType;return typeof I=="object"&&I!==null?I=Ji(I):(T=Di(u)?ao:Ei.current,A=u.contextTypes,I=(A=A!=null)?Pa(a,T):oo),u=new u(g,I),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=ho,a.stateNode=u,u._reactInternals=a,A&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=T,a.__reactInternalMemoizedMaskedChildContext=I),u}function Fa(a,u,g,A){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,A),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,A),u.state!==a&&ho.enqueueReplaceState(u,u.state,null)}function Ul(a,u,g,A){var T=a.stateNode;T.props=g,T.state=a.memoizedState,T.refs=gi,qc(a);var I=u.contextType;typeof I=="object"&&I!==null?T.context=Ji(I):(I=Di(u)?ao:Ei.current,T.context=Pa(a,I)),T.state=a.memoizedState,I=u.getDerivedStateFromProps,typeof I=="function"&&(Ki(a,u,I,g),T.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(u=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),u!==T.state&&ho.enqueueReplaceState(T,T.state,null),kn(a,g,T,A),T.state=a.memoizedState),typeof T.componentDidMount=="function"&&(a.flags|=4194308)}function Na(a,u,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var A=g.stateNode}if(!A)throw Error(t(147,a));var T=A,I=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===I?u.ref:(u=function(k){var Q=T.refs;Q===gi&&(Q=T.refs={}),k===null?delete Q[I]:Q[I]=k},u._stringRef=I,u)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function Yo(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function Yi(a){var u=a._init;return u(a._payload)}function nh(a){function u(ge,se){if(a){var xe=ge.deletions;xe===null?(ge.deletions=[se],ge.flags|=16):xe.push(se)}}function g(ge,se){if(!a)return null;for(;se!==null;)u(ge,se),se=se.sibling;return null}function A(ge,se){for(ge=new Map;se!==null;)se.key!==null?ge.set(se.key,se):ge.set(se.index,se),se=se.sibling;return ge}function T(ge,se){return ge=ql(ge,se),ge.index=0,ge.sibling=null,ge}function I(ge,se,xe){return ge.index=xe,a?(xe=ge.alternate,xe!==null?(xe=xe.index,xe<se?(ge.flags|=2,se):xe):(ge.flags|=2,se)):(ge.flags|=1048576,se)}function k(ge){return a&&ge.alternate===null&&(ge.flags|=2),ge}function Q(ge,se,xe,qe){return se===null||se.tag!==6?(se=px(xe,ge.mode,qe),se.return=ge,se):(se=T(se,xe),se.return=ge,se)}function ee(ge,se,xe,qe){var Ct=xe.type;return Ct===N?ke(ge,se,xe.props.children,qe,xe.key):se!==null&&(se.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===le&&Yi(Ct)===se.type)?(qe=T(se,xe.props),qe.ref=Na(ge,se,xe),qe.return=ge,qe):(qe=Rg(xe.type,xe.key,xe.props,null,ge.mode,qe),qe.ref=Na(ge,se,xe),qe.return=ge,qe)}function Me(ge,se,xe,qe){return se===null||se.tag!==4||se.stateNode.containerInfo!==xe.containerInfo||se.stateNode.implementation!==xe.implementation?(se=mx(xe,ge.mode,qe),se.return=ge,se):(se=T(se,xe.children||[]),se.return=ge,se)}function ke(ge,se,xe,qe,Ct){return se===null||se.tag!==7?(se=au(xe,ge.mode,qe,Ct),se.return=ge,se):(se=T(se,xe),se.return=ge,se)}function He(ge,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number")return se=px(""+se,ge.mode,xe),se.return=ge,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case O:return xe=Rg(se.type,se.key,se.props,null,ge.mode,xe),xe.ref=Na(ge,null,se),xe.return=ge,xe;case F:return se=mx(se,ge.mode,xe),se.return=ge,se;case le:var qe=se._init;return He(ge,qe(se._payload),xe)}if(X(se)||Z(se))return se=au(se,ge.mode,xe,null),se.return=ge,se;Yo(ge,se)}return null}function Oe(ge,se,xe,qe){var Ct=se!==null?se.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return Ct!==null?null:Q(ge,se,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case O:return xe.key===Ct?ee(ge,se,xe,qe):null;case F:return xe.key===Ct?Me(ge,se,xe,qe):null;case le:return Ct=xe._init,Oe(ge,se,Ct(xe._payload),qe)}if(X(xe)||Z(xe))return Ct!==null?null:ke(ge,se,xe,qe,null);Yo(ge,xe)}return null}function mt(ge,se,xe,qe,Ct){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return ge=ge.get(xe)||null,Q(se,ge,""+qe,Ct);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case O:return ge=ge.get(qe.key===null?xe:qe.key)||null,ee(se,ge,qe,Ct);case F:return ge=ge.get(qe.key===null?xe:qe.key)||null,Me(se,ge,qe,Ct);case le:var Dt=qe._init;return mt(ge,se,xe,Dt(qe._payload),Ct)}if(X(qe)||Z(qe))return ge=ge.get(xe)||null,ke(se,ge,qe,Ct,null);Yo(se,qe)}return null}function At(ge,se,xe,qe){for(var Ct=null,Dt=null,Lt=se,Gt=se=0,Ni=null;Lt!==null&&Gt<xe.length;Gt++){Lt.index>Gt?(Ni=Lt,Lt=null):Ni=Lt.sibling;var xn=Oe(ge,Lt,xe[Gt],qe);if(xn===null){Lt===null&&(Lt=Ni);break}a&&Lt&&xn.alternate===null&&u(ge,Lt),se=I(xn,se,Gt),Dt===null?Ct=xn:Dt.sibling=xn,Dt=xn,Lt=Ni}if(Gt===xe.length)return g(ge,Lt),Tn&&lo(ge,Gt),Ct;if(Lt===null){for(;Gt<xe.length;Gt++)Lt=He(ge,xe[Gt],qe),Lt!==null&&(se=I(Lt,se,Gt),Dt===null?Ct=Lt:Dt.sibling=Lt,Dt=Lt);return Tn&&lo(ge,Gt),Ct}for(Lt=A(ge,Lt);Gt<xe.length;Gt++)Ni=mt(Lt,ge,Gt,xe[Gt],qe),Ni!==null&&(a&&Ni.alternate!==null&&Lt.delete(Ni.key===null?Gt:Ni.key),se=I(Ni,se,Gt),Dt===null?Ct=Ni:Dt.sibling=Ni,Dt=Ni);return a&&Lt.forEach(function(Ql){return u(ge,Ql)}),Tn&&lo(ge,Gt),Ct}function Et(ge,se,xe,qe){var Ct=Z(xe);if(typeof Ct!="function")throw Error(t(150));if(xe=Ct.call(xe),xe==null)throw Error(t(151));for(var Dt=Ct=null,Lt=se,Gt=se=0,Ni=null,xn=xe.next();Lt!==null&&!xn.done;Gt++,xn=xe.next()){Lt.index>Gt?(Ni=Lt,Lt=null):Ni=Lt.sibling;var Ql=Oe(ge,Lt,xn.value,qe);if(Ql===null){Lt===null&&(Lt=Ni);break}a&&Lt&&Ql.alternate===null&&u(ge,Lt),se=I(Ql,se,Gt),Dt===null?Ct=Ql:Dt.sibling=Ql,Dt=Ql,Lt=Ni}if(xn.done)return g(ge,Lt),Tn&&lo(ge,Gt),Ct;if(Lt===null){for(;!xn.done;Gt++,xn=xe.next())xn=He(ge,xn.value,qe),xn!==null&&(se=I(xn,se,Gt),Dt===null?Ct=xn:Dt.sibling=xn,Dt=xn);return Tn&&lo(ge,Gt),Ct}for(Lt=A(ge,Lt);!xn.done;Gt++,xn=xe.next())xn=mt(Lt,ge,Gt,xn.value,qe),xn!==null&&(a&&xn.alternate!==null&&Lt.delete(xn.key===null?Gt:xn.key),se=I(xn,se,Gt),Dt===null?Ct=xn:Dt.sibling=xn,Dt=xn);return a&&Lt.forEach(function(RI){return u(ge,RI)}),Tn&&lo(ge,Gt),Ct}function oi(ge,se,xe,qe){if(typeof xe=="object"&&xe!==null&&xe.type===N&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case O:e:{for(var Ct=xe.key,Dt=se;Dt!==null;){if(Dt.key===Ct){if(Ct=xe.type,Ct===N){if(Dt.tag===7){g(ge,Dt.sibling),se=T(Dt,xe.props.children),se.return=ge,ge=se;break e}}else if(Dt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===le&&Yi(Ct)===Dt.type){g(ge,Dt.sibling),se=T(Dt,xe.props),se.ref=Na(ge,Dt,xe),se.return=ge,ge=se;break e}g(ge,Dt);break}else u(ge,Dt);Dt=Dt.sibling}xe.type===N?(se=au(xe.props.children,ge.mode,qe,xe.key),se.return=ge,ge=se):(qe=Rg(xe.type,xe.key,xe.props,null,ge.mode,qe),qe.ref=Na(ge,se,xe),qe.return=ge,ge=qe)}return k(ge);case F:e:{for(Dt=xe.key;se!==null;){if(se.key===Dt)if(se.tag===4&&se.stateNode.containerInfo===xe.containerInfo&&se.stateNode.implementation===xe.implementation){g(ge,se.sibling),se=T(se,xe.children||[]),se.return=ge,ge=se;break e}else{g(ge,se);break}else u(ge,se);se=se.sibling}se=mx(xe,ge.mode,qe),se.return=ge,ge=se}return k(ge);case le:return Dt=xe._init,oi(ge,se,Dt(xe._payload),qe)}if(X(xe))return At(ge,se,xe,qe);if(Z(xe))return Et(ge,se,xe,qe);Yo(ge,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,se!==null&&se.tag===6?(g(ge,se.sibling),se=T(se,xe),se.return=ge,ge=se):(g(ge,se),se=px(xe,ge.mode,qe),se.return=ge,ge=se),k(ge)):g(ge,se)}return oi}var qo=nh(!0),Oa=nh(!1),Qo={},Xr=Hn(Qo),Jr=Hn(Qo),Zo=Hn(Qo);function sr(a){if(a===Qo)throw Error(t(174));return a}function zl(a,u){switch(Sn(Zo,u),Sn(Jr,a),Sn(Xr,Qo),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:Ve(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=Ve(u,a)}En(Xr),Sn(Xr,u)}function Bs(){En(Xr),En(Jr),En(Zo)}function ih(a){sr(Zo.current);var u=sr(Xr.current),g=Ve(u,a.type);u!==g&&(Sn(Jr,a),Sn(Xr,g))}function Hl(a){Jr.current===a&&(En(Xr),En(Jr))}var Cn=Hn(0);function yi(a){for(var u=a;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ds=[];function or(){for(var a=0;a<Ds.length;a++)Ds[a]._workInProgressVersionPrimary=null;Ds.length=0}var ka=R.ReactCurrentDispatcher,Li=R.ReactCurrentBatchConfig,$o=0,Rn=null,jn=null,vi=null,hs=!1,Gl=!1,Vl=0,Qd=0;function Gn(){throw Error(t(321))}function rh(a,u){if(u===null)return!1;for(var g=0;g<u.length&&g<a.length;g++)if(!Sr(a[g],u[g]))return!1;return!0}function sh(a,u,g,A,T,I){if($o=I,Rn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ka.current=a===null||a.memoizedState===null?d:_,a=g(A,T),Gl){I=0;do{if(Gl=!1,Vl=0,25<=I)throw Error(t(301));I+=1,vi=jn=null,u.updateQueue=null,ka.current=E,a=g(A,T)}while(Gl)}if(ka.current=h,u=jn!==null&&jn.next!==null,$o=0,vi=jn=Rn=null,hs=!1,u)throw Error(t(300));return a}function Qc(){var a=Vl!==0;return Vl=0,a}function Er(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Rn.memoizedState=vi=a:vi=vi.next=a,vi}function Kr(){if(jn===null){var a=Rn.alternate;a=a!==null?a.memoizedState:null}else a=jn.next;var u=vi===null?Rn.memoizedState:vi.next;if(u!==null)vi=u,jn=a;else{if(a===null)throw Error(t(310));jn=a,a={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},vi===null?Rn.memoizedState=vi=a:vi=vi.next=a}return vi}function Zc(a,u){return typeof u=="function"?u(a):u}function oh(a){var u=Kr(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var A=jn,T=A.baseQueue,I=g.pending;if(I!==null){if(T!==null){var k=T.next;T.next=I.next,I.next=k}A.baseQueue=T=I,g.pending=null}if(T!==null){I=T.next,A=A.baseState;var Q=k=null,ee=null,Me=I;do{var ke=Me.lane;if(($o&ke)===ke)ee!==null&&(ee=ee.next={lane:0,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null}),A=Me.hasEagerState?Me.eagerState:a(A,Me.action);else{var He={lane:ke,action:Me.action,hasEagerState:Me.hasEagerState,eagerState:Me.eagerState,next:null};ee===null?(Q=ee=He,k=A):ee=ee.next=He,Rn.lanes|=ke,iu|=ke}Me=Me.next}while(Me!==null&&Me!==I);ee===null?k=A:ee.next=Q,Sr(A,u.memoizedState)||(dt=!0),u.memoizedState=A,u.baseState=k,u.baseQueue=ee,g.lastRenderedState=A}if(a=g.interleaved,a!==null){T=a;do I=T.lane,Rn.lanes|=I,iu|=I,T=T.next;while(T!==a)}else T===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function ah(a){var u=Kr(),g=u.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var A=g.dispatch,T=g.pending,I=u.memoizedState;if(T!==null){g.pending=null;var k=T=T.next;do I=a(I,k.action),k=k.next;while(k!==T);Sr(I,u.memoizedState)||(dt=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),g.lastRenderedState=I}return[I,A]}function ea(){}function og(a,u){var g=Rn,A=Kr(),T=u(),I=!Sr(A.memoizedState,T);if(I&&(A.memoizedState=T,dt=!0),A=A.queue,tu(qi.bind(null,g,A,a),[a]),A.getSnapshot!==u||I||vi!==null&&vi.memoizedState.tag&1){if(g.flags|=2048,$c(9,Zd.bind(null,g,A,T,u),void 0,null),Fi===null)throw Error(t(349));($o&30)!==0||ta(g,u,T)}return T}function ta(a,u,g){a.flags|=16384,a={getSnapshot:u,value:g},u=Rn.updateQueue,u===null?(u={lastEffect:null,stores:null},Rn.updateQueue=u,u.stores=[a]):(g=u.stores,g===null?u.stores=[a]:g.push(a))}function Zd(a,u,g,A){u.value=g,u.getSnapshot=A,ag(u)&&$d(a)}function qi(a,u,g){return g(function(){ag(u)&&$d(a)})}function ag(a){var u=a.getSnapshot;a=a.value;try{var g=u();return!Sr(a,g)}catch{return!0}}function $d(a){var u=fs(a,1);u!==null&&yo(u,a,1,-1)}function lg(a){var u=Er();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:a},u.queue=a,a=a.dispatch=dg.bind(null,Rn,a),[u.memoizedState,a]}function $c(a,u,g,A){return a={tag:a,create:u,destroy:g,deps:A,next:null},u=Rn.updateQueue,u===null?(u={lastEffect:null,stores:null},Rn.updateQueue=u,u.lastEffect=a.next=a):(g=u.lastEffect,g===null?u.lastEffect=a.next=a:(A=g.next,g.next=a,a.next=A,u.lastEffect=a)),a}function ep(){return Kr().memoizedState}function eu(a,u,g,A){var T=Er();Rn.flags|=a,T.memoizedState=$c(1|u,g,void 0,A===void 0?null:A)}function lh(a,u,g,A){var T=Kr();A=A===void 0?null:A;var I=void 0;if(jn!==null){var k=jn.memoizedState;if(I=k.destroy,A!==null&&rh(A,k.deps)){T.memoizedState=$c(u,g,I,A);return}}Rn.flags|=a,T.memoizedState=$c(1|u,g,I,A)}function Cr(a,u){return eu(8390656,8,a,u)}function tu(a,u){return lh(2048,8,a,u)}function cg(a,u){return lh(4,2,a,u)}function po(a,u){return lh(4,4,a,u)}function nu(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function na(a,u,g){return g=g!=null?g.concat([a]):null,lh(4,4,nu.bind(null,u,a),g)}function Wl(){}function ch(a,u){var g=Kr();u=u===void 0?null:u;var A=g.memoizedState;return A!==null&&u!==null&&rh(u,A[1])?A[0]:(g.memoizedState=[a,u],a)}function uh(a,u){var g=Kr();u=u===void 0?null:u;var A=g.memoizedState;return A!==null&&u!==null&&rh(u,A[1])?A[0]:(a=a(),g.memoizedState=[a,u],a)}function ug(a,u,g){return($o&21)===0?(a.baseState&&(a.baseState=!1,dt=!0),a.memoizedState=g):(Sr(g,u)||(g=Bi(),Rn.lanes|=g,iu|=g,a.baseState=!0),u)}function fg(a,u){var g=hn;hn=g!==0&&4>g?g:4,a(!0);var A=Li.transition;Li.transition={};try{a(!1),u()}finally{hn=g,Li.transition=A}}function tp(){return Kr().memoizedState}function hg(a,u,g){var A=Kl(a);if(g={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null},fh(a))pg(u,g);else if(g=th(a,u,g,A),g!==null){var T=Tr();yo(g,a,A,T),mg(g,u,A)}}function dg(a,u,g){var A=Kl(a),T={lane:A,action:g,hasEagerState:!1,eagerState:null,next:null};if(fh(a))pg(u,T);else{var I=a.alternate;if(a.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var k=u.lastRenderedState,Q=I(k,g);if(T.hasEagerState=!0,T.eagerState=Q,Sr(Q,k)){var ee=u.interleaved;ee===null?(T.next=T,Yc(u)):(T.next=ee.next,ee.next=T),u.interleaved=T;return}}catch{}finally{}g=th(a,u,T,A),g!==null&&(T=Tr(),yo(g,a,A,T),mg(g,u,A))}}function fh(a){var u=a.alternate;return a===Rn||u!==null&&u===Rn}function pg(a,u){Gl=hs=!0;var g=a.pending;g===null?u.next=u:(u.next=g.next,g.next=u),a.pending=u}function mg(a,u,g){if((g&4194240)!==0){var A=u.lanes;A&=a.pendingLanes,g|=A,u.lanes=g,ml(a,g)}}var h={readContext:Ji,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},d={readContext:Ji,useCallback:function(a,u){return Er().memoizedState=[a,u===void 0?null:u],a},useContext:Ji,useEffect:Cr,useImperativeHandle:function(a,u,g){return g=g!=null?g.concat([a]):null,eu(4194308,4,nu.bind(null,u,a),g)},useLayoutEffect:function(a,u){return eu(4194308,4,a,u)},useInsertionEffect:function(a,u){return eu(4,2,a,u)},useMemo:function(a,u){var g=Er();return u=u===void 0?null:u,a=a(),g.memoizedState=[a,u],a},useReducer:function(a,u,g){var A=Er();return u=g!==void 0?g(u):u,A.memoizedState=A.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},A.queue=a,a=a.dispatch=hg.bind(null,Rn,a),[A.memoizedState,a]},useRef:function(a){var u=Er();return a={current:a},u.memoizedState=a},useState:lg,useDebugValue:Wl,useDeferredValue:function(a){return Er().memoizedState=a},useTransition:function(){var a=lg(!1),u=a[0];return a=fg.bind(null,a[1]),Er().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,g){var A=Rn,T=Er();if(Tn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=u(),Fi===null)throw Error(t(349));($o&30)!==0||ta(A,u,g)}T.memoizedState=g;var I={value:g,getSnapshot:u};return T.queue=I,Cr(qi.bind(null,A,I,a),[a]),A.flags|=2048,$c(9,Zd.bind(null,A,I,g,u),void 0,null),g},useId:function(){var a=Er(),u=Fi.identifierPrefix;if(Tn){var g=Vr,A=$e;g=(A&~(1<<32-ot(A)-1)).toString(32)+g,u=":"+u+"R"+g,g=Vl++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=Qd++,u=":"+u+"r"+g.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},_={readContext:Ji,useCallback:ch,useContext:Ji,useEffect:tu,useImperativeHandle:na,useInsertionEffect:cg,useLayoutEffect:po,useMemo:uh,useReducer:oh,useRef:ep,useState:function(){return oh(Zc)},useDebugValue:Wl,useDeferredValue:function(a){var u=Kr();return ug(u,jn.memoizedState,a)},useTransition:function(){var a=oh(Zc)[0],u=Kr().memoizedState;return[a,u]},useMutableSource:ea,useSyncExternalStore:og,useId:tp,unstable_isNewReconciler:!1},E={readContext:Ji,useCallback:ch,useContext:Ji,useEffect:tu,useImperativeHandle:na,useInsertionEffect:cg,useLayoutEffect:po,useMemo:uh,useReducer:ah,useRef:ep,useState:function(){return ah(Zc)},useDebugValue:Wl,useDeferredValue:function(a){var u=Kr();return jn===null?u.memoizedState=a:ug(u,jn.memoizedState,a)},useTransition:function(){var a=ah(Zc)[0],u=Kr().memoizedState;return[a,u]},useMutableSource:ea,useSyncExternalStore:og,useId:tp,unstable_isNewReconciler:!1};function P(a,u){try{var g="",A=u;do g+=ve(A),A=A.return;while(A);var T=g}catch(I){T=`
Error generating stack: `+I.message+`
`+I.stack}return{value:a,source:u,stack:T,digest:null}}function D(a,u,g){return{value:a,source:null,stack:g??null,digest:u??null}}function K(a,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var ae=typeof WeakMap=="function"?WeakMap:Map;function Ce(a,u,g){g=jr(-1,g),g.tag=3,g.payload={element:null};var A=u.value;return g.callback=function(){Mg||(Mg=!0,ox=A),K(a,u)},g}function Ye(a,u,g){g=jr(-1,g),g.tag=3;var A=a.type.getDerivedStateFromError;if(typeof A=="function"){var T=u.value;g.payload=function(){return A(T)},g.callback=function(){K(a,u)}}var I=a.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(g.callback=function(){K(a,u),typeof A!="function"&&(Xl===null?Xl=new Set([this]):Xl.add(this));var k=u.stack;this.componentDidCatch(u.value,{componentStack:k!==null?k:""})}),g}function yt(a,u,g){var A=a.pingCache;if(A===null){A=a.pingCache=new ae;var T=new Set;A.set(u,T)}else T=A.get(u),T===void 0&&(T=new Set,A.set(u,T));T.has(g)||(T.add(g),a=vI.bind(null,a,u,g),u.then(a,a))}function Wt(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function Pt(a,u,g,A,T){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(u=jr(-1,1),u.tag=2,Is(g,u,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=T,a)}var Mn=R.ReactCurrentOwner,dt=!1;function vn(a,u,g,A){u.child=a===null?Oa(u,null,g,A):qo(u,a.child,g,A)}function br(a,u,g,A,T){g=g.render;var I=u.ref;return uo(u,T),A=sh(a,u,g,A,I,T),g=Qc(),a!==null&&!dt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,Ua(a,u,T)):(Tn&&g&&Jd(u),u.flags|=1,vn(a,u,A,T),u.child)}function _e(a,u,g,A,T){if(a===null){var I=g.type;return typeof I=="function"&&!dx(I)&&I.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(u.tag=15,u.type=I,fe(a,u,I,A,T)):(a=Rg(g.type,null,A,u,u.mode,T),a.ref=u.ref,a.return=u,u.child=a)}if(I=a.child,(a.lanes&T)===0){var k=I.memoizedProps;if(g=g.compare,g=g!==null?g:wa,g(k,A)&&a.ref===u.ref)return Ua(a,u,T)}return u.flags|=1,a=ql(I,A),a.ref=u.ref,a.return=u,u.child=a}function fe(a,u,g,A,T){if(a!==null){var I=a.memoizedProps;if(wa(I,A)&&a.ref===u.ref)if(dt=!1,u.pendingProps=A=I,(a.lanes&T)!==0)(a.flags&131072)!==0&&(dt=!0);else return u.lanes=a.lanes,Ua(a,u,T)}return wt(a,u,g,A,T)}function Ee(a,u,g){var A=u.pendingProps,T=A.children,I=a!==null?a.memoizedState:null;if(A.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(dh,ds),ds|=g;else{if((g&1073741824)===0)return a=I!==null?I.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Sn(dh,ds),ds|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},A=I!==null?I.baseLanes:g,Sn(dh,ds),ds|=A}else I!==null?(A=I.baseLanes|g,u.memoizedState=null):A=g,Sn(dh,ds),ds|=A;return vn(a,u,T,g),u.child}function ut(a,u){var g=u.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function wt(a,u,g,A,T){var I=Di(g)?ao:Ei.current;return I=Pa(u,I),uo(u,T),g=sh(a,u,g,A,I,T),A=Qc(),a!==null&&!dt?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~T,Ua(a,u,T)):(Tn&&A&&Jd(u),u.flags|=1,vn(a,u,g,T),u.child)}function Jt(a,u,g,A,T){if(Di(g)){var I=!0;Ia(u)}else I=!1;if(uo(u,T),u.stateNode===null)vg(a,u),kl(u,g,A),Ul(u,g,A,T),A=!0;else if(a===null){var k=u.stateNode,Q=u.memoizedProps;k.props=Q;var ee=k.context,Me=g.contextType;typeof Me=="object"&&Me!==null?Me=Ji(Me):(Me=Di(g)?ao:Ei.current,Me=Pa(u,Me));var ke=g.getDerivedStateFromProps,He=typeof ke=="function"||typeof k.getSnapshotBeforeUpdate=="function";He||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Q!==A||ee!==Me)&&Fa(u,k,A,Me),fo=!1;var Oe=u.memoizedState;k.state=Oe,kn(u,A,k,T),ee=u.memoizedState,Q!==A||Oe!==ee||Wi.current||fo?(typeof ke=="function"&&(Ki(u,g,ke,A),ee=u.memoizedState),(Q=fo||qn(u,g,Q,A,Oe,ee,Me))?(He||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(u.flags|=4194308)):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=A,u.memoizedState=ee),k.props=A,k.state=ee,k.context=Me,A=Q):(typeof k.componentDidMount=="function"&&(u.flags|=4194308),A=!1)}else{k=u.stateNode,sg(a,u),Q=u.memoizedProps,Me=u.type===u.elementType?Q:cs(u.type,Q),k.props=Me,He=u.pendingProps,Oe=k.context,ee=g.contextType,typeof ee=="object"&&ee!==null?ee=Ji(ee):(ee=Di(g)?ao:Ei.current,ee=Pa(u,ee));var mt=g.getDerivedStateFromProps;(ke=typeof mt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Q!==He||Oe!==ee)&&Fa(u,k,A,ee),fo=!1,Oe=u.memoizedState,k.state=Oe,kn(u,A,k,T);var At=u.memoizedState;Q!==He||Oe!==At||Wi.current||fo?(typeof mt=="function"&&(Ki(u,g,mt,A),At=u.memoizedState),(Me=fo||qn(u,g,Me,A,Oe,At,ee)||!1)?(ke||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(A,At,ee),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(A,At,ee)),typeof k.componentDidUpdate=="function"&&(u.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof k.componentDidUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=1024),u.memoizedProps=A,u.memoizedState=At),k.props=A,k.state=At,k.context=ee,A=Me):(typeof k.componentDidUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||Q===a.memoizedProps&&Oe===a.memoizedState||(u.flags|=1024),A=!1)}return Ht(a,u,g,A,I,T)}function Ht(a,u,g,A,T,I){ut(a,u);var k=(u.flags&128)!==0;if(!A&&!k)return T&&jd(u,g,!1),Ua(a,u,I);A=u.stateNode,Mn.current=u;var Q=k&&typeof g.getDerivedStateFromError!="function"?null:A.render();return u.flags|=1,a!==null&&k?(u.child=qo(u,a.child,null,I),u.child=qo(u,null,Q,I)):vn(a,u,Q,I),u.memoizedState=A.state,T&&jd(u,g,!0),u.child}function fn(a){var u=a.stateNode;u.pendingContext?Wd(a,u.pendingContext,u.pendingContext!==u.context):u.context&&Wd(a,u.context,!1),zl(a,u.containerInfo)}function si(a,u,g,A,T){return Ko(),Ll(T),u.flags|=256,vn(a,u,g,A),u.child}var an={dehydrated:null,treeContext:null,retryLane:0};function Ls(a){return{baseLanes:a,cachePool:null,transitions:null}}function gg(a,u,g){var A=u.pendingProps,T=Cn.current,I=!1,k=(u.flags&128)!==0,Q;if((Q=k)||(Q=a!==null&&a.memoizedState===null?!1:(T&2)!==0),Q?(I=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(T|=1),Sn(Cn,T&1),a===null)return Zf(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(k=A.children,a=A.fallback,I?(A=u.mode,I=u.child,k={mode:"hidden",children:k},(A&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=k):I=Pg(k,A,0,null),a=au(a,A,g,null),I.return=u,a.return=u,I.sibling=a,u.child=I,u.child.memoizedState=Ls(g),u.memoizedState=an,a):q0(u,k));if(T=a.memoizedState,T!==null&&(Q=T.dehydrated,Q!==null))return oI(a,u,k,A,Q,T,g);if(I){I=A.fallback,k=u.mode,T=a.child,Q=T.sibling;var ee={mode:"hidden",children:A.children};return(k&1)===0&&u.child!==T?(A=u.child,A.childLanes=0,A.pendingProps=ee,u.deletions=null):(A=ql(T,ee),A.subtreeFlags=T.subtreeFlags&14680064),Q!==null?I=ql(Q,I):(I=au(I,k,g,null),I.flags|=2),I.return=u,A.return=u,A.sibling=I,u.child=A,A=I,I=u.child,k=a.child.memoizedState,k=k===null?Ls(g):{baseLanes:k.baseLanes|g,cachePool:null,transitions:k.transitions},I.memoizedState=k,I.childLanes=a.childLanes&~g,u.memoizedState=an,A}return I=a.child,a=I.sibling,A=ql(I,{mode:"visible",children:A.children}),(u.mode&1)===0&&(A.lanes=g),A.return=u,A.sibling=null,a!==null&&(g=u.deletions,g===null?(u.deletions=[a],u.flags|=16):g.push(a)),u.child=A,u.memoizedState=null,A}function q0(a,u){return u=Pg({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function yg(a,u,g,A){return A!==null&&Ll(A),qo(u,a.child,null,g),a=q0(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function oI(a,u,g,A,T,I,k){if(g)return u.flags&256?(u.flags&=-257,A=D(Error(t(422))),yg(a,u,k,A)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(I=A.fallback,T=u.mode,A=Pg({mode:"visible",children:A.children},T,0,null),I=au(I,T,k,null),I.flags|=2,A.return=u,I.return=u,A.sibling=I,u.child=A,(u.mode&1)!==0&&qo(u,a.child,null,k),u.child.memoizedState=Ls(k),u.memoizedState=an,I);if((u.mode&1)===0)return yg(a,u,k,null);if(T.data==="$!"){if(A=T.nextSibling&&T.nextSibling.dataset,A)var Q=A.dgst;return A=Q,I=Error(t(419)),A=D(I,A,void 0),yg(a,u,k,A)}if(Q=(k&a.childLanes)!==0,dt||Q){if(A=Fi,A!==null){switch(k&-k){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(A.suspendedLanes|k))!==0?0:T,T!==0&&T!==I.retryLane&&(I.retryLane=T,fs(a,T),yo(A,a,T,-1))}return hx(),A=D(Error(t(421))),yg(a,u,k,A)}return T.data==="$?"?(u.flags|=128,u.child=a.child,u=xI.bind(null,a),T._reactRetry=u,null):(a=I.treeContext,Xi=ro(T.nextSibling),Ci=u,Tn=!0,Wr=null,a!==null&&(ji[mi++]=$e,ji[mi++]=Vr,ji[mi++]=Da,$e=a.id,Vr=a.overflow,Da=u),u=q0(u,A.children),u.flags|=4096,u)}function UM(a,u,g){a.lanes|=u;var A=a.alternate;A!==null&&(A.lanes|=u),Ol(a.return,u,g)}function Q0(a,u,g,A,T){var I=a.memoizedState;I===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:A,tail:g,tailMode:T}:(I.isBackwards=u,I.rendering=null,I.renderingStartTime=0,I.last=A,I.tail=g,I.tailMode=T)}function zM(a,u,g){var A=u.pendingProps,T=A.revealOrder,I=A.tail;if(vn(a,u,A.children,g),A=Cn.current,(A&2)!==0)A=A&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&UM(a,g,u);else if(a.tag===19)UM(a,g,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}A&=1}if(Sn(Cn,A),(u.mode&1)===0)u.memoizedState=null;else switch(T){case"forwards":for(g=u.child,T=null;g!==null;)a=g.alternate,a!==null&&yi(a)===null&&(T=g),g=g.sibling;g=T,g===null?(T=u.child,u.child=null):(T=g.sibling,g.sibling=null),Q0(u,!1,T,g,I);break;case"backwards":for(g=null,T=u.child,u.child=null;T!==null;){if(a=T.alternate,a!==null&&yi(a)===null){u.child=T;break}a=T.sibling,T.sibling=g,g=T,T=a}Q0(u,!0,g,null,I);break;case"together":Q0(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function vg(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function Ua(a,u,g){if(a!==null&&(u.dependencies=a.dependencies),iu|=u.lanes,(g&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,g=ql(a,a.pendingProps),u.child=g,g.return=u;a.sibling!==null;)a=a.sibling,g=g.sibling=ql(a,a.pendingProps),g.return=u;g.sibling=null}return u.child}function aI(a,u,g){switch(u.tag){case 3:fn(u),Ko();break;case 5:ih(u);break;case 1:Di(u.type)&&Ia(u);break;case 4:zl(u,u.stateNode.containerInfo);break;case 10:var A=u.type._context,T=u.memoizedProps.value;Sn(Jc,A._currentValue),A._currentValue=T;break;case 13:if(A=u.memoizedState,A!==null)return A.dehydrated!==null?(Sn(Cn,Cn.current&1),u.flags|=128,null):(g&u.child.childLanes)!==0?gg(a,u,g):(Sn(Cn,Cn.current&1),a=Ua(a,u,g),a!==null?a.sibling:null);Sn(Cn,Cn.current&1);break;case 19:if(A=(g&u.childLanes)!==0,(a.flags&128)!==0){if(A)return zM(a,u,g);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Sn(Cn,Cn.current),A)break;return null;case 22:case 23:return u.lanes=0,Ee(a,u,g)}return Ua(a,u,g)}var HM,Z0,GM,VM;HM=function(a,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Z0=function(){},GM=function(a,u,g,A){var T=a.memoizedProps;if(T!==A){a=u.stateNode,sr(Xr.current);var I=null;switch(g){case"input":T=Je(a,T),A=Je(a,A),I=[];break;case"select":T=z({},T,{value:void 0}),A=z({},A,{value:void 0}),I=[];break;case"textarea":T=me(a,T),A=me(a,A),I=[];break;default:typeof T.onClick!="function"&&typeof A.onClick=="function"&&(a.onclick=Gc)}Re(g,A);var k;g=null;for(Me in T)if(!A.hasOwnProperty(Me)&&T.hasOwnProperty(Me)&&T[Me]!=null)if(Me==="style"){var Q=T[Me];for(k in Q)Q.hasOwnProperty(k)&&(g||(g={}),g[k]="")}else Me!=="dangerouslySetInnerHTML"&&Me!=="children"&&Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&Me!=="autoFocus"&&(r.hasOwnProperty(Me)?I||(I=[]):(I=I||[]).push(Me,null));for(Me in A){var ee=A[Me];if(Q=T?.[Me],A.hasOwnProperty(Me)&&ee!==Q&&(ee!=null||Q!=null))if(Me==="style")if(Q){for(k in Q)!Q.hasOwnProperty(k)||ee&&ee.hasOwnProperty(k)||(g||(g={}),g[k]="");for(k in ee)ee.hasOwnProperty(k)&&Q[k]!==ee[k]&&(g||(g={}),g[k]=ee[k])}else g||(I||(I=[]),I.push(Me,g)),g=ee;else Me==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,Q=Q?Q.__html:void 0,ee!=null&&Q!==ee&&(I=I||[]).push(Me,ee)):Me==="children"?typeof ee!="string"&&typeof ee!="number"||(I=I||[]).push(Me,""+ee):Me!=="suppressContentEditableWarning"&&Me!=="suppressHydrationWarning"&&(r.hasOwnProperty(Me)?(ee!=null&&Me==="onScroll"&&wn("scroll",a),I||Q===ee||(I=[])):(I=I||[]).push(Me,ee))}g&&(I=I||[]).push("style",g);var Me=I;(u.updateQueue=Me)&&(u.flags|=4)}},VM=function(a,u,g,A){g!==A&&(u.flags|=4)};function np(a,u){if(!Tn)switch(a.tailMode){case"hidden":u=a.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var A=null;g!==null;)g.alternate!==null&&(A=g),g=g.sibling;A===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:A.sibling=null}}function ar(a){var u=a.alternate!==null&&a.alternate.child===a.child,g=0,A=0;if(u)for(var T=a.child;T!==null;)g|=T.lanes|T.childLanes,A|=T.subtreeFlags&14680064,A|=T.flags&14680064,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)g|=T.lanes|T.childLanes,A|=T.subtreeFlags,A|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=A,a.childLanes=g,u}function lI(a,u,g){var A=u.pendingProps;switch(co(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(u),null;case 1:return Di(u.type)&&Vc(),ar(u),null;case 3:return A=u.stateNode,Bs(),En(Wi),En(Ei),or(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(a===null||a.child===null)&&(Dl(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Wr!==null&&(cx(Wr),Wr=null))),Z0(a,u),ar(u),null;case 5:Hl(u);var T=sr(Zo.current);if(g=u.type,a!==null&&u.stateNode!=null)GM(a,u,g,A,T),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!A){if(u.stateNode===null)throw Error(t(166));return ar(u),null}if(a=sr(Xr.current),Dl(u)){A=u.stateNode,g=u.type;var I=u.memoizedProps;switch(A[ri]=u,A[Bl]=I,a=(u.mode&1)!==0,g){case"dialog":wn("cancel",A),wn("close",A);break;case"iframe":case"object":case"embed":wn("load",A);break;case"video":case"audio":for(T=0;T<Xo.length;T++)wn(Xo[T],A);break;case"source":wn("error",A);break;case"img":case"image":case"link":wn("error",A),wn("load",A);break;case"details":wn("toggle",A);break;case"input":Ke(A,I),wn("invalid",A);break;case"select":A._wrapperState={wasMultiple:!!I.multiple},wn("invalid",A);break;case"textarea":Te(A,I),wn("invalid",A)}Re(g,I),T=null;for(var k in I)if(I.hasOwnProperty(k)){var Q=I[k];k==="children"?typeof Q=="string"?A.textContent!==Q&&(I.suppressHydrationWarning!==!0&&Hc(A.textContent,Q,a),T=["children",Q]):typeof Q=="number"&&A.textContent!==""+Q&&(I.suppressHydrationWarning!==!0&&Hc(A.textContent,Q,a),T=["children",""+Q]):r.hasOwnProperty(k)&&Q!=null&&k==="onScroll"&&wn("scroll",A)}switch(g){case"input":We(A),xt(A,I,!0);break;case"textarea":We(A),Be(A);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(A.onclick=Gc)}A=T,u.updateQueue=A,A!==null&&(u.flags|=4)}else{k=T.nodeType===9?T:T.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=gt(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=k.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof A.is=="string"?a=k.createElement(g,{is:A.is}):(a=k.createElement(g),g==="select"&&(k=a,A.multiple?k.multiple=!0:A.size&&(k.size=A.size))):a=k.createElementNS(a,g),a[ri]=u,a[Bl]=A,HM(a,u,!1,!1),u.stateNode=a;e:{switch(k=et(g,A),g){case"dialog":wn("cancel",a),wn("close",a),T=A;break;case"iframe":case"object":case"embed":wn("load",a),T=A;break;case"video":case"audio":for(T=0;T<Xo.length;T++)wn(Xo[T],a);T=A;break;case"source":wn("error",a),T=A;break;case"img":case"image":case"link":wn("error",a),wn("load",a),T=A;break;case"details":wn("toggle",a),T=A;break;case"input":Ke(a,A),T=Je(a,A),wn("invalid",a);break;case"option":T=A;break;case"select":a._wrapperState={wasMultiple:!!A.multiple},T=z({},A,{value:void 0}),wn("invalid",a);break;case"textarea":Te(a,A),T=me(a,A),wn("invalid",a);break;default:T=A}Re(g,T),Q=T;for(I in Q)if(Q.hasOwnProperty(I)){var ee=Q[I];I==="style"?ht(a,ee):I==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&Qt(a,ee)):I==="children"?typeof ee=="string"?(g!=="textarea"||ee!=="")&&ze(a,ee):typeof ee=="number"&&ze(a,""+ee):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(r.hasOwnProperty(I)?ee!=null&&I==="onScroll"&&wn("scroll",a):ee!=null&&b(a,I,ee,k))}switch(g){case"input":We(a),xt(a,A,!1);break;case"textarea":We(a),Be(a);break;case"option":A.value!=null&&a.setAttribute("value",""+Xe(A.value));break;case"select":a.multiple=!!A.multiple,I=A.value,I!=null?H(a,!!A.multiple,I,!1):A.defaultValue!=null&&H(a,!!A.multiple,A.defaultValue,!0);break;default:typeof T.onClick=="function"&&(a.onclick=Gc)}switch(g){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}}A&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ar(u),null;case 6:if(a&&u.stateNode!=null)VM(a,u,a.memoizedProps,A);else{if(typeof A!="string"&&u.stateNode===null)throw Error(t(166));if(g=sr(Zo.current),sr(Xr.current),Dl(u)){if(A=u.stateNode,g=u.memoizedProps,A[ri]=u,(I=A.nodeValue!==g)&&(a=Ci,a!==null))switch(a.tag){case 3:Hc(A.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Hc(A.nodeValue,g,(a.mode&1)!==0)}I&&(u.flags|=4)}else A=(g.nodeType===9?g:g.ownerDocument).createTextNode(A),A[ri]=u,u.stateNode=A}return ar(u),null;case 13:if(En(Cn),A=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Tn&&Xi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)qd(),Ko(),u.flags|=98560,I=!1;else if(I=Dl(u),A!==null&&A.dehydrated!==null){if(a===null){if(!I)throw Error(t(318));if(I=u.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[ri]=u}else Ko(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ar(u),I=!1}else Wr!==null&&(cx(Wr),Wr=null),I=!0;if(!I)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=g,u):(A=A!==null,A!==(a!==null&&a.memoizedState!==null)&&A&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(Cn.current&1)!==0?bi===0&&(bi=3):hx())),u.updateQueue!==null&&(u.flags|=4),ar(u),null);case 4:return Bs(),Z0(a,u),a===null&&Rl(u.stateNode.containerInfo),ar(u),null;case 10:return Nl(u.type._context),ar(u),null;case 17:return Di(u.type)&&Vc(),ar(u),null;case 19:if(En(Cn),I=u.memoizedState,I===null)return ar(u),null;if(A=(u.flags&128)!==0,k=I.rendering,k===null)if(A)np(I,!1);else{if(bi!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(k=yi(a),k!==null){for(u.flags|=128,np(I,!1),A=k.updateQueue,A!==null&&(u.updateQueue=A,u.flags|=4),u.subtreeFlags=0,A=g,g=u.child;g!==null;)I=g,a=A,I.flags&=14680066,k=I.alternate,k===null?(I.childLanes=0,I.lanes=a,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=k.childLanes,I.lanes=k.lanes,I.child=k.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=k.memoizedProps,I.memoizedState=k.memoizedState,I.updateQueue=k.updateQueue,I.type=k.type,a=k.dependencies,I.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return Sn(Cn,Cn.current&1|2),u.child}a=a.sibling}I.tail!==null&&Ze()>ph&&(u.flags|=128,A=!0,np(I,!1),u.lanes=4194304)}else{if(!A)if(a=yi(k),a!==null){if(u.flags|=128,A=!0,g=a.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),np(I,!0),I.tail===null&&I.tailMode==="hidden"&&!k.alternate&&!Tn)return ar(u),null}else 2*Ze()-I.renderingStartTime>ph&&g!==1073741824&&(u.flags|=128,A=!0,np(I,!1),u.lanes=4194304);I.isBackwards?(k.sibling=u.child,u.child=k):(g=I.last,g!==null?g.sibling=k:u.child=k,I.last=k)}return I.tail!==null?(u=I.tail,I.rendering=u,I.tail=u.sibling,I.renderingStartTime=Ze(),u.sibling=null,g=Cn.current,Sn(Cn,A?g&1|2:g&1),u):(ar(u),null);case 22:case 23:return fx(),A=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==A&&(u.flags|=8192),A&&(u.mode&1)!==0?(ds&1073741824)!==0&&(ar(u),u.subtreeFlags&6&&(u.flags|=8192)):ar(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function cI(a,u){switch(co(u),u.tag){case 1:return Di(u.type)&&Vc(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Bs(),En(Wi),En(Ei),or(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return Hl(u),null;case 13:if(En(Cn),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Ko()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return En(Cn),null;case 4:return Bs(),null;case 10:return Nl(u.type._context),null;case 22:case 23:return fx(),null;case 24:return null;default:return null}}var xg=!1,lr=!1,uI=typeof WeakSet=="function"?WeakSet:Set,_t=null;function hh(a,u){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(A){Qn(a,u,A)}else g.current=null}function $0(a,u,g){try{g()}catch(A){Qn(a,u,A)}}var WM=!1;function fI(a,u){if(Il=Or,a=On(),fi(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var A=g.getSelection&&g.getSelection();if(A&&A.rangeCount!==0){g=A.anchorNode;var T=A.anchorOffset,I=A.focusNode;A=A.focusOffset;try{g.nodeType,I.nodeType}catch{g=null;break e}var k=0,Q=-1,ee=-1,Me=0,ke=0,He=a,Oe=null;t:for(;;){for(var mt;He!==g||T!==0&&He.nodeType!==3||(Q=k+T),He!==I||A!==0&&He.nodeType!==3||(ee=k+A),He.nodeType===3&&(k+=He.nodeValue.length),(mt=He.firstChild)!==null;)Oe=He,He=mt;for(;;){if(He===a)break t;if(Oe===g&&++Me===T&&(Q=k),Oe===I&&++ke===A&&(ee=k),(mt=He.nextSibling)!==null)break;He=Oe,Oe=He.parentNode}He=mt}g=Q===-1||ee===-1?null:{start:Q,end:ee}}else g=null}g=g||{start:0,end:0}}else g=null;for(kd={focusedElem:a,selectionRange:g},Or=!1,_t=u;_t!==null;)if(u=_t,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,_t=a;else for(;_t!==null;){u=_t;try{var At=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(At!==null){var Et=At.memoizedProps,oi=At.memoizedState,ge=u.stateNode,se=ge.getSnapshotBeforeUpdate(u.elementType===u.type?Et:cs(u.type,Et),oi);ge.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var xe=u.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(qe){Qn(u,u.return,qe)}if(a=u.sibling,a!==null){a.return=u.return,_t=a;break}_t=u.return}return At=WM,WM=!1,At}function ip(a,u,g){var A=u.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var T=A=A.next;do{if((T.tag&a)===a){var I=T.destroy;T.destroy=void 0,I!==void 0&&$0(u,g,I)}T=T.next}while(T!==A)}}function _g(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&a)===a){var A=g.create;g.destroy=A()}g=g.next}while(g!==u)}}function ex(a){var u=a.ref;if(u!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof u=="function"?u(a):u.current=a}}function jM(a){var u=a.alternate;u!==null&&(a.alternate=null,jM(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[ri],delete u[Bl],delete u[Ra],delete u[jf],delete u[Xf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function XM(a){return a.tag===5||a.tag===3||a.tag===4}function JM(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||XM(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function tx(a,u,g){var A=a.tag;if(A===5||A===6)a=a.stateNode,u?g.nodeType===8?g.parentNode.insertBefore(a,u):g.insertBefore(a,u):(g.nodeType===8?(u=g.parentNode,u.insertBefore(a,g)):(u=g,u.appendChild(a)),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Gc));else if(A!==4&&(a=a.child,a!==null))for(tx(a,u,g),a=a.sibling;a!==null;)tx(a,u,g),a=a.sibling}function nx(a,u,g){var A=a.tag;if(A===5||A===6)a=a.stateNode,u?g.insertBefore(a,u):g.appendChild(a);else if(A!==4&&(a=a.child,a!==null))for(nx(a,u,g),a=a.sibling;a!==null;)nx(a,u,g),a=a.sibling}var Qi=null,mo=!1;function jl(a,u,g){for(g=g.child;g!==null;)KM(a,u,g),g=g.sibling}function KM(a,u,g){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(sn,g)}catch{}switch(g.tag){case 5:lr||hh(g,u);case 6:var A=Qi,T=mo;Qi=null,jl(a,u,g),Qi=A,mo=T,Qi!==null&&(mo?(a=Qi,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):Qi.removeChild(g.stateNode));break;case 18:Qi!==null&&(mo?(a=Qi,g=g.stateNode,a.nodeType===8?Wf(a.parentNode,g):a.nodeType===1&&Wf(a,g),Pc(a)):Wf(Qi,g.stateNode));break;case 4:A=Qi,T=mo,Qi=g.stateNode.containerInfo,mo=!0,jl(a,u,g),Qi=A,mo=T;break;case 0:case 11:case 14:case 15:if(!lr&&(A=g.updateQueue,A!==null&&(A=A.lastEffect,A!==null))){T=A=A.next;do{var I=T,k=I.destroy;I=I.tag,k!==void 0&&((I&2)!==0||(I&4)!==0)&&$0(g,u,k),T=T.next}while(T!==A)}jl(a,u,g);break;case 1:if(!lr&&(hh(g,u),A=g.stateNode,typeof A.componentWillUnmount=="function"))try{A.props=g.memoizedProps,A.state=g.memoizedState,A.componentWillUnmount()}catch(Q){Qn(g,u,Q)}jl(a,u,g);break;case 21:jl(a,u,g);break;case 22:g.mode&1?(lr=(A=lr)||g.memoizedState!==null,jl(a,u,g),lr=A):jl(a,u,g);break;default:jl(a,u,g)}}function YM(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new uI),u.forEach(function(A){var T=_I.bind(null,a,A);g.has(A)||(g.add(A),A.then(T,T))})}}function go(a,u){var g=u.deletions;if(g!==null)for(var A=0;A<g.length;A++){var T=g[A];try{var I=a,k=u,Q=k;e:for(;Q!==null;){switch(Q.tag){case 5:Qi=Q.stateNode,mo=!1;break e;case 3:Qi=Q.stateNode.containerInfo,mo=!0;break e;case 4:Qi=Q.stateNode.containerInfo,mo=!0;break e}Q=Q.return}if(Qi===null)throw Error(t(160));KM(I,k,T),Qi=null,mo=!1;var ee=T.alternate;ee!==null&&(ee.return=null),T.return=null}catch(Me){Qn(T,u,Me)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)qM(u,a),u=u.sibling}function qM(a,u){var g=a.alternate,A=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(go(u,a),ia(a),A&4){try{ip(3,a,a.return),_g(3,a)}catch(Et){Qn(a,a.return,Et)}try{ip(5,a,a.return)}catch(Et){Qn(a,a.return,Et)}}break;case 1:go(u,a),ia(a),A&512&&g!==null&&hh(g,g.return);break;case 5:if(go(u,a),ia(a),A&512&&g!==null&&hh(g,g.return),a.flags&32){var T=a.stateNode;try{ze(T,"")}catch(Et){Qn(a,a.return,Et)}}if(A&4&&(T=a.stateNode,T!=null)){var I=a.memoizedProps,k=g!==null?g.memoizedProps:I,Q=a.type,ee=a.updateQueue;if(a.updateQueue=null,ee!==null)try{Q==="input"&&I.type==="radio"&&I.name!=null&&Ue(T,I),et(Q,k);var Me=et(Q,I);for(k=0;k<ee.length;k+=2){var ke=ee[k],He=ee[k+1];ke==="style"?ht(T,He):ke==="dangerouslySetInnerHTML"?Qt(T,He):ke==="children"?ze(T,He):b(T,ke,He,Me)}switch(Q){case"input":Ge(T,I);break;case"textarea":Fe(T,I);break;case"select":var Oe=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!I.multiple;var mt=I.value;mt!=null?H(T,!!I.multiple,mt,!1):Oe!==!!I.multiple&&(I.defaultValue!=null?H(T,!!I.multiple,I.defaultValue,!0):H(T,!!I.multiple,I.multiple?[]:"",!1))}T[Bl]=I}catch(Et){Qn(a,a.return,Et)}}break;case 6:if(go(u,a),ia(a),A&4){if(a.stateNode===null)throw Error(t(162));T=a.stateNode,I=a.memoizedProps;try{T.nodeValue=I}catch(Et){Qn(a,a.return,Et)}}break;case 3:if(go(u,a),ia(a),A&4&&g!==null&&g.memoizedState.isDehydrated)try{Pc(u.containerInfo)}catch(Et){Qn(a,a.return,Et)}break;case 4:go(u,a),ia(a);break;case 13:go(u,a),ia(a),T=a.child,T.flags&8192&&(I=T.memoizedState!==null,T.stateNode.isHidden=I,!I||T.alternate!==null&&T.alternate.memoizedState!==null||(sx=Ze())),A&4&&YM(a);break;case 22:if(ke=g!==null&&g.memoizedState!==null,a.mode&1?(lr=(Me=lr)||ke,go(u,a),lr=Me):go(u,a),ia(a),A&8192){if(Me=a.memoizedState!==null,(a.stateNode.isHidden=Me)&&!ke&&(a.mode&1)!==0)for(_t=a,ke=a.child;ke!==null;){for(He=_t=ke;_t!==null;){switch(Oe=_t,mt=Oe.child,Oe.tag){case 0:case 11:case 14:case 15:ip(4,Oe,Oe.return);break;case 1:hh(Oe,Oe.return);var At=Oe.stateNode;if(typeof At.componentWillUnmount=="function"){A=Oe,g=Oe.return;try{u=A,At.props=u.memoizedProps,At.state=u.memoizedState,At.componentWillUnmount()}catch(Et){Qn(A,g,Et)}}break;case 5:hh(Oe,Oe.return);break;case 22:if(Oe.memoizedState!==null){$M(He);continue}}mt!==null?(mt.return=Oe,_t=mt):$M(He)}ke=ke.sibling}e:for(ke=null,He=a;;){if(He.tag===5){if(ke===null){ke=He;try{T=He.stateNode,Me?(I=T.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(Q=He.stateNode,ee=He.memoizedProps.style,k=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,Q.style.display=It("display",k))}catch(Et){Qn(a,a.return,Et)}}}else if(He.tag===6){if(ke===null)try{He.stateNode.nodeValue=Me?"":He.memoizedProps}catch(Et){Qn(a,a.return,Et)}}else if((He.tag!==22&&He.tag!==23||He.memoizedState===null||He===a)&&He.child!==null){He.child.return=He,He=He.child;continue}if(He===a)break e;for(;He.sibling===null;){if(He.return===null||He.return===a)break e;ke===He&&(ke=null),He=He.return}ke===He&&(ke=null),He.sibling.return=He.return,He=He.sibling}}break;case 19:go(u,a),ia(a),A&4&&YM(a);break;case 21:break;default:go(u,a),ia(a)}}function ia(a){var u=a.flags;if(u&2){try{e:{for(var g=a.return;g!==null;){if(XM(g)){var A=g;break e}g=g.return}throw Error(t(160))}switch(A.tag){case 5:var T=A.stateNode;A.flags&32&&(ze(T,""),A.flags&=-33);var I=JM(a);nx(a,I,T);break;case 3:case 4:var k=A.stateNode.containerInfo,Q=JM(a);tx(a,Q,k);break;default:throw Error(t(161))}}catch(ee){Qn(a,a.return,ee)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function hI(a,u,g){_t=a,QM(a)}function QM(a,u,g){for(var A=(a.mode&1)!==0;_t!==null;){var T=_t,I=T.child;if(T.tag===22&&A){var k=T.memoizedState!==null||xg;if(!k){var Q=T.alternate,ee=Q!==null&&Q.memoizedState!==null||lr;Q=xg;var Me=lr;if(xg=k,(lr=ee)&&!Me)for(_t=T;_t!==null;)k=_t,ee=k.child,k.tag===22&&k.memoizedState!==null?ew(T):ee!==null?(ee.return=k,_t=ee):ew(T);for(;I!==null;)_t=I,QM(I),I=I.sibling;_t=T,xg=Q,lr=Me}ZM(a)}else(T.subtreeFlags&8772)!==0&&I!==null?(I.return=T,_t=I):ZM(a)}}function ZM(a){for(;_t!==null;){var u=_t;if((u.flags&8772)!==0){var g=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:lr||_g(5,u);break;case 1:var A=u.stateNode;if(u.flags&4&&!lr)if(g===null)A.componentDidMount();else{var T=u.elementType===u.type?g.memoizedProps:cs(u.type,g.memoizedProps);A.componentDidUpdate(T,g.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var I=u.updateQueue;I!==null&&Wn(u,I,A);break;case 3:var k=u.updateQueue;if(k!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=u.child.stateNode;break;case 1:g=u.child.stateNode}Wn(u,k,g)}break;case 5:var Q=u.stateNode;if(g===null&&u.flags&4){g=Q;var ee=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&g.focus();break;case"img":ee.src&&(g.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Me=u.alternate;if(Me!==null){var ke=Me.memoizedState;if(ke!==null){var He=ke.dehydrated;He!==null&&Pc(He)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}lr||u.flags&512&&ex(u)}catch(Oe){Qn(u,u.return,Oe)}}if(u===a){_t=null;break}if(g=u.sibling,g!==null){g.return=u.return,_t=g;break}_t=u.return}}function $M(a){for(;_t!==null;){var u=_t;if(u===a){_t=null;break}var g=u.sibling;if(g!==null){g.return=u.return,_t=g;break}_t=u.return}}function ew(a){for(;_t!==null;){var u=_t;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{_g(4,u)}catch(ee){Qn(u,g,ee)}break;case 1:var A=u.stateNode;if(typeof A.componentDidMount=="function"){var T=u.return;try{A.componentDidMount()}catch(ee){Qn(u,T,ee)}}var I=u.return;try{ex(u)}catch(ee){Qn(u,I,ee)}break;case 5:var k=u.return;try{ex(u)}catch(ee){Qn(u,k,ee)}}}catch(ee){Qn(u,u.return,ee)}if(u===a){_t=null;break}var Q=u.sibling;if(Q!==null){Q.return=u.return,_t=Q;break}_t=u.return}}var dI=Math.ceil,Ag=R.ReactCurrentDispatcher,ix=R.ReactCurrentOwner,Fs=R.ReactCurrentBatchConfig,gn=0,Fi=null,xi=null,Zi=0,ds=0,dh=Hn(0),bi=0,rp=null,iu=0,Sg=0,rx=0,sp=null,Yr=null,sx=0,ph=1/0,za=null,Mg=!1,ox=null,Xl=null,wg=!1,Jl=null,Eg=0,op=0,ax=null,Cg=-1,bg=0;function Tr(){return(gn&6)!==0?Ze():Cg!==-1?Cg:Cg=Ze()}function Kl(a){return(a.mode&1)===0?1:(gn&2)!==0&&Zi!==0?Zi&-Zi:Y0.transition!==null?(bg===0&&(bg=Bi()),bg):(a=hn,a!==0||(a=window.event,a=a===void 0?16:Wm(a.type)),a)}function yo(a,u,g,A){if(50<op)throw op=0,ax=null,Error(t(185));Uo(a,g,A),((gn&2)===0||a!==Fi)&&(a===Fi&&((gn&2)===0&&(Sg|=g),bi===4&&Yl(a,Zi)),qr(a,A),g===1&&gn===0&&(u.mode&1)===0&&(ph=Ze()+500,jc&&Ps()))}function qr(a,u){var g=a.callbackNode;ko(a,u);var A=An(a,a===Fi?Zi:0);if(A===0)g!==null&&he(g),a.callbackNode=null,a.callbackPriority=0;else if(u=A&-A,a.callbackPriority!==u){if(g!=null&&he(g),u===1)a.tag===0?rg(nw.bind(null,a)):Xc(nw.bind(null,a)),K0(function(){(gn&6)===0&&Ps()}),g=null;else{switch(gl(A)){case 1:g=Rt;break;case 4:g=Bt;break;case 16:g=Mt;break;case 536870912:g=un;break;default:g=Mt}g=uw(g,tw.bind(null,a))}a.callbackPriority=u,a.callbackNode=g}}function tw(a,u){if(Cg=-1,bg=0,(gn&6)!==0)throw Error(t(327));var g=a.callbackNode;if(mh()&&a.callbackNode!==g)return null;var A=An(a,a===Fi?Zi:0);if(A===0)return null;if((A&30)!==0||(A&a.expiredLanes)!==0||u)u=Tg(a,A);else{u=A;var T=gn;gn|=2;var I=rw();(Fi!==a||Zi!==u)&&(za=null,ph=Ze()+500,su(a,u));do try{gI();break}catch(Q){iw(a,Q)}while(!0);Fl(),Ag.current=I,gn=T,xi!==null?u=0:(Fi=null,Zi=0,u=bi)}if(u!==0){if(u===2&&(T=Mi(a),T!==0&&(A=T,u=lx(a,T))),u===1)throw g=rp,su(a,0),Yl(a,A),qr(a,Ze()),g;if(u===6)Yl(a,A);else{if(T=a.current.alternate,(A&30)===0&&!pI(T)&&(u=Tg(a,A),u===2&&(I=Mi(a),I!==0&&(A=I,u=lx(a,I))),u===1))throw g=rp,su(a,0),Yl(a,A),qr(a,Ze()),g;switch(a.finishedWork=T,a.finishedLanes=A,u){case 0:case 1:throw Error(t(345));case 2:ou(a,Yr,za);break;case 3:if(Yl(a,A),(A&130023424)===A&&(u=sx+500-Ze(),10<u)){if(An(a,0)!==0)break;if(T=a.suspendedLanes,(T&A)!==A){Tr(),a.pingedLanes|=a.suspendedLanes&T;break}a.timeoutHandle=zd(ou.bind(null,a,Yr,za),u);break}ou(a,Yr,za);break;case 4:if(Yl(a,A),(A&4194240)===A)break;for(u=a.eventTimes,T=-1;0<A;){var k=31-ot(A);I=1<<k,k=u[k],k>T&&(T=k),A&=~I}if(A=T,A=Ze()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*dI(A/1960))-A,10<A){a.timeoutHandle=zd(ou.bind(null,a,Yr,za),A);break}ou(a,Yr,za);break;case 5:ou(a,Yr,za);break;default:throw Error(t(329))}}}return qr(a,Ze()),a.callbackNode===g?tw.bind(null,a):null}function lx(a,u){var g=sp;return a.current.memoizedState.isDehydrated&&(su(a,u).flags|=256),a=Tg(a,u),a!==2&&(u=Yr,Yr=g,u!==null&&cx(u)),a}function cx(a){Yr===null?Yr=a:Yr.push.apply(Yr,a)}function pI(a){for(var u=a;;){if(u.flags&16384){var g=u.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var A=0;A<g.length;A++){var T=g[A],I=T.getSnapshot;T=T.value;try{if(!Sr(I(),T))return!1}catch{return!1}}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Yl(a,u){for(u&=~rx,u&=~Sg,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var g=31-ot(u),A=1<<g;a[g]=-1,u&=~A}}function nw(a){if((gn&6)!==0)throw Error(t(327));mh();var u=An(a,0);if((u&1)===0)return qr(a,Ze()),null;var g=Tg(a,u);if(a.tag!==0&&g===2){var A=Mi(a);A!==0&&(u=A,g=lx(a,A))}if(g===1)throw g=rp,su(a,0),Yl(a,u),qr(a,Ze()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,ou(a,Yr,za),qr(a,Ze()),null}function ux(a,u){var g=gn;gn|=1;try{return a(u)}finally{gn=g,gn===0&&(ph=Ze()+500,jc&&Ps())}}function ru(a){Jl!==null&&Jl.tag===0&&(gn&6)===0&&mh();var u=gn;gn|=1;var g=Fs.transition,A=hn;try{if(Fs.transition=null,hn=1,a)return a()}finally{hn=A,Fs.transition=g,gn=u,(gn&6)===0&&Ps()}}function fx(){ds=dh.current,En(dh)}function su(a,u){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,Hd(g)),xi!==null)for(g=xi.return;g!==null;){var A=g;switch(co(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Vc();break;case 3:Bs(),En(Wi),En(Ei),or();break;case 5:Hl(A);break;case 4:Bs();break;case 13:En(Cn);break;case 19:En(Cn);break;case 10:Nl(A.type._context);break;case 22:case 23:fx()}g=g.return}if(Fi=a,xi=a=ql(a.current,null),Zi=ds=u,bi=0,rp=null,rx=Sg=iu=0,Yr=sp=null,us!==null){for(u=0;u<us.length;u++)if(g=us[u],A=g.interleaved,A!==null){g.interleaved=null;var T=A.next,I=g.pending;if(I!==null){var k=I.next;I.next=T,A.next=k}g.pending=A}us=null}return a}function iw(a,u){do{var g=xi;try{if(Fl(),ka.current=h,hs){for(var A=Rn.memoizedState;A!==null;){var T=A.queue;T!==null&&(T.pending=null),A=A.next}hs=!1}if($o=0,vi=jn=Rn=null,Gl=!1,Vl=0,ix.current=null,g===null||g.return===null){bi=1,rp=u,xi=null;break}e:{var I=a,k=g.return,Q=g,ee=u;if(u=Zi,Q.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Me=ee,ke=Q,He=ke.tag;if((ke.mode&1)===0&&(He===0||He===11||He===15)){var Oe=ke.alternate;Oe?(ke.updateQueue=Oe.updateQueue,ke.memoizedState=Oe.memoizedState,ke.lanes=Oe.lanes):(ke.updateQueue=null,ke.memoizedState=null)}var mt=Wt(k);if(mt!==null){mt.flags&=-257,Pt(mt,k,Q,I,u),mt.mode&1&&yt(I,Me,u),u=mt,ee=Me;var At=u.updateQueue;if(At===null){var Et=new Set;Et.add(ee),u.updateQueue=Et}else At.add(ee);break e}else{if((u&1)===0){yt(I,Me,u),hx();break e}ee=Error(t(426))}}else if(Tn&&Q.mode&1){var oi=Wt(k);if(oi!==null){(oi.flags&65536)===0&&(oi.flags|=256),Pt(oi,k,Q,I,u),Ll(P(ee,Q));break e}}I=ee=P(ee,Q),bi!==4&&(bi=2),sp===null?sp=[I]:sp.push(I),I=k;do{switch(I.tag){case 3:I.flags|=65536,u&=-u,I.lanes|=u;var ge=Ce(I,ee,u);Kt(I,ge);break e;case 1:Q=ee;var se=I.type,xe=I.stateNode;if((I.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Xl===null||!Xl.has(xe)))){I.flags|=65536,u&=-u,I.lanes|=u;var qe=Ye(I,Q,u);Kt(I,qe);break e}}I=I.return}while(I!==null)}ow(g)}catch(Ct){u=Ct,xi===g&&g!==null&&(xi=g=g.return);continue}break}while(!0)}function rw(){var a=Ag.current;return Ag.current=h,a===null?h:a}function hx(){(bi===0||bi===3||bi===2)&&(bi=4),Fi===null||(iu&268435455)===0&&(Sg&268435455)===0||Yl(Fi,Zi)}function Tg(a,u){var g=gn;gn|=2;var A=rw();(Fi!==a||Zi!==u)&&(za=null,su(a,u));do try{mI();break}catch(T){iw(a,T)}while(!0);if(Fl(),gn=g,Ag.current=A,xi!==null)throw Error(t(261));return Fi=null,Zi=0,bi}function mI(){for(;xi!==null;)sw(xi)}function gI(){for(;xi!==null&&!Qe();)sw(xi)}function sw(a){var u=cw(a.alternate,a,ds);a.memoizedProps=a.pendingProps,u===null?ow(a):xi=u,ix.current=null}function ow(a){var u=a;do{var g=u.alternate;if(a=u.return,(u.flags&32768)===0){if(g=lI(g,u,ds),g!==null){xi=g;return}}else{if(g=cI(g,u),g!==null){g.flags&=32767,xi=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{bi=6,xi=null;return}}if(u=u.sibling,u!==null){xi=u;return}xi=u=a}while(u!==null);bi===0&&(bi=5)}function ou(a,u,g){var A=hn,T=Fs.transition;try{Fs.transition=null,hn=1,yI(a,u,g,A)}finally{Fs.transition=T,hn=A}return null}function yI(a,u,g,A){do mh();while(Jl!==null);if((gn&6)!==0)throw Error(t(327));g=a.finishedWork;var T=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var I=g.lanes|g.childLanes;if(W0(a,I),a===Fi&&(xi=Fi=null,Zi=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||wg||(wg=!0,uw(Mt,function(){return mh(),null})),I=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||I){I=Fs.transition,Fs.transition=null;var k=hn;hn=1;var Q=gn;gn|=4,ix.current=null,fI(a,g),qM(g,a),hi(kd),Or=!!Il,kd=Il=null,a.current=g,hI(g),ft(),gn=Q,hn=k,Fs.transition=I}else a.current=g;if(wg&&(wg=!1,Jl=a,Eg=T),I=a.pendingLanes,I===0&&(Xl=null),bt(g.stateNode),qr(a,Ze()),u!==null)for(A=a.onRecoverableError,g=0;g<u.length;g++)T=u[g],A(T.value,{componentStack:T.stack,digest:T.digest});if(Mg)throw Mg=!1,a=ox,ox=null,a;return(Eg&1)!==0&&a.tag!==0&&mh(),I=a.pendingLanes,(I&1)!==0?a===ax?op++:(op=0,ax=a):op=0,Ps(),null}function mh(){if(Jl!==null){var a=gl(Eg),u=Fs.transition,g=hn;try{if(Fs.transition=null,hn=16>a?16:a,Jl===null)var A=!1;else{if(a=Jl,Jl=null,Eg=0,(gn&6)!==0)throw Error(t(331));var T=gn;for(gn|=4,_t=a.current;_t!==null;){var I=_t,k=I.child;if((_t.flags&16)!==0){var Q=I.deletions;if(Q!==null){for(var ee=0;ee<Q.length;ee++){var Me=Q[ee];for(_t=Me;_t!==null;){var ke=_t;switch(ke.tag){case 0:case 11:case 15:ip(8,ke,I)}var He=ke.child;if(He!==null)He.return=ke,_t=He;else for(;_t!==null;){ke=_t;var Oe=ke.sibling,mt=ke.return;if(jM(ke),ke===Me){_t=null;break}if(Oe!==null){Oe.return=mt,_t=Oe;break}_t=mt}}}var At=I.alternate;if(At!==null){var Et=At.child;if(Et!==null){At.child=null;do{var oi=Et.sibling;Et.sibling=null,Et=oi}while(Et!==null)}}_t=I}}if((I.subtreeFlags&2064)!==0&&k!==null)k.return=I,_t=k;else e:for(;_t!==null;){if(I=_t,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:ip(9,I,I.return)}var ge=I.sibling;if(ge!==null){ge.return=I.return,_t=ge;break e}_t=I.return}}var se=a.current;for(_t=se;_t!==null;){k=_t;var xe=k.child;if((k.subtreeFlags&2064)!==0&&xe!==null)xe.return=k,_t=xe;else e:for(k=se;_t!==null;){if(Q=_t,(Q.flags&2048)!==0)try{switch(Q.tag){case 0:case 11:case 15:_g(9,Q)}}catch(Ct){Qn(Q,Q.return,Ct)}if(Q===k){_t=null;break e}var qe=Q.sibling;if(qe!==null){qe.return=Q.return,_t=qe;break e}_t=Q.return}}if(gn=T,Ps(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(sn,a)}catch{}A=!0}return A}finally{hn=g,Fs.transition=u}}return!1}function aw(a,u,g){u=P(g,u),u=Ce(a,u,1),a=Is(a,u,1),u=Tr(),a!==null&&(Uo(a,1,u),qr(a,u))}function Qn(a,u,g){if(a.tag===3)aw(a,a,g);else for(;u!==null;){if(u.tag===3){aw(u,a,g);break}else if(u.tag===1){var A=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Xl===null||!Xl.has(A))){a=P(g,a),a=Ye(u,a,1),u=Is(u,a,1),a=Tr(),u!==null&&(Uo(u,1,a),qr(u,a));break}}u=u.return}}function vI(a,u,g){var A=a.pingCache;A!==null&&A.delete(u),u=Tr(),a.pingedLanes|=a.suspendedLanes&g,Fi===a&&(Zi&g)===g&&(bi===4||bi===3&&(Zi&130023424)===Zi&&500>Ze()-sx?su(a,0):rx|=g),qr(a,u)}function lw(a,u){u===0&&((a.mode&1)===0?u=1:(u=mn,mn<<=1,(mn&130023424)===0&&(mn=4194304)));var g=Tr();a=fs(a,u),a!==null&&(Uo(a,u,g),qr(a,g))}function xI(a){var u=a.memoizedState,g=0;u!==null&&(g=u.retryLane),lw(a,g)}function _I(a,u){var g=0;switch(a.tag){case 13:var A=a.stateNode,T=a.memoizedState;T!==null&&(g=T.retryLane);break;case 19:A=a.stateNode;break;default:throw Error(t(314))}A!==null&&A.delete(u),lw(a,g)}var cw;cw=function(a,u,g){if(a!==null)if(a.memoizedProps!==u.pendingProps||Wi.current)dt=!0;else{if((a.lanes&g)===0&&(u.flags&128)===0)return dt=!1,aI(a,u,g);dt=(a.flags&131072)!==0}else dt=!1,Tn&&(u.flags&1048576)!==0&&Xd(u,qf,u.index);switch(u.lanes=0,u.tag){case 2:var A=u.type;vg(a,u),a=u.pendingProps;var T=Pa(u,Ei.current);uo(u,g),T=sh(null,u,A,a,T,g);var I=Qc();return u.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Di(A)?(I=!0,Ia(u)):I=!1,u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,qc(u),T.updater=ho,u.stateNode=T,T._reactInternals=u,Ul(u,A,a,g),u=Ht(null,u,A,!0,I,g)):(u.tag=0,Tn&&I&&Jd(u),vn(null,u,T,g),u=u.child),u;case 16:A=u.elementType;e:{switch(vg(a,u),a=u.pendingProps,T=A._init,A=T(A._payload),u.type=A,T=u.tag=SI(A),a=cs(A,a),T){case 0:u=wt(null,u,A,a,g);break e;case 1:u=Jt(null,u,A,a,g);break e;case 11:u=br(null,u,A,a,g);break e;case 14:u=_e(null,u,A,cs(A.type,a),g);break e}throw Error(t(306,A,""))}return u;case 0:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:cs(A,T),wt(a,u,A,T,g);case 1:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:cs(A,T),Jt(a,u,A,T,g);case 3:e:{if(fn(u),a===null)throw Error(t(387));A=u.pendingProps,I=u.memoizedState,T=I.element,sg(a,u),kn(u,A,null,g);var k=u.memoizedState;if(A=k.element,I.isDehydrated)if(I={element:A,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){T=P(Error(t(423)),u),u=si(a,u,A,g,T);break e}else if(A!==T){T=P(Error(t(424)),u),u=si(a,u,A,g,T);break e}else for(Xi=ro(u.stateNode.containerInfo.firstChild),Ci=u,Tn=!0,Wr=null,g=Oa(u,null,A,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ko(),A===T){u=Ua(a,u,g);break e}vn(a,u,A,g)}u=u.child}return u;case 5:return ih(u),a===null&&Zf(u),A=u.type,T=u.pendingProps,I=a!==null?a.memoizedProps:null,k=T.children,Ud(A,T)?k=null:I!==null&&Ud(A,I)&&(u.flags|=32),ut(a,u),vn(a,u,k,g),u.child;case 6:return a===null&&Zf(u),null;case 13:return gg(a,u,g);case 4:return zl(u,u.stateNode.containerInfo),A=u.pendingProps,a===null?u.child=qo(u,null,A,g):vn(a,u,A,g),u.child;case 11:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:cs(A,T),br(a,u,A,T,g);case 7:return vn(a,u,u.pendingProps,g),u.child;case 8:return vn(a,u,u.pendingProps.children,g),u.child;case 12:return vn(a,u,u.pendingProps.children,g),u.child;case 10:e:{if(A=u.type._context,T=u.pendingProps,I=u.memoizedProps,k=T.value,Sn(Jc,A._currentValue),A._currentValue=k,I!==null)if(Sr(I.value,k)){if(I.children===T.children&&!Wi.current){u=Ua(a,u,g);break e}}else for(I=u.child,I!==null&&(I.return=u);I!==null;){var Q=I.dependencies;if(Q!==null){k=I.child;for(var ee=Q.firstContext;ee!==null;){if(ee.context===A){if(I.tag===1){ee=jr(-1,g&-g),ee.tag=2;var Me=I.updateQueue;if(Me!==null){Me=Me.shared;var ke=Me.pending;ke===null?ee.next=ee:(ee.next=ke.next,ke.next=ee),Me.pending=ee}}I.lanes|=g,ee=I.alternate,ee!==null&&(ee.lanes|=g),Ol(I.return,g,u),Q.lanes|=g;break}ee=ee.next}}else if(I.tag===10)k=I.type===u.type?null:I.child;else if(I.tag===18){if(k=I.return,k===null)throw Error(t(341));k.lanes|=g,Q=k.alternate,Q!==null&&(Q.lanes|=g),Ol(k,g,u),k=I.sibling}else k=I.child;if(k!==null)k.return=I;else for(k=I;k!==null;){if(k===u){k=null;break}if(I=k.sibling,I!==null){I.return=k.return,k=I;break}k=k.return}I=k}vn(a,u,T.children,g),u=u.child}return u;case 9:return T=u.type,A=u.pendingProps.children,uo(u,g),T=Ji(T),A=A(T),u.flags|=1,vn(a,u,A,g),u.child;case 14:return A=u.type,T=cs(A,u.pendingProps),T=cs(A.type,T),_e(a,u,A,T,g);case 15:return fe(a,u,u.type,u.pendingProps,g);case 17:return A=u.type,T=u.pendingProps,T=u.elementType===A?T:cs(A,T),vg(a,u),u.tag=1,Di(A)?(a=!0,Ia(u)):a=!1,uo(u,g),kl(u,A,T),Ul(u,A,T,g),Ht(null,u,A,!0,a,g);case 19:return zM(a,u,g);case 22:return Ee(a,u,g)}throw Error(t(156,u.tag))};function uw(a,u){return Se(a,u)}function AI(a,u,g,A){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(a,u,g,A){return new AI(a,u,g,A)}function dx(a){return a=a.prototype,!(!a||!a.isReactComponent)}function SI(a){if(typeof a=="function")return dx(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ne)return 11;if(a===de)return 14}return 2}function ql(a,u){var g=a.alternate;return g===null?(g=Ns(a.tag,u,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=u,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,u=a.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function Rg(a,u,g,A,T,I){var k=2;if(A=a,typeof a=="function")dx(a)&&(k=1);else if(typeof a=="string")k=5;else e:switch(a){case N:return au(g.children,T,I,u);case U:k=8,T|=8;break;case J:return a=Ns(12,g,u,T|2),a.elementType=J,a.lanes=I,a;case ie:return a=Ns(13,g,u,T),a.elementType=ie,a.lanes=I,a;case ce:return a=Ns(19,g,u,T),a.elementType=ce,a.lanes=I,a;case ye:return Pg(g,T,I,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case B:k=10;break e;case L:k=9;break e;case ne:k=11;break e;case de:k=14;break e;case le:k=16,A=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=Ns(k,g,u,T),u.elementType=a,u.type=A,u.lanes=I,u}function au(a,u,g,A){return a=Ns(7,a,A,u),a.lanes=g,a}function Pg(a,u,g,A){return a=Ns(22,a,A,u),a.elementType=ye,a.lanes=g,a.stateNode={isHidden:!1},a}function px(a,u,g){return a=Ns(6,a,null,u),a.lanes=g,a}function mx(a,u,g){return u=Ns(4,a.children!==null?a.children:[],a.key,u),u.lanes=g,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function MI(a,u,g,A,T){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=A,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function gx(a,u,g,A,T,I,k,Q,ee){return a=new MI(a,u,g,Q,ee),u===1?(u=1,I===!0&&(u|=8)):u=0,I=Ns(3,null,null,u),a.current=I,I.stateNode=a,I.memoizedState={element:A,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},qc(I),a}function wI(a,u,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:A==null?null:""+A,children:a,containerInfo:u,implementation:g}}function fw(a){if(!a)return oo;a=a._reactInternals;e:{if(qs(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Di(g))return Wc(a,g,u)}return u}function hw(a,u,g,A,T,I,k,Q,ee){return a=gx(g,A,!0,a,T,I,k,Q,ee),a.context=fw(null),g=a.current,A=Tr(),T=Kl(g),I=jr(A,T),I.callback=u??null,Is(g,I,T),a.current.lanes=T,Uo(a,T,A),qr(a,A),a}function Ig(a,u,g,A){var T=u.current,I=Tr(),k=Kl(T);return g=fw(g),u.context===null?u.context=g:u.pendingContext=g,u=jr(I,k),u.payload={element:a},A=A===void 0?null:A,A!==null&&(u.callback=A),a=Is(T,u,k),a!==null&&(yo(a,T,k,I),Bn(a,T,k)),k}function Bg(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function dw(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<u?g:u}}function yx(a,u){dw(a,u),(a=a.alternate)&&dw(a,u)}function EI(){return null}var pw=typeof reportError=="function"?reportError:function(a){console.error(a)};function vx(a){this._internalRoot=a}Dg.prototype.render=vx.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));Ig(a,u,null,null)},Dg.prototype.unmount=vx.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;ru(function(){Ig(null,a,null,null)}),u[wr]=null}};function Dg(a){this._internalRoot=a}Dg.prototype.unstable_scheduleHydration=function(a){if(a){var u=mf();a={blockedOn:null,target:a,priority:u};for(var g=0;g<zo.length&&u!==0&&u<zo[g].priority;g++);zo.splice(g,0,a),g===0&&vf(a)}};function xx(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Lg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function mw(){}function CI(a,u,g,A,T){if(T){if(typeof A=="function"){var I=A;A=function(){var Me=Bg(k);I.call(Me)}}var k=hw(u,A,a,0,null,!1,!1,"",mw);return a._reactRootContainer=k,a[wr]=k.current,Rl(a.nodeType===8?a.parentNode:a),ru(),k}for(;T=a.lastChild;)a.removeChild(T);if(typeof A=="function"){var Q=A;A=function(){var Me=Bg(ee);Q.call(Me)}}var ee=gx(a,0,!1,null,null,!1,!1,"",mw);return a._reactRootContainer=ee,a[wr]=ee.current,Rl(a.nodeType===8?a.parentNode:a),ru(function(){Ig(u,ee,g,A)}),ee}function Fg(a,u,g,A,T){var I=g._reactRootContainer;if(I){var k=I;if(typeof T=="function"){var Q=T;T=function(){var ee=Bg(k);Q.call(ee)}}Ig(u,k,a,T)}else k=CI(g,u,a,T,A);return Bg(k)}bc=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var g=Nr(u.pendingLanes);g!==0&&(ml(u,g|1),qr(u,Ze()),(gn&6)===0&&(ph=Ze()+500,Ps()))}break;case 13:ru(function(){var A=fs(a,1);if(A!==null){var T=Tr();yo(A,a,1,T)}}),yx(a,1)}},Ad=function(a){if(a.tag===13){var u=fs(a,134217728);if(u!==null){var g=Tr();yo(u,a,134217728,g)}yx(a,134217728)}},Vm=function(a){if(a.tag===13){var u=Kl(a),g=fs(a,u);if(g!==null){var A=Tr();yo(g,a,u,A)}yx(a,u)}},mf=function(){return hn},gf=function(a,u){var g=hn;try{return hn=a,u()}finally{hn=g}},we=function(a,u,g){switch(u){case"input":if(Ge(a,g),u=g.name,g.type==="radio"&&u!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<g.length;u++){var A=g[u];if(A!==a&&A.form===a.form){var T=Jf(A);if(!T)throw Error(t(90));Pe(A),Ge(A,T)}}}break;case"textarea":Fe(a,g);break;case"select":u=g.value,u!=null&&H(a,!!g.multiple,u,!1)}},Fn=ux,Xt=ru;var bI={usingClientEntryPoint:!1,Events:[so,Vn,Jf,kt,rn,ux]},ap={findFiberByHostInstance:Jo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TI={bundleType:ap.bundleType,version:ap.version,rendererPackageName:ap.rendererPackageName,rendererConfig:ap.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ue(a),a===null?null:a.stateNode},findFiberByHostInstance:ap.findFiberByHostInstance||EI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ng.isDisabled&&Ng.supportsFiber)try{sn=Ng.inject(TI),Ot=Ng}catch{}}return Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bI,Qr.createPortal=function(a,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(u))throw Error(t(200));return wI(a,u,null,g)},Qr.createRoot=function(a,u){if(!xx(a))throw Error(t(299));var g=!1,A="",T=pw;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(A=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),u=gx(a,1,!1,null,null,g,!1,A,T),a[wr]=u.current,Rl(a.nodeType===8?a.parentNode:a),new vx(u)},Qr.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=ue(u),a=a===null?null:a.stateNode,a},Qr.flushSync=function(a){return ru(a)},Qr.hydrate=function(a,u,g){if(!Lg(u))throw Error(t(200));return Fg(null,a,u,!0,g)},Qr.hydrateRoot=function(a,u,g){if(!xx(a))throw Error(t(405));var A=g!=null&&g.hydratedSources||null,T=!1,I="",k=pw;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onRecoverableError!==void 0&&(k=g.onRecoverableError)),u=hw(u,null,a,1,g??null,T,!1,I,k),a[wr]=u.current,Rl(a),A)for(a=0;a<A.length;a++)g=A[a],T=g._getVersion,T=T(g._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[g,T]:u.mutableSourceEagerHydrationData.push(g,T);return new Dg(u)},Qr.render=function(a,u,g){if(!Lg(u))throw Error(t(200));return Fg(null,a,u,!1,g)},Qr.unmountComponentAtNode=function(a){if(!Lg(a))throw Error(t(40));return a._reactRootContainer?(ru(function(){Fg(null,null,a,!1,function(){a._reactRootContainer=null,a[wr]=null})}),!0):!1},Qr.unstable_batchedUpdates=ux,Qr.unstable_renderSubtreeIntoContainer=function(a,u,g,A){if(!Lg(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Fg(a,u,g,!1,A)},Qr.version="18.2.0-next-9e3b772b8-20220608",Qr}var Mw;function UI(){if(Mw)return Sx.exports;Mw=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sx.exports=kI(),Sx.exports}var ww;function zI(){if(ww)return Og;ww=1;var i=UI();return Og.createRoot=i.createRoot,Og.hydrateRoot=i.hydrateRoot,Og}var Pb=zI();const HI=Kv(Pb);function qp(){return qp=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},qp.apply(this,arguments)}var Pu;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Pu||(Pu={}));const Ew="popstate";function GI(i){i===void 0&&(i={});function e(n,r){let{pathname:s,search:o,hash:l}=n.location;return xA("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Xy(r)}return WI(e,t,null,i)}function Mo(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function VI(){return Math.random().toString(36).substr(2,8)}function Cw(i,e){return{usr:i.state,key:i.key,idx:e}}function xA(i,e,t,n){return t===void 0&&(t=null),qp({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Yv(e):e,{state:t,key:e&&e.key||n||VI()})}function Xy(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yv(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function WI(i,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,o=r.history,l=Pu.Pop,c=null,f=p();f==null&&(f=0,o.replaceState(qp({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=Pu.Pop;let S=p(),M=S==null?null:S-f;f=S,c&&c({action:l,location:w.location,delta:M})}function y(S,M){l=Pu.Push;let C=xA(w.location,S,M);f=p()+1;let b=Cw(C,f),R=w.createHref(C);try{o.pushState(b,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;r.location.assign(R)}s&&c&&c({action:l,location:w.location,delta:1})}function v(S,M){l=Pu.Replace;let C=xA(w.location,S,M);f=p();let b=Cw(C,f),R=w.createHref(C);o.replaceState(b,"",R),s&&c&&c({action:l,location:w.location,delta:0})}function x(S){let M=r.location.origin!=="null"?r.location.origin:r.location.href,C=typeof S=="string"?S:Xy(S);return Mo(M,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,M)}let w={get action(){return l},get location(){return i(r,o)},listen(S){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Ew,m),c=S,()=>{r.removeEventListener(Ew,m),c=null}},createHref(S){return e(r,S)},createURL:x,encodeLocation(S){let M=x(S);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:y,replace:v,go(S){return o.go(S)}};return w}var bw;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(bw||(bw={}));function Ib(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function jI(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Yv(i):i;return{pathname:t?t.startsWith("/")?t:XI(t,e):e,search:JI(n),hash:KI(r)}}function XI(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Ex(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bb(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Db(i,e,t,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=Yv(i):(r=qp({},i),Mo(!r.pathname||!r.pathname.includes("?"),Ex("?","pathname","search",r)),Mo(!r.pathname||!r.pathname.includes("#"),Ex("#","pathname","hash",r)),Mo(!r.search||!r.search.includes("#"),Ex("#","search","hash",r)));let s=i===""||r.pathname==="",o=s?"/":r.pathname,l;if(n||o==null)l=t;else{let m=e.length-1;if(o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),m-=1;r.pathname=y.join("/")}l=m>=0?e[m]:"/"}let c=jI(r,l),f=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const Lb=i=>i.join("/").replace(/\/\/+/g,"/"),JI=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,KI=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Fb=["post","put","patch","delete"];new Set(Fb);const YI=["get",...Fb];new Set(YI);function _A(){return _A=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},_A.apply(this,arguments)}const Nb=q.createContext(null),_m=q.createContext(null),cS=q.createContext(null),qv=q.createContext({outlet:null,matches:[],isDataRoute:!1});function qI(i,e){let{relative:t}=e===void 0?{}:e;Qv()||Mo(!1);let{basename:n,navigator:r}=q.useContext(_m),{hash:s,pathname:o,search:l}=kb(i,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:Lb([n,o])),r.createHref({pathname:c,search:l,hash:s})}function Qv(){return q.useContext(cS)!=null}function uS(){return Qv()||Mo(!1),q.useContext(cS).location}function Ob(i){q.useContext(_m).static||q.useLayoutEffect(i)}function QI(){let{isDataRoute:i}=q.useContext(qv);return i?nB():ZI()}function ZI(){Qv()||Mo(!1);let i=q.useContext(Nb),{basename:e,navigator:t}=q.useContext(_m),{matches:n}=q.useContext(qv),{pathname:r}=uS(),s=JSON.stringify(Bb(n).map(c=>c.pathnameBase)),o=q.useRef(!1);return Ob(()=>{o.current=!0}),q.useCallback(function(c,f){if(f===void 0&&(f={}),!o.current)return;if(typeof c=="number"){t.go(c);return}let p=Db(c,JSON.parse(s),r,f.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lb([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,r,i])}function kb(i,e){let{relative:t}=e===void 0?{}:e,{matches:n}=q.useContext(qv),{pathname:r}=uS(),s=JSON.stringify(Bb(n).map(o=>o.pathnameBase));return q.useMemo(()=>Db(i,JSON.parse(s),r,t==="path"),[i,s,r,t])}var Ub=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Ub||{}),zb=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(zb||{});function $I(i){let e=q.useContext(Nb);return e||Mo(!1),e}function eB(i){let e=q.useContext(qv);return e||Mo(!1),e}function tB(i){let e=eB(),t=e.matches[e.matches.length-1];return t.route.id||Mo(!1),t.route.id}function nB(){let{router:i}=$I(Ub.UseNavigateStable),e=tB(zb.UseNavigateStable),t=q.useRef(!1);return Ob(()=>{t.current=!0}),q.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,_A({fromRouteId:e},s)))},[i,e])}function iB(i){let{basename:e="/",children:t=null,location:n,navigationType:r=Pu.Pop,navigator:s,static:o=!1}=i;Qv()&&Mo(!1);let l=e.replace(/^\/*/,"/"),c=q.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof n=="string"&&(n=Yv(n));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=n,x=q.useMemo(()=>{let w=Ib(f,l);return w==null?null:{location:{pathname:w,search:p,hash:m,state:y,key:v},navigationType:r}},[l,f,p,m,y,v,r]);return x==null?null:q.createElement(_m.Provider,{value:c},q.createElement(cS.Provider,{children:t,value:x}))}new Promise(()=>{});function AA(){return AA=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},AA.apply(this,arguments)}function rB(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function sB(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function oB(i,e){return i.button===0&&(!e||e==="_self")&&!sB(i)}const aB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],lB="startTransition",Tw=FI[lB];function cB(i){let{basename:e,children:t,future:n,window:r}=i,s=q.useRef();s.current==null&&(s.current=GI({window:r,v5Compat:!0}));let o=s.current,[l,c]=q.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},p=q.useCallback(m=>{f&&Tw?Tw(()=>c(m)):c(m)},[c,f]);return q.useLayoutEffect(()=>o.listen(p),[o,p]),q.createElement(iB,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o})}const uB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hB=q.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:s,replace:o,state:l,target:c,to:f,preventScrollReset:p}=e,m=rB(e,aB),{basename:y}=q.useContext(_m),v,x=!1;if(typeof f=="string"&&fB.test(f)&&(v=f,uB))try{let C=new URL(window.location.href),b=f.startsWith("//")?new URL(C.protocol+f):new URL(f),R=Ib(b.pathname,y);b.origin===C.origin&&R!=null?f=R+b.search+b.hash:x=!0}catch{}let w=qI(f,{relative:r}),S=dB(f,{replace:o,state:l,target:c,preventScrollReset:p,relative:r});function M(C){n&&n(C),C.defaultPrevented||S(C)}return q.createElement("a",AA({},m,{href:v||w,onClick:x||s?n:M,ref:t,target:c}))});var Rw;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher"})(Rw||(Rw={}));var Pw;(function(i){i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(Pw||(Pw={}));function dB(i,e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:o}=e===void 0?{}:e,l=QI(),c=uS(),f=kb(i,{relative:o});return q.useCallback(p=>{if(oB(p,t)){p.preventDefault();let m=n!==void 0?n:Xy(c)===Xy(f);l(i,{replace:m,state:r,preventScrollReset:s,relative:o})}},[c,l,f,n,r,t,i,s,o])}const hd="169",Mu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Hb=0,SA=1,Gb=2,pB=3,Vb=0,Zv=1,Fp=2,Ao=3,fa=0,Dr=1,Vs=2,el=0,Uu=1,MA=2,wA=3,EA=4,Wb=5,uc=100,jb=101,Xb=102,Jb=103,Kb=104,Yb=200,qb=201,Qb=202,Zb=203,Jy=204,Ky=205,$b=206,eT=207,tT=208,nT=209,iT=210,rT=211,sT=212,oT=213,aT=214,Yy=0,qy=1,Qy=2,Xu=3,Zy=4,$y=5,ev=6,tv=7,Am=0,lT=1,cT=2,aa=0,uT=1,fT=2,hT=3,fS=4,dT=5,pT=6,mT=7,CA="attached",gT="detached",$v=300,ol=301,mc=302,Qp=303,Zp=304,dd=306,gc=1e3,vs=1001,$h=1002,Ti=1003,e0=1004,mB=1004,Iu=1005,gB=1005,ei=1006,Kh=1007,yB=1007,Ws=1008,vB=1008,bo=1009,hS=1010,dS=1011,ed=1012,t0=1013,al=1014,es=1015,pd=1016,n0=1017,i0=1018,Ju=1020,pS=35902,mS=1021,gS=1022,dr=1023,yS=1024,vS=1025,zu=1026,Ku=1027,r0=1028,Sm=1029,xS=1030,s0=1031,xB=1032,o0=1033,Np=33776,Op=33777,kp=33778,Up=33779,nv=35840,iv=35841,rv=35842,sv=35843,ov=36196,av=37492,lv=37496,cv=37808,uv=37809,fv=37810,hv=37811,dv=37812,pv=37813,mv=37814,gv=37815,yv=37816,vv=37817,xv=37818,_v=37819,Av=37820,Sv=37821,zp=36492,Mv=36494,wv=36495,_S=36283,Ev=36284,Cv=36285,bv=36286,yT=2200,vT=2201,xT=2202,td=2300,nd=2301,Uy=2302,Bu=2400,Du=2401,$p=2402,a0=2500,AS=2501,_T=0,SS=1,Tv=2,AT=3200,ST=3201,_B=3202,AB=3203,_c=0,MT=1,Ya="",Gs="srgb",ul="srgb-linear",l0="display-p3",Mm="display-p3-linear",em="linear",Dn="srgb",tm="rec709",nm="p3",SB=0,Eu=7680,MB=7681,wB=7682,EB=7683,CB=34055,bB=34056,TB=5386,RB=512,PB=513,IB=514,BB=515,DB=516,LB=517,FB=518,bA=519,wT=512,ET=513,CT=514,MS=515,bT=516,TT=517,RT=518,PT=519,im=35044,Hu=35048,NB=35040,OB=35045,kB=35049,UB=35041,zB=35046,HB=35050,GB=35042,VB="100",TA="300 es",oa=2e3,rm=2001;let Do=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const cr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Iw=1234567;const Gu=Math.PI/180,id=180/Math.PI;function _s(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(cr[i&255]+cr[i>>8&255]+cr[i>>16&255]+cr[i>>24&255]+"-"+cr[e&255]+cr[e>>8&255]+"-"+cr[e>>16&15|64]+cr[e>>24&255]+"-"+cr[t&63|128]+cr[t>>8&255]+"-"+cr[t>>16&255]+cr[t>>24&255]+cr[n&255]+cr[n>>8&255]+cr[n>>16&255]+cr[n>>24&255]).toLowerCase()}function $n(i,e,t){return Math.max(e,Math.min(t,i))}function wS(i,e){return(i%e+e)%e}function WB(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function jB(i,e,t){return i!==e?(t-i)/(e-i):0}function Hp(i,e,t){return(1-t)*i+t*e}function XB(i,e,t,n){return Hp(i,e,1-Math.exp(-t*n))}function JB(i,e=1){return e-Math.abs(wS(i,e*2)-e)}function KB(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function YB(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function qB(i,e){return i+Math.floor(Math.random()*(e-i+1))}function QB(i,e){return i+Math.random()*(e-i)}function ZB(i){return i*(.5-Math.random())}function $B(i){i!==void 0&&(Iw=i);let e=Iw+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function eD(i){return i*Gu}function tD(i){return i*id}function nD(i){return(i&i-1)===0&&i!==0}function iD(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function rD(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function sD(i,e,t,n,r){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),f=s((e+n)/2),p=o((e+n)/2),m=s((e-n)/2),y=o((e-n)/2),v=s((n-e)/2),x=o((n-e)/2);switch(r){case"XYX":i.set(l*p,c*m,c*y,l*f);break;case"YZY":i.set(c*y,l*p,c*m,l*f);break;case"ZXZ":i.set(c*m,c*y,l*p,l*f);break;case"XZX":i.set(l*p,c*x,c*v,l*f);break;case"YXY":i.set(c*v,l*p,c*x,l*f);break;case"ZYZ":i.set(c*x,c*v,l*p,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Br(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function qt(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ES={DEG2RAD:Gu,RAD2DEG:id,generateUUID:_s,clamp:$n,euclideanModulo:wS,mapLinear:WB,inverseLerp:jB,lerp:Hp,damp:XB,pingpong:JB,smoothstep:KB,smootherstep:YB,randInt:qB,randFloat:QB,randFloatSpread:ZB,seededRandom:$B,degToRad:eD,radToDeg:tD,isPowerOfTwo:nD,ceilPowerOfTwo:iD,floorPowerOfTwo:rD,setQuaternionFromProperEuler:sD,normalize:qt,denormalize:Br};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($n(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yt{constructor(e,t,n,r,s,o,l,c,f){Yt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,f)}set(e,t,n,r,s,o,l,c,f){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=n,p[7]=o,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],c=n[6],f=n[1],p=n[4],m=n[7],y=n[2],v=n[5],x=n[8],w=r[0],S=r[3],M=r[6],C=r[1],b=r[4],R=r[7],O=r[2],F=r[5],N=r[8];return s[0]=o*w+l*C+c*O,s[3]=o*S+l*b+c*F,s[6]=o*M+l*R+c*N,s[1]=f*w+p*C+m*O,s[4]=f*S+p*b+m*F,s[7]=f*M+p*R+m*N,s[2]=y*w+v*C+x*O,s[5]=y*S+v*b+x*F,s[8]=y*M+v*R+x*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],p=e[8];return t*o*p-t*l*f-n*s*p+n*l*c+r*s*f-r*o*c}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],p=e[8],m=p*o-l*f,y=l*c-p*s,v=f*s-o*c,x=t*m+n*y+r*v;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=m*w,e[1]=(r*f-p*n)*w,e[2]=(l*n-r*o)*w,e[3]=y*w,e[4]=(p*t-r*c)*w,e[5]=(r*s-l*t)*w,e[6]=v*w,e[7]=(n*c-f*t)*w,e[8]=(o*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){const c=Math.cos(s),f=Math.sin(s);return this.set(n*c,n*f,-n*(c*o+f*l)+o+e,-r*f,r*c,-r*(-f*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Cx.makeScale(e,t)),this}rotate(e){return this.premultiply(Cx.makeRotation(-e)),this}translate(e,t){return this.premultiply(Cx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Cx=new Yt;function IT(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const oD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kh(i,e){return new oD[i](e)}function sm(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function BT(){const i=sm("canvas");return i.style.display="block",i}const Bw={};function zy(i){i in Bw||(Bw[i]=!0,console.warn(i))}function aD(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function lD(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function cD(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Dw=new Yt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Lw=new Yt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),cp={[ul]:{transfer:em,primaries:tm,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[Gs]:{transfer:Dn,primaries:tm,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Mm]:{transfer:em,primaries:nm,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(Lw),fromReference:i=>i.applyMatrix3(Dw)},[l0]:{transfer:Dn,primaries:nm,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(Lw),fromReference:i=>i.applyMatrix3(Dw).convertLinearToSRGB()}},uD=new Set([ul,Mm]),_n={enabled:!0,_workingColorSpace:ul,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!uD.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const n=cp[e].toReference,r=cp[t].fromReference;return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return cp[i].primaries},getTransfer:function(i){return i===Ya?em:cp[i].transfer},getLuminanceCoefficients:function(i,e=this._workingColorSpace){return i.fromArray(cp[e].luminanceCoefficients)}};function Yh(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function bx(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let gh;class DT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{gh===void 0&&(gh=sm("canvas")),gh.width=e.width,gh.height=e.height;const n=gh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=gh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=sm("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Yh(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Yh(t[n]/255)*255):t[n]=Yh(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fD=0;class Lu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fD++}),this.uuid=_s(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(Tx(r[o].image)):s.push(Tx(r[o]))}else s=Tx(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function Tx(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?DT.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let hD=0;class Pn extends Do{constructor(e=Pn.DEFAULT_IMAGE,t=Pn.DEFAULT_MAPPING,n=vs,r=vs,s=ei,o=Ws,l=dr,c=bo,f=Pn.DEFAULT_ANISOTROPY,p=Ya){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:hD++}),this.uuid=_s(),this.name="",this.source=new Lu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$v)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gc:e.x=e.x-Math.floor(e.x);break;case vs:e.x=e.x<0?0:1;break;case $h:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gc:e.y=e.y-Math.floor(e.y);break;case vs:e.y=e.y<0?0:1;break;case $h:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Pn.DEFAULT_IMAGE=null;Pn.DEFAULT_MAPPING=$v;Pn.DEFAULT_ANISOTROPY=1;class yn{constructor(e=0,t=0,n=0,r=1){yn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const c=e.elements,f=c[0],p=c[4],m=c[8],y=c[1],v=c[5],x=c[9],w=c[2],S=c[6],M=c[10];if(Math.abs(p-y)<.01&&Math.abs(m-w)<.01&&Math.abs(x-S)<.01){if(Math.abs(p+y)<.1&&Math.abs(m+w)<.1&&Math.abs(x+S)<.1&&Math.abs(f+v+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(f+1)/2,R=(v+1)/2,O=(M+1)/2,F=(p+y)/4,N=(m+w)/4,U=(x+S)/4;return b>R&&b>O?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=F/n,s=N/n):R>O?R<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),n=F/r,s=U/r):O<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(O),n=N/s,r=U/s),this.set(n,r,s,t),this}let C=Math.sqrt((S-x)*(S-x)+(m-w)*(m-w)+(y-p)*(y-p));return Math.abs(C)<.001&&(C=1),this.x=(S-x)/C,this.y=(m-w)/C,this.z=(y-p)/C,this.w=Math.acos((f+v+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class LT extends Do{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new yn(0,0,e,t),this.scissorTest=!1,this.viewport=new yn(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ei,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Pn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let l=0;l<o;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Lu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class To extends LT{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class c0 extends Pn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class dD extends To{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new c0(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class CS extends Pn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Ti,this.minFilter=Ti,this.wrapR=vs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pD extends To{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new CS(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ki{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let c=n[r+0],f=n[r+1],p=n[r+2],m=n[r+3];const y=s[o+0],v=s[o+1],x=s[o+2],w=s[o+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=y,e[t+1]=v,e[t+2]=x,e[t+3]=w;return}if(m!==w||c!==y||f!==v||p!==x){let S=1-l;const M=c*y+f*v+p*x+m*w,C=M>=0?1:-1,b=1-M*M;if(b>Number.EPSILON){const O=Math.sqrt(b),F=Math.atan2(O,M*C);S=Math.sin(S*F)/O,l=Math.sin(l*F)/O}const R=l*C;if(c=c*S+y*R,f=f*S+v*R,p=p*S+x*R,m=m*S+w*R,S===1-l){const O=1/Math.sqrt(c*c+f*f+p*p+m*m);c*=O,f*=O,p*=O,m*=O}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,r,s,o){const l=n[r],c=n[r+1],f=n[r+2],p=n[r+3],m=s[o],y=s[o+1],v=s[o+2],x=s[o+3];return e[t]=l*x+p*m+c*v-f*y,e[t+1]=c*x+p*y+f*m-l*v,e[t+2]=f*x+p*v+l*y-c*m,e[t+3]=p*x-l*m-c*y-f*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,f=l(n/2),p=l(r/2),m=l(s/2),y=c(n/2),v=c(r/2),x=c(s/2);switch(o){case"XYZ":this._x=y*p*m+f*v*x,this._y=f*v*m-y*p*x,this._z=f*p*x+y*v*m,this._w=f*p*m-y*v*x;break;case"YXZ":this._x=y*p*m+f*v*x,this._y=f*v*m-y*p*x,this._z=f*p*x-y*v*m,this._w=f*p*m+y*v*x;break;case"ZXY":this._x=y*p*m-f*v*x,this._y=f*v*m+y*p*x,this._z=f*p*x+y*v*m,this._w=f*p*m-y*v*x;break;case"ZYX":this._x=y*p*m-f*v*x,this._y=f*v*m+y*p*x,this._z=f*p*x-y*v*m,this._w=f*p*m+y*v*x;break;case"YZX":this._x=y*p*m+f*v*x,this._y=f*v*m+y*p*x,this._z=f*p*x-y*v*m,this._w=f*p*m-y*v*x;break;case"XZY":this._x=y*p*m-f*v*x,this._y=f*v*m-y*p*x,this._z=f*p*x+y*v*m,this._w=f*p*m+y*v*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],f=t[2],p=t[6],m=t[10],y=n+l+m;if(y>0){const v=.5/Math.sqrt(y+1);this._w=.25/v,this._x=(p-c)*v,this._y=(s-f)*v,this._z=(o-r)*v}else if(n>l&&n>m){const v=2*Math.sqrt(1+n-l-m);this._w=(p-c)/v,this._x=.25*v,this._y=(r+o)/v,this._z=(s+f)/v}else if(l>m){const v=2*Math.sqrt(1+l-n-m);this._w=(s-f)/v,this._x=(r+o)/v,this._y=.25*v,this._z=(c+p)/v}else{const v=2*Math.sqrt(1+m-n-l);this._w=(o-r)/v,this._x=(s+f)/v,this._y=(c+p)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($n(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,f=t._z,p=t._w;return this._x=n*p+o*l+r*f-s*c,this._y=r*p+o*c+s*l-n*f,this._z=s*p+o*f+n*c-r*l,this._w=o*p-n*l-r*c-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const v=1-t;return this._w=v*o+t*this._w,this._x=v*n+t*this._x,this._y=v*r+t*this._y,this._z=v*s+t*this._z,this.normalize(),this}const f=Math.sqrt(c),p=Math.atan2(f,l),m=Math.sin((1-t)*p)/f,y=Math.sin(t*p)/f;return this._w=o*m+this._w*y,this._x=n*m+this._x*y,this._y=r*m+this._y*y,this._z=s*m+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class W{constructor(e=0,t=0,n=0){W.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Fw.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Fw.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,f=2*(o*r-l*n),p=2*(l*t-s*r),m=2*(s*n-o*t);return this.x=t+c*f+o*m-l*p,this.y=n+c*p+l*f-s*m,this.z=r+c*m+s*p-o*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-n*c,this.z=n*l-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Rx.copy(this).projectOnVector(e),this.sub(Rx)}reflect(e){return this.sub(Rx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos($n(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Rx=new W,Fw=new ki;class pr{constructor(e=new W(1/0,1/0,1/0),t=new W(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,vo):vo.fromBufferAttribute(s,o),vo.applyMatrix4(e.matrixWorld),this.expandByPoint(vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),kg.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),kg.copy(n.boundingBox)),kg.applyMatrix4(e.matrixWorld),this.union(kg)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(up),Ug.subVectors(this.max,up),yh.subVectors(e.a,up),vh.subVectors(e.b,up),xh.subVectors(e.c,up),Zl.subVectors(vh,yh),$l.subVectors(xh,vh),lu.subVectors(yh,xh);let t=[0,-Zl.z,Zl.y,0,-$l.z,$l.y,0,-lu.z,lu.y,Zl.z,0,-Zl.x,$l.z,0,-$l.x,lu.z,0,-lu.x,-Zl.y,Zl.x,0,-$l.y,$l.x,0,-lu.y,lu.x,0];return!Px(t,yh,vh,xh,Ug)||(t=[1,0,0,0,1,0,0,0,1],!Px(t,yh,vh,xh,Ug))?!1:(zg.crossVectors(Zl,$l),t=[zg.x,zg.y,zg.z],Px(t,yh,vh,xh,Ug))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ha[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ha[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ha[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ha[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ha[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ha[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ha[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ha[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ha),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ha=[new W,new W,new W,new W,new W,new W,new W,new W],vo=new W,kg=new pr,yh=new W,vh=new W,xh=new W,Zl=new W,$l=new W,lu=new W,up=new W,Ug=new W,zg=new W,cu=new W;function Px(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){cu.fromArray(i,s);const l=r.x*Math.abs(cu.x)+r.y*Math.abs(cu.y)+r.z*Math.abs(cu.z),c=e.dot(cu),f=t.dot(cu),p=n.dot(cu);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>l)return!1}return!0}const mD=new pr,fp=new W,Ix=new W;class $i{constructor(e=new W,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):mD.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;fp.subVectors(e,this.center);const t=fp.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(fp,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ix.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(fp.copy(e.center).add(Ix)),this.expandByPoint(fp.copy(e.center).sub(Ix))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ga=new W,Bx=new W,Hg=new W,ec=new W,Dx=new W,Gg=new W,Lx=new W;class sf{constructor(e=new W,t=new W(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ga)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ga.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ga.copy(this.origin).addScaledVector(this.direction,t),Ga.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Bx.copy(e).add(t).multiplyScalar(.5),Hg.copy(t).sub(e).normalize(),ec.copy(this.origin).sub(Bx);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Hg),l=ec.dot(this.direction),c=-ec.dot(Hg),f=ec.lengthSq(),p=Math.abs(1-o*o);let m,y,v,x;if(p>0)if(m=o*c-l,y=o*l-c,x=s*p,m>=0)if(y>=-x)if(y<=x){const w=1/p;m*=w,y*=w,v=m*(m+o*y+2*l)+y*(o*m+y+2*c)+f}else y=s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+f;else y=-s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+f;else y<=-x?(m=Math.max(0,-(-o*s+l)),y=m>0?-s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+f):y<=x?(m=0,y=Math.min(Math.max(-s,-c),s),v=y*(y+2*c)+f):(m=Math.max(0,-(o*s+l)),y=m>0?s:Math.min(Math.max(-s,-c),s),v=-m*m+y*(y+2*c)+f);else y=o>0?-s:s,m=Math.max(0,-(o*y+l)),v=-m*m+y*(y+2*c)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,m),r&&r.copy(Bx).addScaledVector(Hg,y),v}intersectSphere(e,t){Ga.subVectors(e.center,this.origin);const n=Ga.dot(this.direction),r=Ga.dot(Ga)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,c=n+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,c;const f=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,y=this.origin;return f>=0?(n=(e.min.x-y.x)*f,r=(e.max.x-y.x)*f):(n=(e.max.x-y.x)*f,r=(e.min.x-y.x)*f),p>=0?(s=(e.min.y-y.y)*p,o=(e.max.y-y.y)*p):(s=(e.max.y-y.y)*p,o=(e.min.y-y.y)*p),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),m>=0?(l=(e.min.z-y.z)*m,c=(e.max.z-y.z)*m):(l=(e.max.z-y.z)*m,c=(e.min.z-y.z)*m),n>c||l>r)||((l>n||n!==n)&&(n=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ga)!==null}intersectTriangle(e,t,n,r,s){Dx.subVectors(t,e),Gg.subVectors(n,e),Lx.crossVectors(Dx,Gg);let o=this.direction.dot(Lx),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;ec.subVectors(this.origin,e);const c=l*this.direction.dot(Gg.crossVectors(ec,Gg));if(c<0)return null;const f=l*this.direction.dot(Dx.cross(ec));if(f<0||c+f>o)return null;const p=-l*ec.dot(Lx);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Tt{constructor(e,t,n,r,s,o,l,c,f,p,m,y,v,x,w,S){Tt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,f,p,m,y,v,x,w,S)}set(e,t,n,r,s,o,l,c,f,p,m,y,v,x,w,S){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=r,M[1]=s,M[5]=o,M[9]=l,M[13]=c,M[2]=f,M[6]=p,M[10]=m,M[14]=y,M[3]=v,M[7]=x,M[11]=w,M[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Tt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/_h.setFromMatrixColumn(e,0).length(),s=1/_h.setFromMatrixColumn(e,1).length(),o=1/_h.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),f=Math.sin(r),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const y=o*p,v=o*m,x=l*p,w=l*m;t[0]=c*p,t[4]=-c*m,t[8]=f,t[1]=v+x*f,t[5]=y-w*f,t[9]=-l*c,t[2]=w-y*f,t[6]=x+v*f,t[10]=o*c}else if(e.order==="YXZ"){const y=c*p,v=c*m,x=f*p,w=f*m;t[0]=y+w*l,t[4]=x*l-v,t[8]=o*f,t[1]=o*m,t[5]=o*p,t[9]=-l,t[2]=v*l-x,t[6]=w+y*l,t[10]=o*c}else if(e.order==="ZXY"){const y=c*p,v=c*m,x=f*p,w=f*m;t[0]=y-w*l,t[4]=-o*m,t[8]=x+v*l,t[1]=v+x*l,t[5]=o*p,t[9]=w-y*l,t[2]=-o*f,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const y=o*p,v=o*m,x=l*p,w=l*m;t[0]=c*p,t[4]=x*f-v,t[8]=y*f+w,t[1]=c*m,t[5]=w*f+y,t[9]=v*f-x,t[2]=-f,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const y=o*c,v=o*f,x=l*c,w=l*f;t[0]=c*p,t[4]=w-y*m,t[8]=x*m+v,t[1]=m,t[5]=o*p,t[9]=-l*p,t[2]=-f*p,t[6]=v*m+x,t[10]=y-w*m}else if(e.order==="XZY"){const y=o*c,v=o*f,x=l*c,w=l*f;t[0]=c*p,t[4]=-m,t[8]=f*p,t[1]=y*m+w,t[5]=o*p,t[9]=v*m-x,t[2]=x*m-v,t[6]=l*p,t[10]=w*m+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(gD,e,yD)}lookAt(e,t,n){const r=this.elements;return ps.subVectors(e,t),ps.lengthSq()===0&&(ps.z=1),ps.normalize(),tc.crossVectors(n,ps),tc.lengthSq()===0&&(Math.abs(n.z)===1?ps.x+=1e-4:ps.z+=1e-4,ps.normalize(),tc.crossVectors(n,ps)),tc.normalize(),Vg.crossVectors(ps,tc),r[0]=tc.x,r[4]=Vg.x,r[8]=ps.x,r[1]=tc.y,r[5]=Vg.y,r[9]=ps.y,r[2]=tc.z,r[6]=Vg.z,r[10]=ps.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],c=n[8],f=n[12],p=n[1],m=n[5],y=n[9],v=n[13],x=n[2],w=n[6],S=n[10],M=n[14],C=n[3],b=n[7],R=n[11],O=n[15],F=r[0],N=r[4],U=r[8],J=r[12],B=r[1],L=r[5],ne=r[9],ie=r[13],ce=r[2],de=r[6],le=r[10],ye=r[14],G=r[3],Z=r[7],z=r[11],Y=r[15];return s[0]=o*F+l*B+c*ce+f*G,s[4]=o*N+l*L+c*de+f*Z,s[8]=o*U+l*ne+c*le+f*z,s[12]=o*J+l*ie+c*ye+f*Y,s[1]=p*F+m*B+y*ce+v*G,s[5]=p*N+m*L+y*de+v*Z,s[9]=p*U+m*ne+y*le+v*z,s[13]=p*J+m*ie+y*ye+v*Y,s[2]=x*F+w*B+S*ce+M*G,s[6]=x*N+w*L+S*de+M*Z,s[10]=x*U+w*ne+S*le+M*z,s[14]=x*J+w*ie+S*ye+M*Y,s[3]=C*F+b*B+R*ce+O*G,s[7]=C*N+b*L+R*de+O*Z,s[11]=C*U+b*ne+R*le+O*z,s[15]=C*J+b*ie+R*ye+O*Y,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],f=e[13],p=e[2],m=e[6],y=e[10],v=e[14],x=e[3],w=e[7],S=e[11],M=e[15];return x*(+s*c*m-r*f*m-s*l*y+n*f*y+r*l*v-n*c*v)+w*(+t*c*v-t*f*y+s*o*y-r*o*v+r*f*p-s*c*p)+S*(+t*f*m-t*l*v-s*o*m+n*o*v+s*l*p-n*f*p)+M*(-r*l*p-t*c*m+t*l*y+r*o*m-n*o*y+n*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],f=e[7],p=e[8],m=e[9],y=e[10],v=e[11],x=e[12],w=e[13],S=e[14],M=e[15],C=m*S*f-w*y*f+w*c*v-l*S*v-m*c*M+l*y*M,b=x*y*f-p*S*f-x*c*v+o*S*v+p*c*M-o*y*M,R=p*w*f-x*m*f+x*l*v-o*w*v-p*l*M+o*m*M,O=x*m*c-p*w*c-x*l*y+o*w*y+p*l*S-o*m*S,F=t*C+n*b+r*R+s*O;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/F;return e[0]=C*N,e[1]=(w*y*s-m*S*s-w*r*v+n*S*v+m*r*M-n*y*M)*N,e[2]=(l*S*s-w*c*s+w*r*f-n*S*f-l*r*M+n*c*M)*N,e[3]=(m*c*s-l*y*s-m*r*f+n*y*f+l*r*v-n*c*v)*N,e[4]=b*N,e[5]=(p*S*s-x*y*s+x*r*v-t*S*v-p*r*M+t*y*M)*N,e[6]=(x*c*s-o*S*s-x*r*f+t*S*f+o*r*M-t*c*M)*N,e[7]=(o*y*s-p*c*s+p*r*f-t*y*f-o*r*v+t*c*v)*N,e[8]=R*N,e[9]=(x*m*s-p*w*s-x*n*v+t*w*v+p*n*M-t*m*M)*N,e[10]=(o*w*s-x*l*s+x*n*f-t*w*f-o*n*M+t*l*M)*N,e[11]=(p*l*s-o*m*s-p*n*f+t*m*f+o*n*v-t*l*v)*N,e[12]=O*N,e[13]=(p*w*r-x*m*r+x*n*y-t*w*y-p*n*S+t*m*S)*N,e[14]=(x*l*r-o*w*r-x*n*c+t*w*c+o*n*S-t*l*S)*N,e[15]=(o*m*r-p*l*r+p*n*c-t*m*c-o*n*y+t*l*y)*N,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,c=e.z,f=s*o,p=s*l;return this.set(f*o+n,f*l-r*c,f*c+r*l,0,f*l+r*c,p*l+n,p*c-r*o,0,f*c-r*l,p*c+r*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,f=s+s,p=o+o,m=l+l,y=s*f,v=s*p,x=s*m,w=o*p,S=o*m,M=l*m,C=c*f,b=c*p,R=c*m,O=n.x,F=n.y,N=n.z;return r[0]=(1-(w+M))*O,r[1]=(v+R)*O,r[2]=(x-b)*O,r[3]=0,r[4]=(v-R)*F,r[5]=(1-(y+M))*F,r[6]=(S+C)*F,r[7]=0,r[8]=(x+b)*N,r[9]=(S-C)*N,r[10]=(1-(y+w))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=_h.set(r[0],r[1],r[2]).length();const o=_h.set(r[4],r[5],r[6]).length(),l=_h.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],xo.copy(this);const f=1/s,p=1/o,m=1/l;return xo.elements[0]*=f,xo.elements[1]*=f,xo.elements[2]*=f,xo.elements[4]*=p,xo.elements[5]*=p,xo.elements[6]*=p,xo.elements[8]*=m,xo.elements[9]*=m,xo.elements[10]*=m,t.setFromRotationMatrix(xo),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=oa){const c=this.elements,f=2*s/(t-e),p=2*s/(n-r),m=(t+e)/(t-e),y=(n+r)/(n-r);let v,x;if(l===oa)v=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(l===rm)v=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=p,c[9]=y,c[13]=0,c[2]=0,c[6]=0,c[10]=v,c[14]=x,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=oa){const c=this.elements,f=1/(t-e),p=1/(n-r),m=1/(o-s),y=(t+e)*f,v=(n+r)*p;let x,w;if(l===oa)x=(o+s)*m,w=-2*m;else if(l===rm)x=s*m,w=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-y,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-v,c[2]=0,c[6]=0,c[10]=w,c[14]=-x,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _h=new W,xo=new Tt,gD=new W(0,0,0),yD=new W(1,1,1),tc=new W,Vg=new W,ps=new W,Nw=new Tt,Ow=new ki;class Fr{constructor(e=0,t=0,n=0,r=Fr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],f=r[5],p=r[9],m=r[2],y=r[6],v=r[10];switch(t){case"XYZ":this._y=Math.asin($n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,v),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-$n(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,v),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin($n(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-m,v),this._z=Math.atan2(-o,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-$n(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(y,v),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,f));break;case"YZX":this._z=Math.asin($n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,v));break;case"XZY":this._z=Math.asin(-$n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Nw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Nw,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ow.setFromEuler(this),this.setFromQuaternion(Ow,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fr.DEFAULT_ORDER="XYZ";class Vu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let vD=0;const kw=new W,Ah=new ki,Va=new Tt,Wg=new W,hp=new W,xD=new W,_D=new ki,Uw=new W(1,0,0),zw=new W(0,1,0),Hw=new W(0,0,1),Gw={type:"added"},AD={type:"removed"},Sh={type:"childadded",child:null},Fx={type:"childremoved",child:null};class ln extends Do{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vD++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DEFAULT_UP.clone();const e=new W,t=new Fr,n=new ki,r=new W(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tt},normalMatrix:{value:new Yt}}),this.matrix=new Tt,this.matrixWorld=new Tt,this.matrixAutoUpdate=ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Vu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ah.setFromAxisAngle(e,t),this.quaternion.multiply(Ah),this}rotateOnWorldAxis(e,t){return Ah.setFromAxisAngle(e,t),this.quaternion.premultiply(Ah),this}rotateX(e){return this.rotateOnAxis(Uw,e)}rotateY(e){return this.rotateOnAxis(zw,e)}rotateZ(e){return this.rotateOnAxis(Hw,e)}translateOnAxis(e,t){return kw.copy(e).applyQuaternion(this.quaternion),this.position.add(kw.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Uw,e)}translateY(e){return this.translateOnAxis(zw,e)}translateZ(e){return this.translateOnAxis(Hw,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Va.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Wg.copy(e):Wg.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Va.lookAt(hp,Wg,this.up):Va.lookAt(Wg,hp,this.up),this.quaternion.setFromRotationMatrix(Va),r&&(Va.extractRotation(r.matrixWorld),Ah.setFromRotationMatrix(Va),this.quaternion.premultiply(Ah.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Gw),Sh.child=e,this.dispatchEvent(Sh),Sh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(AD),Fx.child=e,this.dispatchEvent(Fx),Fx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Va.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Va.multiply(e.parent.matrixWorld)),e.applyMatrix4(Va),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Gw),Sh.child=e,this.dispatchEvent(Sh),Sh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,e,xD),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,_D,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const m=c[f];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=o(e.geometries),c=o(e.materials),f=o(e.textures),p=o(e.images),m=o(e.shapes),y=o(e.skeletons),v=o(e.animations),x=o(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),m.length>0&&(n.shapes=m),y.length>0&&(n.skeletons=y),v.length>0&&(n.animations=v),x.length>0&&(n.nodes=x)}return n.object=r,n;function o(l){const c=[];for(const f in l){const p=l[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}ln.DEFAULT_UP=new W(0,1,0);ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _o=new W,Wa=new W,Nx=new W,ja=new W,Mh=new W,wh=new W,Vw=new W,Ox=new W,kx=new W,Ux=new W,zx=new yn,Hx=new yn,Gx=new yn;class $r{constructor(e=new W,t=new W,n=new W){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),_o.subVectors(e,t),r.cross(_o);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){_o.subVectors(r,t),Wa.subVectors(n,t),Nx.subVectors(e,t);const o=_o.dot(_o),l=_o.dot(Wa),c=_o.dot(Nx),f=Wa.dot(Wa),p=Wa.dot(Nx),m=o*f-l*l;if(m===0)return s.set(0,0,0),null;const y=1/m,v=(f*c-l*p)*y,x=(o*p-l*c)*y;return s.set(1-v-x,x,v)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ja)===null?!1:ja.x>=0&&ja.y>=0&&ja.x+ja.y<=1}static getInterpolation(e,t,n,r,s,o,l,c){return this.getBarycoord(e,t,n,r,ja)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,ja.x),c.addScaledVector(o,ja.y),c.addScaledVector(l,ja.z),c)}static getInterpolatedAttribute(e,t,n,r,s,o){return zx.setScalar(0),Hx.setScalar(0),Gx.setScalar(0),zx.fromBufferAttribute(e,t),Hx.fromBufferAttribute(e,n),Gx.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(zx,s.x),o.addScaledVector(Hx,s.y),o.addScaledVector(Gx,s.z),o}static isFrontFacing(e,t,n,r){return _o.subVectors(n,t),Wa.subVectors(e,t),_o.cross(Wa).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _o.subVectors(this.c,this.b),Wa.subVectors(this.a,this.b),_o.cross(Wa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return $r.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return $r.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return $r.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return $r.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return $r.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,l;Mh.subVectors(r,n),wh.subVectors(s,n),Ox.subVectors(e,n);const c=Mh.dot(Ox),f=wh.dot(Ox);if(c<=0&&f<=0)return t.copy(n);kx.subVectors(e,r);const p=Mh.dot(kx),m=wh.dot(kx);if(p>=0&&m<=p)return t.copy(r);const y=c*m-p*f;if(y<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(n).addScaledVector(Mh,o);Ux.subVectors(e,s);const v=Mh.dot(Ux),x=wh.dot(Ux);if(x>=0&&v<=x)return t.copy(s);const w=v*f-c*x;if(w<=0&&f>=0&&x<=0)return l=f/(f-x),t.copy(n).addScaledVector(wh,l);const S=p*x-v*m;if(S<=0&&m-p>=0&&v-x>=0)return Vw.subVectors(s,r),l=(m-p)/(m-p+(v-x)),t.copy(r).addScaledVector(Vw,l);const M=1/(S+w+y);return o=w*M,l=y*M,t.copy(n).addScaledVector(Mh,o).addScaledVector(wh,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const FT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nc={h:0,s:0,l:0},jg={h:0,s:0,l:0};function Vx(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class it{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,_n.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=_n.workingColorSpace){return this.r=e,this.g=t,this.b=n,_n.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=_n.workingColorSpace){if(e=wS(e,1),t=$n(t,0,1),n=$n(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=Vx(o,s,e+1/3),this.g=Vx(o,s,e),this.b=Vx(o,s,e-1/3)}return _n.toWorkingColorSpace(this,r),this}setStyle(e,t=Gs){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gs){const n=FT[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yh(e.r),this.g=Yh(e.g),this.b=Yh(e.b),this}copyLinearToSRGB(e){return this.r=bx(e.r),this.g=bx(e.g),this.b=bx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gs){return _n.fromWorkingColorSpace(ur.copy(this),e),Math.round($n(ur.r*255,0,255))*65536+Math.round($n(ur.g*255,0,255))*256+Math.round($n(ur.b*255,0,255))}getHexString(e=Gs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=_n.workingColorSpace){_n.fromWorkingColorSpace(ur.copy(this),t);const n=ur.r,r=ur.g,s=ur.b,o=Math.max(n,r,s),l=Math.min(n,r,s);let c,f;const p=(l+o)/2;if(l===o)c=0,f=0;else{const m=o-l;switch(f=p<=.5?m/(o+l):m/(2-o-l),o){case n:c=(r-s)/m+(r<s?6:0);break;case r:c=(s-n)/m+2;break;case s:c=(n-r)/m+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=_n.workingColorSpace){return _n.fromWorkingColorSpace(ur.copy(this),t),e.r=ur.r,e.g=ur.g,e.b=ur.b,e}getStyle(e=Gs){_n.fromWorkingColorSpace(ur.copy(this),e);const t=ur.r,n=ur.g,r=ur.b;return e!==Gs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(nc),this.setHSL(nc.h+e,nc.s+t,nc.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(nc),e.getHSL(jg);const n=Hp(nc.h,jg.h,t),r=Hp(nc.s,jg.s,t),s=Hp(nc.l,jg.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ur=new it;it.NAMES=FT;let SD=0;class Si extends Do{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:SD++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=Uu,this.side=fa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Jy,this.blendDst=Ky,this.blendEquation=uc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new it(0,0,0),this.blendAlpha=0,this.depthFunc=Xu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Eu,this.stencilZFail=Eu,this.stencilZPass=Eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Uu&&(n.blending=this.blending),this.side!==fa&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==Jy&&(n.blendSrc=this.blendSrc),this.blendDst!==Ky&&(n.blendDst=this.blendDst),this.blendEquation!==uc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Xu&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Eu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Eu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Eu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const l in s){const c=s[l];delete c.metadata,o.push(c)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class xs extends Si{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fr,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qa=MD();function MD(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(n[c]=0,n[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(n[c]=1024>>-f-14,n[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(n[c]=f+15<<10,n[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(n[c]=31744,n[c|256]=64512,r[c]=24,r[c|256]=24):(n[c]=31744,n[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;(f&8388608)===0;)f<<=1,p-=8388608;f&=-8388609,p+=947912704,s[c]=f|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:l}}function Zr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=$n(i,-65504,65504),qa.floatView[0]=i;const e=qa.uint32View[0],t=e>>23&511;return qa.baseTable[t]+((e&8388607)>>qa.shiftTable[t])}function Bp(i){const e=i>>10;return qa.uint32View[0]=qa.mantissaTable[qa.offsetTable[e]+(i&1023)]+qa.exponentTable[e],qa.floatView[0]}const wD={toHalfFloat:Zr,fromHalfFloat:Bp},_i=new W,Xg=new De;class pn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=im,this.updateRanges=[],this.gpuType=es,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Xg.fromBufferAttribute(this,t),Xg.applyMatrix3(e),this.setXY(t,Xg.x,Xg.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix3(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyMatrix4(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.applyNormalMatrix(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)_i.fromBufferAttribute(this,t),_i.transformDirection(e),this.setXYZ(t,_i.x,_i.y,_i.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Br(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Br(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Br(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Br(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Br(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==im&&(e.usage=this.usage),e}}class ED extends pn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class CD extends pn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class bD extends pn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class TD extends pn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class bS extends pn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class RD extends pn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class TS extends pn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class PD extends pn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Bp(this.array[e*this.itemSize]);return this.normalized&&(t=Br(t,this.array)),t}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize]=Zr(t),this}getY(e){let t=Bp(this.array[e*this.itemSize+1]);return this.normalized&&(t=Br(t,this.array)),t}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+1]=Zr(t),this}getZ(e){let t=Bp(this.array[e*this.itemSize+2]);return this.normalized&&(t=Br(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+2]=Zr(t),this}getW(e){let t=Bp(this.array[e*this.itemSize+3]);return this.normalized&&(t=Br(t,this.array)),t}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.array[e*this.itemSize+3]=Zr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(n),this.array[e+2]=Zr(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.array[e+0]=Zr(t),this.array[e+1]=Zr(n),this.array[e+2]=Zr(r),this.array[e+3]=Zr(s),this}}class St extends pn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ID=0;const Os=new Tt,Wx=new ln,Eh=new W,ms=new pr,dp=new pr,Oi=new W;class jt extends Do{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ID++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IT(e)?TS:bS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Yt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Os.makeRotationFromQuaternion(e),this.applyMatrix4(Os),this}rotateX(e){return Os.makeRotationX(e),this.applyMatrix4(Os),this}rotateY(e){return Os.makeRotationY(e),this.applyMatrix4(Os),this}rotateZ(e){return Os.makeRotationZ(e),this.applyMatrix4(Os),this}translate(e,t,n){return Os.makeTranslation(e,t,n),this.applyMatrix4(Os),this}scale(e,t,n){return Os.makeScale(e,t,n),this.applyMatrix4(Os),this}lookAt(e){return Wx.lookAt(e),Wx.updateMatrix(),this.applyMatrix4(Wx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Eh).negate(),this.translate(Eh.x,Eh.y,Eh.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new St(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new pr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new W(-1/0,-1/0,-1/0),new W(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];ms.setFromBufferAttribute(s),this.morphTargetsRelative?(Oi.addVectors(this.boundingBox.min,ms.min),this.boundingBox.expandByPoint(Oi),Oi.addVectors(this.boundingBox.max,ms.max),this.boundingBox.expandByPoint(Oi)):(this.boundingBox.expandByPoint(ms.min),this.boundingBox.expandByPoint(ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new W,1/0);return}if(e){const n=this.boundingSphere.center;if(ms.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];dp.setFromBufferAttribute(l),this.morphTargetsRelative?(Oi.addVectors(ms.min,dp.min),ms.expandByPoint(Oi),Oi.addVectors(ms.max,dp.max),ms.expandByPoint(Oi)):(ms.expandByPoint(dp.min),ms.expandByPoint(dp.max))}ms.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Oi.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Oi));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],c=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)Oi.fromBufferAttribute(l,f),c&&(Eh.fromBufferAttribute(e,f),Oi.add(Eh)),r=Math.max(r,n.distanceToSquared(Oi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pn(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),l=[],c=[];for(let U=0;U<n.count;U++)l[U]=new W,c[U]=new W;const f=new W,p=new W,m=new W,y=new De,v=new De,x=new De,w=new W,S=new W;function M(U,J,B){f.fromBufferAttribute(n,U),p.fromBufferAttribute(n,J),m.fromBufferAttribute(n,B),y.fromBufferAttribute(s,U),v.fromBufferAttribute(s,J),x.fromBufferAttribute(s,B),p.sub(f),m.sub(f),v.sub(y),x.sub(y);const L=1/(v.x*x.y-x.x*v.y);isFinite(L)&&(w.copy(p).multiplyScalar(x.y).addScaledVector(m,-v.y).multiplyScalar(L),S.copy(m).multiplyScalar(v.x).addScaledVector(p,-x.x).multiplyScalar(L),l[U].add(w),l[J].add(w),l[B].add(w),c[U].add(S),c[J].add(S),c[B].add(S))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let U=0,J=C.length;U<J;++U){const B=C[U],L=B.start,ne=B.count;for(let ie=L,ce=L+ne;ie<ce;ie+=3)M(e.getX(ie+0),e.getX(ie+1),e.getX(ie+2))}const b=new W,R=new W,O=new W,F=new W;function N(U){O.fromBufferAttribute(r,U),F.copy(O);const J=l[U];b.copy(J),b.sub(O.multiplyScalar(O.dot(J))).normalize(),R.crossVectors(F,J);const L=R.dot(c[U])<0?-1:1;o.setXYZW(U,b.x,b.y,b.z,L)}for(let U=0,J=C.length;U<J;++U){const B=C[U],L=B.start,ne=B.count;for(let ie=L,ce=L+ne;ie<ce;ie+=3)N(e.getX(ie+0)),N(e.getX(ie+1)),N(e.getX(ie+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new pn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,v=n.count;y<v;y++)n.setXYZ(y,0,0,0);const r=new W,s=new W,o=new W,l=new W,c=new W,f=new W,p=new W,m=new W;if(e)for(let y=0,v=e.count;y<v;y+=3){const x=e.getX(y+0),w=e.getX(y+1),S=e.getX(y+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,S),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),l.fromBufferAttribute(n,x),c.fromBufferAttribute(n,w),f.fromBufferAttribute(n,S),l.add(p),c.add(p),f.add(p),n.setXYZ(x,l.x,l.y,l.z),n.setXYZ(w,c.x,c.y,c.z),n.setXYZ(S,f.x,f.y,f.z)}else for(let y=0,v=t.count;y<v;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),o.fromBufferAttribute(t,y+2),p.subVectors(o,s),m.subVectors(r,s),p.cross(m),n.setXYZ(y+0,p.x,p.y,p.z),n.setXYZ(y+1,p.x,p.y,p.z),n.setXYZ(y+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Oi.fromBufferAttribute(e,t),Oi.normalize(),e.setXYZ(t,Oi.x,Oi.y,Oi.z)}toNonIndexed(){function e(l,c){const f=l.array,p=l.itemSize,m=l.normalized,y=new f.constructor(c.length*p);let v=0,x=0;for(let w=0,S=c.length;w<S;w++){l.isInterleavedBufferAttribute?v=c[w]*l.data.stride+l.offset:v=c[w]*p;for(let M=0;M<p;M++)y[x++]=f[v++]}return new pn(y,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jt,n=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,n);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const c=[],f=s[l];for(let p=0,m=f.length;p<m;p++){const y=f[p],v=e(y,n);c.push(v)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,c=o.length;l<c;l++){const f=o[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const f=n[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let m=0,y=f.length;m<y;m++){const v=f[m];p.push(v.toJSON(e.data))}p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const f in r){const p=r[f];this.setAttribute(f,p.clone(t))}const s=e.morphAttributes;for(const f in s){const p=[],m=s[f];for(let y=0,v=m.length;y<v;y++)p.push(m[y].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let f=0,p=o.length;f<p;f++){const m=o[f];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ww=new Tt,uu=new sf,Jg=new $i,jw=new W,Kg=new W,Yg=new W,qg=new W,jx=new W,Qg=new W,Xw=new W,Zg=new W;class ti extends ln{constructor(e=new jt,t=new xs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Qg.set(0,0,0);for(let c=0,f=s.length;c<f;c++){const p=l[c],m=s[c];p!==0&&(jx.fromBufferAttribute(m,e),o?Qg.addScaledVector(jx,p):Qg.addScaledVector(jx.sub(t),p))}t.add(Qg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Jg.copy(n.boundingSphere),Jg.applyMatrix4(s),uu.copy(e.ray).recast(e.near),!(Jg.containsPoint(uu.origin)===!1&&(uu.intersectSphere(Jg,jw)===null||uu.origin.distanceToSquared(jw)>(e.far-e.near)**2))&&(Ww.copy(s).invert(),uu.copy(e.ray).applyMatrix4(Ww),!(n.boundingBox!==null&&uu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,uu)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,f=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,y=s.groups,v=s.drawRange;if(l!==null)if(Array.isArray(o))for(let x=0,w=y.length;x<w;x++){const S=y[x],M=o[S.materialIndex],C=Math.max(S.start,v.start),b=Math.min(l.count,Math.min(S.start+S.count,v.start+v.count));for(let R=C,O=b;R<O;R+=3){const F=l.getX(R),N=l.getX(R+1),U=l.getX(R+2);r=$g(this,M,e,n,f,p,m,F,N,U),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,v.start),w=Math.min(l.count,v.start+v.count);for(let S=x,M=w;S<M;S+=3){const C=l.getX(S),b=l.getX(S+1),R=l.getX(S+2);r=$g(this,o,e,n,f,p,m,C,b,R),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let x=0,w=y.length;x<w;x++){const S=y[x],M=o[S.materialIndex],C=Math.max(S.start,v.start),b=Math.min(c.count,Math.min(S.start+S.count,v.start+v.count));for(let R=C,O=b;R<O;R+=3){const F=R,N=R+1,U=R+2;r=$g(this,M,e,n,f,p,m,F,N,U),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const x=Math.max(0,v.start),w=Math.min(c.count,v.start+v.count);for(let S=x,M=w;S<M;S+=3){const C=S,b=S+1,R=S+2;r=$g(this,o,e,n,f,p,m,C,b,R),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function BD(i,e,t,n,r,s,o,l){let c;if(e.side===Dr?c=n.intersectTriangle(o,s,r,!0,l):c=n.intersectTriangle(r,s,o,e.side===fa,l),c===null)return null;Zg.copy(l),Zg.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(Zg);return f<t.near||f>t.far?null:{distance:f,point:Zg.clone(),object:i}}function $g(i,e,t,n,r,s,o,l,c,f){i.getVertexPosition(l,Kg),i.getVertexPosition(c,Yg),i.getVertexPosition(f,qg);const p=BD(i,e,t,n,Kg,Yg,qg,Xw);if(p){const m=new W;$r.getBarycoord(Xw,Kg,Yg,qg,m),r&&(p.uv=$r.getInterpolatedAttribute(r,l,c,f,m,new De)),s&&(p.uv1=$r.getInterpolatedAttribute(s,l,c,f,m,new De)),o&&(p.normal=$r.getInterpolatedAttribute(o,l,c,f,m,new W),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const y={a:l,b:c,c:f,normal:new W,materialIndex:0};$r.getNormal(Kg,Yg,qg,y.normal),p.face=y,p.barycoord=m}return p}class of extends jt{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const c=[],f=[],p=[],m=[];let y=0,v=0;x("z","y","x",-1,-1,n,t,e,o,s,0),x("z","y","x",1,-1,n,t,-e,o,s,1),x("x","z","y",1,1,e,n,t,r,o,2),x("x","z","y",1,-1,e,n,-t,r,o,3),x("x","y","z",1,-1,e,t,n,r,s,4),x("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(c),this.setAttribute("position",new St(f,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(m,2));function x(w,S,M,C,b,R,O,F,N,U,J){const B=R/N,L=O/U,ne=R/2,ie=O/2,ce=F/2,de=N+1,le=U+1;let ye=0,G=0;const Z=new W;for(let z=0;z<le;z++){const Y=z*L-ie;for(let pe=0;pe<de;pe++){const Ne=pe*B-ne;Z[w]=Ne*C,Z[S]=Y*b,Z[M]=ce,f.push(Z.x,Z.y,Z.z),Z[w]=0,Z[S]=0,Z[M]=F>0?1:-1,p.push(Z.x,Z.y,Z.z),m.push(pe/N),m.push(1-z/U),ye+=1}}for(let z=0;z<U;z++)for(let Y=0;Y<N;Y++){const pe=y+Y+de*z,Ne=y+Y+de*(z+1),oe=y+(Y+1)+de*(z+1),ve=y+(Y+1)+de*z;c.push(pe,Ne,ve),c.push(Ne,oe,ve),G+=6}l.addGroup(v,G,J),v+=G,y+=ye}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new of(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rd(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Pr(i){const e={};for(let t=0;t<i.length;t++){const n=rd(i[t]);for(const r in n)e[r]=n[r]}return e}function DD(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function NT(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:_n.workingColorSpace}const OT={clone:rd,merge:Pr};var LD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,FD=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ro extends Si{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=LD,this.fragmentShader=FD,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rd(e.uniforms),this.uniformsGroups=DD(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class wm extends ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tt,this.projectionMatrix=new Tt,this.projectionMatrixInverse=new Tt,this.coordinateSystem=oa}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ic=new W,Jw=new De,Kw=new De;class Ln extends wm{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=id*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Gu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return id*2*Math.atan(Math.tan(Gu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){ic.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ic.x,ic.y).multiplyScalar(-e/ic.z),ic.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ic.x,ic.y).multiplyScalar(-e/ic.z)}getViewSize(e,t){return this.getViewBounds(e,Jw,Kw),t.subVectors(Kw,Jw)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Gu*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,f=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*n/f,r*=o.width/c,n*=o.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Ch=-90,bh=1;class RS extends ln{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ln(Ch,bh,e,t);r.layers=this.layers,this.add(r);const s=new Ln(Ch,bh,e,t);s.layers=this.layers,this.add(s);const o=new Ln(Ch,bh,e,t);o.layers=this.layers,this.add(o);const l=new Ln(Ch,bh,e,t);l.layers=this.layers,this.add(l);const c=new Ln(Ch,bh,e,t);c.layers=this.layers,this.add(c);const f=new Ln(Ch,bh,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,l,c]=t;for(const f of t)this.remove(f);if(e===oa)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===rm)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,c,f,p]=this.children,m=e.getRenderTarget(),y=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,l),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,f),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,r),e.render(t,p),e.setRenderTarget(m,y,v),e.xr.enabled=x,n.texture.needsPMREMUpdate=!0}}class Em extends Pn{constructor(e,t,n,r,s,o,l,c,f,p){e=e!==void 0?e:[],t=t!==void 0?t:ol,super(e,t,n,r,s,o,l,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PS extends To{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Em(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ei}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new of(5,5,5),s=new Ro({name:"CubemapFromEquirect",uniforms:rd(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Dr,blending:el});s.uniforms.tEquirect.value=t;const o=new ti(r,s),l=t.minFilter;return t.minFilter===Ws&&(t.minFilter=ei),new RS(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const Xx=new W,ND=new W,OD=new Yt;class Ka{constructor(e=new W(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Xx.subVectors(n,t).cross(ND.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Xx),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||OD.getNormalMatrix(e),r=this.coplanarPoint(Xx).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fu=new $i,ey=new W;class Cm{constructor(e=new Ka,t=new Ka,n=new Ka,r=new Ka,s=new Ka,o=new Ka){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=oa){const n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],f=r[4],p=r[5],m=r[6],y=r[7],v=r[8],x=r[9],w=r[10],S=r[11],M=r[12],C=r[13],b=r[14],R=r[15];if(n[0].setComponents(c-s,y-f,S-v,R-M).normalize(),n[1].setComponents(c+s,y+f,S+v,R+M).normalize(),n[2].setComponents(c+o,y+p,S+x,R+C).normalize(),n[3].setComponents(c-o,y-p,S-x,R-C).normalize(),n[4].setComponents(c-l,y-m,S-w,R-b).normalize(),t===oa)n[5].setComponents(c+l,y+m,S+w,R+b).normalize();else if(t===rm)n[5].setComponents(l,m,w,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fu)}intersectsSprite(e){return fu.center.set(0,0,0),fu.radius=.7071067811865476,fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(fu)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(ey.x=r.normal.x>0?e.max.x:e.min.x,ey.y=r.normal.y>0?e.max.y:e.min.y,ey.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ey)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function kT(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function kD(i){const e=new WeakMap;function t(l,c){const f=l.array,p=l.usage,m=f.byteLength,y=i.createBuffer();i.bindBuffer(c,y),i.bufferData(c,f,p),l.onUploadCallback();let v;if(f instanceof Float32Array)v=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?v=i.HALF_FLOAT:v=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=i.SHORT;else if(f instanceof Uint32Array)v=i.UNSIGNED_INT;else if(f instanceof Int32Array)v=i.INT;else if(f instanceof Int8Array)v=i.BYTE;else if(f instanceof Uint8Array)v=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:m}}function n(l,c,f){const p=c.array,m=c.updateRanges;if(i.bindBuffer(f,l),m.length===0)i.bufferSubData(f,0,p);else{m.sort((v,x)=>v.start-x.start);let y=0;for(let v=1;v<m.length;v++){const x=m[y],w=m[v];w.start<=x.start+x.count+1?x.count=Math.max(x.count,w.start+w.count-x.start):(++y,m[y]=w)}m.length=y+1;for(let v=0,x=m.length;v<x;v++){const w=m[v];i.bufferSubData(f,w.start*p.BYTES_PER_ELEMENT,p,w.start,w.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(i.deleteBuffer(c.buffer),e.delete(l))}function o(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const p=e.get(l);(!p||p.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,c),f.version=l.version}}return{get:r,remove:s,update:o}}class md extends jt{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,l=Math.floor(n),c=Math.floor(r),f=l+1,p=c+1,m=e/l,y=t/c,v=[],x=[],w=[],S=[];for(let M=0;M<p;M++){const C=M*y-o;for(let b=0;b<f;b++){const R=b*m-s;x.push(R,-C,0),w.push(0,0,1),S.push(b/l),S.push(1-M/c)}}for(let M=0;M<c;M++)for(let C=0;C<l;C++){const b=C+f*M,R=C+f*(M+1),O=C+1+f*(M+1),F=C+1+f*M;v.push(b,R,F),v.push(R,O,F)}this.setIndex(v),this.setAttribute("position",new St(x,3)),this.setAttribute("normal",new St(w,3)),this.setAttribute("uv",new St(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new md(e.width,e.height,e.widthSegments,e.heightSegments)}}var UD=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zD=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,HD=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,GD=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VD=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,WD=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jD=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,XD=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JD=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,KD=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,YD=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,qD=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,QD=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ZD=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$D=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,eL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,tL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,iL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,sL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,oL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,aL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,lL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,uL=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,fL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,dL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,pL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mL="gl_FragColor = linearToOutputTexel( gl_FragColor );",gL=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,yL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,vL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,xL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_L=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,AL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,SL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ML=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,EL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,CL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,bL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,TL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,RL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,IL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,BL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,DL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,LL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,FL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,NL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,OL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kL=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,UL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zL=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,HL=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,GL=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,VL=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WL=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jL=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,XL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JL=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,KL=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,QL=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,ZL=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$L=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,oF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,aF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,cF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,uF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,fF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,mF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,yF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,vF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_F=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,AF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,SF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,MF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,EF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,CF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,bF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,TF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,RF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,PF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,IF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,BF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,DF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,LF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,FF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,NF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,UF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,GF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,WF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,XF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,JF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,KF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,YF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$F=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e3=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t3=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,i3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,o3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,c3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,f3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,d3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p3=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,g3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,y3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$t={alphahash_fragment:UD,alphahash_pars_fragment:zD,alphamap_fragment:HD,alphamap_pars_fragment:GD,alphatest_fragment:VD,alphatest_pars_fragment:WD,aomap_fragment:jD,aomap_pars_fragment:XD,batching_pars_vertex:JD,batching_vertex:KD,begin_vertex:YD,beginnormal_vertex:qD,bsdfs:QD,iridescence_fragment:ZD,bumpmap_pars_fragment:$D,clipping_planes_fragment:eL,clipping_planes_pars_fragment:tL,clipping_planes_pars_vertex:nL,clipping_planes_vertex:iL,color_fragment:rL,color_pars_fragment:sL,color_pars_vertex:oL,color_vertex:aL,common:lL,cube_uv_reflection_fragment:cL,defaultnormal_vertex:uL,displacementmap_pars_vertex:fL,displacementmap_vertex:hL,emissivemap_fragment:dL,emissivemap_pars_fragment:pL,colorspace_fragment:mL,colorspace_pars_fragment:gL,envmap_fragment:yL,envmap_common_pars_fragment:vL,envmap_pars_fragment:xL,envmap_pars_vertex:_L,envmap_physical_pars_fragment:IL,envmap_vertex:AL,fog_vertex:SL,fog_pars_vertex:ML,fog_fragment:wL,fog_pars_fragment:EL,gradientmap_pars_fragment:CL,lightmap_pars_fragment:bL,lights_lambert_fragment:TL,lights_lambert_pars_fragment:RL,lights_pars_begin:PL,lights_toon_fragment:BL,lights_toon_pars_fragment:DL,lights_phong_fragment:LL,lights_phong_pars_fragment:FL,lights_physical_fragment:NL,lights_physical_pars_fragment:OL,lights_fragment_begin:kL,lights_fragment_maps:UL,lights_fragment_end:zL,logdepthbuf_fragment:HL,logdepthbuf_pars_fragment:GL,logdepthbuf_pars_vertex:VL,logdepthbuf_vertex:WL,map_fragment:jL,map_pars_fragment:XL,map_particle_fragment:JL,map_particle_pars_fragment:KL,metalnessmap_fragment:YL,metalnessmap_pars_fragment:qL,morphinstance_vertex:QL,morphcolor_vertex:ZL,morphnormal_vertex:$L,morphtarget_pars_vertex:eF,morphtarget_vertex:tF,normal_fragment_begin:nF,normal_fragment_maps:iF,normal_pars_fragment:rF,normal_pars_vertex:sF,normal_vertex:oF,normalmap_pars_fragment:aF,clearcoat_normal_fragment_begin:lF,clearcoat_normal_fragment_maps:cF,clearcoat_pars_fragment:uF,iridescence_pars_fragment:fF,opaque_fragment:hF,packing:dF,premultiplied_alpha_fragment:pF,project_vertex:mF,dithering_fragment:gF,dithering_pars_fragment:yF,roughnessmap_fragment:vF,roughnessmap_pars_fragment:xF,shadowmap_pars_fragment:_F,shadowmap_pars_vertex:AF,shadowmap_vertex:SF,shadowmask_pars_fragment:MF,skinbase_vertex:wF,skinning_pars_vertex:EF,skinning_vertex:CF,skinnormal_vertex:bF,specularmap_fragment:TF,specularmap_pars_fragment:RF,tonemapping_fragment:PF,tonemapping_pars_fragment:IF,transmission_fragment:BF,transmission_pars_fragment:DF,uv_pars_fragment:LF,uv_pars_vertex:FF,uv_vertex:NF,worldpos_vertex:OF,background_vert:kF,background_frag:UF,backgroundCube_vert:zF,backgroundCube_frag:HF,cube_vert:GF,cube_frag:VF,depth_vert:WF,depth_frag:jF,distanceRGBA_vert:XF,distanceRGBA_frag:JF,equirect_vert:KF,equirect_frag:YF,linedashed_vert:qF,linedashed_frag:QF,meshbasic_vert:ZF,meshbasic_frag:$F,meshlambert_vert:e3,meshlambert_frag:t3,meshmatcap_vert:n3,meshmatcap_frag:i3,meshnormal_vert:r3,meshnormal_frag:s3,meshphong_vert:o3,meshphong_frag:a3,meshphysical_vert:l3,meshphysical_frag:c3,meshtoon_vert:u3,meshtoon_frag:f3,points_vert:h3,points_frag:d3,shadow_vert:p3,shadow_frag:m3,sprite_vert:g3,sprite_frag:y3},at={common:{diffuse:{value:new it(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},envMapRotation:{value:new Yt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new it(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new it(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new it(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}}},So={basic:{uniforms:Pr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:Pr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new it(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:Pr([at.common,at.specularmap,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.fog,at.lights,{emissive:{value:new it(0)},specular:{value:new it(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:Pr([at.common,at.envmap,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.roughnessmap,at.metalnessmap,at.fog,at.lights,{emissive:{value:new it(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:Pr([at.common,at.aomap,at.lightmap,at.emissivemap,at.bumpmap,at.normalmap,at.displacementmap,at.gradientmap,at.fog,at.lights,{emissive:{value:new it(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:Pr([at.common,at.bumpmap,at.normalmap,at.displacementmap,at.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:Pr([at.points,at.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:Pr([at.common,at.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:Pr([at.common,at.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:Pr([at.common,at.bumpmap,at.normalmap,at.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:Pr([at.sprite,at.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Yt}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distanceRGBA:{uniforms:Pr([at.common,at.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distanceRGBA_vert,fragmentShader:$t.distanceRGBA_frag},shadow:{uniforms:Pr([at.lights,at.fog,{color:{value:new it(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};So.physical={uniforms:Pr([So.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new it(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new it(0)},specularColor:{value:new it(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yt}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};const ty={r:0,b:0,g:0},hu=new Fr,v3=new Tt;function x3(i,e,t,n,r,s,o){const l=new it(0);let c=s===!0?0:1,f,p,m=null,y=0,v=null;function x(C){let b=C.isScene===!0?C.background:null;return b&&b.isTexture&&(b=(C.backgroundBlurriness>0?t:e).get(b)),b}function w(C){let b=!1;const R=x(C);R===null?M(l,c):R&&R.isColor&&(M(R,1),b=!0);const O=i.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||b)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function S(C,b){const R=x(b);R&&(R.isCubeTexture||R.mapping===dd)?(p===void 0&&(p=new ti(new of(1,1,1),new Ro({name:"BackgroundCubeMaterial",uniforms:rd(So.backgroundCube.uniforms),vertexShader:So.backgroundCube.vertexShader,fragmentShader:So.backgroundCube.fragmentShader,side:Dr,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(O,F,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),hu.copy(b.backgroundRotation),hu.x*=-1,hu.y*=-1,hu.z*=-1,R.isCubeTexture&&R.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),p.material.uniforms.envMap.value=R,p.material.uniforms.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(v3.makeRotationFromEuler(hu)),p.material.toneMapped=_n.getTransfer(R.colorSpace)!==Dn,(m!==R||y!==R.version||v!==i.toneMapping)&&(p.material.needsUpdate=!0,m=R,y=R.version,v=i.toneMapping),p.layers.enableAll(),C.unshift(p,p.geometry,p.material,0,0,null)):R&&R.isTexture&&(f===void 0&&(f=new ti(new md(2,2),new Ro({name:"BackgroundMaterial",uniforms:rd(So.background.uniforms),vertexShader:So.background.vertexShader,fragmentShader:So.background.fragmentShader,side:fa,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=R,f.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,f.material.toneMapped=_n.getTransfer(R.colorSpace)!==Dn,R.matrixAutoUpdate===!0&&R.updateMatrix(),f.material.uniforms.uvTransform.value.copy(R.matrix),(m!==R||y!==R.version||v!==i.toneMapping)&&(f.material.needsUpdate=!0,m=R,y=R.version,v=i.toneMapping),f.layers.enableAll(),C.unshift(f,f.geometry,f.material,0,0,null))}function M(C,b){C.getRGB(ty,NT(i)),n.buffers.color.setClear(ty.r,ty.g,ty.b,b,o)}return{getClearColor:function(){return l},setClearColor:function(C,b=1){l.set(C),c=b,M(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,M(l,c)},render:w,addToRenderList:S}}function _3(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=y(null);let s=r,o=!1;function l(B,L,ne,ie,ce){let de=!1;const le=m(ie,ne,L);s!==le&&(s=le,f(s.object)),de=v(B,ie,ne,ce),de&&x(B,ie,ne,ce),ce!==null&&e.update(ce,i.ELEMENT_ARRAY_BUFFER),(de||o)&&(o=!1,R(B,L,ne,ie),ce!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ce).buffer))}function c(){return i.createVertexArray()}function f(B){return i.bindVertexArray(B)}function p(B){return i.deleteVertexArray(B)}function m(B,L,ne){const ie=ne.wireframe===!0;let ce=n[B.id];ce===void 0&&(ce={},n[B.id]=ce);let de=ce[L.id];de===void 0&&(de={},ce[L.id]=de);let le=de[ie];return le===void 0&&(le=y(c()),de[ie]=le),le}function y(B){const L=[],ne=[],ie=[];for(let ce=0;ce<t;ce++)L[ce]=0,ne[ce]=0,ie[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:ne,attributeDivisors:ie,object:B,attributes:{},index:null}}function v(B,L,ne,ie){const ce=s.attributes,de=L.attributes;let le=0;const ye=ne.getAttributes();for(const G in ye)if(ye[G].location>=0){const z=ce[G];let Y=de[G];if(Y===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(Y=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(Y=B.instanceColor)),z===void 0||z.attribute!==Y||Y&&z.data!==Y.data)return!0;le++}return s.attributesNum!==le||s.index!==ie}function x(B,L,ne,ie){const ce={},de=L.attributes;let le=0;const ye=ne.getAttributes();for(const G in ye)if(ye[G].location>=0){let z=de[G];z===void 0&&(G==="instanceMatrix"&&B.instanceMatrix&&(z=B.instanceMatrix),G==="instanceColor"&&B.instanceColor&&(z=B.instanceColor));const Y={};Y.attribute=z,z&&z.data&&(Y.data=z.data),ce[G]=Y,le++}s.attributes=ce,s.attributesNum=le,s.index=ie}function w(){const B=s.newAttributes;for(let L=0,ne=B.length;L<ne;L++)B[L]=0}function S(B){M(B,0)}function M(B,L){const ne=s.newAttributes,ie=s.enabledAttributes,ce=s.attributeDivisors;ne[B]=1,ie[B]===0&&(i.enableVertexAttribArray(B),ie[B]=1),ce[B]!==L&&(i.vertexAttribDivisor(B,L),ce[B]=L)}function C(){const B=s.newAttributes,L=s.enabledAttributes;for(let ne=0,ie=L.length;ne<ie;ne++)L[ne]!==B[ne]&&(i.disableVertexAttribArray(ne),L[ne]=0)}function b(B,L,ne,ie,ce,de,le){le===!0?i.vertexAttribIPointer(B,L,ne,ce,de):i.vertexAttribPointer(B,L,ne,ie,ce,de)}function R(B,L,ne,ie){w();const ce=ie.attributes,de=ne.getAttributes(),le=L.defaultAttributeValues;for(const ye in de){const G=de[ye];if(G.location>=0){let Z=ce[ye];if(Z===void 0&&(ye==="instanceMatrix"&&B.instanceMatrix&&(Z=B.instanceMatrix),ye==="instanceColor"&&B.instanceColor&&(Z=B.instanceColor)),Z!==void 0){const z=Z.normalized,Y=Z.itemSize,pe=e.get(Z);if(pe===void 0)continue;const Ne=pe.buffer,oe=pe.type,ve=pe.bytesPerElement,be=oe===i.INT||oe===i.UNSIGNED_INT||Z.gpuType===t0;if(Z.isInterleavedBufferAttribute){const Ie=Z.data,Xe=Ie.stride,rt=Z.offset;if(Ie.isInstancedInterleavedBuffer){for(let pt=0;pt<G.locationSize;pt++)M(G.location+pt,Ie.meshPerAttribute);B.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let pt=0;pt<G.locationSize;pt++)S(G.location+pt);i.bindBuffer(i.ARRAY_BUFFER,Ne);for(let pt=0;pt<G.locationSize;pt++)b(G.location+pt,Y/G.locationSize,oe,z,Xe*ve,(rt+Y/G.locationSize*pt)*ve,be)}else{if(Z.isInstancedBufferAttribute){for(let Ie=0;Ie<G.locationSize;Ie++)M(G.location+Ie,Z.meshPerAttribute);B.isInstancedMesh!==!0&&ie._maxInstanceCount===void 0&&(ie._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let Ie=0;Ie<G.locationSize;Ie++)S(G.location+Ie);i.bindBuffer(i.ARRAY_BUFFER,Ne);for(let Ie=0;Ie<G.locationSize;Ie++)b(G.location+Ie,Y/G.locationSize,oe,z,Y*ve,Y/G.locationSize*Ie*ve,be)}}else if(le!==void 0){const z=le[ye];if(z!==void 0)switch(z.length){case 2:i.vertexAttrib2fv(G.location,z);break;case 3:i.vertexAttrib3fv(G.location,z);break;case 4:i.vertexAttrib4fv(G.location,z);break;default:i.vertexAttrib1fv(G.location,z)}}}}C()}function O(){U();for(const B in n){const L=n[B];for(const ne in L){const ie=L[ne];for(const ce in ie)p(ie[ce].object),delete ie[ce];delete L[ne]}delete n[B]}}function F(B){if(n[B.id]===void 0)return;const L=n[B.id];for(const ne in L){const ie=L[ne];for(const ce in ie)p(ie[ce].object),delete ie[ce];delete L[ne]}delete n[B.id]}function N(B){for(const L in n){const ne=n[L];if(ne[B.id]===void 0)continue;const ie=ne[B.id];for(const ce in ie)p(ie[ce].object),delete ie[ce];delete ne[B.id]}}function U(){J(),o=!0,s!==r&&(s=r,f(s.object))}function J(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:U,resetDefaultState:J,dispose:O,releaseStatesOfGeometry:F,releaseStatesOfProgram:N,initAttributes:w,enableAttribute:S,disableUnusedAttributes:C}}function A3(i,e,t){let n;function r(f){n=f}function s(f,p){i.drawArrays(n,f,p),t.update(p,n,1)}function o(f,p,m){m!==0&&(i.drawArraysInstanced(n,f,p,m),t.update(p,n,m))}function l(f,p,m){if(m===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,p,0,m);let v=0;for(let x=0;x<m;x++)v+=p[x];t.update(v,n,1)}function c(f,p,m,y){if(m===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let x=0;x<f.length;x++)o(f[x],p[x],y[x]);else{v.multiDrawArraysInstancedWEBGL(n,f,0,p,0,y,0,m);let x=0;for(let w=0;w<m;w++)x+=p[w];for(let w=0;w<y.length;w++)t.update(x,n,y[w])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function S3(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(N){return!(N!==dr&&n.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(N){const U=N===pd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==bo&&n.convert(N)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==es&&!U)}function c(N){if(N==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const p=c(f);p!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",p,"instead."),f=p);const m=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(y===!0){const N=e.get("EXT_clip_control");N.clipControlEXT(N.LOWER_LEFT_EXT,N.ZERO_TO_ONE_EXT)}const v=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),x=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=i.getParameter(i.MAX_TEXTURE_SIZE),S=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),b=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),O=x>0,F=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:m,reverseDepthBuffer:y,maxTextures:v,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:S,maxAttributes:M,maxVertexUniforms:C,maxVaryings:b,maxFragmentUniforms:R,vertexTextures:O,maxSamples:F}}function M3(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Ka,l=new Yt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,y){const v=m.length!==0||y||n!==0||r;return r=y,n=m.length,v},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,y){t=p(m,y,0)},this.setState=function(m,y,v){const x=m.clippingPlanes,w=m.clipIntersection,S=m.clipShadows,M=i.get(m);if(!r||x===null||x.length===0||s&&!S)s?p(null):f();else{const C=s?0:n,b=C*4;let R=M.clippingState||null;c.value=R,R=p(x,y,b,v);for(let O=0;O!==b;++O)R[O]=t[O];M.clippingState=R,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=C}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(m,y,v,x){const w=m!==null?m.length:0;let S=null;if(w!==0){if(S=c.value,x!==!0||S===null){const M=v+w*4,C=y.matrixWorldInverse;l.getNormalMatrix(C),(S===null||S.length<M)&&(S=new Float32Array(M));for(let b=0,R=v;b!==w;++b,R+=4)o.copy(m[b]).applyMatrix4(C,l),o.normal.toArray(S,R),S[R+3]=o.constant}c.value=S,c.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,S}}function w3(i){let e=new WeakMap;function t(o,l){return l===Qp?o.mapping=ol:l===Zp&&(o.mapping=mc),o}function n(o){if(o&&o.isTexture){const l=o.mapping;if(l===Qp||l===Zp)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const f=new PS(c.height);return f.fromEquirectangularTexture(i,o),e.set(o,f),o.addEventListener("dispose",r),t(f.texture,o.mapping)}else return null}}return o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class js extends wm{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,o=s+f*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Uh=4,Yw=[.125,.215,.35,.446,.526,.582],Ru=20,Jx=new js,qw=new it;let Kx=null,Yx=0,qx=0,Qx=!1;const Cu=(1+Math.sqrt(5))/2,Th=1/Cu,Qw=[new W(-Cu,Th,0),new W(Cu,Th,0),new W(-Th,0,Cu),new W(Th,0,Cu),new W(0,Cu,-Th),new W(0,Cu,Th),new W(-1,1,-1),new W(1,1,-1),new W(-1,1,1),new W(1,1,1)];class RA{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Kx=this._renderer.getRenderTarget(),Yx=this._renderer.getActiveCubeFace(),qx=this._renderer.getActiveMipmapLevel(),Qx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=e1(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$w(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Kx,Yx,qx),this._renderer.xr.enabled=Qx,e.scissorTest=!1,ny(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ol||e.mapping===mc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Kx=this._renderer.getRenderTarget(),Yx=this._renderer.getActiveCubeFace(),qx=this._renderer.getActiveMipmapLevel(),Qx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ei,minFilter:ei,generateMipmaps:!1,type:pd,format:dr,colorSpace:ul,depthBuffer:!1},r=Zw(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Zw(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=E3(s)),this._blurMaterial=C3(s,e,t)}return r}_compileMaterial(e){const t=new ti(this._lodPlanes[0],e);this._renderer.compile(t,Jx)}_sceneToCubeUV(e,t,n,r){const l=new Ln(90,1,t,n),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,y=p.toneMapping;p.getClearColor(qw),p.toneMapping=aa,p.autoClear=!1;const v=new xs({name:"PMREM.Background",side:Dr,depthWrite:!1,depthTest:!1}),x=new ti(new of,v);let w=!1;const S=e.background;S?S.isColor&&(v.color.copy(S),e.background=null,w=!0):(v.color.copy(qw),w=!0);for(let M=0;M<6;M++){const C=M%3;C===0?(l.up.set(0,c[M],0),l.lookAt(f[M],0,0)):C===1?(l.up.set(0,0,c[M]),l.lookAt(0,f[M],0)):(l.up.set(0,c[M],0),l.lookAt(0,0,f[M]));const b=this._cubeSize;ny(r,C*b,M>2?b:0,b,b),p.setRenderTarget(r),w&&p.render(x,l),p.render(e,l)}x.geometry.dispose(),x.material.dispose(),p.toneMapping=y,p.autoClear=m,e.background=S}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===ol||e.mapping===mc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=e1()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=$w());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ti(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;ny(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,Jx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=Qw[(r-s-1)%Qw.length];this._blur(e,s-1,s,o,l)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,l){const c=this._renderer,f=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new ti(this._lodPlanes[r],f),y=f.uniforms,v=this._sizeLods[n]-1,x=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Ru-1),w=s/x,S=isFinite(s)?1+Math.floor(p*w):Ru;S>Ru&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${S} samples when the maximum is set to ${Ru}`);const M=[];let C=0;for(let N=0;N<Ru;++N){const U=N/w,J=Math.exp(-U*U/2);M.push(J),N===0?C+=J:N<S&&(C+=2*J)}for(let N=0;N<M.length;N++)M[N]=M[N]/C;y.envMap.value=e.texture,y.samples.value=S,y.weights.value=M,y.latitudinal.value=o==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:b}=this;y.dTheta.value=x,y.mipInt.value=b-n;const R=this._sizeLods[r],O=3*R*(r>b-Uh?r-b+Uh:0),F=4*(this._cubeSize-R);ny(t,O,F,3*R,2*R),c.setRenderTarget(t),c.render(m,Jx)}}function E3(i){const e=[],t=[],n=[];let r=i;const s=i-Uh+1+Yw.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);t.push(l);let c=1/l;o>i-Uh?c=Yw[o-i+Uh-1]:o===0&&(c=0),n.push(c);const f=1/(l-2),p=-f,m=1+f,y=[p,p,m,p,m,m,p,p,m,m,p,m],v=6,x=6,w=3,S=2,M=1,C=new Float32Array(w*x*v),b=new Float32Array(S*x*v),R=new Float32Array(M*x*v);for(let F=0;F<v;F++){const N=F%3*2/3-1,U=F>2?0:-1,J=[N,U,0,N+2/3,U,0,N+2/3,U+1,0,N,U,0,N+2/3,U+1,0,N,U+1,0];C.set(J,w*x*F),b.set(y,S*x*F);const B=[F,F,F,F,F,F];R.set(B,M*x*F)}const O=new jt;O.setAttribute("position",new pn(C,w)),O.setAttribute("uv",new pn(b,S)),O.setAttribute("faceIndex",new pn(R,M)),e.push(O),r>Uh&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Zw(i,e,t){const n=new To(i,e,t);return n.texture.mapping=dd,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ny(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function C3(i,e,t){const n=new Float32Array(Ru),r=new W(0,1,0);return new Ro({name:"SphericalGaussianBlur",defines:{n:Ru,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function $w(){return new Ro({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function e1(){return new Ro({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:IS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:el,depthTest:!1,depthWrite:!1})}function IS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function b3(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,f=c===Qp||c===Zp,p=c===ol||c===mc;if(f||p){let m=e.get(l);const y=m!==void 0?m.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return t===null&&(t=new RA(i)),m=f?t.fromEquirectangular(l,m):t.fromCubemap(l,m),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),m.texture;if(m!==void 0)return m.texture;{const v=l.image;return f&&v&&v.height>0||p&&v&&r(v)?(t===null&&(t=new RA(i)),m=f?t.fromEquirectangular(l):t.fromCubemap(l),m.texture.pmremVersion=l.pmremVersion,e.set(l,m),l.addEventListener("dispose",s),m.texture):null}}}return l}function r(l){let c=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&c++;return c===f}function s(l){const c=l.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function T3(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&zy("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function R3(i,e,t,n){const r={},s=new WeakMap;function o(m){const y=m.target;y.index!==null&&e.remove(y.index);for(const x in y.attributes)e.remove(y.attributes[x]);for(const x in y.morphAttributes){const w=y.morphAttributes[x];for(let S=0,M=w.length;S<M;S++)e.remove(w[S])}y.removeEventListener("dispose",o),delete r[y.id];const v=s.get(y);v&&(e.remove(v),s.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function l(m,y){return r[y.id]===!0||(y.addEventListener("dispose",o),r[y.id]=!0,t.memory.geometries++),y}function c(m){const y=m.attributes;for(const x in y)e.update(y[x],i.ARRAY_BUFFER);const v=m.morphAttributes;for(const x in v){const w=v[x];for(let S=0,M=w.length;S<M;S++)e.update(w[S],i.ARRAY_BUFFER)}}function f(m){const y=[],v=m.index,x=m.attributes.position;let w=0;if(v!==null){const C=v.array;w=v.version;for(let b=0,R=C.length;b<R;b+=3){const O=C[b+0],F=C[b+1],N=C[b+2];y.push(O,F,F,N,N,O)}}else if(x!==void 0){const C=x.array;w=x.version;for(let b=0,R=C.length/3-1;b<R;b+=3){const O=b+0,F=b+1,N=b+2;y.push(O,F,F,N,N,O)}}else return;const S=new(IT(y)?TS:bS)(y,1);S.version=w;const M=s.get(m);M&&e.remove(M),s.set(m,S)}function p(m){const y=s.get(m);if(y){const v=m.index;v!==null&&y.version<v.version&&f(m)}else f(m);return s.get(m)}return{get:l,update:c,getWireframeAttribute:p}}function P3(i,e,t){let n;function r(y){n=y}let s,o;function l(y){s=y.type,o=y.bytesPerElement}function c(y,v){i.drawElements(n,v,s,y*o),t.update(v,n,1)}function f(y,v,x){x!==0&&(i.drawElementsInstanced(n,v,s,y*o,x),t.update(v,n,x))}function p(y,v,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,v,0,s,y,0,x);let S=0;for(let M=0;M<x;M++)S+=v[M];t.update(S,n,1)}function m(y,v,x,w){if(x===0)return;const S=e.get("WEBGL_multi_draw");if(S===null)for(let M=0;M<y.length;M++)f(y[M]/o,v[M],w[M]);else{S.multiDrawElementsInstancedWEBGL(n,v,0,s,y,0,w,0,x);let M=0;for(let C=0;C<x;C++)M+=v[C];for(let C=0;C<w.length;C++)t.update(M,n,w[C])}}this.setMode=r,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=p,this.renderMultiDrawInstances=m}function I3(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function B3(i,e,t){const n=new WeakMap,r=new yn;function s(o,l,c){const f=o.morphTargetInfluences,p=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,m=p!==void 0?p.length:0;let y=n.get(l);if(y===void 0||y.count!==m){let B=function(){U.dispose(),n.delete(l),l.removeEventListener("dispose",B)};var v=B;y!==void 0&&y.texture.dispose();const x=l.morphAttributes.position!==void 0,w=l.morphAttributes.normal!==void 0,S=l.morphAttributes.color!==void 0,M=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let R=0;x===!0&&(R=1),w===!0&&(R=2),S===!0&&(R=3);let O=l.attributes.position.count*R,F=1;O>e.maxTextureSize&&(F=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const N=new Float32Array(O*F*4*m),U=new c0(N,O,F,m);U.type=es,U.needsUpdate=!0;const J=R*4;for(let L=0;L<m;L++){const ne=M[L],ie=C[L],ce=b[L],de=O*F*4*L;for(let le=0;le<ne.count;le++){const ye=le*J;x===!0&&(r.fromBufferAttribute(ne,le),N[de+ye+0]=r.x,N[de+ye+1]=r.y,N[de+ye+2]=r.z,N[de+ye+3]=0),w===!0&&(r.fromBufferAttribute(ie,le),N[de+ye+4]=r.x,N[de+ye+5]=r.y,N[de+ye+6]=r.z,N[de+ye+7]=0),S===!0&&(r.fromBufferAttribute(ce,le),N[de+ye+8]=r.x,N[de+ye+9]=r.y,N[de+ye+10]=r.z,N[de+ye+11]=ce.itemSize===4?r.w:1)}}y={count:m,texture:U,size:new De(O,F)},n.set(l,y),l.addEventListener("dispose",B)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let x=0;for(let S=0;S<f.length;S++)x+=f[S];const w=l.morphTargetsRelative?1:1-x;c.getUniforms().setValue(i,"morphTargetBaseInfluence",w),c.getUniforms().setValue(i,"morphTargetInfluences",f)}c.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:s}}function D3(i,e,t,n){let r=new WeakMap;function s(c){const f=n.render.frame,p=c.geometry,m=e.get(c,p);if(r.get(m)!==f&&(e.update(m),r.set(m,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==f&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const y=c.skeleton;r.get(y)!==f&&(y.update(),r.set(y,f))}return m}function o(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:o}}class BS extends Pn{constructor(e,t,n,r,s,o,l,c,f,p=zu){if(p!==zu&&p!==Ku)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===zu&&(n=al),n===void 0&&p===Ku&&(n=Ju),super(null,r,s,o,l,c,p,n,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:Ti,this.minFilter=c!==void 0?c:Ti,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const UT=new Pn,t1=new BS(1,1),zT=new c0,HT=new CS,GT=new Em,n1=[],i1=[],r1=new Float32Array(16),s1=new Float32Array(9),o1=new Float32Array(4);function gd(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=n1[r];if(s===void 0&&(s=new Float32Array(r),n1[r]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(s,l)}return s}function Ri(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Pi(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function u0(i,e){let t=i1[e];t===void 0&&(t=new Int32Array(e),i1[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function L3(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function F3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2fv(this.addr,e),Pi(t,e)}}function N3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ri(t,e))return;i.uniform3fv(this.addr,e),Pi(t,e)}}function O3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4fv(this.addr,e),Pi(t,e)}}function k3(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;o1.set(n),i.uniformMatrix2fv(this.addr,!1,o1),Pi(t,n)}}function U3(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;s1.set(n),i.uniformMatrix3fv(this.addr,!1,s1),Pi(t,n)}}function z3(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Ri(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Pi(t,e)}else{if(Ri(t,n))return;r1.set(n),i.uniformMatrix4fv(this.addr,!1,r1),Pi(t,n)}}function H3(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function G3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2iv(this.addr,e),Pi(t,e)}}function V3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;i.uniform3iv(this.addr,e),Pi(t,e)}}function W3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4iv(this.addr,e),Pi(t,e)}}function j3(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function X3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ri(t,e))return;i.uniform2uiv(this.addr,e),Pi(t,e)}}function J3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ri(t,e))return;i.uniform3uiv(this.addr,e),Pi(t,e)}}function K3(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ri(t,e))return;i.uniform4uiv(this.addr,e),Pi(t,e)}}function Y3(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(t1.compareFunction=MS,s=t1):s=UT,t.setTexture2D(e||s,r)}function q3(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||HT,r)}function Q3(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||GT,r)}function Z3(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||zT,r)}function $3(i){switch(i){case 5126:return L3;case 35664:return F3;case 35665:return N3;case 35666:return O3;case 35674:return k3;case 35675:return U3;case 35676:return z3;case 5124:case 35670:return H3;case 35667:case 35671:return G3;case 35668:case 35672:return V3;case 35669:case 35673:return W3;case 5125:return j3;case 36294:return X3;case 36295:return J3;case 36296:return K3;case 35678:case 36198:case 36298:case 36306:case 35682:return Y3;case 35679:case 36299:case 36307:return q3;case 35680:case 36300:case 36308:case 36293:return Q3;case 36289:case 36303:case 36311:case 36292:return Z3}}function eN(i,e){i.uniform1fv(this.addr,e)}function tN(i,e){const t=gd(e,this.size,2);i.uniform2fv(this.addr,t)}function nN(i,e){const t=gd(e,this.size,3);i.uniform3fv(this.addr,t)}function iN(i,e){const t=gd(e,this.size,4);i.uniform4fv(this.addr,t)}function rN(i,e){const t=gd(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function sN(i,e){const t=gd(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function oN(i,e){const t=gd(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function aN(i,e){i.uniform1iv(this.addr,e)}function lN(i,e){i.uniform2iv(this.addr,e)}function cN(i,e){i.uniform3iv(this.addr,e)}function uN(i,e){i.uniform4iv(this.addr,e)}function fN(i,e){i.uniform1uiv(this.addr,e)}function hN(i,e){i.uniform2uiv(this.addr,e)}function dN(i,e){i.uniform3uiv(this.addr,e)}function pN(i,e){i.uniform4uiv(this.addr,e)}function mN(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||UT,s[o])}function gN(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||HT,s[o])}function yN(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||GT,s[o])}function vN(i,e,t){const n=this.cache,r=e.length,s=u0(t,r);Ri(n,s)||(i.uniform1iv(this.addr,s),Pi(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||zT,s[o])}function xN(i){switch(i){case 5126:return eN;case 35664:return tN;case 35665:return nN;case 35666:return iN;case 35674:return rN;case 35675:return sN;case 35676:return oN;case 5124:case 35670:return aN;case 35667:case 35671:return lN;case 35668:case 35672:return cN;case 35669:case 35673:return uN;case 5125:return fN;case 36294:return hN;case 36295:return dN;case 36296:return pN;case 35678:case 36198:case 36298:case 36306:case 35682:return mN;case 35679:case 36299:case 36307:return gN;case 35680:case 36300:case 36308:case 36293:return yN;case 36289:case 36303:case 36311:case 36292:return vN}}class _N{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=$3(t.type)}}class AN{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=xN(t.type)}}class SN{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(e,t[l.id],n)}}}const Zx=/(\w+)(\])?(\[|\.)?/g;function a1(i,e){i.seq.push(e),i.map[e.id]=e}function MN(i,e,t){const n=i.name,r=n.length;for(Zx.lastIndex=0;;){const s=Zx.exec(n),o=Zx.lastIndex;let l=s[1];const c=s[2]==="]",f=s[3];if(c&&(l=l|0),f===void 0||f==="["&&o+2===r){a1(t,f===void 0?new _N(l,i,e):new AN(l,i,e));break}else{let m=t.map[l];m===void 0&&(m=new SN(l),a1(t,m)),t=m}}}class Hy{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);MN(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function l1(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const wN=37297;let EN=0;function CN(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}function bN(i){const e=_n.getPrimaries(_n.workingColorSpace),t=_n.getPrimaries(i);let n;switch(e===t?n="":e===nm&&t===tm?n="LinearDisplayP3ToLinearSRGB":e===tm&&t===nm&&(n="LinearSRGBToLinearDisplayP3"),i){case ul:case Mm:return[n,"LinearTransferOETF"];case Gs:case l0:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}function c1(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+CN(i.getShaderSource(e),o)}else return r}function TN(i,e){const t=bN(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function RN(i,e){let t;switch(e){case uT:t="Linear";break;case fT:t="Reinhard";break;case hT:t="Cineon";break;case fS:t="ACESFilmic";break;case pT:t="AgX";break;case mT:t="Neutral";break;case dT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const iy=new W;function PN(){_n.getLuminanceCoefficients(iy);const i=iy.x.toFixed(4),e=iy.y.toFixed(4),t=iy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function IN(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Dp).join(`
`)}function BN(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function DN(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}function Dp(i){return i!==""}function u1(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function f1(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const LN=/^[ \t]*#include +<([\w\d./]+)>/gm;function PA(i){return i.replace(LN,NN)}const FN=new Map;function NN(i,e){let t=$t[e];if(t===void 0){const n=FN.get(e);if(n!==void 0)t=$t[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return PA(t)}const ON=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function h1(i){return i.replace(ON,kN)}function kN(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function d1(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function UN(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Zv?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Fp?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ao&&(e="SHADOWMAP_TYPE_VSM"),e}function zN(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case ol:case mc:e="ENVMAP_TYPE_CUBE";break;case dd:e="ENVMAP_TYPE_CUBE_UV";break}return e}function HN(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case mc:e="ENVMAP_MODE_REFRACTION";break}return e}function GN(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Am:e="ENVMAP_BLENDING_MULTIPLY";break;case lT:e="ENVMAP_BLENDING_MIX";break;case cT:e="ENVMAP_BLENDING_ADD";break}return e}function VN(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function WN(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=UN(t),f=zN(t),p=HN(t),m=GN(t),y=VN(t),v=IN(t),x=BN(s),w=r.createProgram();let S,M,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(S=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Dp).join(`
`),S.length>0&&(S+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Dp).join(`
`),M.length>0&&(M+=`
`)):(S=[d1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Dp).join(`
`),M=[d1(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==aa?"#define TONE_MAPPING":"",t.toneMapping!==aa?$t.tonemapping_pars_fragment:"",t.toneMapping!==aa?RN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$t.colorspace_pars_fragment,TN("linearToOutputTexel",t.outputColorSpace),PN(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Dp).join(`
`)),o=PA(o),o=u1(o,t),o=f1(o,t),l=PA(l),l=u1(l,t),l=f1(l,t),o=h1(o),l=h1(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,S=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+S,M=["#define varying in",t.glslVersion===TA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===TA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const b=C+S+o,R=C+M+l,O=l1(r,r.VERTEX_SHADER,b),F=l1(r,r.FRAGMENT_SHADER,R);r.attachShader(w,O),r.attachShader(w,F),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function N(L){if(i.debug.checkShaderErrors){const ne=r.getProgramInfoLog(w).trim(),ie=r.getShaderInfoLog(O).trim(),ce=r.getShaderInfoLog(F).trim();let de=!0,le=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(de=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,w,O,F);else{const ye=c1(r,O,"vertex"),G=c1(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+ne+`
`+ye+`
`+G)}else ne!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ne):(ie===""||ce==="")&&(le=!1);le&&(L.diagnostics={runnable:de,programLog:ne,vertexShader:{log:ie,prefix:S},fragmentShader:{log:ce,prefix:M}})}r.deleteShader(O),r.deleteShader(F),U=new Hy(r,w),J=DN(r,w)}let U;this.getUniforms=function(){return U===void 0&&N(this),U};let J;this.getAttributes=function(){return J===void 0&&N(this),J};let B=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return B===!1&&(B=r.getProgramParameter(w,wN)),B},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=EN++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=O,this.fragmentShader=F,this}let jN=0;class XN{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new JN(e),t.set(e,n)),n}}class JN{constructor(e){this.id=jN++,this.code=e,this.usedTimes=0}}function KN(i,e,t,n,r,s,o){const l=new Vu,c=new XN,f=new Set,p=[],m=r.logarithmicDepthBuffer,y=r.reverseDepthBuffer,v=r.vertexTextures;let x=r.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(B){return f.add(B),B===0?"uv":`uv${B}`}function M(B,L,ne,ie,ce){const de=ie.fog,le=ce.geometry,ye=B.isMeshStandardMaterial?ie.environment:null,G=(B.isMeshStandardMaterial?t:e).get(B.envMap||ye),Z=G&&G.mapping===dd?G.image.height:null,z=w[B.type];B.precision!==null&&(x=r.getMaxPrecision(B.precision),x!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",x,"instead."));const Y=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,pe=Y!==void 0?Y.length:0;let Ne=0;le.morphAttributes.position!==void 0&&(Ne=1),le.morphAttributes.normal!==void 0&&(Ne=2),le.morphAttributes.color!==void 0&&(Ne=3);let oe,ve,be,Ie;if(z){const bn=So[z];oe=bn.vertexShader,ve=bn.fragmentShader}else oe=B.vertexShader,ve=B.fragmentShader,c.update(B),be=c.getVertexShaderID(B),Ie=c.getFragmentShaderID(B);const Xe=i.getRenderTarget(),rt=ce.isInstancedMesh===!0,pt=ce.isBatchedMesh===!0,We=!!B.map,Pe=!!B.matcap,j=!!G,Je=!!B.aoMap,Ke=!!B.lightMap,Ue=!!B.bumpMap,Ge=!!B.normalMap,xt=!!B.displacementMap,tt=!!B.emissiveMap,X=!!B.metalnessMap,H=!!B.roughnessMap,me=B.anisotropy>0,Te=B.clearcoat>0,Fe=B.dispersion>0,Be=B.iridescence>0,gt=B.sheen>0,Ve=B.transmission>0,lt=me&&!!B.anisotropyMap,Qt=Te&&!!B.clearcoatMap,ze=Te&&!!B.clearcoatNormalMap,st=Te&&!!B.clearcoatRoughnessMap,Ft=Be&&!!B.iridescenceMap,It=Be&&!!B.iridescenceThicknessMap,ht=gt&&!!B.sheenColorMap,re=gt&&!!B.sheenRoughnessMap,Re=!!B.specularMap,et=!!B.specularColorMap,$=!!B.specularIntensityMap,je=Ve&&!!B.transmissionMap,we=Ve&&!!B.thicknessMap,Le=!!B.gradientMap,nt=!!B.alphaMap,ct=B.alphaTest>0,kt=!!B.alphaHash,rn=!!B.extensions;let Fn=aa;B.toneMapped&&(Xe===null||Xe.isXRRenderTarget===!0)&&(Fn=i.toneMapping);const Xt={shaderID:z,shaderType:B.type,shaderName:B.name,vertexShader:oe,fragmentShader:ve,defines:B.defines,customVertexShaderID:be,customFragmentShaderID:Ie,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:x,batching:pt,batchingColor:pt&&ce._colorsTexture!==null,instancing:rt,instancingColor:rt&&ce.instanceColor!==null,instancingMorph:rt&&ce.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:Xe===null?i.outputColorSpace:Xe.isXRRenderTarget===!0?Xe.texture.colorSpace:ul,alphaToCoverage:!!B.alphaToCoverage,map:We,matcap:Pe,envMap:j,envMapMode:j&&G.mapping,envMapCubeUVHeight:Z,aoMap:Je,lightMap:Ke,bumpMap:Ue,normalMap:Ge,displacementMap:v&&xt,emissiveMap:tt,normalMapObjectSpace:Ge&&B.normalMapType===MT,normalMapTangentSpace:Ge&&B.normalMapType===_c,metalnessMap:X,roughnessMap:H,anisotropy:me,anisotropyMap:lt,clearcoat:Te,clearcoatMap:Qt,clearcoatNormalMap:ze,clearcoatRoughnessMap:st,dispersion:Fe,iridescence:Be,iridescenceMap:Ft,iridescenceThicknessMap:It,sheen:gt,sheenColorMap:ht,sheenRoughnessMap:re,specularMap:Re,specularColorMap:et,specularIntensityMap:$,transmission:Ve,transmissionMap:je,thicknessMap:we,gradientMap:Le,opaque:B.transparent===!1&&B.blending===Uu&&B.alphaToCoverage===!1,alphaMap:nt,alphaTest:ct,alphaHash:kt,combine:B.combine,mapUv:We&&S(B.map.channel),aoMapUv:Je&&S(B.aoMap.channel),lightMapUv:Ke&&S(B.lightMap.channel),bumpMapUv:Ue&&S(B.bumpMap.channel),normalMapUv:Ge&&S(B.normalMap.channel),displacementMapUv:xt&&S(B.displacementMap.channel),emissiveMapUv:tt&&S(B.emissiveMap.channel),metalnessMapUv:X&&S(B.metalnessMap.channel),roughnessMapUv:H&&S(B.roughnessMap.channel),anisotropyMapUv:lt&&S(B.anisotropyMap.channel),clearcoatMapUv:Qt&&S(B.clearcoatMap.channel),clearcoatNormalMapUv:ze&&S(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:st&&S(B.clearcoatRoughnessMap.channel),iridescenceMapUv:Ft&&S(B.iridescenceMap.channel),iridescenceThicknessMapUv:It&&S(B.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&S(B.sheenColorMap.channel),sheenRoughnessMapUv:re&&S(B.sheenRoughnessMap.channel),specularMapUv:Re&&S(B.specularMap.channel),specularColorMapUv:et&&S(B.specularColorMap.channel),specularIntensityMapUv:$&&S(B.specularIntensityMap.channel),transmissionMapUv:je&&S(B.transmissionMap.channel),thicknessMapUv:we&&S(B.thicknessMap.channel),alphaMapUv:nt&&S(B.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(Ge||me),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:ce.isPoints===!0&&!!le.attributes.uv&&(We||nt),fog:!!de,useFog:B.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:m,reverseDepthBuffer:y,skinning:ce.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:pe,morphTextureStride:Ne,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:B.dithering,shadowMapEnabled:i.shadowMap.enabled&&ne.length>0,shadowMapType:i.shadowMap.type,toneMapping:Fn,decodeVideoTexture:We&&B.map.isVideoTexture===!0&&_n.getTransfer(B.map.colorSpace)===Dn,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===Vs,flipSided:B.side===Dr,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:rn&&B.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(rn&&B.extensions.multiDraw===!0||pt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return Xt.vertexUv1s=f.has(1),Xt.vertexUv2s=f.has(2),Xt.vertexUv3s=f.has(3),f.clear(),Xt}function C(B){const L=[];if(B.shaderID?L.push(B.shaderID):(L.push(B.customVertexShaderID),L.push(B.customFragmentShaderID)),B.defines!==void 0)for(const ne in B.defines)L.push(ne),L.push(B.defines[ne]);return B.isRawShaderMaterial===!1&&(b(L,B),R(L,B),L.push(i.outputColorSpace)),L.push(B.customProgramCacheKey),L.join()}function b(B,L){B.push(L.precision),B.push(L.outputColorSpace),B.push(L.envMapMode),B.push(L.envMapCubeUVHeight),B.push(L.mapUv),B.push(L.alphaMapUv),B.push(L.lightMapUv),B.push(L.aoMapUv),B.push(L.bumpMapUv),B.push(L.normalMapUv),B.push(L.displacementMapUv),B.push(L.emissiveMapUv),B.push(L.metalnessMapUv),B.push(L.roughnessMapUv),B.push(L.anisotropyMapUv),B.push(L.clearcoatMapUv),B.push(L.clearcoatNormalMapUv),B.push(L.clearcoatRoughnessMapUv),B.push(L.iridescenceMapUv),B.push(L.iridescenceThicknessMapUv),B.push(L.sheenColorMapUv),B.push(L.sheenRoughnessMapUv),B.push(L.specularMapUv),B.push(L.specularColorMapUv),B.push(L.specularIntensityMapUv),B.push(L.transmissionMapUv),B.push(L.thicknessMapUv),B.push(L.combine),B.push(L.fogExp2),B.push(L.sizeAttenuation),B.push(L.morphTargetsCount),B.push(L.morphAttributeCount),B.push(L.numDirLights),B.push(L.numPointLights),B.push(L.numSpotLights),B.push(L.numSpotLightMaps),B.push(L.numHemiLights),B.push(L.numRectAreaLights),B.push(L.numDirLightShadows),B.push(L.numPointLightShadows),B.push(L.numSpotLightShadows),B.push(L.numSpotLightShadowsWithMaps),B.push(L.numLightProbes),B.push(L.shadowMapType),B.push(L.toneMapping),B.push(L.numClippingPlanes),B.push(L.numClipIntersection),B.push(L.depthPacking)}function R(B,L){l.disableAll(),L.supportsVertexTextures&&l.enable(0),L.instancing&&l.enable(1),L.instancingColor&&l.enable(2),L.instancingMorph&&l.enable(3),L.matcap&&l.enable(4),L.envMap&&l.enable(5),L.normalMapObjectSpace&&l.enable(6),L.normalMapTangentSpace&&l.enable(7),L.clearcoat&&l.enable(8),L.iridescence&&l.enable(9),L.alphaTest&&l.enable(10),L.vertexColors&&l.enable(11),L.vertexAlphas&&l.enable(12),L.vertexUv1s&&l.enable(13),L.vertexUv2s&&l.enable(14),L.vertexUv3s&&l.enable(15),L.vertexTangents&&l.enable(16),L.anisotropy&&l.enable(17),L.alphaHash&&l.enable(18),L.batching&&l.enable(19),L.dispersion&&l.enable(20),L.batchingColor&&l.enable(21),B.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reverseDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.alphaToCoverage&&l.enable(20),B.push(l.mask)}function O(B){const L=w[B.type];let ne;if(L){const ie=So[L];ne=OT.clone(ie.uniforms)}else ne=B.uniforms;return ne}function F(B,L){let ne;for(let ie=0,ce=p.length;ie<ce;ie++){const de=p[ie];if(de.cacheKey===L){ne=de,++ne.usedTimes;break}}return ne===void 0&&(ne=new WN(i,L,B,s),p.push(ne)),ne}function N(B){if(--B.usedTimes===0){const L=p.indexOf(B);p[L]=p[p.length-1],p.pop(),B.destroy()}}function U(B){c.remove(B)}function J(){c.dispose()}return{getParameters:M,getProgramCacheKey:C,getUniforms:O,acquireProgram:F,releaseProgram:N,releaseShaderCache:U,programs:p,dispose:J}}function YN(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let l=i.get(o);return l===void 0&&(l={},i.set(o,l)),l}function n(o){i.delete(o)}function r(o,l,c){i.get(o)[l]=c}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function qN(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function p1(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function m1(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(m,y,v,x,w,S){let M=i[e];return M===void 0?(M={id:m.id,object:m,geometry:y,material:v,groupOrder:x,renderOrder:m.renderOrder,z:w,group:S},i[e]=M):(M.id=m.id,M.object=m,M.geometry=y,M.material=v,M.groupOrder=x,M.renderOrder=m.renderOrder,M.z=w,M.group=S),e++,M}function l(m,y,v,x,w,S){const M=o(m,y,v,x,w,S);v.transmission>0?n.push(M):v.transparent===!0?r.push(M):t.push(M)}function c(m,y,v,x,w,S){const M=o(m,y,v,x,w,S);v.transmission>0?n.unshift(M):v.transparent===!0?r.unshift(M):t.unshift(M)}function f(m,y){t.length>1&&t.sort(m||qN),n.length>1&&n.sort(y||p1),r.length>1&&r.sort(y||p1)}function p(){for(let m=e,y=i.length;m<y;m++){const v=i[m];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:l,unshift:c,finish:p,sort:f}}function QN(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new m1,i.set(n,[o])):r>=s.length?(o=new m1,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function ZN(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new W,color:new it};break;case"SpotLight":t={position:new W,direction:new W,color:new it,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new W,color:new it,distance:0,decay:0};break;case"HemisphereLight":t={direction:new W,skyColor:new it,groundColor:new it};break;case"RectAreaLight":t={color:new it,position:new W,halfWidth:new W,halfHeight:new W};break}return i[e.id]=t,t}}}function $N(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let eO=0;function tO(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function nO(i){const e=new ZN,t=$N(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new W);const r=new W,s=new Tt,o=new Tt;function l(f){let p=0,m=0,y=0;for(let J=0;J<9;J++)n.probe[J].set(0,0,0);let v=0,x=0,w=0,S=0,M=0,C=0,b=0,R=0,O=0,F=0,N=0;f.sort(tO);for(let J=0,B=f.length;J<B;J++){const L=f[J],ne=L.color,ie=L.intensity,ce=L.distance,de=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)p+=ne.r*ie,m+=ne.g*ie,y+=ne.b*ie;else if(L.isLightProbe){for(let le=0;le<9;le++)n.probe[le].addScaledVector(L.sh.coefficients[le],ie);N++}else if(L.isDirectionalLight){const le=e.get(L);if(le.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const ye=L.shadow,G=t.get(L);G.shadowIntensity=ye.intensity,G.shadowBias=ye.bias,G.shadowNormalBias=ye.normalBias,G.shadowRadius=ye.radius,G.shadowMapSize=ye.mapSize,n.directionalShadow[v]=G,n.directionalShadowMap[v]=de,n.directionalShadowMatrix[v]=L.shadow.matrix,C++}n.directional[v]=le,v++}else if(L.isSpotLight){const le=e.get(L);le.position.setFromMatrixPosition(L.matrixWorld),le.color.copy(ne).multiplyScalar(ie),le.distance=ce,le.coneCos=Math.cos(L.angle),le.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),le.decay=L.decay,n.spot[w]=le;const ye=L.shadow;if(L.map&&(n.spotLightMap[O]=L.map,O++,ye.updateMatrices(L),L.castShadow&&F++),n.spotLightMatrix[w]=ye.matrix,L.castShadow){const G=t.get(L);G.shadowIntensity=ye.intensity,G.shadowBias=ye.bias,G.shadowNormalBias=ye.normalBias,G.shadowRadius=ye.radius,G.shadowMapSize=ye.mapSize,n.spotShadow[w]=G,n.spotShadowMap[w]=de,R++}w++}else if(L.isRectAreaLight){const le=e.get(L);le.color.copy(ne).multiplyScalar(ie),le.halfWidth.set(L.width*.5,0,0),le.halfHeight.set(0,L.height*.5,0),n.rectArea[S]=le,S++}else if(L.isPointLight){const le=e.get(L);if(le.color.copy(L.color).multiplyScalar(L.intensity),le.distance=L.distance,le.decay=L.decay,L.castShadow){const ye=L.shadow,G=t.get(L);G.shadowIntensity=ye.intensity,G.shadowBias=ye.bias,G.shadowNormalBias=ye.normalBias,G.shadowRadius=ye.radius,G.shadowMapSize=ye.mapSize,G.shadowCameraNear=ye.camera.near,G.shadowCameraFar=ye.camera.far,n.pointShadow[x]=G,n.pointShadowMap[x]=de,n.pointShadowMatrix[x]=L.shadow.matrix,b++}n.point[x]=le,x++}else if(L.isHemisphereLight){const le=e.get(L);le.skyColor.copy(L.color).multiplyScalar(ie),le.groundColor.copy(L.groundColor).multiplyScalar(ie),n.hemi[M]=le,M++}}S>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=at.LTC_FLOAT_1,n.rectAreaLTC2=at.LTC_FLOAT_2):(n.rectAreaLTC1=at.LTC_HALF_1,n.rectAreaLTC2=at.LTC_HALF_2)),n.ambient[0]=p,n.ambient[1]=m,n.ambient[2]=y;const U=n.hash;(U.directionalLength!==v||U.pointLength!==x||U.spotLength!==w||U.rectAreaLength!==S||U.hemiLength!==M||U.numDirectionalShadows!==C||U.numPointShadows!==b||U.numSpotShadows!==R||U.numSpotMaps!==O||U.numLightProbes!==N)&&(n.directional.length=v,n.spot.length=w,n.rectArea.length=S,n.point.length=x,n.hemi.length=M,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=b,n.spotLightMatrix.length=R+O-F,n.spotLightMap.length=O,n.numSpotLightShadowsWithMaps=F,n.numLightProbes=N,U.directionalLength=v,U.pointLength=x,U.spotLength=w,U.rectAreaLength=S,U.hemiLength=M,U.numDirectionalShadows=C,U.numPointShadows=b,U.numSpotShadows=R,U.numSpotMaps=O,U.numLightProbes=N,n.version=eO++)}function c(f,p){let m=0,y=0,v=0,x=0,w=0;const S=p.matrixWorldInverse;for(let M=0,C=f.length;M<C;M++){const b=f[M];if(b.isDirectionalLight){const R=n.directional[m];R.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(S),m++}else if(b.isSpotLight){const R=n.spot[v];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(S),R.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(S),v++}else if(b.isRectAreaLight){const R=n.rectArea[x];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(S),o.identity(),s.copy(b.matrixWorld),s.premultiply(S),o.extractRotation(s),R.halfWidth.set(b.width*.5,0,0),R.halfHeight.set(0,b.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),x++}else if(b.isPointLight){const R=n.point[y];R.position.setFromMatrixPosition(b.matrixWorld),R.position.applyMatrix4(S),y++}else if(b.isHemisphereLight){const R=n.hemi[w];R.direction.setFromMatrixPosition(b.matrixWorld),R.direction.transformDirection(S),w++}}}return{setup:l,setupView:c,state:n}}function g1(i){const e=new nO(i),t=[],n=[];function r(p){f.camera=p,t.length=0,n.length=0}function s(p){t.push(p)}function o(p){n.push(p)}function l(){e.setup(t)}function c(p){e.setupView(t,p)}const f={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function iO(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let l;return o===void 0?(l=new g1(i),e.set(r,[l])):s>=o.length?(l=new g1(i),o.push(l)):l=o[s],l}function n(){e=new WeakMap}return{get:t,dispose:n}}class DS extends Si{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=AT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class LS extends Si{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const rO=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sO=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function oO(i,e,t){let n=new Cm;const r=new De,s=new De,o=new yn,l=new DS({depthPacking:ST}),c=new LS,f={},p=t.maxTextureSize,m={[fa]:Dr,[Dr]:fa,[Vs]:Vs},y=new Ro({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:rO,fragmentShader:sO}),v=y.clone();v.defines.HORIZONTAL_PASS=1;const x=new jt;x.setAttribute("position",new pn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new ti(x,y),S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Zv;let M=this.type;this.render=function(F,N,U){if(S.enabled===!1||S.autoUpdate===!1&&S.needsUpdate===!1||F.length===0)return;const J=i.getRenderTarget(),B=i.getActiveCubeFace(),L=i.getActiveMipmapLevel(),ne=i.state;ne.setBlending(el),ne.buffers.color.setClear(1,1,1,1),ne.buffers.depth.setTest(!0),ne.setScissorTest(!1);const ie=M!==Ao&&this.type===Ao,ce=M===Ao&&this.type!==Ao;for(let de=0,le=F.length;de<le;de++){const ye=F[de],G=ye.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",ye,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;r.copy(G.mapSize);const Z=G.getFrameExtents();if(r.multiply(Z),s.copy(G.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/Z.x),r.x=s.x*Z.x,G.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/Z.y),r.y=s.y*Z.y,G.mapSize.y=s.y)),G.map===null||ie===!0||ce===!0){const Y=this.type!==Ao?{minFilter:Ti,magFilter:Ti}:{};G.map!==null&&G.map.dispose(),G.map=new To(r.x,r.y,Y),G.map.texture.name=ye.name+".shadowMap",G.camera.updateProjectionMatrix()}i.setRenderTarget(G.map),i.clear();const z=G.getViewportCount();for(let Y=0;Y<z;Y++){const pe=G.getViewport(Y);o.set(s.x*pe.x,s.y*pe.y,s.x*pe.z,s.y*pe.w),ne.viewport(o),G.updateMatrices(ye,Y),n=G.getFrustum(),R(N,U,G.camera,ye,this.type)}G.isPointLightShadow!==!0&&this.type===Ao&&C(G,U),G.needsUpdate=!1}M=this.type,S.needsUpdate=!1,i.setRenderTarget(J,B,L)};function C(F,N){const U=e.update(w);y.defines.VSM_SAMPLES!==F.blurSamples&&(y.defines.VSM_SAMPLES=F.blurSamples,v.defines.VSM_SAMPLES=F.blurSamples,y.needsUpdate=!0,v.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new To(r.x,r.y)),y.uniforms.shadow_pass.value=F.map.texture,y.uniforms.resolution.value=F.mapSize,y.uniforms.radius.value=F.radius,i.setRenderTarget(F.mapPass),i.clear(),i.renderBufferDirect(N,null,U,y,w,null),v.uniforms.shadow_pass.value=F.mapPass.texture,v.uniforms.resolution.value=F.mapSize,v.uniforms.radius.value=F.radius,i.setRenderTarget(F.map),i.clear(),i.renderBufferDirect(N,null,U,v,w,null)}function b(F,N,U,J){let B=null;const L=U.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(L!==void 0)B=L;else if(B=U.isPointLight===!0?c:l,i.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const ne=B.uuid,ie=N.uuid;let ce=f[ne];ce===void 0&&(ce={},f[ne]=ce);let de=ce[ie];de===void 0&&(de=B.clone(),ce[ie]=de,N.addEventListener("dispose",O)),B=de}if(B.visible=N.visible,B.wireframe=N.wireframe,J===Ao?B.side=N.shadowSide!==null?N.shadowSide:N.side:B.side=N.shadowSide!==null?N.shadowSide:m[N.side],B.alphaMap=N.alphaMap,B.alphaTest=N.alphaTest,B.map=N.map,B.clipShadows=N.clipShadows,B.clippingPlanes=N.clippingPlanes,B.clipIntersection=N.clipIntersection,B.displacementMap=N.displacementMap,B.displacementScale=N.displacementScale,B.displacementBias=N.displacementBias,B.wireframeLinewidth=N.wireframeLinewidth,B.linewidth=N.linewidth,U.isPointLight===!0&&B.isMeshDistanceMaterial===!0){const ne=i.properties.get(B);ne.light=U}return B}function R(F,N,U,J,B){if(F.visible===!1)return;if(F.layers.test(N.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&B===Ao)&&(!F.frustumCulled||n.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,F.matrixWorld);const ie=e.update(F),ce=F.material;if(Array.isArray(ce)){const de=ie.groups;for(let le=0,ye=de.length;le<ye;le++){const G=de[le],Z=ce[G.materialIndex];if(Z&&Z.visible){const z=b(F,Z,J,B);F.onBeforeShadow(i,F,N,U,ie,z,G),i.renderBufferDirect(U,null,ie,z,F,G),F.onAfterShadow(i,F,N,U,ie,z,G)}}}else if(ce.visible){const de=b(F,ce,J,B);F.onBeforeShadow(i,F,N,U,ie,de,null),i.renderBufferDirect(U,null,ie,de,F,null),F.onAfterShadow(i,F,N,U,ie,de,null)}}const ne=F.children;for(let ie=0,ce=ne.length;ie<ce;ie++)R(ne[ie],N,U,J,B)}function O(F){F.target.removeEventListener("dispose",O);for(const U in f){const J=f[U],B=F.target.uuid;B in J&&(J[B].dispose(),delete J[B])}}}const aO={[Yy]:qy,[Qy]:ev,[Zy]:tv,[Xu]:$y,[qy]:Yy,[ev]:Qy,[tv]:Zy,[$y]:Xu};function lO(i){function e(){let $=!1;const je=new yn;let we=null;const Le=new yn(0,0,0,0);return{setMask:function(nt){we!==nt&&!$&&(i.colorMask(nt,nt,nt,nt),we=nt)},setLocked:function(nt){$=nt},setClear:function(nt,ct,kt,rn,Fn){Fn===!0&&(nt*=rn,ct*=rn,kt*=rn),je.set(nt,ct,kt,rn),Le.equals(je)===!1&&(i.clearColor(nt,ct,kt,rn),Le.copy(je))},reset:function(){$=!1,we=null,Le.set(-1,0,0,0)}}}function t(){let $=!1,je=!1,we=null,Le=null,nt=null;return{setReversed:function(ct){je=ct},setTest:function(ct){ct?be(i.DEPTH_TEST):Ie(i.DEPTH_TEST)},setMask:function(ct){we!==ct&&!$&&(i.depthMask(ct),we=ct)},setFunc:function(ct){if(je&&(ct=aO[ct]),Le!==ct){switch(ct){case Yy:i.depthFunc(i.NEVER);break;case qy:i.depthFunc(i.ALWAYS);break;case Qy:i.depthFunc(i.LESS);break;case Xu:i.depthFunc(i.LEQUAL);break;case Zy:i.depthFunc(i.EQUAL);break;case $y:i.depthFunc(i.GEQUAL);break;case ev:i.depthFunc(i.GREATER);break;case tv:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Le=ct}},setLocked:function(ct){$=ct},setClear:function(ct){nt!==ct&&(i.clearDepth(ct),nt=ct)},reset:function(){$=!1,we=null,Le=null,nt=null}}}function n(){let $=!1,je=null,we=null,Le=null,nt=null,ct=null,kt=null,rn=null,Fn=null;return{setTest:function(Xt){$||(Xt?be(i.STENCIL_TEST):Ie(i.STENCIL_TEST))},setMask:function(Xt){je!==Xt&&!$&&(i.stencilMask(Xt),je=Xt)},setFunc:function(Xt,bn,ui){(we!==Xt||Le!==bn||nt!==ui)&&(i.stencilFunc(Xt,bn,ui),we=Xt,Le=bn,nt=ui)},setOp:function(Xt,bn,ui){(ct!==Xt||kt!==bn||rn!==ui)&&(i.stencilOp(Xt,bn,ui),ct=Xt,kt=bn,rn=ui)},setLocked:function(Xt){$=Xt},setClear:function(Xt){Fn!==Xt&&(i.clearStencil(Xt),Fn=Xt)},reset:function(){$=!1,je=null,we=null,Le=null,nt=null,ct=null,kt=null,rn=null,Fn=null}}}const r=new e,s=new t,o=new n,l=new WeakMap,c=new WeakMap;let f={},p={},m=new WeakMap,y=[],v=null,x=!1,w=null,S=null,M=null,C=null,b=null,R=null,O=null,F=new it(0,0,0),N=0,U=!1,J=null,B=null,L=null,ne=null,ie=null;const ce=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let de=!1,le=0;const ye=i.getParameter(i.VERSION);ye.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(ye)[1]),de=le>=1):ye.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(ye)[1]),de=le>=2);let G=null,Z={};const z=i.getParameter(i.SCISSOR_BOX),Y=i.getParameter(i.VIEWPORT),pe=new yn().fromArray(z),Ne=new yn().fromArray(Y);function oe($,je,we,Le){const nt=new Uint8Array(4),ct=i.createTexture();i.bindTexture($,ct),i.texParameteri($,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri($,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let kt=0;kt<we;kt++)$===i.TEXTURE_3D||$===i.TEXTURE_2D_ARRAY?i.texImage3D(je,0,i.RGBA,1,1,Le,0,i.RGBA,i.UNSIGNED_BYTE,nt):i.texImage2D(je+kt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,nt);return ct}const ve={};ve[i.TEXTURE_2D]=oe(i.TEXTURE_2D,i.TEXTURE_2D,1),ve[i.TEXTURE_CUBE_MAP]=oe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ve[i.TEXTURE_2D_ARRAY]=oe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ve[i.TEXTURE_3D]=oe(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),be(i.DEPTH_TEST),s.setFunc(Xu),Ke(!1),Ue(SA),be(i.CULL_FACE),j(el);function be($){f[$]!==!0&&(i.enable($),f[$]=!0)}function Ie($){f[$]!==!1&&(i.disable($),f[$]=!1)}function Xe($,je){return p[$]!==je?(i.bindFramebuffer($,je),p[$]=je,$===i.DRAW_FRAMEBUFFER&&(p[i.FRAMEBUFFER]=je),$===i.FRAMEBUFFER&&(p[i.DRAW_FRAMEBUFFER]=je),!0):!1}function rt($,je){let we=y,Le=!1;if($){we=m.get(je),we===void 0&&(we=[],m.set(je,we));const nt=$.textures;if(we.length!==nt.length||we[0]!==i.COLOR_ATTACHMENT0){for(let ct=0,kt=nt.length;ct<kt;ct++)we[ct]=i.COLOR_ATTACHMENT0+ct;we.length=nt.length,Le=!0}}else we[0]!==i.BACK&&(we[0]=i.BACK,Le=!0);Le&&i.drawBuffers(we)}function pt($){return v!==$?(i.useProgram($),v=$,!0):!1}const We={[uc]:i.FUNC_ADD,[jb]:i.FUNC_SUBTRACT,[Xb]:i.FUNC_REVERSE_SUBTRACT};We[Jb]=i.MIN,We[Kb]=i.MAX;const Pe={[Yb]:i.ZERO,[qb]:i.ONE,[Qb]:i.SRC_COLOR,[Jy]:i.SRC_ALPHA,[iT]:i.SRC_ALPHA_SATURATE,[tT]:i.DST_COLOR,[$b]:i.DST_ALPHA,[Zb]:i.ONE_MINUS_SRC_COLOR,[Ky]:i.ONE_MINUS_SRC_ALPHA,[nT]:i.ONE_MINUS_DST_COLOR,[eT]:i.ONE_MINUS_DST_ALPHA,[rT]:i.CONSTANT_COLOR,[sT]:i.ONE_MINUS_CONSTANT_COLOR,[oT]:i.CONSTANT_ALPHA,[aT]:i.ONE_MINUS_CONSTANT_ALPHA};function j($,je,we,Le,nt,ct,kt,rn,Fn,Xt){if($===el){x===!0&&(Ie(i.BLEND),x=!1);return}if(x===!1&&(be(i.BLEND),x=!0),$!==Wb){if($!==w||Xt!==U){if((S!==uc||b!==uc)&&(i.blendEquation(i.FUNC_ADD),S=uc,b=uc),Xt)switch($){case Uu:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case MA:i.blendFunc(i.ONE,i.ONE);break;case wA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case EA:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Uu:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case MA:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case wA:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case EA:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}M=null,C=null,R=null,O=null,F.set(0,0,0),N=0,w=$,U=Xt}return}nt=nt||je,ct=ct||we,kt=kt||Le,(je!==S||nt!==b)&&(i.blendEquationSeparate(We[je],We[nt]),S=je,b=nt),(we!==M||Le!==C||ct!==R||kt!==O)&&(i.blendFuncSeparate(Pe[we],Pe[Le],Pe[ct],Pe[kt]),M=we,C=Le,R=ct,O=kt),(rn.equals(F)===!1||Fn!==N)&&(i.blendColor(rn.r,rn.g,rn.b,Fn),F.copy(rn),N=Fn),w=$,U=!1}function Je($,je){$.side===Vs?Ie(i.CULL_FACE):be(i.CULL_FACE);let we=$.side===Dr;je&&(we=!we),Ke(we),$.blending===Uu&&$.transparent===!1?j(el):j($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),s.setFunc($.depthFunc),s.setTest($.depthTest),s.setMask($.depthWrite),r.setMask($.colorWrite);const Le=$.stencilWrite;o.setTest(Le),Le&&(o.setMask($.stencilWriteMask),o.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),o.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),xt($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?be(i.SAMPLE_ALPHA_TO_COVERAGE):Ie(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ke($){J!==$&&($?i.frontFace(i.CW):i.frontFace(i.CCW),J=$)}function Ue($){$!==Hb?(be(i.CULL_FACE),$!==B&&($===SA?i.cullFace(i.BACK):$===Gb?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ie(i.CULL_FACE),B=$}function Ge($){$!==L&&(de&&i.lineWidth($),L=$)}function xt($,je,we){$?(be(i.POLYGON_OFFSET_FILL),(ne!==je||ie!==we)&&(i.polygonOffset(je,we),ne=je,ie=we)):Ie(i.POLYGON_OFFSET_FILL)}function tt($){$?be(i.SCISSOR_TEST):Ie(i.SCISSOR_TEST)}function X($){$===void 0&&($=i.TEXTURE0+ce-1),G!==$&&(i.activeTexture($),G=$)}function H($,je,we){we===void 0&&(G===null?we=i.TEXTURE0+ce-1:we=G);let Le=Z[we];Le===void 0&&(Le={type:void 0,texture:void 0},Z[we]=Le),(Le.type!==$||Le.texture!==je)&&(G!==we&&(i.activeTexture(we),G=we),i.bindTexture($,je||ve[$]),Le.type=$,Le.texture=je)}function me(){const $=Z[G];$!==void 0&&$.type!==void 0&&(i.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function Te(){try{i.compressedTexImage2D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{i.compressedTexImage3D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Be(){try{i.texSubImage2D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function gt(){try{i.texSubImage3D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ve(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function lt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Qt(){try{i.texStorage2D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ze(){try{i.texStorage3D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function st(){try{i.texImage2D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ft(){try{i.texImage3D.apply(i,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function It($){pe.equals($)===!1&&(i.scissor($.x,$.y,$.z,$.w),pe.copy($))}function ht($){Ne.equals($)===!1&&(i.viewport($.x,$.y,$.z,$.w),Ne.copy($))}function re($,je){let we=c.get(je);we===void 0&&(we=new WeakMap,c.set(je,we));let Le=we.get($);Le===void 0&&(Le=i.getUniformBlockIndex(je,$.name),we.set($,Le))}function Re($,je){const Le=c.get(je).get($);l.get(je)!==Le&&(i.uniformBlockBinding(je,Le,$.__bindingPointIndex),l.set(je,Le))}function et(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},G=null,Z={},p={},m=new WeakMap,y=[],v=null,x=!1,w=null,S=null,M=null,C=null,b=null,R=null,O=null,F=new it(0,0,0),N=0,U=!1,J=null,B=null,L=null,ne=null,ie=null,pe.set(0,0,i.canvas.width,i.canvas.height),Ne.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:be,disable:Ie,bindFramebuffer:Xe,drawBuffers:rt,useProgram:pt,setBlending:j,setMaterial:Je,setFlipSided:Ke,setCullFace:Ue,setLineWidth:Ge,setPolygonOffset:xt,setScissorTest:tt,activeTexture:X,bindTexture:H,unbindTexture:me,compressedTexImage2D:Te,compressedTexImage3D:Fe,texImage2D:st,texImage3D:Ft,updateUBOMapping:re,uniformBlockBinding:Re,texStorage2D:Qt,texStorage3D:ze,texSubImage2D:Be,texSubImage3D:gt,compressedTexSubImage2D:Ve,compressedTexSubImage3D:lt,scissor:It,viewport:ht,reset:et}}function cO(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function uO(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function fO(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function IA(i,e,t,n){const r=hO(n);switch(t){case mS:return i*e;case yS:return i*e;case vS:return i*e*2;case r0:return i*e/r.components*r.byteLength;case Sm:return i*e/r.components*r.byteLength;case xS:return i*e*2/r.components*r.byteLength;case s0:return i*e*2/r.components*r.byteLength;case gS:return i*e*3/r.components*r.byteLength;case dr:return i*e*4/r.components*r.byteLength;case o0:return i*e*4/r.components*r.byteLength;case Np:case Op:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case kp:case Up:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case iv:case sv:return Math.max(i,16)*Math.max(e,8)/4;case nv:case rv:return Math.max(i,8)*Math.max(e,8)/2;case ov:case av:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case lv:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case cv:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case uv:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case fv:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case hv:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case dv:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case pv:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case mv:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case gv:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case yv:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case vv:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case xv:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case _v:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Av:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Sv:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case zp:case Mv:case wv:return Math.ceil(i/4)*Math.ceil(e/4)*16;case _S:case Ev:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Cv:case bv:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function hO(i){switch(i){case bo:case hS:return{byteLength:1,components:1};case ed:case dS:case pd:return{byteLength:2,components:1};case n0:case i0:return{byteLength:2,components:4};case al:case t0:case es:return{byteLength:4,components:1};case pS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}const dO={contain:cO,cover:uO,fill:fO,getByteLength:IA};function pO(i,e,t,n,r,s,o){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new De,p=new WeakMap;let m;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(X,H){return v?new OffscreenCanvas(X,H):sm("canvas")}function w(X,H,me){let Te=1;const Fe=tt(X);if((Fe.width>me||Fe.height>me)&&(Te=me/Math.max(Fe.width,Fe.height)),Te<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const Be=Math.floor(Te*Fe.width),gt=Math.floor(Te*Fe.height);m===void 0&&(m=x(Be,gt));const Ve=H?x(Be,gt):m;return Ve.width=Be,Ve.height=gt,Ve.getContext("2d").drawImage(X,0,0,Be,gt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+Be+"x"+gt+")."),Ve}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),X;return X}function S(X){return X.generateMipmaps&&X.minFilter!==Ti&&X.minFilter!==ei}function M(X){i.generateMipmap(X)}function C(X,H,me,Te,Fe=!1){if(X!==null){if(i[X]!==void 0)return i[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Be=H;if(H===i.RED&&(me===i.FLOAT&&(Be=i.R32F),me===i.HALF_FLOAT&&(Be=i.R16F),me===i.UNSIGNED_BYTE&&(Be=i.R8)),H===i.RED_INTEGER&&(me===i.UNSIGNED_BYTE&&(Be=i.R8UI),me===i.UNSIGNED_SHORT&&(Be=i.R16UI),me===i.UNSIGNED_INT&&(Be=i.R32UI),me===i.BYTE&&(Be=i.R8I),me===i.SHORT&&(Be=i.R16I),me===i.INT&&(Be=i.R32I)),H===i.RG&&(me===i.FLOAT&&(Be=i.RG32F),me===i.HALF_FLOAT&&(Be=i.RG16F),me===i.UNSIGNED_BYTE&&(Be=i.RG8)),H===i.RG_INTEGER&&(me===i.UNSIGNED_BYTE&&(Be=i.RG8UI),me===i.UNSIGNED_SHORT&&(Be=i.RG16UI),me===i.UNSIGNED_INT&&(Be=i.RG32UI),me===i.BYTE&&(Be=i.RG8I),me===i.SHORT&&(Be=i.RG16I),me===i.INT&&(Be=i.RG32I)),H===i.RGB_INTEGER&&(me===i.UNSIGNED_BYTE&&(Be=i.RGB8UI),me===i.UNSIGNED_SHORT&&(Be=i.RGB16UI),me===i.UNSIGNED_INT&&(Be=i.RGB32UI),me===i.BYTE&&(Be=i.RGB8I),me===i.SHORT&&(Be=i.RGB16I),me===i.INT&&(Be=i.RGB32I)),H===i.RGBA_INTEGER&&(me===i.UNSIGNED_BYTE&&(Be=i.RGBA8UI),me===i.UNSIGNED_SHORT&&(Be=i.RGBA16UI),me===i.UNSIGNED_INT&&(Be=i.RGBA32UI),me===i.BYTE&&(Be=i.RGBA8I),me===i.SHORT&&(Be=i.RGBA16I),me===i.INT&&(Be=i.RGBA32I)),H===i.RGB&&me===i.UNSIGNED_INT_5_9_9_9_REV&&(Be=i.RGB9_E5),H===i.RGBA){const gt=Fe?em:_n.getTransfer(Te);me===i.FLOAT&&(Be=i.RGBA32F),me===i.HALF_FLOAT&&(Be=i.RGBA16F),me===i.UNSIGNED_BYTE&&(Be=gt===Dn?i.SRGB8_ALPHA8:i.RGBA8),me===i.UNSIGNED_SHORT_4_4_4_4&&(Be=i.RGBA4),me===i.UNSIGNED_SHORT_5_5_5_1&&(Be=i.RGB5_A1)}return(Be===i.R16F||Be===i.R32F||Be===i.RG16F||Be===i.RG32F||Be===i.RGBA16F||Be===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Be}function b(X,H){let me;return X?H===null||H===al||H===Ju?me=i.DEPTH24_STENCIL8:H===es?me=i.DEPTH32F_STENCIL8:H===ed&&(me=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===al||H===Ju?me=i.DEPTH_COMPONENT24:H===es?me=i.DEPTH_COMPONENT32F:H===ed&&(me=i.DEPTH_COMPONENT16),me}function R(X,H){return S(X)===!0||X.isFramebufferTexture&&X.minFilter!==Ti&&X.minFilter!==ei?Math.log2(Math.max(H.width,H.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?H.mipmaps.length:1}function O(X){const H=X.target;H.removeEventListener("dispose",O),N(H),H.isVideoTexture&&p.delete(H)}function F(X){const H=X.target;H.removeEventListener("dispose",F),J(H)}function N(X){const H=n.get(X);if(H.__webglInit===void 0)return;const me=X.source,Te=y.get(me);if(Te){const Fe=Te[H.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&U(X),Object.keys(Te).length===0&&y.delete(me)}n.remove(X)}function U(X){const H=n.get(X);i.deleteTexture(H.__webglTexture);const me=X.source,Te=y.get(me);delete Te[H.__cacheKey],o.memory.textures--}function J(X){const H=n.get(X);if(X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let Te=0;Te<6;Te++){if(Array.isArray(H.__webglFramebuffer[Te]))for(let Fe=0;Fe<H.__webglFramebuffer[Te].length;Fe++)i.deleteFramebuffer(H.__webglFramebuffer[Te][Fe]);else i.deleteFramebuffer(H.__webglFramebuffer[Te]);H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer[Te])}else{if(Array.isArray(H.__webglFramebuffer))for(let Te=0;Te<H.__webglFramebuffer.length;Te++)i.deleteFramebuffer(H.__webglFramebuffer[Te]);else i.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&i.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&i.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let Te=0;Te<H.__webglColorRenderbuffer.length;Te++)H.__webglColorRenderbuffer[Te]&&i.deleteRenderbuffer(H.__webglColorRenderbuffer[Te]);H.__webglDepthRenderbuffer&&i.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const me=X.textures;for(let Te=0,Fe=me.length;Te<Fe;Te++){const Be=n.get(me[Te]);Be.__webglTexture&&(i.deleteTexture(Be.__webglTexture),o.memory.textures--),n.remove(me[Te])}n.remove(X)}let B=0;function L(){B=0}function ne(){const X=B;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),B+=1,X}function ie(X){const H=[];return H.push(X.wrapS),H.push(X.wrapT),H.push(X.wrapR||0),H.push(X.magFilter),H.push(X.minFilter),H.push(X.anisotropy),H.push(X.internalFormat),H.push(X.format),H.push(X.type),H.push(X.generateMipmaps),H.push(X.premultiplyAlpha),H.push(X.flipY),H.push(X.unpackAlignment),H.push(X.colorSpace),H.join()}function ce(X,H){const me=n.get(X);if(X.isVideoTexture&&Ge(X),X.isRenderTargetTexture===!1&&X.version>0&&me.__version!==X.version){const Te=X.image;if(Te===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Te.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ne(me,X,H);return}}t.bindTexture(i.TEXTURE_2D,me.__webglTexture,i.TEXTURE0+H)}function de(X,H){const me=n.get(X);if(X.version>0&&me.__version!==X.version){Ne(me,X,H);return}t.bindTexture(i.TEXTURE_2D_ARRAY,me.__webglTexture,i.TEXTURE0+H)}function le(X,H){const me=n.get(X);if(X.version>0&&me.__version!==X.version){Ne(me,X,H);return}t.bindTexture(i.TEXTURE_3D,me.__webglTexture,i.TEXTURE0+H)}function ye(X,H){const me=n.get(X);if(X.version>0&&me.__version!==X.version){oe(me,X,H);return}t.bindTexture(i.TEXTURE_CUBE_MAP,me.__webglTexture,i.TEXTURE0+H)}const G={[gc]:i.REPEAT,[vs]:i.CLAMP_TO_EDGE,[$h]:i.MIRRORED_REPEAT},Z={[Ti]:i.NEAREST,[e0]:i.NEAREST_MIPMAP_NEAREST,[Iu]:i.NEAREST_MIPMAP_LINEAR,[ei]:i.LINEAR,[Kh]:i.LINEAR_MIPMAP_NEAREST,[Ws]:i.LINEAR_MIPMAP_LINEAR},z={[wT]:i.NEVER,[PT]:i.ALWAYS,[ET]:i.LESS,[MS]:i.LEQUAL,[CT]:i.EQUAL,[RT]:i.GEQUAL,[bT]:i.GREATER,[TT]:i.NOTEQUAL};function Y(X,H){if(H.type===es&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===ei||H.magFilter===Kh||H.magFilter===Iu||H.magFilter===Ws||H.minFilter===ei||H.minFilter===Kh||H.minFilter===Iu||H.minFilter===Ws)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(X,i.TEXTURE_WRAP_S,G[H.wrapS]),i.texParameteri(X,i.TEXTURE_WRAP_T,G[H.wrapT]),(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)&&i.texParameteri(X,i.TEXTURE_WRAP_R,G[H.wrapR]),i.texParameteri(X,i.TEXTURE_MAG_FILTER,Z[H.magFilter]),i.texParameteri(X,i.TEXTURE_MIN_FILTER,Z[H.minFilter]),H.compareFunction&&(i.texParameteri(X,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(X,i.TEXTURE_COMPARE_FUNC,z[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===Ti||H.minFilter!==Iu&&H.minFilter!==Ws||H.type===es&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||n.get(H).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");i.texParameterf(X,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),n.get(H).__currentAnisotropy=H.anisotropy}}}function pe(X,H){let me=!1;X.__webglInit===void 0&&(X.__webglInit=!0,H.addEventListener("dispose",O));const Te=H.source;let Fe=y.get(Te);Fe===void 0&&(Fe={},y.set(Te,Fe));const Be=ie(H);if(Be!==X.__cacheKey){Fe[Be]===void 0&&(Fe[Be]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,me=!0),Fe[Be].usedTimes++;const gt=Fe[X.__cacheKey];gt!==void 0&&(Fe[X.__cacheKey].usedTimes--,gt.usedTimes===0&&U(H)),X.__cacheKey=Be,X.__webglTexture=Fe[Be].texture}return me}function Ne(X,H,me){let Te=i.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Te=i.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Te=i.TEXTURE_3D);const Fe=pe(X,H),Be=H.source;t.bindTexture(Te,X.__webglTexture,i.TEXTURE0+me);const gt=n.get(Be);if(Be.version!==gt.__version||Fe===!0){t.activeTexture(i.TEXTURE0+me);const Ve=_n.getPrimaries(_n.workingColorSpace),lt=H.colorSpace===Ya?null:_n.getPrimaries(H.colorSpace),Qt=H.colorSpace===Ya||Ve===lt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);let ze=w(H.image,!1,r.maxTextureSize);ze=xt(H,ze);const st=s.convert(H.format,H.colorSpace),Ft=s.convert(H.type);let It=C(H.internalFormat,st,Ft,H.colorSpace,H.isVideoTexture);Y(Te,H);let ht;const re=H.mipmaps,Re=H.isVideoTexture!==!0,et=gt.__version===void 0||Fe===!0,$=Be.dataReady,je=R(H,ze);if(H.isDepthTexture)It=b(H.format===Ku,H.type),et&&(Re?t.texStorage2D(i.TEXTURE_2D,1,It,ze.width,ze.height):t.texImage2D(i.TEXTURE_2D,0,It,ze.width,ze.height,0,st,Ft,null));else if(H.isDataTexture)if(re.length>0){Re&&et&&t.texStorage2D(i.TEXTURE_2D,je,It,re[0].width,re[0].height);for(let we=0,Le=re.length;we<Le;we++)ht=re[we],Re?$&&t.texSubImage2D(i.TEXTURE_2D,we,0,0,ht.width,ht.height,st,Ft,ht.data):t.texImage2D(i.TEXTURE_2D,we,It,ht.width,ht.height,0,st,Ft,ht.data);H.generateMipmaps=!1}else Re?(et&&t.texStorage2D(i.TEXTURE_2D,je,It,ze.width,ze.height),$&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ze.width,ze.height,st,Ft,ze.data)):t.texImage2D(i.TEXTURE_2D,0,It,ze.width,ze.height,0,st,Ft,ze.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Re&&et&&t.texStorage3D(i.TEXTURE_2D_ARRAY,je,It,re[0].width,re[0].height,ze.depth);for(let we=0,Le=re.length;we<Le;we++)if(ht=re[we],H.format!==dr)if(st!==null)if(Re){if($)if(H.layerUpdates.size>0){const nt=IA(ht.width,ht.height,H.format,H.type);for(const ct of H.layerUpdates){const kt=ht.data.subarray(ct*nt/ht.data.BYTES_PER_ELEMENT,(ct+1)*nt/ht.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,we,0,0,ct,ht.width,ht.height,1,st,kt,0,0)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,we,0,0,0,ht.width,ht.height,ze.depth,st,ht.data,0,0)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,we,It,ht.width,ht.height,ze.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?$&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,we,0,0,0,ht.width,ht.height,ze.depth,st,Ft,ht.data):t.texImage3D(i.TEXTURE_2D_ARRAY,we,It,ht.width,ht.height,ze.depth,0,st,Ft,ht.data)}else{Re&&et&&t.texStorage2D(i.TEXTURE_2D,je,It,re[0].width,re[0].height);for(let we=0,Le=re.length;we<Le;we++)ht=re[we],H.format!==dr?st!==null?Re?$&&t.compressedTexSubImage2D(i.TEXTURE_2D,we,0,0,ht.width,ht.height,st,ht.data):t.compressedTexImage2D(i.TEXTURE_2D,we,It,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?$&&t.texSubImage2D(i.TEXTURE_2D,we,0,0,ht.width,ht.height,st,Ft,ht.data):t.texImage2D(i.TEXTURE_2D,we,It,ht.width,ht.height,0,st,Ft,ht.data)}else if(H.isDataArrayTexture)if(Re){if(et&&t.texStorage3D(i.TEXTURE_2D_ARRAY,je,It,ze.width,ze.height,ze.depth),$)if(H.layerUpdates.size>0){const we=IA(ze.width,ze.height,H.format,H.type);for(const Le of H.layerUpdates){const nt=ze.data.subarray(Le*we/ze.data.BYTES_PER_ELEMENT,(Le+1)*we/ze.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Le,ze.width,ze.height,1,st,Ft,nt)}H.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ze.width,ze.height,ze.depth,st,Ft,ze.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,It,ze.width,ze.height,ze.depth,0,st,Ft,ze.data);else if(H.isData3DTexture)Re?(et&&t.texStorage3D(i.TEXTURE_3D,je,It,ze.width,ze.height,ze.depth),$&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ze.width,ze.height,ze.depth,st,Ft,ze.data)):t.texImage3D(i.TEXTURE_3D,0,It,ze.width,ze.height,ze.depth,0,st,Ft,ze.data);else if(H.isFramebufferTexture){if(et)if(Re)t.texStorage2D(i.TEXTURE_2D,je,It,ze.width,ze.height);else{let we=ze.width,Le=ze.height;for(let nt=0;nt<je;nt++)t.texImage2D(i.TEXTURE_2D,nt,It,we,Le,0,st,Ft,null),we>>=1,Le>>=1}}else if(re.length>0){if(Re&&et){const we=tt(re[0]);t.texStorage2D(i.TEXTURE_2D,je,It,we.width,we.height)}for(let we=0,Le=re.length;we<Le;we++)ht=re[we],Re?$&&t.texSubImage2D(i.TEXTURE_2D,we,0,0,st,Ft,ht):t.texImage2D(i.TEXTURE_2D,we,It,st,Ft,ht);H.generateMipmaps=!1}else if(Re){if(et){const we=tt(ze);t.texStorage2D(i.TEXTURE_2D,je,It,we.width,we.height)}$&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,st,Ft,ze)}else t.texImage2D(i.TEXTURE_2D,0,It,st,Ft,ze);S(H)&&M(Te),gt.__version=Be.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function oe(X,H,me){if(H.image.length!==6)return;const Te=pe(X,H),Fe=H.source;t.bindTexture(i.TEXTURE_CUBE_MAP,X.__webglTexture,i.TEXTURE0+me);const Be=n.get(Fe);if(Fe.version!==Be.__version||Te===!0){t.activeTexture(i.TEXTURE0+me);const gt=_n.getPrimaries(_n.workingColorSpace),Ve=H.colorSpace===Ya?null:_n.getPrimaries(H.colorSpace),lt=H.colorSpace===Ya||gt===Ve?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,H.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,H.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const Qt=H.isCompressedTexture||H.image[0].isCompressedTexture,ze=H.image[0]&&H.image[0].isDataTexture,st=[];for(let Le=0;Le<6;Le++)!Qt&&!ze?st[Le]=w(H.image[Le],!0,r.maxCubemapSize):st[Le]=ze?H.image[Le].image:H.image[Le],st[Le]=xt(H,st[Le]);const Ft=st[0],It=s.convert(H.format,H.colorSpace),ht=s.convert(H.type),re=C(H.internalFormat,It,ht,H.colorSpace),Re=H.isVideoTexture!==!0,et=Be.__version===void 0||Te===!0,$=Fe.dataReady;let je=R(H,Ft);Y(i.TEXTURE_CUBE_MAP,H);let we;if(Qt){Re&&et&&t.texStorage2D(i.TEXTURE_CUBE_MAP,je,re,Ft.width,Ft.height);for(let Le=0;Le<6;Le++){we=st[Le].mipmaps;for(let nt=0;nt<we.length;nt++){const ct=we[nt];H.format!==dr?It!==null?Re?$&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt,0,0,ct.width,ct.height,It,ct.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt,re,ct.width,ct.height,0,ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?$&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt,0,0,ct.width,ct.height,It,ht,ct.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt,re,ct.width,ct.height,0,It,ht,ct.data)}}}else{if(we=H.mipmaps,Re&&et){we.length>0&&je++;const Le=tt(st[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,je,re,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(ze){Re?$&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,st[Le].width,st[Le].height,It,ht,st[Le].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,re,st[Le].width,st[Le].height,0,It,ht,st[Le].data);for(let nt=0;nt<we.length;nt++){const kt=we[nt].image[Le].image;Re?$&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt+1,0,0,kt.width,kt.height,It,ht,kt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt+1,re,kt.width,kt.height,0,It,ht,kt.data)}}else{Re?$&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,It,ht,st[Le]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,re,It,ht,st[Le]);for(let nt=0;nt<we.length;nt++){const ct=we[nt];Re?$&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt+1,0,0,It,ht,ct.image[Le]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Le,nt+1,re,It,ht,ct.image[Le])}}}S(H)&&M(i.TEXTURE_CUBE_MAP),Be.__version=Fe.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function ve(X,H,me,Te,Fe,Be){const gt=s.convert(me.format,me.colorSpace),Ve=s.convert(me.type),lt=C(me.internalFormat,gt,Ve,me.colorSpace);if(!n.get(H).__hasExternalTextures){const ze=Math.max(1,H.width>>Be),st=Math.max(1,H.height>>Be);Fe===i.TEXTURE_3D||Fe===i.TEXTURE_2D_ARRAY?t.texImage3D(Fe,Be,lt,ze,st,H.depth,0,gt,Ve,null):t.texImage2D(Fe,Be,lt,ze,st,0,gt,Ve,null)}t.bindFramebuffer(i.FRAMEBUFFER,X),Ue(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Te,Fe,n.get(me).__webglTexture,0,Ke(H)):(Fe===i.TEXTURE_2D||Fe>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Te,Fe,n.get(me).__webglTexture,Be),t.bindFramebuffer(i.FRAMEBUFFER,null)}function be(X,H,me){if(i.bindRenderbuffer(i.RENDERBUFFER,X),H.depthBuffer){const Te=H.depthTexture,Fe=Te&&Te.isDepthTexture?Te.type:null,Be=b(H.stencilBuffer,Fe),gt=H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ve=Ke(H);Ue(H)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ve,Be,H.width,H.height):me?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ve,Be,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,Be,H.width,H.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,gt,i.RENDERBUFFER,X)}else{const Te=H.textures;for(let Fe=0;Fe<Te.length;Fe++){const Be=Te[Fe],gt=s.convert(Be.format,Be.colorSpace),Ve=s.convert(Be.type),lt=C(Be.internalFormat,gt,Ve,Be.colorSpace),Qt=Ke(H);me&&Ue(H)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Qt,lt,H.width,H.height):Ue(H)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Qt,lt,H.width,H.height):i.renderbufferStorage(i.RENDERBUFFER,lt,H.width,H.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ie(X,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,X),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(H.depthTexture).__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),ce(H.depthTexture,0);const Te=n.get(H.depthTexture).__webglTexture,Fe=Ke(H);if(H.depthTexture.format===zu)Ue(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Te,0);else if(H.depthTexture.format===Ku)Ue(H)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0,Fe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Te,0);else throw new Error("Unknown depthTexture format")}function Xe(X){const H=n.get(X),me=X.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==X.depthTexture){const Te=X.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),Te){const Fe=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,Te.removeEventListener("dispose",Fe)};Te.addEventListener("dispose",Fe),H.__depthDisposeCallback=Fe}H.__boundDepthTexture=Te}if(X.depthTexture&&!H.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");Ie(H.__webglFramebuffer,X)}else if(me){H.__webglDepthbuffer=[];for(let Te=0;Te<6;Te++)if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer[Te]),H.__webglDepthbuffer[Te]===void 0)H.__webglDepthbuffer[Te]=i.createRenderbuffer(),be(H.__webglDepthbuffer[Te],X,!1);else{const Fe=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Be=H.__webglDepthbuffer[Te];i.bindRenderbuffer(i.RENDERBUFFER,Be),i.framebufferRenderbuffer(i.FRAMEBUFFER,Fe,i.RENDERBUFFER,Be)}}else if(t.bindFramebuffer(i.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=i.createRenderbuffer(),be(H.__webglDepthbuffer,X,!1);else{const Te=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Fe=H.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Fe),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,Fe)}t.bindFramebuffer(i.FRAMEBUFFER,null)}function rt(X,H,me){const Te=n.get(X);H!==void 0&&ve(Te.__webglFramebuffer,X,X.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),me!==void 0&&Xe(X)}function pt(X){const H=X.texture,me=n.get(X),Te=n.get(H);X.addEventListener("dispose",F);const Fe=X.textures,Be=X.isWebGLCubeRenderTarget===!0,gt=Fe.length>1;if(gt||(Te.__webglTexture===void 0&&(Te.__webglTexture=i.createTexture()),Te.__version=H.version,o.memory.textures++),Be){me.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(H.mipmaps&&H.mipmaps.length>0){me.__webglFramebuffer[Ve]=[];for(let lt=0;lt<H.mipmaps.length;lt++)me.__webglFramebuffer[Ve][lt]=i.createFramebuffer()}else me.__webglFramebuffer[Ve]=i.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){me.__webglFramebuffer=[];for(let Ve=0;Ve<H.mipmaps.length;Ve++)me.__webglFramebuffer[Ve]=i.createFramebuffer()}else me.__webglFramebuffer=i.createFramebuffer();if(gt)for(let Ve=0,lt=Fe.length;Ve<lt;Ve++){const Qt=n.get(Fe[Ve]);Qt.__webglTexture===void 0&&(Qt.__webglTexture=i.createTexture(),o.memory.textures++)}if(X.samples>0&&Ue(X)===!1){me.__webglMultisampledFramebuffer=i.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Fe.length;Ve++){const lt=Fe[Ve];me.__webglColorRenderbuffer[Ve]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,me.__webglColorRenderbuffer[Ve]);const Qt=s.convert(lt.format,lt.colorSpace),ze=s.convert(lt.type),st=C(lt.internalFormat,Qt,ze,lt.colorSpace,X.isXRRenderTarget===!0),Ft=Ke(X);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ft,st,X.width,X.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ve,i.RENDERBUFFER,me.__webglColorRenderbuffer[Ve])}i.bindRenderbuffer(i.RENDERBUFFER,null),X.depthBuffer&&(me.__webglDepthRenderbuffer=i.createRenderbuffer(),be(me.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Be){t.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),Y(i.TEXTURE_CUBE_MAP,H);for(let Ve=0;Ve<6;Ve++)if(H.mipmaps&&H.mipmaps.length>0)for(let lt=0;lt<H.mipmaps.length;lt++)ve(me.__webglFramebuffer[Ve][lt],X,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,lt);else ve(me.__webglFramebuffer[Ve],X,H,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);S(H)&&M(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(gt){for(let Ve=0,lt=Fe.length;Ve<lt;Ve++){const Qt=Fe[Ve],ze=n.get(Qt);t.bindTexture(i.TEXTURE_2D,ze.__webglTexture),Y(i.TEXTURE_2D,Qt),ve(me.__webglFramebuffer,X,Qt,i.COLOR_ATTACHMENT0+Ve,i.TEXTURE_2D,0),S(Qt)&&M(i.TEXTURE_2D)}t.unbindTexture()}else{let Ve=i.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(Ve=X.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Ve,Te.__webglTexture),Y(Ve,H),H.mipmaps&&H.mipmaps.length>0)for(let lt=0;lt<H.mipmaps.length;lt++)ve(me.__webglFramebuffer[lt],X,H,i.COLOR_ATTACHMENT0,Ve,lt);else ve(me.__webglFramebuffer,X,H,i.COLOR_ATTACHMENT0,Ve,0);S(H)&&M(Ve),t.unbindTexture()}X.depthBuffer&&Xe(X)}function We(X){const H=X.textures;for(let me=0,Te=H.length;me<Te;me++){const Fe=H[me];if(S(Fe)){const Be=X.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,gt=n.get(Fe).__webglTexture;t.bindTexture(Be,gt),M(Be),t.unbindTexture()}}}const Pe=[],j=[];function Je(X){if(X.samples>0){if(Ue(X)===!1){const H=X.textures,me=X.width,Te=X.height;let Fe=i.COLOR_BUFFER_BIT;const Be=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,gt=n.get(X),Ve=H.length>1;if(Ve)for(let lt=0;lt<H.length;lt++)t.bindFramebuffer(i.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,gt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,gt.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,gt.__webglFramebuffer);for(let lt=0;lt<H.length;lt++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(Fe|=i.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(Fe|=i.STENCIL_BUFFER_BIT)),Ve){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,gt.__webglColorRenderbuffer[lt]);const Qt=n.get(H[lt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Qt,0)}i.blitFramebuffer(0,0,me,Te,0,0,me,Te,Fe,i.NEAREST),c===!0&&(Pe.length=0,j.length=0,Pe.push(i.COLOR_ATTACHMENT0+lt),X.depthBuffer&&X.resolveDepthBuffer===!1&&(Pe.push(Be),j.push(Be),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,j)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Pe))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ve)for(let lt=0;lt<H.length;lt++){t.bindFramebuffer(i.FRAMEBUFFER,gt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.RENDERBUFFER,gt.__webglColorRenderbuffer[lt]);const Qt=n.get(H[lt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,gt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+lt,i.TEXTURE_2D,Qt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,gt.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&c){const H=X.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[H])}}}function Ke(X){return Math.min(r.maxSamples,X.samples)}function Ue(X){const H=n.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Ge(X){const H=o.render.frame;p.get(X)!==H&&(p.set(X,H),X.update())}function xt(X,H){const me=X.colorSpace,Te=X.format,Fe=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||me!==ul&&me!==Ya&&(_n.getTransfer(me)===Dn?(Te!==dr||Fe!==bo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),H}function tt(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(f.width=X.naturalWidth||X.width,f.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(f.width=X.displayWidth,f.height=X.displayHeight):(f.width=X.width,f.height=X.height),f}this.allocateTextureUnit=ne,this.resetTextureUnits=L,this.setTexture2D=ce,this.setTexture2DArray=de,this.setTexture3D=le,this.setTextureCube=ye,this.rebindTextures=rt,this.setupRenderTarget=pt,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=Xe,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=Ue}function VT(i,e){function t(n,r=Ya){let s;const o=_n.getTransfer(r);if(n===bo)return i.UNSIGNED_BYTE;if(n===n0)return i.UNSIGNED_SHORT_4_4_4_4;if(n===i0)return i.UNSIGNED_SHORT_5_5_5_1;if(n===pS)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===hS)return i.BYTE;if(n===dS)return i.SHORT;if(n===ed)return i.UNSIGNED_SHORT;if(n===t0)return i.INT;if(n===al)return i.UNSIGNED_INT;if(n===es)return i.FLOAT;if(n===pd)return i.HALF_FLOAT;if(n===mS)return i.ALPHA;if(n===gS)return i.RGB;if(n===dr)return i.RGBA;if(n===yS)return i.LUMINANCE;if(n===vS)return i.LUMINANCE_ALPHA;if(n===zu)return i.DEPTH_COMPONENT;if(n===Ku)return i.DEPTH_STENCIL;if(n===r0)return i.RED;if(n===Sm)return i.RED_INTEGER;if(n===xS)return i.RG;if(n===s0)return i.RG_INTEGER;if(n===o0)return i.RGBA_INTEGER;if(n===Np||n===Op||n===kp||n===Up)if(o===Dn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===Np)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Op)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===kp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Up)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===Np)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Op)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===kp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Up)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===nv||n===iv||n===rv||n===sv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===nv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===iv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===rv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===sv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===ov||n===av||n===lv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===ov||n===av)return o===Dn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===lv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===cv||n===uv||n===fv||n===hv||n===dv||n===pv||n===mv||n===gv||n===yv||n===vv||n===xv||n===_v||n===Av||n===Sv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===cv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===uv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===fv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===hv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===dv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===pv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===mv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===gv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===yv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===vv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===xv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===_v)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Av)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Sv)return o===Dn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===zp||n===Mv||n===wv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===zp)return o===Dn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Mv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===wv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===_S||n===Ev||n===Cv||n===bv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===zp)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Ev)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Cv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===bv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Ju?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class WT extends Ln{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Qa extends ln{constructor(){super(),this.isGroup=!0,this.type="Group"}}const mO={type:"move"};class $x{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Qa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Qa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new W,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new W),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Qa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new W,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new W),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){o=!0;for(const w of e.hand.values()){const S=t.getJointPose(w,n),M=this._getHandJoint(f,w);S!==null&&(M.matrix.fromArray(S.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=S.radius),M.visible=S!==null}const p=f.joints["index-finger-tip"],m=f.joints["thumb-tip"],y=p.position.distanceTo(m.position),v=.02,x=.005;f.inputState.pinching&&y>v+x?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=v-x&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(mO)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Qa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}const gO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class vO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Pn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=n.depthNear||t.depthFar!=n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ro({vertexShader:gO,fragmentShader:yO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ti(new md(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class xO extends Do{constructor(e,t){super();const n=this;let r=null,s=1,o=null,l="local-floor",c=1,f=null,p=null,m=null,y=null,v=null,x=null;const w=new vO,S=t.getContextAttributes();let M=null,C=null;const b=[],R=[],O=new De;let F=null;const N=new Ln;N.layers.enable(1),N.viewport=new yn;const U=new Ln;U.layers.enable(2),U.viewport=new yn;const J=[N,U],B=new WT;B.layers.enable(1),B.layers.enable(2);let L=null,ne=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ve=b[oe];return ve===void 0&&(ve=new $x,b[oe]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(oe){let ve=b[oe];return ve===void 0&&(ve=new $x,b[oe]=ve),ve.getGripSpace()},this.getHand=function(oe){let ve=b[oe];return ve===void 0&&(ve=new $x,b[oe]=ve),ve.getHandSpace()};function ie(oe){const ve=R.indexOf(oe.inputSource);if(ve===-1)return;const be=b[ve];be!==void 0&&(be.update(oe.inputSource,oe.frame,f||o),be.dispatchEvent({type:oe.type,data:oe.inputSource}))}function ce(){r.removeEventListener("select",ie),r.removeEventListener("selectstart",ie),r.removeEventListener("selectend",ie),r.removeEventListener("squeeze",ie),r.removeEventListener("squeezestart",ie),r.removeEventListener("squeezeend",ie),r.removeEventListener("end",ce),r.removeEventListener("inputsourceschange",de);for(let oe=0;oe<b.length;oe++){const ve=R[oe];ve!==null&&(R[oe]=null,b[oe].disconnect(ve))}L=null,ne=null,w.reset(),e.setRenderTarget(M),v=null,y=null,m=null,r=null,C=null,Ne.stop(),n.isPresenting=!1,e.setPixelRatio(F),e.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){l=oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||o},this.setReferenceSpace=function(oe){f=oe},this.getBaseLayer=function(){return y!==null?y:v},this.getBinding=function(){return m},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",ie),r.addEventListener("selectstart",ie),r.addEventListener("selectend",ie),r.addEventListener("squeeze",ie),r.addEventListener("squeezestart",ie),r.addEventListener("squeezeend",ie),r.addEventListener("end",ce),r.addEventListener("inputsourceschange",de),S.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(O),r.renderState.layers===void 0){const ve={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(r,t,ve),r.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),C=new To(v.framebufferWidth,v.framebufferHeight,{format:dr,type:bo,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let ve=null,be=null,Ie=null;S.depth&&(Ie=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ve=S.stencil?Ku:zu,be=S.stencil?Ju:al);const Xe={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:s};m=new XRWebGLBinding(r,t),y=m.createProjectionLayer(Xe),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),C=new To(y.textureWidth,y.textureHeight,{format:dr,type:bo,depthTexture:new BS(y.textureWidth,y.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,ve),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(c),f=null,o=await r.requestReferenceSpace(l),Ne.setContext(r),Ne.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function de(oe){for(let ve=0;ve<oe.removed.length;ve++){const be=oe.removed[ve],Ie=R.indexOf(be);Ie>=0&&(R[Ie]=null,b[Ie].disconnect(be))}for(let ve=0;ve<oe.added.length;ve++){const be=oe.added[ve];let Ie=R.indexOf(be);if(Ie===-1){for(let rt=0;rt<b.length;rt++)if(rt>=R.length){R.push(be),Ie=rt;break}else if(R[rt]===null){R[rt]=be,Ie=rt;break}if(Ie===-1)break}const Xe=b[Ie];Xe&&Xe.connect(be)}}const le=new W,ye=new W;function G(oe,ve,be){le.setFromMatrixPosition(ve.matrixWorld),ye.setFromMatrixPosition(be.matrixWorld);const Ie=le.distanceTo(ye),Xe=ve.projectionMatrix.elements,rt=be.projectionMatrix.elements,pt=Xe[14]/(Xe[10]-1),We=Xe[14]/(Xe[10]+1),Pe=(Xe[9]+1)/Xe[5],j=(Xe[9]-1)/Xe[5],Je=(Xe[8]-1)/Xe[0],Ke=(rt[8]+1)/rt[0],Ue=pt*Je,Ge=pt*Ke,xt=Ie/(-Je+Ke),tt=xt*-Je;if(ve.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(tt),oe.translateZ(xt),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),Xe[10]===-1)oe.projectionMatrix.copy(ve.projectionMatrix),oe.projectionMatrixInverse.copy(ve.projectionMatrixInverse);else{const X=pt+xt,H=We+xt,me=Ue-tt,Te=Ge+(Ie-tt),Fe=Pe*We/H*X,Be=j*We/H*X;oe.projectionMatrix.makePerspective(me,Te,Fe,Be,X,H),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function Z(oe,ve){ve===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ve.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let ve=oe.near,be=oe.far;w.texture!==null&&(w.depthNear>0&&(ve=w.depthNear),w.depthFar>0&&(be=w.depthFar)),B.near=U.near=N.near=ve,B.far=U.far=N.far=be,(L!==B.near||ne!==B.far)&&(r.updateRenderState({depthNear:B.near,depthFar:B.far}),L=B.near,ne=B.far);const Ie=oe.parent,Xe=B.cameras;Z(B,Ie);for(let rt=0;rt<Xe.length;rt++)Z(Xe[rt],Ie);Xe.length===2?G(B,N,U):B.projectionMatrix.copy(N.projectionMatrix),z(oe,B,Ie)};function z(oe,ve,be){be===null?oe.matrix.copy(ve.matrixWorld):(oe.matrix.copy(be.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(ve.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(ve.projectionMatrix),oe.projectionMatrixInverse.copy(ve.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=id*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(y===null&&v===null))return c},this.setFoveation=function(oe){c=oe,y!==null&&(y.fixedFoveation=oe),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=oe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(B)};let Y=null;function pe(oe,ve){if(p=ve.getViewerPose(f||o),x=ve,p!==null){const be=p.views;v!==null&&(e.setRenderTargetFramebuffer(C,v.framebuffer),e.setRenderTarget(C));let Ie=!1;be.length!==B.cameras.length&&(B.cameras.length=0,Ie=!0);for(let rt=0;rt<be.length;rt++){const pt=be[rt];let We=null;if(v!==null)We=v.getViewport(pt);else{const j=m.getViewSubImage(y,pt);We=j.viewport,rt===0&&(e.setRenderTargetTextures(C,j.colorTexture,y.ignoreDepthValues?void 0:j.depthStencilTexture),e.setRenderTarget(C))}let Pe=J[rt];Pe===void 0&&(Pe=new Ln,Pe.layers.enable(rt),Pe.viewport=new yn,J[rt]=Pe),Pe.matrix.fromArray(pt.transform.matrix),Pe.matrix.decompose(Pe.position,Pe.quaternion,Pe.scale),Pe.projectionMatrix.fromArray(pt.projectionMatrix),Pe.projectionMatrixInverse.copy(Pe.projectionMatrix).invert(),Pe.viewport.set(We.x,We.y,We.width,We.height),rt===0&&(B.matrix.copy(Pe.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),Ie===!0&&B.cameras.push(Pe)}const Xe=r.enabledFeatures;if(Xe&&Xe.includes("depth-sensing")){const rt=m.getDepthInformation(be[0]);rt&&rt.isValid&&rt.texture&&w.init(e,rt,r.renderState)}}for(let be=0;be<b.length;be++){const Ie=R[be],Xe=b[be];Ie!==null&&Xe!==void 0&&Xe.update(Ie,ve,f||o)}Y&&Y(oe,ve),ve.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ve}),x=null}const Ne=new kT;Ne.setAnimationLoop(pe),this.setAnimationLoop=function(oe){Y=oe},this.dispose=function(){}}}const du=new Fr,_O=new Tt;function AO(i,e){function t(S,M){S.matrixAutoUpdate===!0&&S.updateMatrix(),M.value.copy(S.matrix)}function n(S,M){M.color.getRGB(S.fogColor.value,NT(i)),M.isFog?(S.fogNear.value=M.near,S.fogFar.value=M.far):M.isFogExp2&&(S.fogDensity.value=M.density)}function r(S,M,C,b,R){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(S,M):M.isMeshToonMaterial?(s(S,M),m(S,M)):M.isMeshPhongMaterial?(s(S,M),p(S,M)):M.isMeshStandardMaterial?(s(S,M),y(S,M),M.isMeshPhysicalMaterial&&v(S,M,R)):M.isMeshMatcapMaterial?(s(S,M),x(S,M)):M.isMeshDepthMaterial?s(S,M):M.isMeshDistanceMaterial?(s(S,M),w(S,M)):M.isMeshNormalMaterial?s(S,M):M.isLineBasicMaterial?(o(S,M),M.isLineDashedMaterial&&l(S,M)):M.isPointsMaterial?c(S,M,C,b):M.isSpriteMaterial?f(S,M):M.isShadowMaterial?(S.color.value.copy(M.color),S.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(S,M){S.opacity.value=M.opacity,M.color&&S.diffuse.value.copy(M.color),M.emissive&&S.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(S.map.value=M.map,t(M.map,S.mapTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,t(M.alphaMap,S.alphaMapTransform)),M.bumpMap&&(S.bumpMap.value=M.bumpMap,t(M.bumpMap,S.bumpMapTransform),S.bumpScale.value=M.bumpScale,M.side===Dr&&(S.bumpScale.value*=-1)),M.normalMap&&(S.normalMap.value=M.normalMap,t(M.normalMap,S.normalMapTransform),S.normalScale.value.copy(M.normalScale),M.side===Dr&&S.normalScale.value.negate()),M.displacementMap&&(S.displacementMap.value=M.displacementMap,t(M.displacementMap,S.displacementMapTransform),S.displacementScale.value=M.displacementScale,S.displacementBias.value=M.displacementBias),M.emissiveMap&&(S.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,S.emissiveMapTransform)),M.specularMap&&(S.specularMap.value=M.specularMap,t(M.specularMap,S.specularMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest);const C=e.get(M),b=C.envMap,R=C.envMapRotation;b&&(S.envMap.value=b,du.copy(R),du.x*=-1,du.y*=-1,du.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&(du.y*=-1,du.z*=-1),S.envMapRotation.value.setFromMatrix4(_O.makeRotationFromEuler(du)),S.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,S.reflectivity.value=M.reflectivity,S.ior.value=M.ior,S.refractionRatio.value=M.refractionRatio),M.lightMap&&(S.lightMap.value=M.lightMap,S.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,S.lightMapTransform)),M.aoMap&&(S.aoMap.value=M.aoMap,S.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,S.aoMapTransform))}function o(S,M){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,M.map&&(S.map.value=M.map,t(M.map,S.mapTransform))}function l(S,M){S.dashSize.value=M.dashSize,S.totalSize.value=M.dashSize+M.gapSize,S.scale.value=M.scale}function c(S,M,C,b){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,S.size.value=M.size*C,S.scale.value=b*.5,M.map&&(S.map.value=M.map,t(M.map,S.uvTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,t(M.alphaMap,S.alphaMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest)}function f(S,M){S.diffuse.value.copy(M.color),S.opacity.value=M.opacity,S.rotation.value=M.rotation,M.map&&(S.map.value=M.map,t(M.map,S.mapTransform)),M.alphaMap&&(S.alphaMap.value=M.alphaMap,t(M.alphaMap,S.alphaMapTransform)),M.alphaTest>0&&(S.alphaTest.value=M.alphaTest)}function p(S,M){S.specular.value.copy(M.specular),S.shininess.value=Math.max(M.shininess,1e-4)}function m(S,M){M.gradientMap&&(S.gradientMap.value=M.gradientMap)}function y(S,M){S.metalness.value=M.metalness,M.metalnessMap&&(S.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,S.metalnessMapTransform)),S.roughness.value=M.roughness,M.roughnessMap&&(S.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,S.roughnessMapTransform)),M.envMap&&(S.envMapIntensity.value=M.envMapIntensity)}function v(S,M,C){S.ior.value=M.ior,M.sheen>0&&(S.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),S.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(S.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,S.sheenColorMapTransform)),M.sheenRoughnessMap&&(S.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,S.sheenRoughnessMapTransform))),M.clearcoat>0&&(S.clearcoat.value=M.clearcoat,S.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(S.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,S.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(S.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,S.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(S.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,S.clearcoatNormalMapTransform),S.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Dr&&S.clearcoatNormalScale.value.negate())),M.dispersion>0&&(S.dispersion.value=M.dispersion),M.iridescence>0&&(S.iridescence.value=M.iridescence,S.iridescenceIOR.value=M.iridescenceIOR,S.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],S.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(S.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,S.iridescenceMapTransform)),M.iridescenceThicknessMap&&(S.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,S.iridescenceThicknessMapTransform))),M.transmission>0&&(S.transmission.value=M.transmission,S.transmissionSamplerMap.value=C.texture,S.transmissionSamplerSize.value.set(C.width,C.height),M.transmissionMap&&(S.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,S.transmissionMapTransform)),S.thickness.value=M.thickness,M.thicknessMap&&(S.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,S.thicknessMapTransform)),S.attenuationDistance.value=M.attenuationDistance,S.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(S.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(S.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,S.anisotropyMapTransform))),S.specularIntensity.value=M.specularIntensity,S.specularColor.value.copy(M.specularColor),M.specularColorMap&&(S.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,S.specularColorMapTransform)),M.specularIntensityMap&&(S.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,S.specularIntensityMapTransform))}function x(S,M){M.matcap&&(S.matcap.value=M.matcap)}function w(S,M){const C=e.get(M).light;S.referencePosition.value.setFromMatrixPosition(C.matrixWorld),S.nearDistance.value=C.shadow.camera.near,S.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function SO(i,e,t,n){let r={},s={},o=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,b){const R=b.program;n.uniformBlockBinding(C,R)}function f(C,b){let R=r[C.id];R===void 0&&(x(C),R=p(C),r[C.id]=R,C.addEventListener("dispose",S));const O=b.program;n.updateUBOMapping(C,O);const F=e.render.frame;s[C.id]!==F&&(y(C),s[C.id]=F)}function p(C){const b=m();C.__bindingPointIndex=b;const R=i.createBuffer(),O=C.__size,F=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,O,F),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,b,R),R}function m(){for(let C=0;C<l;C++)if(o.indexOf(C)===-1)return o.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(C){const b=r[C.id],R=C.uniforms,O=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,b);for(let F=0,N=R.length;F<N;F++){const U=Array.isArray(R[F])?R[F]:[R[F]];for(let J=0,B=U.length;J<B;J++){const L=U[J];if(v(L,F,J,O)===!0){const ne=L.__offset,ie=Array.isArray(L.value)?L.value:[L.value];let ce=0;for(let de=0;de<ie.length;de++){const le=ie[de],ye=w(le);typeof le=="number"||typeof le=="boolean"?(L.__data[0]=le,i.bufferSubData(i.UNIFORM_BUFFER,ne+ce,L.__data)):le.isMatrix3?(L.__data[0]=le.elements[0],L.__data[1]=le.elements[1],L.__data[2]=le.elements[2],L.__data[3]=0,L.__data[4]=le.elements[3],L.__data[5]=le.elements[4],L.__data[6]=le.elements[5],L.__data[7]=0,L.__data[8]=le.elements[6],L.__data[9]=le.elements[7],L.__data[10]=le.elements[8],L.__data[11]=0):(le.toArray(L.__data,ce),ce+=ye.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ne,L.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function v(C,b,R,O){const F=C.value,N=b+"_"+R;if(O[N]===void 0)return typeof F=="number"||typeof F=="boolean"?O[N]=F:O[N]=F.clone(),!0;{const U=O[N];if(typeof F=="number"||typeof F=="boolean"){if(U!==F)return O[N]=F,!0}else if(U.equals(F)===!1)return U.copy(F),!0}return!1}function x(C){const b=C.uniforms;let R=0;const O=16;for(let N=0,U=b.length;N<U;N++){const J=Array.isArray(b[N])?b[N]:[b[N]];for(let B=0,L=J.length;B<L;B++){const ne=J[B],ie=Array.isArray(ne.value)?ne.value:[ne.value];for(let ce=0,de=ie.length;ce<de;ce++){const le=ie[ce],ye=w(le),G=R%O,Z=G%ye.boundary,z=G+Z;R+=Z,z!==0&&O-z<ye.storage&&(R+=O-z),ne.__data=new Float32Array(ye.storage/Float32Array.BYTES_PER_ELEMENT),ne.__offset=R,R+=ye.storage}}}const F=R%O;return F>0&&(R+=O-F),C.__size=R,C.__cache={},this}function w(C){const b={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(b.boundary=4,b.storage=4):C.isVector2?(b.boundary=8,b.storage=8):C.isVector3||C.isColor?(b.boundary=16,b.storage=12):C.isVector4?(b.boundary=16,b.storage=16):C.isMatrix3?(b.boundary=48,b.storage=48):C.isMatrix4?(b.boundary=64,b.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),b}function S(C){const b=C.target;b.removeEventListener("dispose",S);const R=o.indexOf(b.__bindingPointIndex);o.splice(R,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function M(){for(const C in r)i.deleteBuffer(r[C]);o=[],r={},s={}}return{bind:c,update:f,dispose:M}}class FS{constructor(e={}){const{canvas:t=BT(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=o;const v=new Uint32Array(4),x=new Int32Array(4);let w=null,S=null;const M=[],C=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Gs,this.toneMapping=aa,this.toneMappingExposure=1;const b=this;let R=!1,O=0,F=0,N=null,U=-1,J=null;const B=new yn,L=new yn;let ne=null;const ie=new it(0);let ce=0,de=t.width,le=t.height,ye=1,G=null,Z=null;const z=new yn(0,0,de,le),Y=new yn(0,0,de,le);let pe=!1;const Ne=new Cm;let oe=!1,ve=!1;const be=new Tt,Ie=new Tt,Xe=new W,rt=new yn,pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function Pe(){return N===null?ye:1}let j=n;function Je(V,ue){return t.getContext(V,ue)}try{const V={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${hd}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",nt,!1),t.addEventListener("webglcontextcreationerror",ct,!1),j===null){const ue="webgl2";if(j=Je(ue,V),j===null)throw Je(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Ke,Ue,Ge,xt,tt,X,H,me,Te,Fe,Be,gt,Ve,lt,Qt,ze,st,Ft,It,ht,re,Re,et,$;function je(){Ke=new T3(j),Ke.init(),Re=new VT(j,Ke),Ue=new S3(j,Ke,e,Re),Ge=new lO(j),Ue.reverseDepthBuffer&&Ge.buffers.depth.setReversed(!0),xt=new I3(j),tt=new YN,X=new pO(j,Ke,Ge,tt,Ue,Re,xt),H=new w3(b),me=new b3(b),Te=new kD(j),et=new _3(j,Te),Fe=new R3(j,Te,xt,et),Be=new D3(j,Fe,Te,xt),It=new B3(j,Ue,X),ze=new M3(tt),gt=new KN(b,H,me,Ke,Ue,et,ze),Ve=new AO(b,tt),lt=new QN,Qt=new iO(Ke),Ft=new x3(b,H,me,Ge,Be,y,c),st=new oO(b,Be,Ue),$=new SO(j,xt,Ue,Ge),ht=new A3(j,Ke,xt),re=new P3(j,Ke,xt),xt.programs=gt.programs,b.capabilities=Ue,b.extensions=Ke,b.properties=tt,b.renderLists=lt,b.shadowMap=st,b.state=Ge,b.info=xt}je();const we=new xO(b,j);this.xr=we,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const V=Ke.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Ke.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return ye},this.setPixelRatio=function(V){V!==void 0&&(ye=V,this.setSize(de,le,!1))},this.getSize=function(V){return V.set(de,le)},this.setSize=function(V,ue,Ae=!0){if(we.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}de=V,le=ue,t.width=Math.floor(V*ye),t.height=Math.floor(ue*ye),Ae===!0&&(t.style.width=V+"px",t.style.height=ue+"px"),this.setViewport(0,0,V,ue)},this.getDrawingBufferSize=function(V){return V.set(de*ye,le*ye).floor()},this.setDrawingBufferSize=function(V,ue,Ae){de=V,le=ue,ye=Ae,t.width=Math.floor(V*Ae),t.height=Math.floor(ue*Ae),this.setViewport(0,0,V,ue)},this.getCurrentViewport=function(V){return V.copy(B)},this.getViewport=function(V){return V.copy(z)},this.setViewport=function(V,ue,Ae,Se){V.isVector4?z.set(V.x,V.y,V.z,V.w):z.set(V,ue,Ae,Se),Ge.viewport(B.copy(z).multiplyScalar(ye).round())},this.getScissor=function(V){return V.copy(Y)},this.setScissor=function(V,ue,Ae,Se){V.isVector4?Y.set(V.x,V.y,V.z,V.w):Y.set(V,ue,Ae,Se),Ge.scissor(L.copy(Y).multiplyScalar(ye).round())},this.getScissorTest=function(){return pe},this.setScissorTest=function(V){Ge.setScissorTest(pe=V)},this.setOpaqueSort=function(V){G=V},this.setTransparentSort=function(V){Z=V},this.getClearColor=function(V){return V.copy(Ft.getClearColor())},this.setClearColor=function(){Ft.setClearColor.apply(Ft,arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha.apply(Ft,arguments)},this.clear=function(V=!0,ue=!0,Ae=!0){let Se=0;if(V){let he=!1;if(N!==null){const Qe=N.texture.format;he=Qe===o0||Qe===s0||Qe===Sm}if(he){const Qe=N.texture.type,ft=Qe===bo||Qe===al||Qe===ed||Qe===Ju||Qe===n0||Qe===i0,Ze=Ft.getClearColor(),vt=Ft.getClearAlpha(),Rt=Ze.r,Bt=Ze.g,Mt=Ze.b;ft?(v[0]=Rt,v[1]=Bt,v[2]=Mt,v[3]=vt,j.clearBufferuiv(j.COLOR,0,v)):(x[0]=Rt,x[1]=Bt,x[2]=Mt,x[3]=vt,j.clearBufferiv(j.COLOR,0,x))}else Se|=j.COLOR_BUFFER_BIT}ue&&(Se|=j.DEPTH_BUFFER_BIT,j.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),Ae&&(Se|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",nt,!1),t.removeEventListener("webglcontextcreationerror",ct,!1),lt.dispose(),Qt.dispose(),tt.dispose(),H.dispose(),me.dispose(),Be.dispose(),et.dispose(),$.dispose(),gt.dispose(),we.dispose(),we.removeEventListener("sessionstart",Oo),we.removeEventListener("sessionend",fl),xr.stop()};function Le(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const V=xt.autoReset,ue=st.enabled,Ae=st.autoUpdate,Se=st.needsUpdate,he=st.type;je(),xt.autoReset=V,st.enabled=ue,st.autoUpdate=Ae,st.needsUpdate=Se,st.type=he}function ct(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function kt(V){const ue=V.target;ue.removeEventListener("dispose",kt),rn(ue)}function rn(V){Fn(V),tt.remove(V)}function Fn(V){const ue=tt.get(V).programs;ue!==void 0&&(ue.forEach(function(Ae){gt.releaseProgram(Ae)}),V.isShaderMaterial&&gt.releaseShaderCache(V))}this.renderBufferDirect=function(V,ue,Ae,Se,he,Qe){ue===null&&(ue=pt);const ft=he.isMesh&&he.matrixWorld.determinant()<0,Ze=qs(V,ue,Ae,Se,he);Ge.setMaterial(Se,ft);let vt=Ae.index,Rt=1;if(Se.wireframe===!0){if(vt=Fe.getWireframeAttribute(Ae),vt===void 0)return;Rt=2}const Bt=Ae.drawRange,Mt=Ae.attributes.position;let cn=Bt.start*Rt,un=(Bt.start+Bt.count)*Rt;Qe!==null&&(cn=Math.max(cn,Qe.start*Rt),un=Math.min(un,(Qe.start+Qe.count)*Rt)),vt!==null?(cn=Math.max(cn,0),un=Math.min(un,vt.count)):Mt!=null&&(cn=Math.max(cn,0),un=Math.min(un,Mt.count));const sn=un-cn;if(sn<0||sn===1/0)return;et.setup(he,Se,Ze,Ae,vt);let Ot,bt=ht;if(vt!==null&&(Ot=Te.get(vt),bt=re,bt.setIndex(Ot)),he.isMesh)Se.wireframe===!0?(Ge.setLineWidth(Se.wireframeLinewidth*Pe()),bt.setMode(j.LINES)):bt.setMode(j.TRIANGLES);else if(he.isLine){let ot=Se.linewidth;ot===void 0&&(ot=1),Ge.setLineWidth(ot*Pe()),he.isLineSegments?bt.setMode(j.LINES):he.isLineLoop?bt.setMode(j.LINE_LOOP):bt.setMode(j.LINE_STRIP)}else he.isPoints?bt.setMode(j.POINTS):he.isSprite&&bt.setMode(j.TRIANGLES);if(he.isBatchedMesh)if(he._multiDrawInstances!==null)bt.renderMultiDrawInstances(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount,he._multiDrawInstances);else if(Ke.get("WEBGL_multi_draw"))bt.renderMultiDraw(he._multiDrawStarts,he._multiDrawCounts,he._multiDrawCount);else{const ot=he._multiDrawStarts,on=he._multiDrawCounts,zt=he._multiDrawCount,ni=vt?Te.get(vt).bytesPerElement:1,Ii=tt.get(Se).currentProgram.getUniforms();for(let mn=0;mn<zt;mn++)Ii.setValue(j,"_gl_DrawID",mn),bt.render(ot[mn]/ni,on[mn])}else if(he.isInstancedMesh)bt.renderInstances(cn,sn,he.count);else if(Ae.isInstancedBufferGeometry){const ot=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,on=Math.min(Ae.instanceCount,ot);bt.renderInstances(cn,sn,on)}else bt.render(cn,sn)};function Xt(V,ue,Ae){V.transparent===!0&&V.side===Vs&&V.forceSinglePass===!1?(V.side=Dr,V.needsUpdate=!0,pl(V,ue,Ae),V.side=fa,V.needsUpdate=!0,pl(V,ue,Ae),V.side=Vs):pl(V,ue,Ae)}this.compile=function(V,ue,Ae=null){Ae===null&&(Ae=V),S=Qt.get(Ae),S.init(ue),C.push(S),Ae.traverseVisible(function(he){he.isLight&&he.layers.test(ue.layers)&&(S.pushLight(he),he.castShadow&&S.pushShadow(he))}),V!==Ae&&V.traverseVisible(function(he){he.isLight&&he.layers.test(ue.layers)&&(S.pushLight(he),he.castShadow&&S.pushShadow(he))}),S.setupLights();const Se=new Set;return V.traverse(function(he){if(!(he.isMesh||he.isPoints||he.isLine||he.isSprite))return;const Qe=he.material;if(Qe)if(Array.isArray(Qe))for(let ft=0;ft<Qe.length;ft++){const Ze=Qe[ft];Xt(Ze,Ae,he),Se.add(Ze)}else Xt(Qe,Ae,he),Se.add(Qe)}),C.pop(),S=null,Se},this.compileAsync=function(V,ue,Ae=null){const Se=this.compile(V,ue,Ae);return new Promise(he=>{function Qe(){if(Se.forEach(function(ft){tt.get(ft).currentProgram.isReady()&&Se.delete(ft)}),Se.size===0){he(V);return}setTimeout(Qe,10)}Ke.get("KHR_parallel_shader_compile")!==null?Qe():setTimeout(Qe,10)})};let bn=null;function ui(V){bn&&bn(V)}function Oo(){xr.stop()}function fl(){xr.start()}const xr=new kT;xr.setAnimationLoop(ui),typeof self<"u"&&xr.setContext(self),this.setAnimationLoop=function(V){bn=V,we.setAnimationLoop(V),V===null?xr.stop():xr.start()},we.addEventListener("sessionstart",Oo),we.addEventListener("sessionend",fl),this.render=function(V,ue){if(ue!==void 0&&ue.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),we.enabled===!0&&we.isPresenting===!0&&(we.cameraAutoUpdate===!0&&we.updateCamera(ue),ue=we.getCamera()),V.isScene===!0&&V.onBeforeRender(b,V,ue,N),S=Qt.get(V,C.length),S.init(ue),C.push(S),Ie.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),Ne.setFromProjectionMatrix(Ie),ve=this.localClippingEnabled,oe=ze.init(this.clippingPlanes,ve),w=lt.get(V,M.length),w.init(),M.push(w),we.enabled===!0&&we.isPresenting===!0){const Qe=b.xr.getDepthSensingMesh();Qe!==null&&hl(Qe,ue,-1/0,b.sortObjects)}hl(V,ue,0,b.sortObjects),w.finish(),b.sortObjects===!0&&w.sort(G,Z),We=we.enabled===!1||we.isPresenting===!1||we.hasDepthSensing()===!1,We&&Ft.addToRenderList(w,V),this.info.render.frame++,oe===!0&&ze.beginShadows();const Ae=S.state.shadowsArray;st.render(Ae,V,ue),oe===!0&&ze.endShadows(),this.info.autoReset===!0&&this.info.reset();const Se=w.opaque,he=w.transmissive;if(S.setupLights(),ue.isArrayCamera){const Qe=ue.cameras;if(he.length>0)for(let ft=0,Ze=Qe.length;ft<Ze;ft++){const vt=Qe[ft];da(Se,he,V,vt)}We&&Ft.render(V);for(let ft=0,Ze=Qe.length;ft<Ze;ft++){const vt=Qe[ft];Es(w,V,vt,vt.viewport)}}else he.length>0&&da(Se,he,V,ue),We&&Ft.render(V),Es(w,V,ue);N!==null&&(X.updateMultisampleRenderTarget(N),X.updateRenderTargetMipmap(N)),V.isScene===!0&&V.onAfterRender(b,V,ue),et.resetDefaultState(),U=-1,J=null,C.pop(),C.length>0?(S=C[C.length-1],oe===!0&&ze.setGlobalState(b.clippingPlanes,S.state.camera)):S=null,M.pop(),M.length>0?w=M[M.length-1]:w=null};function hl(V,ue,Ae,Se){if(V.visible===!1)return;if(V.layers.test(ue.layers)){if(V.isGroup)Ae=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(ue);else if(V.isLight)S.pushLight(V),V.castShadow&&S.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||Ne.intersectsSprite(V)){Se&&rt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(Ie);const ft=Be.update(V),Ze=V.material;Ze.visible&&w.push(V,ft,Ze,Ae,rt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||Ne.intersectsObject(V))){const ft=Be.update(V),Ze=V.material;if(Se&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),rt.copy(V.boundingSphere.center)):(ft.boundingSphere===null&&ft.computeBoundingSphere(),rt.copy(ft.boundingSphere.center)),rt.applyMatrix4(V.matrixWorld).applyMatrix4(Ie)),Array.isArray(Ze)){const vt=ft.groups;for(let Rt=0,Bt=vt.length;Rt<Bt;Rt++){const Mt=vt[Rt],cn=Ze[Mt.materialIndex];cn&&cn.visible&&w.push(V,ft,cn,Ae,rt.z,Mt)}}else Ze.visible&&w.push(V,ft,Ze,Ae,rt.z,null)}}const Qe=V.children;for(let ft=0,Ze=Qe.length;ft<Ze;ft++)hl(Qe[ft],ue,Ae,Se)}function Es(V,ue,Ae,Se){const he=V.opaque,Qe=V.transmissive,ft=V.transparent;S.setupLightsView(Ae),oe===!0&&ze.setGlobalState(b.clippingPlanes,Ae),Se&&Ge.viewport(B.copy(Se)),he.length>0&&_r(he,ue,Ae),Qe.length>0&&_r(Qe,ue,Ae),ft.length>0&&_r(ft,ue,Ae),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function da(V,ue,Ae,Se){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;S.state.transmissionRenderTarget[Se.id]===void 0&&(S.state.transmissionRenderTarget[Se.id]=new To(1,1,{generateMipmaps:!0,type:Ke.has("EXT_color_buffer_half_float")||Ke.has("EXT_color_buffer_float")?pd:bo,minFilter:Ws,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:_n.workingColorSpace}));const Qe=S.state.transmissionRenderTarget[Se.id],ft=Se.viewport||B;Qe.setSize(ft.z,ft.w);const Ze=b.getRenderTarget();b.setRenderTarget(Qe),b.getClearColor(ie),ce=b.getClearAlpha(),ce<1&&b.setClearColor(16777215,.5),b.clear(),We&&Ft.render(Ae);const vt=b.toneMapping;b.toneMapping=aa;const Rt=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),S.setupLightsView(Se),oe===!0&&ze.setGlobalState(b.clippingPlanes,Se),_r(V,Ae,Se),X.updateMultisampleRenderTarget(Qe),X.updateRenderTargetMipmap(Qe),Ke.has("WEBGL_multisampled_render_to_texture")===!1){let Bt=!1;for(let Mt=0,cn=ue.length;Mt<cn;Mt++){const un=ue[Mt],sn=un.object,Ot=un.geometry,bt=un.material,ot=un.group;if(bt.side===Vs&&sn.layers.test(Se.layers)){const on=bt.side;bt.side=Dr,bt.needsUpdate=!0,dl(sn,Ae,Se,Ot,bt,ot),bt.side=on,bt.needsUpdate=!0,Bt=!0}}Bt===!0&&(X.updateMultisampleRenderTarget(Qe),X.updateRenderTargetMipmap(Qe))}b.setRenderTarget(Ze),b.setClearColor(ie,ce),Rt!==void 0&&(Se.viewport=Rt),b.toneMapping=vt}function _r(V,ue,Ae){const Se=ue.isScene===!0?ue.overrideMaterial:null;for(let he=0,Qe=V.length;he<Qe;he++){const ft=V[he],Ze=ft.object,vt=ft.geometry,Rt=Se===null?ft.material:Se,Bt=ft.group;Ze.layers.test(Ae.layers)&&dl(Ze,ue,Ae,vt,Rt,Bt)}}function dl(V,ue,Ae,Se,he,Qe){V.onBeforeRender(b,ue,Ae,Se,he,Qe),V.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),he.onBeforeRender(b,ue,Ae,Se,V,Qe),he.transparent===!0&&he.side===Vs&&he.forceSinglePass===!1?(he.side=Dr,he.needsUpdate=!0,b.renderBufferDirect(Ae,ue,Se,he,V,Qe),he.side=fa,he.needsUpdate=!0,b.renderBufferDirect(Ae,ue,Se,he,V,Qe),he.side=Vs):b.renderBufferDirect(Ae,ue,Se,he,V,Qe),V.onAfterRender(b,ue,Ae,Se,he,Qe)}function pl(V,ue,Ae){ue.isScene!==!0&&(ue=pt);const Se=tt.get(V),he=S.state.lights,Qe=S.state.shadowsArray,ft=he.state.version,Ze=gt.getParameters(V,he.state,Qe,ue,Ae),vt=gt.getProgramCacheKey(Ze);let Rt=Se.programs;Se.environment=V.isMeshStandardMaterial?ue.environment:null,Se.fog=ue.fog,Se.envMap=(V.isMeshStandardMaterial?me:H).get(V.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&V.envMap===null?ue.environmentRotation:V.envMapRotation,Rt===void 0&&(V.addEventListener("dispose",kt),Rt=new Map,Se.programs=Rt);let Bt=Rt.get(vt);if(Bt!==void 0){if(Se.currentProgram===Bt&&Se.lightsStateVersion===ft)return hf(V,Ze),Bt}else Ze.uniforms=gt.getUniforms(V),V.onBeforeCompile(Ze,b),Bt=gt.acquireProgram(Ze,vt),Rt.set(vt,Bt),Se.uniforms=Ze.uniforms;const Mt=Se.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Mt.clippingPlanes=ze.uniform),hf(V,Ze),Se.needsLights=pf(V),Se.lightsStateVersion=ft,Se.needsLights&&(Mt.ambientLightColor.value=he.state.ambient,Mt.lightProbe.value=he.state.probe,Mt.directionalLights.value=he.state.directional,Mt.directionalLightShadows.value=he.state.directionalShadow,Mt.spotLights.value=he.state.spot,Mt.spotLightShadows.value=he.state.spotShadow,Mt.rectAreaLights.value=he.state.rectArea,Mt.ltc_1.value=he.state.rectAreaLTC1,Mt.ltc_2.value=he.state.rectAreaLTC2,Mt.pointLights.value=he.state.point,Mt.pointLightShadows.value=he.state.pointShadow,Mt.hemisphereLights.value=he.state.hemi,Mt.directionalShadowMap.value=he.state.directionalShadowMap,Mt.directionalShadowMatrix.value=he.state.directionalShadowMatrix,Mt.spotShadowMap.value=he.state.spotShadowMap,Mt.spotLightMatrix.value=he.state.spotLightMatrix,Mt.spotLightMap.value=he.state.spotLightMap,Mt.pointShadowMap.value=he.state.pointShadowMap,Mt.pointShadowMatrix.value=he.state.pointShadowMatrix),Se.currentProgram=Bt,Se.uniformsList=null,Bt}function ff(V){if(V.uniformsList===null){const ue=V.currentProgram.getUniforms();V.uniformsList=Hy.seqWithValue(ue.seq,V.uniforms)}return V.uniformsList}function hf(V,ue){const Ae=tt.get(V);Ae.outputColorSpace=ue.outputColorSpace,Ae.batching=ue.batching,Ae.batchingColor=ue.batchingColor,Ae.instancing=ue.instancing,Ae.instancingColor=ue.instancingColor,Ae.instancingMorph=ue.instancingMorph,Ae.skinning=ue.skinning,Ae.morphTargets=ue.morphTargets,Ae.morphNormals=ue.morphNormals,Ae.morphColors=ue.morphColors,Ae.morphTargetsCount=ue.morphTargetsCount,Ae.numClippingPlanes=ue.numClippingPlanes,Ae.numIntersection=ue.numClipIntersection,Ae.vertexAlphas=ue.vertexAlphas,Ae.vertexTangents=ue.vertexTangents,Ae.toneMapping=ue.toneMapping}function qs(V,ue,Ae,Se,he){ue.isScene!==!0&&(ue=pt),X.resetTextureUnits();const Qe=ue.fog,ft=Se.isMeshStandardMaterial?ue.environment:null,Ze=N===null?b.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:ul,vt=(Se.isMeshStandardMaterial?me:H).get(Se.envMap||ft),Rt=Se.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Bt=!!Ae.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),Mt=!!Ae.morphAttributes.position,cn=!!Ae.morphAttributes.normal,un=!!Ae.morphAttributes.color;let sn=aa;Se.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(sn=b.toneMapping);const Ot=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,bt=Ot!==void 0?Ot.length:0,ot=tt.get(Se),on=S.state.lights;if(oe===!0&&(ve===!0||V!==J)){const Mi=V===J&&Se.id===U;ze.setState(Se,V,Mi)}let zt=!1;Se.version===ot.__version?(ot.needsLights&&ot.lightsStateVersion!==on.state.version||ot.outputColorSpace!==Ze||he.isBatchedMesh&&ot.batching===!1||!he.isBatchedMesh&&ot.batching===!0||he.isBatchedMesh&&ot.batchingColor===!0&&he.colorTexture===null||he.isBatchedMesh&&ot.batchingColor===!1&&he.colorTexture!==null||he.isInstancedMesh&&ot.instancing===!1||!he.isInstancedMesh&&ot.instancing===!0||he.isSkinnedMesh&&ot.skinning===!1||!he.isSkinnedMesh&&ot.skinning===!0||he.isInstancedMesh&&ot.instancingColor===!0&&he.instanceColor===null||he.isInstancedMesh&&ot.instancingColor===!1&&he.instanceColor!==null||he.isInstancedMesh&&ot.instancingMorph===!0&&he.morphTexture===null||he.isInstancedMesh&&ot.instancingMorph===!1&&he.morphTexture!==null||ot.envMap!==vt||Se.fog===!0&&ot.fog!==Qe||ot.numClippingPlanes!==void 0&&(ot.numClippingPlanes!==ze.numPlanes||ot.numIntersection!==ze.numIntersection)||ot.vertexAlphas!==Rt||ot.vertexTangents!==Bt||ot.morphTargets!==Mt||ot.morphNormals!==cn||ot.morphColors!==un||ot.toneMapping!==sn||ot.morphTargetsCount!==bt)&&(zt=!0):(zt=!0,ot.__version=Se.version);let ni=ot.currentProgram;zt===!0&&(ni=pl(Se,ue,he));let Ii=!1,mn=!1,Nr=!1;const An=ni.getUniforms(),is=ot.uniforms;if(Ge.useProgram(ni.program)&&(Ii=!0,mn=!0,Nr=!0),Se.id!==U&&(U=Se.id,mn=!0),Ii||J!==V){Ue.reverseDepthBuffer?(be.copy(V.projectionMatrix),lD(be),cD(be),An.setValue(j,"projectionMatrix",be)):An.setValue(j,"projectionMatrix",V.projectionMatrix),An.setValue(j,"viewMatrix",V.matrixWorldInverse);const Mi=An.map.cameraPosition;Mi!==void 0&&Mi.setValue(j,Xe.setFromMatrixPosition(V.matrixWorld)),Ue.logarithmicDepthBuffer&&An.setValue(j,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&An.setValue(j,"isOrthographic",V.isOrthographicCamera===!0),J!==V&&(J=V,mn=!0,Nr=!0)}if(he.isSkinnedMesh){An.setOptional(j,he,"bindMatrix"),An.setOptional(j,he,"bindMatrixInverse");const Mi=he.skeleton;Mi&&(Mi.boneTexture===null&&Mi.computeBoneTexture(),An.setValue(j,"boneTexture",Mi.boneTexture,X))}he.isBatchedMesh&&(An.setOptional(j,he,"batchingTexture"),An.setValue(j,"batchingTexture",he._matricesTexture,X),An.setOptional(j,he,"batchingIdTexture"),An.setValue(j,"batchingIdTexture",he._indirectTexture,X),An.setOptional(j,he,"batchingColorTexture"),he._colorsTexture!==null&&An.setValue(j,"batchingColorTexture",he._colorsTexture,X));const ko=Ae.morphAttributes;if((ko.position!==void 0||ko.normal!==void 0||ko.color!==void 0)&&It.update(he,Ae,ni),(mn||ot.receiveShadow!==he.receiveShadow)&&(ot.receiveShadow=he.receiveShadow,An.setValue(j,"receiveShadow",he.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(is.envMap.value=vt,is.flipEnvMap.value=vt.isCubeTexture&&vt.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&ue.environment!==null&&(is.envMapIntensity.value=ue.environmentIntensity),mn&&(An.setValue(j,"toneMappingExposure",b.toneMappingExposure),ot.needsLights&&df(is,Nr),Qe&&Se.fog===!0&&Ve.refreshFogUniforms(is,Qe),Ve.refreshMaterialUniforms(is,Se,ye,le,S.state.transmissionRenderTarget[V.id]),Hy.upload(j,ff(ot),is,X)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(Hy.upload(j,ff(ot),is,X),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&An.setValue(j,"center",he.center),An.setValue(j,"modelViewMatrix",he.modelViewMatrix),An.setValue(j,"normalMatrix",he.normalMatrix),An.setValue(j,"modelMatrix",he.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const Mi=Se.uniformsGroups;for(let Bi=0,Cc=Mi.length;Bi<Cc;Bi++){const Uo=Mi[Bi];$.update(Uo,ni),$.bind(Uo,ni)}}return ni}function df(V,ue){V.ambientLightColor.needsUpdate=ue,V.lightProbe.needsUpdate=ue,V.directionalLights.needsUpdate=ue,V.directionalLightShadows.needsUpdate=ue,V.pointLights.needsUpdate=ue,V.pointLightShadows.needsUpdate=ue,V.spotLights.needsUpdate=ue,V.spotLightShadows.needsUpdate=ue,V.rectAreaLights.needsUpdate=ue,V.hemisphereLights.needsUpdate=ue}function pf(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(V,ue,Ae){tt.get(V.texture).__webglTexture=ue,tt.get(V.depthTexture).__webglTexture=Ae;const Se=tt.get(V);Se.__hasExternalTextures=!0,Se.__autoAllocateDepthBuffer=Ae===void 0,Se.__autoAllocateDepthBuffer||Ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(V,ue){const Ae=tt.get(V);Ae.__webglFramebuffer=ue,Ae.__useDefaultFramebuffer=ue===void 0},this.setRenderTarget=function(V,ue=0,Ae=0){N=V,O=ue,F=Ae;let Se=!0,he=null,Qe=!1,ft=!1;if(V){const vt=tt.get(V);if(vt.__useDefaultFramebuffer!==void 0)Ge.bindFramebuffer(j.FRAMEBUFFER,null),Se=!1;else if(vt.__webglFramebuffer===void 0)X.setupRenderTarget(V);else if(vt.__hasExternalTextures)X.rebindTextures(V,tt.get(V.texture).__webglTexture,tt.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Mt=V.depthTexture;if(vt.__boundDepthTexture!==Mt){if(Mt!==null&&tt.has(Mt)&&(V.width!==Mt.image.width||V.height!==Mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");X.setupDepthRenderbuffer(V)}}const Rt=V.texture;(Rt.isData3DTexture||Rt.isDataArrayTexture||Rt.isCompressedArrayTexture)&&(ft=!0);const Bt=tt.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Bt[ue])?he=Bt[ue][Ae]:he=Bt[ue],Qe=!0):V.samples>0&&X.useMultisampledRTT(V)===!1?he=tt.get(V).__webglMultisampledFramebuffer:Array.isArray(Bt)?he=Bt[Ae]:he=Bt,B.copy(V.viewport),L.copy(V.scissor),ne=V.scissorTest}else B.copy(z).multiplyScalar(ye).floor(),L.copy(Y).multiplyScalar(ye).floor(),ne=pe;if(Ge.bindFramebuffer(j.FRAMEBUFFER,he)&&Se&&Ge.drawBuffers(V,he),Ge.viewport(B),Ge.scissor(L),Ge.setScissorTest(ne),Qe){const vt=tt.get(V.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+ue,vt.__webglTexture,Ae)}else if(ft){const vt=tt.get(V.texture),Rt=ue||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,vt.__webglTexture,Ae||0,Rt)}U=-1},this.readRenderTargetPixels=function(V,ue,Ae,Se,he,Qe,ft){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ze=tt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ft!==void 0&&(Ze=Ze[ft]),Ze){Ge.bindFramebuffer(j.FRAMEBUFFER,Ze);try{const vt=V.texture,Rt=vt.format,Bt=vt.type;if(!Ue.textureFormatReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ue.textureTypeReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=V.width-Se&&Ae>=0&&Ae<=V.height-he&&j.readPixels(ue,Ae,Se,he,Re.convert(Rt),Re.convert(Bt),Qe)}finally{const vt=N!==null?tt.get(N).__webglFramebuffer:null;Ge.bindFramebuffer(j.FRAMEBUFFER,vt)}}},this.readRenderTargetPixelsAsync=async function(V,ue,Ae,Se,he,Qe,ft){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ze=tt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ft!==void 0&&(Ze=Ze[ft]),Ze){const vt=V.texture,Rt=vt.format,Bt=vt.type;if(!Ue.textureFormatReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ue.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ue>=0&&ue<=V.width-Se&&Ae>=0&&Ae<=V.height-he){Ge.bindFramebuffer(j.FRAMEBUFFER,Ze);const Mt=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,Mt),j.bufferData(j.PIXEL_PACK_BUFFER,Qe.byteLength,j.STREAM_READ),j.readPixels(ue,Ae,Se,he,Re.convert(Rt),Re.convert(Bt),0);const cn=N!==null?tt.get(N).__webglFramebuffer:null;Ge.bindFramebuffer(j.FRAMEBUFFER,cn);const un=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await aD(j,un,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,Mt),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,Qe),j.deleteBuffer(Mt),j.deleteSync(un),Qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(V,ue=null,Ae=0){V.isTexture!==!0&&(zy("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ue=arguments[0]||null,V=arguments[1]);const Se=Math.pow(2,-Ae),he=Math.floor(V.image.width*Se),Qe=Math.floor(V.image.height*Se),ft=ue!==null?ue.x:0,Ze=ue!==null?ue.y:0;X.setTexture2D(V,0),j.copyTexSubImage2D(j.TEXTURE_2D,Ae,0,0,ft,Ze,he,Qe),Ge.unbindTexture()},this.copyTextureToTexture=function(V,ue,Ae=null,Se=null,he=0){V.isTexture!==!0&&(zy("WebGLRenderer: copyTextureToTexture function signature has changed."),Se=arguments[0]||null,V=arguments[1],ue=arguments[2],he=arguments[3]||0,Ae=null);let Qe,ft,Ze,vt,Rt,Bt;Ae!==null?(Qe=Ae.max.x-Ae.min.x,ft=Ae.max.y-Ae.min.y,Ze=Ae.min.x,vt=Ae.min.y):(Qe=V.image.width,ft=V.image.height,Ze=0,vt=0),Se!==null?(Rt=Se.x,Bt=Se.y):(Rt=0,Bt=0);const Mt=Re.convert(ue.format),cn=Re.convert(ue.type);X.setTexture2D(ue,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,ue.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,ue.unpackAlignment);const un=j.getParameter(j.UNPACK_ROW_LENGTH),sn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Ot=j.getParameter(j.UNPACK_SKIP_PIXELS),bt=j.getParameter(j.UNPACK_SKIP_ROWS),ot=j.getParameter(j.UNPACK_SKIP_IMAGES),on=V.isCompressedTexture?V.mipmaps[he]:V.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,on.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,on.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ze),j.pixelStorei(j.UNPACK_SKIP_ROWS,vt),V.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,he,Rt,Bt,Qe,ft,Mt,cn,on.data):V.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,he,Rt,Bt,on.width,on.height,Mt,on.data):j.texSubImage2D(j.TEXTURE_2D,he,Rt,Bt,Qe,ft,Mt,cn,on),j.pixelStorei(j.UNPACK_ROW_LENGTH,un),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,sn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Ot),j.pixelStorei(j.UNPACK_SKIP_ROWS,bt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,ot),he===0&&ue.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),Ge.unbindTexture()},this.copyTextureToTexture3D=function(V,ue,Ae=null,Se=null,he=0){V.isTexture!==!0&&(zy("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ae=arguments[0]||null,Se=arguments[1]||null,V=arguments[2],ue=arguments[3],he=arguments[4]||0);let Qe,ft,Ze,vt,Rt,Bt,Mt,cn,un;const sn=V.isCompressedTexture?V.mipmaps[he]:V.image;Ae!==null?(Qe=Ae.max.x-Ae.min.x,ft=Ae.max.y-Ae.min.y,Ze=Ae.max.z-Ae.min.z,vt=Ae.min.x,Rt=Ae.min.y,Bt=Ae.min.z):(Qe=sn.width,ft=sn.height,Ze=sn.depth,vt=0,Rt=0,Bt=0),Se!==null?(Mt=Se.x,cn=Se.y,un=Se.z):(Mt=0,cn=0,un=0);const Ot=Re.convert(ue.format),bt=Re.convert(ue.type);let ot;if(ue.isData3DTexture)X.setTexture3D(ue,0),ot=j.TEXTURE_3D;else if(ue.isDataArrayTexture||ue.isCompressedArrayTexture)X.setTexture2DArray(ue,0),ot=j.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,ue.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,ue.unpackAlignment);const on=j.getParameter(j.UNPACK_ROW_LENGTH),zt=j.getParameter(j.UNPACK_IMAGE_HEIGHT),ni=j.getParameter(j.UNPACK_SKIP_PIXELS),Ii=j.getParameter(j.UNPACK_SKIP_ROWS),mn=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,sn.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,sn.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,vt),j.pixelStorei(j.UNPACK_SKIP_ROWS,Rt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Bt),V.isDataTexture||V.isData3DTexture?j.texSubImage3D(ot,he,Mt,cn,un,Qe,ft,Ze,Ot,bt,sn.data):ue.isCompressedArrayTexture?j.compressedTexSubImage3D(ot,he,Mt,cn,un,Qe,ft,Ze,Ot,sn.data):j.texSubImage3D(ot,he,Mt,cn,un,Qe,ft,Ze,Ot,bt,sn),j.pixelStorei(j.UNPACK_ROW_LENGTH,on),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,zt),j.pixelStorei(j.UNPACK_SKIP_PIXELS,ni),j.pixelStorei(j.UNPACK_SKIP_ROWS,Ii),j.pixelStorei(j.UNPACK_SKIP_IMAGES,mn),he===0&&ue.generateMipmaps&&j.generateMipmap(ot),Ge.unbindTexture()},this.initRenderTarget=function(V){tt.get(V).__webglFramebuffer===void 0&&X.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?X.setTextureCube(V,0):V.isData3DTexture?X.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?X.setTexture2DArray(V,0):X.setTexture2D(V,0),Ge.unbindTexture()},this.resetState=function(){O=0,F=0,N=null,Ge.reset(),et.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return oa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===l0?"display-p3":"srgb",t.unpackColorSpace=_n.workingColorSpace===Mm?"display-p3":"srgb"}}class f0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new it(e),this.density=t}clone(){return new f0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class h0{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new it(e),this.near=t,this.far=n}clone(){return new h0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class om extends ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fr,this.environmentIntensity=1,this.environmentRotation=new Fr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class bm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=im,this.updateRanges=[],this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Rr=new W;class yc{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.applyMatrix4(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.applyNormalMatrix(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Rr.fromBufferAttribute(this,t),Rr.transformDirection(e),this.setXYZ(t,Rr.x,Rr.y,Rr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Br(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Br(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Br(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Br(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Br(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=qt(t,this.array),n=qt(n,this.array),r=qt(r,this.array),s=qt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new pn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class NS extends Si{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Rh;const pp=new W,Ph=new W,Ih=new W,Bh=new De,mp=new De,jT=new Tt,ry=new W,gp=new W,sy=new W,y1=new De,e_=new De,v1=new De;class XT extends ln{constructor(e=new NS){if(super(),this.isSprite=!0,this.type="Sprite",Rh===void 0){Rh=new jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new bm(t,5);Rh.setIndex([0,1,2,0,2,3]),Rh.setAttribute("position",new yc(n,3,0,!1)),Rh.setAttribute("uv",new yc(n,2,3,!1))}this.geometry=Rh,this.material=e,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ph.setFromMatrixScale(this.matrixWorld),jT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ih.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ph.multiplyScalar(-Ih.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;oy(ry.set(-.5,-.5,0),Ih,o,Ph,r,s),oy(gp.set(.5,-.5,0),Ih,o,Ph,r,s),oy(sy.set(.5,.5,0),Ih,o,Ph,r,s),y1.set(0,0),e_.set(1,0),v1.set(1,1);let l=e.ray.intersectTriangle(ry,gp,sy,!1,pp);if(l===null&&(oy(gp.set(-.5,.5,0),Ih,o,Ph,r,s),e_.set(0,1),l=e.ray.intersectTriangle(ry,sy,gp,!1,pp),l===null))return;const c=e.ray.origin.distanceTo(pp);c<e.near||c>e.far||t.push({distance:c,point:pp.clone(),uv:$r.getInterpolation(pp,ry,gp,sy,y1,e_,v1,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function oy(i,e,t,n,r,s){Bh.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(mp.x=s*Bh.x-r*Bh.y,mp.y=r*Bh.x+s*Bh.y):mp.copy(Bh),i.copy(e),i.x+=mp.x,i.y+=mp.y,i.applyMatrix4(jT)}const ay=new W,x1=new W;class JT extends ln{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){ay.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(ay);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ay.setFromMatrixPosition(e.matrixWorld),x1.setFromMatrixPosition(this.matrixWorld);const n=ay.distanceTo(x1)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const _1=new W,A1=new yn,S1=new yn,MO=new W,M1=new Tt,ly=new W,t_=new $i,w1=new Tt,n_=new sf;class OS extends ti{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=CA,this.bindMatrix=new Tt,this.bindMatrixInverse=new Tt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new pr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ly),this.boundingBox.expandByPoint(ly)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new $i),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ly),this.boundingSphere.expandByPoint(ly)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),t_.copy(this.boundingSphere),t_.applyMatrix4(r),e.ray.intersectsSphere(t_)!==!1&&(w1.copy(r).invert(),n_.copy(e.ray).applyMatrix4(w1),!(this.boundingBox!==null&&n_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,n_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new yn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===CA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;A1.fromBufferAttribute(r.attributes.skinIndex,e),S1.fromBufferAttribute(r.attributes.skinWeight,e),_1.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=S1.getComponent(s);if(o!==0){const l=A1.getComponent(s);M1.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(MO.copy(_1).applyMatrix4(M1),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class d0 extends ln{constructor(){super(),this.isBone=!0,this.type="Bone"}}class la extends Pn{constructor(e=null,t=1,n=1,r,s,o,l,c,f=Ti,p=Ti,m,y){super(null,o,l,c,f,p,r,s,m,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const E1=new Tt,wO=new Tt;class Tm{constructor(e=[],t=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Tt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Tt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:wO;E1.multiplyMatrices(l,t[s]),E1.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Tm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new la(t,e,e,dr,es);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new d0),this.bones.push(o),this.boneInverses.push(new Tt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const l=n[r];e.boneInverses.push(l.toArray())}return e}}class Yu extends pn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Dh=new Tt,C1=new Tt,cy=[],b1=new pr,EO=new Tt,yp=new ti,vp=new $i;class kS extends ti{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Yu(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,EO)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new pr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dh),b1.copy(e.boundingBox).applyMatrix4(Dh),this.boundingBox.union(b1)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new $i),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Dh),vp.copy(e.boundingSphere).applyMatrix4(Dh),this.boundingSphere.union(vp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let l=0;l<n.length;l++)n[l]=r[o+l]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(yp.geometry=this.geometry,yp.material=this.material,yp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vp.copy(this.boundingSphere),vp.applyMatrix4(n),e.ray.intersectsSphere(vp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Dh),C1.multiplyMatrices(n,Dh),yp.matrixWorld=C1,yp.raycast(e,cy);for(let o=0,l=cy.length;o<l;o++){const c=cy[o];c.instanceId=s,c.object=this,t.push(c)}cy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Yu(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new la(new Float32Array(r*this.count),r,this.count,r0,es));const s=this.morphTexture.source.data.data;let o=0;for(let f=0;f<n.length;f++)o+=n[f];const l=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=l,s.set(n,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function CO(i,e){return i.z-e.z}function bO(i,e){return e.z-i.z}class TO{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=n}reset(){this.list.length=0,this.index=0}}const rc=new Tt,i_=new Tt,RO=new Tt,PO=new it(1,1,1),T1=new Tt,r_=new Cm,uy=new pr,pu=new $i,xp=new W,R1=new W,IO=new W,s_=new TO,fr=new ti,fy=[];function BO(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}class KT extends ti{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,n=t*2,r){super(new jt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new la(t,e,e,dr,es);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new la(t,e,e,Sm,al);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new la(t,e,e,dr,es);n.colorSpace=_n.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:l,itemSize:c,normalized:f}=o,p=new l.constructor(n*c),m=new pn(p,c,f);t.setAttribute(s,m)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new pn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new pr);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,rc),this.getBoundingBoxAt(s,uy).applyMatrix4(rc),e.union(uy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $i);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,rc),this.getBoundingSphereAt(s,pu).applyMatrix4(rc),e.union(pu)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(r=this._availableInstanceIds.pop(),this._drawInfo[r]=n):(r=this._drawInfo.length,this._drawInfo.push(n));const s=this._matricesTexture,o=s.image.data;RO.toArray(o,r*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(PO.toArray(l.image.data,r*4),l.needsUpdate=!0),r}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,l=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const f=e.getIndex(),p=f!==null;if(p&&(n===-1?r.indexCount=f.count:r.indexCount=n,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const m=this._geometryCount;return this._geometryCount++,o.push(r),l.push({start:p?r.indexStart:r.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new pr,sphereInitialized:!1,sphere:new $i}),this.setGeometryAt(m,e),m}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),l=this._reservedRanges[e];if(r&&o.count>l.indexCount||t.attributes.position.count>l.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.vertexCount;for(const v in n.attributes){const x=t.getAttribute(v),w=n.getAttribute(v);BO(x,w,c);const S=x.itemSize;for(let M=x.count,C=f;M<C;M++){const b=c+M;for(let R=0;R<S;R++)w.setComponent(b,R,0)}w.needsUpdate=!0,w.addUpdateRange(c*S,f*S)}if(r){const v=l.indexStart;for(let x=0;x<o.count;x++)s.setX(v+x,c+o.getX(x));for(let x=o.count,w=l.indexCount;x<w;x++)s.setX(v+x,c);s.needsUpdate=!0,s.addUpdateRange(v,l.indexCount)}const p=this._bounds[e];t.boundingBox!==null?(p.box.copy(t.boundingBox),p.boxInitialized=!0):p.boxInitialized=!1,t.boundingSphere!==null?(p.sphere.copy(t.boundingSphere),p.sphereInitialized=!0):p.sphereInitialized=!1;const m=this._drawRanges[e],y=t.getAttribute("position");return m.count=r?o.count:y.count,this._visibilityChanged=!0,e}deleteInstance(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.box,s=this.geometry;if(n.boxInitialized===!1){r.makeEmpty();const o=s.index,l=s.attributes.position,c=this._drawRanges[e];for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;o&&(m=o.getX(m)),r.expandByPoint(xp.fromBufferAttribute(l,m))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,uy),uy.getCenter(r.center);const o=s.index,l=s.attributes.position,c=this._drawRanges[e];let f=0;for(let p=c.start,m=c.start+c.count;p<m;p++){let y=p;o&&(y=o.getX(y)),xp.fromBufferAttribute(l,y),f=Math.max(f,r.center.distanceToSquared(xp))}r.radius=Math.sqrt(f),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),n.needsUpdate=!0,this)}getColorAt(e,t){const n=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(n,e*4)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===t?this:(n[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const n=this._drawInfo;return e>=n.length||n[e].active===!1||t<0||t>=this._geometryCount?null:(n[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return t.start=n.start,t.count=n.count,t}raycast(e,t){const n=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;fr.material=this.material,fr.geometry.index=o.index,fr.geometry.attributes=o.attributes,fr.geometry.boundingBox===null&&(fr.geometry.boundingBox=new pr),fr.geometry.boundingSphere===null&&(fr.geometry.boundingSphere=new $i);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,p=r[f];fr.geometry.setDrawRange(p.start,p.count),this.getMatrixAt(l,fr.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,fr.geometry.boundingBox),this.getBoundingSphereAt(f,fr.geometry.boundingSphere),fr.raycast(e,fy);for(let m=0,y=fy.length;m<y;m++){const v=fy[m];v.object=this,v.batchId=l,t.push(v)}fy.length=0}fr.material=null,fr.geometry.index=null,fr.geometry.attributes={},fr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),l=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._drawInfo,f=this._multiDrawStarts,p=this._multiDrawCounts,m=this._drawRanges,y=this.perObjectFrustumCulled,v=this._indirectTexture,x=v.image.data;y&&(T1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),r_.setFromProjectionMatrix(T1,e.coordinateSystem));let w=0;if(this.sortObjects){i_.copy(this.matrixWorld).invert(),xp.setFromMatrixPosition(n.matrixWorld).applyMatrix4(i_),R1.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(i_);for(let C=0,b=c.length;C<b;C++)if(c[C].visible&&c[C].active){const R=c[C].geometryIndex;this.getMatrixAt(C,rc),this.getBoundingSphereAt(R,pu).applyMatrix4(rc);let O=!1;if(y&&(O=!r_.intersectsSphere(pu)),!O){const F=IO.subVectors(pu.center,xp).dot(R1);s_.push(m[R],F,C)}}const S=s_.list,M=this.customSort;M===null?S.sort(s.transparent?bO:CO):M.call(this,S,n);for(let C=0,b=S.length;C<b;C++){const R=S[C];f[w]=R.start*l,p[w]=R.count,x[w]=R.index,w++}s_.reset()}else for(let S=0,M=c.length;S<M;S++)if(c[S].visible&&c[S].active){const C=c[S].geometryIndex;let b=!1;if(y&&(this.getMatrixAt(S,rc),this.getBoundingSphereAt(C,pu).applyMatrix4(rc),b=!r_.intersectsSphere(pu)),!b){const R=m[C];f[w]=R.start*l,p[w]=R.count,x[w]=S,w++}}v.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class yr extends Si{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new it(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rv=new W,Pv=new W,P1=new Tt,_p=new sf,hy=new $i,o_=new W,I1=new W;class ll extends ln{constructor(e=new jt,t=new yr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Rv.fromBufferAttribute(t,r-1),Pv.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Rv.distanceTo(Pv);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),hy.copy(n.boundingSphere),hy.applyMatrix4(r),hy.radius+=s,e.ray.intersectsSphere(hy)===!1)return;P1.copy(r).invert(),_p.copy(e.ray).applyMatrix4(P1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,p=n.index,y=n.attributes.position;if(p!==null){const v=Math.max(0,o.start),x=Math.min(p.count,o.start+o.count);for(let w=v,S=x-1;w<S;w+=f){const M=p.getX(w),C=p.getX(w+1),b=dy(this,e,_p,c,M,C);b&&t.push(b)}if(this.isLineLoop){const w=p.getX(x-1),S=p.getX(v),M=dy(this,e,_p,c,w,S);M&&t.push(M)}}else{const v=Math.max(0,o.start),x=Math.min(y.count,o.start+o.count);for(let w=v,S=x-1;w<S;w+=f){const M=dy(this,e,_p,c,w,w+1);M&&t.push(M)}if(this.isLineLoop){const w=dy(this,e,_p,c,x-1,v);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function dy(i,e,t,n,r,s){const o=i.geometry.attributes.position;if(Rv.fromBufferAttribute(o,r),Pv.fromBufferAttribute(o,s),t.distanceSqToSegment(Rv,Pv,o_,I1)>n)return;o_.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(o_);if(!(c<e.near||c>e.far))return{distance:c,point:I1.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const B1=new W,D1=new W;class Lo extends ll{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)B1.fromBufferAttribute(t,r),D1.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+B1.distanceTo(D1);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class US extends ll{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class qu extends Si{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new it(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const L1=new Tt,BA=new sf,py=new $i,my=new W;let am=class extends ln{constructor(e=new jt,t=new qu){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),py.copy(n.boundingSphere),py.applyMatrix4(r),py.radius+=s,e.ray.intersectsSphere(py)===!1)return;L1.copy(r).invert(),BA.copy(e.ray).applyMatrix4(L1);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=n.index,m=n.attributes.position;if(f!==null){const y=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=y,w=v;x<w;x++){const S=f.getX(x);my.fromBufferAttribute(m,S),F1(my,S,c,r,e,t,this)}}else{const y=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let x=y,w=v;x<w;x++)my.fromBufferAttribute(m,x),F1(my,x,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function F1(i,e,t,n,r,s,o){const l=BA.distanceSqToPoint(i);if(l<t){const c=new W;BA.closestPointToPoint(i,c),c.applyMatrix4(n);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class DO extends Pn{constructor(e,t,n,r,s,o,l,c,f){super(e,t,n,r,s,o,l,c,f),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ei,this.magFilter=s!==void 0?s:ei,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class LO extends Pn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ti,this.minFilter=Ti,this.generateMipmaps=!1,this.needsUpdate=!0}}class p0 extends Pn{constructor(e,t,n,r,s,o,l,c,f,p,m,y){super(null,o,l,c,f,p,r,s,m,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class FO extends p0{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=vs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class NO extends p0{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ol),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class OO extends Pn{constructor(e,t,n,r,s,o,l,c,f){super(e,t,n,r,s,o,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Fo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,c=s-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=n[r]-o,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,n[r]===o)return r/(s-1);const p=n[r],y=n[r+1]-p,v=(o-p)/y;return(r+v)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),c=t||(o.isVector2?new De:new W);return c.copy(l).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new W,r=[],s=[],o=[],l=new W,c=new Tt;for(let v=0;v<=e;v++){const x=v/e;r[v]=this.getTangentAt(x,new W)}s[0]=new W,o[0]=new W;let f=Number.MAX_VALUE;const p=Math.abs(r[0].x),m=Math.abs(r[0].y),y=Math.abs(r[0].z);p<=f&&(f=p,n.set(1,0,0)),m<=f&&(f=m,n.set(0,1,0)),y<=f&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let v=1;v<=e;v++){if(s[v]=s[v-1].clone(),o[v]=o[v-1].clone(),l.crossVectors(r[v-1],r[v]),l.length()>Number.EPSILON){l.normalize();const x=Math.acos($n(r[v-1].dot(r[v]),-1,1));s[v].applyMatrix4(c.makeRotationAxis(l,x))}o[v].crossVectors(r[v],s[v])}if(t===!0){let v=Math.acos($n(s[0].dot(s[e]),-1,1));v/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(v=-v);for(let x=1;x<=e;x++)s[x].applyMatrix4(c.makeRotationAxis(r[x],v*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class m0 extends Fo{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new De){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),y=c-this.aX,v=f-this.aY;c=y*p-v*m+this.aX,f=y*m+v*p+this.aY}return n.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class YT extends m0{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function zS(){let i=0,e=0,t=0,n=0;function r(s,o,l,c){i=s,e=l,t=-3*s+3*o-2*l-c,n=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,f){r(o,l,f*(l-s),f*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,f,p,m){let y=(o-s)/f-(l-s)/(f+p)+(l-o)/p,v=(l-o)/p-(c-o)/(p+m)+(c-l)/m;y*=p,v*=p,r(o,l,y,v)},calc:function(s){const o=s*s,l=o*s;return i+e*s+t*o+n*l}}}const gy=new W,a_=new zS,l_=new zS,c_=new zS;class qT extends Fo{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new W){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let f,p;this.closed||l>0?f=r[(l-1)%s]:(gy.subVectors(r[0],r[1]).add(r[0]),f=gy);const m=r[l%s],y=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(gy.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=gy),this.curveType==="centripetal"||this.curveType==="chordal"){const v=this.curveType==="chordal"?.5:.25;let x=Math.pow(f.distanceToSquared(m),v),w=Math.pow(m.distanceToSquared(y),v),S=Math.pow(y.distanceToSquared(p),v);w<1e-4&&(w=1),x<1e-4&&(x=w),S<1e-4&&(S=w),a_.initNonuniformCatmullRom(f.x,m.x,y.x,p.x,x,w,S),l_.initNonuniformCatmullRom(f.y,m.y,y.y,p.y,x,w,S),c_.initNonuniformCatmullRom(f.z,m.z,y.z,p.z,x,w,S)}else this.curveType==="catmullrom"&&(a_.initCatmullRom(f.x,m.x,y.x,p.x,this.tension),l_.initCatmullRom(f.y,m.y,y.y,p.y,this.tension),c_.initCatmullRom(f.z,m.z,y.z,p.z,this.tension));return n.set(a_.calc(c),l_.calc(c),c_.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new W().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function N1(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,l=i*i,c=i*l;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*l+s*i+t}function kO(i,e){const t=1-i;return t*t*e}function UO(i,e){return 2*(1-i)*i*e}function zO(i,e){return i*i*e}function Gp(i,e,t,n){return kO(i,e)+UO(i,t)+zO(i,n)}function HO(i,e){const t=1-i;return t*t*t*e}function GO(i,e){const t=1-i;return 3*t*t*i*e}function VO(i,e){return 3*(1-i)*i*i*e}function WO(i,e){return i*i*i*e}function Vp(i,e,t,n,r){return HO(i,e)+GO(i,t)+VO(i,n)+WO(i,r)}class HS extends Fo{constructor(e=new De,t=new De,n=new De,r=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new De){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Vp(e,r.x,s.x,o.x,l.x),Vp(e,r.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class QT extends Fo{constructor(e=new W,t=new W,n=new W,r=new W){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new W){const n=t,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(Vp(e,r.x,s.x,o.x,l.x),Vp(e,r.y,s.y,o.y,l.y),Vp(e,r.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class GS extends Fo{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZT extends Fo{constructor(e=new W,t=new W){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new W){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new W){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VS extends Fo{constructor(e=new De,t=new De,n=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new De){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Gp(e,r.x,s.x,o.x),Gp(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WS extends Fo{constructor(e=new W,t=new W,n=new W){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new W){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Gp(e,r.x,s.x,o.x),Gp(e,r.y,s.y,o.y),Gp(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jS extends Fo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),l=s-o,c=r[o===0?o:o-1],f=r[o],p=r[o>r.length-2?r.length-1:o+1],m=r[o>r.length-3?r.length-1:o+2];return n.set(N1(l,c.x,f.x,p.x,m.x),N1(l,c.y,f.y,p.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new De().fromArray(r))}return this}}var Iv=Object.freeze({__proto__:null,ArcCurve:YT,CatmullRomCurve3:qT,CubicBezierCurve:HS,CubicBezierCurve3:QT,EllipseCurve:m0,LineCurve:GS,LineCurve3:ZT,QuadraticBezierCurve:VS,QuadraticBezierCurve3:WS,SplineCurve:jS});class $T extends Fo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Iv[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],c=l.getLength(),f=c===0?0:1-o/c;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let f=0;f<c.length;f++){const p=c[f];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new Iv[r.type]().fromJSON(r))}return this}}class lm extends $T{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new GS(this.currentPoint.clone(),new De(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new VS(this.currentPoint.clone(),new De(e,t),new De(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const l=new HS(this.currentPoint.clone(),new De(e,t),new De(n,r),new De(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new jS(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,l,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,n,r,s,o,l,c),this}absellipse(e,t,n,r,s,o,l,c){const f=new m0(e,t,n,r,s,o,l,c);if(this.curves.length>0){const m=f.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Rm extends jt{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=$n(r,0,Math.PI*2);const s=[],o=[],l=[],c=[],f=[],p=1/t,m=new W,y=new De,v=new W,x=new W,w=new W;let S=0,M=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:S=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,v.x=M*1,v.y=-S,v.z=M*0,w.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case e.length-1:c.push(w.x,w.y,w.z);break;default:S=e[C+1].x-e[C].x,M=e[C+1].y-e[C].y,v.x=M*1,v.y=-S,v.z=M*0,x.copy(v),v.x+=w.x,v.y+=w.y,v.z+=w.z,v.normalize(),c.push(v.x,v.y,v.z),w.copy(x)}for(let C=0;C<=t;C++){const b=n+C*p*r,R=Math.sin(b),O=Math.cos(b);for(let F=0;F<=e.length-1;F++){m.x=e[F].x*R,m.y=e[F].y,m.z=e[F].x*O,o.push(m.x,m.y,m.z),y.x=C/t,y.y=F/(e.length-1),l.push(y.x,y.y);const N=c[3*F+0]*R,U=c[3*F+1],J=c[3*F+0]*O;f.push(N,U,J)}}for(let C=0;C<t;C++)for(let b=0;b<e.length-1;b++){const R=b+C*e.length,O=R,F=R+e.length,N=R+e.length+1,U=R+1;s.push(O,F,U),s.push(N,U,F)}this.setIndex(s),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(l,2)),this.setAttribute("normal",new St(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rm(e.points,e.segments,e.phiStart,e.phiLength)}}class g0 extends Rm{constructor(e=1,t=1,n=4,r=8){const s=new lm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new g0(e.radius,e.length,e.capSegments,e.radialSegments)}}class y0 extends jt{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],l=[],c=[],f=new W,p=new De;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let m=0,y=3;m<=t;m++,y+=3){const v=n+m/t*r;f.x=e*Math.cos(v),f.y=e*Math.sin(v),o.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(o[y]/e+1)/2,p.y=(o[y+1]/e+1)/2,c.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yd extends jt{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const p=[],m=[],y=[],v=[];let x=0;const w=[],S=n/2;let M=0;C(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.setAttribute("position",new St(m,3)),this.setAttribute("normal",new St(y,3)),this.setAttribute("uv",new St(v,2));function C(){const R=new W,O=new W;let F=0;const N=(t-e)/n;for(let U=0;U<=s;U++){const J=[],B=U/s,L=B*(t-e)+e;for(let ne=0;ne<=r;ne++){const ie=ne/r,ce=ie*c+l,de=Math.sin(ce),le=Math.cos(ce);O.x=L*de,O.y=-B*n+S,O.z=L*le,m.push(O.x,O.y,O.z),R.set(de,N,le).normalize(),y.push(R.x,R.y,R.z),v.push(ie,1-B),J.push(x++)}w.push(J)}for(let U=0;U<r;U++)for(let J=0;J<s;J++){const B=w[J][U],L=w[J+1][U],ne=w[J+1][U+1],ie=w[J][U+1];e>0&&(p.push(B,L,ie),F+=3),t>0&&(p.push(L,ne,ie),F+=3)}f.addGroup(M,F,0),M+=F}function b(R){const O=x,F=new De,N=new W;let U=0;const J=R===!0?e:t,B=R===!0?1:-1;for(let ne=1;ne<=r;ne++)m.push(0,S*B,0),y.push(0,B,0),v.push(.5,.5),x++;const L=x;for(let ne=0;ne<=r;ne++){const ce=ne/r*c+l,de=Math.cos(ce),le=Math.sin(ce);N.x=J*le,N.y=S*B,N.z=J*de,m.push(N.x,N.y,N.z),y.push(0,B,0),F.x=de*.5+.5,F.y=le*.5*B+.5,v.push(F.x,F.y),x++}for(let ne=0;ne<r;ne++){const ie=O+ne,ce=L+ne;R===!0?p.push(ce,ce+1,ie):p.push(ce+1,ce,ie),U+=3}f.addGroup(M,U,R===!0?1:2),M+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class v0 extends yd{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new v0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ac extends jt{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];l(r),f(n),p(),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(s.slice(),3)),this.setAttribute("uv",new St(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const b=new W,R=new W,O=new W;for(let F=0;F<t.length;F+=3)v(t[F+0],b),v(t[F+1],R),v(t[F+2],O),c(b,R,O,C)}function c(C,b,R,O){const F=O+1,N=[];for(let U=0;U<=F;U++){N[U]=[];const J=C.clone().lerp(R,U/F),B=b.clone().lerp(R,U/F),L=F-U;for(let ne=0;ne<=L;ne++)ne===0&&U===F?N[U][ne]=J:N[U][ne]=J.clone().lerp(B,ne/L)}for(let U=0;U<F;U++)for(let J=0;J<2*(F-U)-1;J++){const B=Math.floor(J/2);J%2===0?(y(N[U][B+1]),y(N[U+1][B]),y(N[U][B])):(y(N[U][B+1]),y(N[U+1][B+1]),y(N[U+1][B]))}}function f(C){const b=new W;for(let R=0;R<s.length;R+=3)b.x=s[R+0],b.y=s[R+1],b.z=s[R+2],b.normalize().multiplyScalar(C),s[R+0]=b.x,s[R+1]=b.y,s[R+2]=b.z}function p(){const C=new W;for(let b=0;b<s.length;b+=3){C.x=s[b+0],C.y=s[b+1],C.z=s[b+2];const R=S(C)/2/Math.PI+.5,O=M(C)/Math.PI+.5;o.push(R,1-O)}x(),m()}function m(){for(let C=0;C<o.length;C+=6){const b=o[C+0],R=o[C+2],O=o[C+4],F=Math.max(b,R,O),N=Math.min(b,R,O);F>.9&&N<.1&&(b<.2&&(o[C+0]+=1),R<.2&&(o[C+2]+=1),O<.2&&(o[C+4]+=1))}}function y(C){s.push(C.x,C.y,C.z)}function v(C,b){const R=C*3;b.x=e[R+0],b.y=e[R+1],b.z=e[R+2]}function x(){const C=new W,b=new W,R=new W,O=new W,F=new De,N=new De,U=new De;for(let J=0,B=0;J<s.length;J+=9,B+=6){C.set(s[J+0],s[J+1],s[J+2]),b.set(s[J+3],s[J+4],s[J+5]),R.set(s[J+6],s[J+7],s[J+8]),F.set(o[B+0],o[B+1]),N.set(o[B+2],o[B+3]),U.set(o[B+4],o[B+5]),O.copy(C).add(b).add(R).divideScalar(3);const L=S(O);w(F,B+0,C,L),w(N,B+2,b,L),w(U,B+4,R,L)}}function w(C,b,R,O){O<0&&C.x===1&&(o[b]=C.x-1),R.x===0&&R.z===0&&(o[b]=O/2/Math.PI+.5)}function S(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ac(e.vertices,e.indices,e.radius,e.details)}}class x0 extends Ac{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x0(e.radius,e.detail)}}const yy=new W,vy=new W,u_=new W,xy=new $r;class eR extends jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Gu*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,f=[0,0,0],p=["a","b","c"],m=new Array(3),y={},v=[];for(let x=0;x<c;x+=3){o?(f[0]=o.getX(x),f[1]=o.getX(x+1),f[2]=o.getX(x+2)):(f[0]=x,f[1]=x+1,f[2]=x+2);const{a:w,b:S,c:M}=xy;if(w.fromBufferAttribute(l,f[0]),S.fromBufferAttribute(l,f[1]),M.fromBufferAttribute(l,f[2]),xy.getNormal(u_),m[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,m[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,m[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let C=0;C<3;C++){const b=(C+1)%3,R=m[C],O=m[b],F=xy[p[C]],N=xy[p[b]],U=`${R}_${O}`,J=`${O}_${R}`;J in y&&y[J]?(u_.dot(y[J].normal)<=s&&(v.push(F.x,F.y,F.z),v.push(N.x,N.y,N.z)),y[J]=null):U in y||(y[U]={index0:f[C],index1:f[b],normal:u_.clone()})}}for(const x in y)if(y[x]){const{index0:w,index1:S}=y[x];yy.fromBufferAttribute(l,w),vy.fromBufferAttribute(l,S),v.push(yy.x,yy.y,yy.z),v.push(vy.x,vy.y,vy.z)}this.setAttribute("position",new St(v,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Wu=class extends lm{constructor(e){super(e),this.uuid=_s(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new lm().fromJSON(r))}return this}};const jO={triangulate:function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=tR(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,f,p,m,y,v;if(n&&(s=qO(i,e,s,t)),i.length>80*t){l=f=i[0],c=p=i[1];for(let x=t;x<r;x+=t)m=i[x],y=i[x+1],m<l&&(l=m),y<c&&(c=y),m>f&&(f=m),y>p&&(p=y);v=Math.max(f-l,p-c),v=v!==0?32767/v:0}return cm(s,o,t,l,c,v,0),o}};function tR(i,e,t,n,r){let s,o;if(r===ak(i,e,t,n)>0)for(s=e;s<t;s+=n)o=O1(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=O1(s,i[s],i[s+1],o);return o&&_0(o,o.next)&&(fm(o),o=o.next),o}function Qu(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(_0(t,t.next)||Jn(t.prev,t,t.next)===0)){if(fm(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function cm(i,e,t,n,r,s,o){if(!i)return;!o&&s&&tk(i,n,r,s);let l=i,c,f;for(;i.prev!==i.next;){if(c=i.prev,f=i.next,s?JO(i,n,r,s):XO(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(f.i/t|0),fm(i),i=f.next,l=f.next;continue}if(i=f,i===l){o?o===1?(i=KO(Qu(i),e,t),cm(i,e,t,n,r,s,2)):o===2&&YO(i,e,t,n,r,s):cm(Qu(i),e,t,n,r,s,1);break}}}function XO(i){const e=i.prev,t=i,n=i.next;if(Jn(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,l=e.y,c=t.y,f=n.y,p=r<s?r<o?r:o:s<o?s:o,m=l<c?l<f?l:f:c<f?c:f,y=r>s?r>o?r:o:s>o?s:o,v=l>c?l>f?l:f:c>f?c:f;let x=n.next;for(;x!==e;){if(x.x>=p&&x.x<=y&&x.y>=m&&x.y<=v&&zh(r,l,s,c,o,f,x.x,x.y)&&Jn(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function JO(i,e,t,n){const r=i.prev,s=i,o=i.next;if(Jn(r,s,o)>=0)return!1;const l=r.x,c=s.x,f=o.x,p=r.y,m=s.y,y=o.y,v=l<c?l<f?l:f:c<f?c:f,x=p<m?p<y?p:y:m<y?m:y,w=l>c?l>f?l:f:c>f?c:f,S=p>m?p>y?p:y:m>y?m:y,M=DA(v,x,e,t,n),C=DA(w,S,e,t,n);let b=i.prevZ,R=i.nextZ;for(;b&&b.z>=M&&R&&R.z<=C;){if(b.x>=v&&b.x<=w&&b.y>=x&&b.y<=S&&b!==r&&b!==o&&zh(l,p,c,m,f,y,b.x,b.y)&&Jn(b.prev,b,b.next)>=0||(b=b.prevZ,R.x>=v&&R.x<=w&&R.y>=x&&R.y<=S&&R!==r&&R!==o&&zh(l,p,c,m,f,y,R.x,R.y)&&Jn(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;b&&b.z>=M;){if(b.x>=v&&b.x<=w&&b.y>=x&&b.y<=S&&b!==r&&b!==o&&zh(l,p,c,m,f,y,b.x,b.y)&&Jn(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;R&&R.z<=C;){if(R.x>=v&&R.x<=w&&R.y>=x&&R.y<=S&&R!==r&&R!==o&&zh(l,p,c,m,f,y,R.x,R.y)&&Jn(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function KO(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!_0(r,s)&&nR(r,n,n.next,s)&&um(r,s)&&um(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),fm(n),fm(n.next),n=i=s),n=n.next}while(n!==i);return Qu(n)}function YO(i,e,t,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&rk(o,l)){let c=iR(o,l);o=Qu(o,o.next),c=Qu(c,c.next),cm(o,e,t,n,r,s,0),cm(c,e,t,n,r,s,0);return}l=l.next}o=o.next}while(o!==i)}function qO(i,e,t,n){const r=[];let s,o,l,c,f;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:i.length,f=tR(i,l,c,n,!1),f===f.next&&(f.steiner=!0),r.push(ik(f));for(r.sort(QO),s=0;s<r.length;s++)t=ZO(r[s],t);return t}function QO(i,e){return i.x-e.x}function ZO(i,e){const t=$O(i,e);if(!t)return e;const n=iR(t,i);return Qu(n,n.next),Qu(t,t.next)}function $O(i,e){let t=e,n=-1/0,r;const s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const y=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(y<=s&&y>n&&(n=y,r=t.x<t.next.x?t:t.next,y===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,f=r.y;let p=1/0,m;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&zh(o<f?s:n,o,c,f,o<f?n:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),um(t,i)&&(m<p||m===p&&(t.x>r.x||t.x===r.x&&ek(r,t)))&&(r=t,p=m)),t=t.next;while(t!==l);return r}function ek(i,e){return Jn(i.prev,i,e.prev)<0&&Jn(e.next,i,i.next)<0}function tk(i,e,t,n){let r=i;do r.z===0&&(r.z=DA(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,nk(r)}function nk(i){let e,t,n,r,s,o,l,c,f=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<f&&(l++,n=n.nextZ,!!n);e++);for(c=f;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,l--):(r=n,n=n.nextZ,c--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,f*=2}while(o>1);return i}function DA(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function ik(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function zh(i,e,t,n,r,s,o,l){return(r-o)*(e-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(n-l)}function rk(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!sk(i,e)&&(um(i,e)&&um(e,i)&&ok(i,e)&&(Jn(i.prev,i,e.prev)||Jn(i,e.prev,e))||_0(i,e)&&Jn(i.prev,i,i.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function _0(i,e){return i.x===e.x&&i.y===e.y}function nR(i,e,t,n){const r=Ay(Jn(i,e,t)),s=Ay(Jn(i,e,n)),o=Ay(Jn(t,n,i)),l=Ay(Jn(t,n,e));return!!(r!==s&&o!==l||r===0&&_y(i,t,e)||s===0&&_y(i,n,e)||o===0&&_y(t,i,n)||l===0&&_y(t,e,n))}function _y(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ay(i){return i>0?1:i<0?-1:0}function sk(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&nR(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function um(i,e){return Jn(i.prev,i,i.next)<0?Jn(i,e,i.next)>=0&&Jn(i,i.prev,e)>=0:Jn(i,e,i.prev)<0||Jn(i,i.next,e)<0}function ok(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function iR(i,e){const t=new LA(i.i,i.x,i.y),n=new LA(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function O1(i,e,t,n){const r=new LA(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function fm(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function LA(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ak(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class ca{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return ca.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];k1(e),U1(n,e);let o=e.length;t.forEach(k1);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,U1(n,t[c]);const l=jO.triangulate(n,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function k1(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function U1(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class A0 extends jt{constructor(e=new Wu([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];o(f)}this.setAttribute("position",new St(r,3)),this.setAttribute("uv",new St(s,2)),this.computeVertexNormals();function o(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,v=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:v-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,S=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:lk;let b,R=!1,O,F,N,U;M&&(b=M.getSpacedPoints(p),R=!0,y=!1,O=M.computeFrenetFrames(p,!1),F=new W,N=new W,U=new W),y||(S=0,v=0,x=0,w=0);const J=l.extractPoints(f);let B=J.shape;const L=J.holes;if(!ca.isClockWise(B)){B=B.reverse();for(let Pe=0,j=L.length;Pe<j;Pe++){const Je=L[Pe];ca.isClockWise(Je)&&(L[Pe]=Je.reverse())}}const ie=ca.triangulateShape(B,L),ce=B;for(let Pe=0,j=L.length;Pe<j;Pe++){const Je=L[Pe];B=B.concat(Je)}function de(Pe,j,Je){return j||console.error("THREE.ExtrudeGeometry: vec does not exist"),Pe.clone().addScaledVector(j,Je)}const le=B.length,ye=ie.length;function G(Pe,j,Je){let Ke,Ue,Ge;const xt=Pe.x-j.x,tt=Pe.y-j.y,X=Je.x-Pe.x,H=Je.y-Pe.y,me=xt*xt+tt*tt,Te=xt*H-tt*X;if(Math.abs(Te)>Number.EPSILON){const Fe=Math.sqrt(me),Be=Math.sqrt(X*X+H*H),gt=j.x-tt/Fe,Ve=j.y+xt/Fe,lt=Je.x-H/Be,Qt=Je.y+X/Be,ze=((lt-gt)*H-(Qt-Ve)*X)/(xt*H-tt*X);Ke=gt+xt*ze-Pe.x,Ue=Ve+tt*ze-Pe.y;const st=Ke*Ke+Ue*Ue;if(st<=2)return new De(Ke,Ue);Ge=Math.sqrt(st/2)}else{let Fe=!1;xt>Number.EPSILON?X>Number.EPSILON&&(Fe=!0):xt<-Number.EPSILON?X<-Number.EPSILON&&(Fe=!0):Math.sign(tt)===Math.sign(H)&&(Fe=!0),Fe?(Ke=-tt,Ue=xt,Ge=Math.sqrt(me)):(Ke=xt,Ue=tt,Ge=Math.sqrt(me/2))}return new De(Ke/Ge,Ue/Ge)}const Z=[];for(let Pe=0,j=ce.length,Je=j-1,Ke=Pe+1;Pe<j;Pe++,Je++,Ke++)Je===j&&(Je=0),Ke===j&&(Ke=0),Z[Pe]=G(ce[Pe],ce[Je],ce[Ke]);const z=[];let Y,pe=Z.concat();for(let Pe=0,j=L.length;Pe<j;Pe++){const Je=L[Pe];Y=[];for(let Ke=0,Ue=Je.length,Ge=Ue-1,xt=Ke+1;Ke<Ue;Ke++,Ge++,xt++)Ge===Ue&&(Ge=0),xt===Ue&&(xt=0),Y[Ke]=G(Je[Ke],Je[Ge],Je[xt]);z.push(Y),pe=pe.concat(Y)}for(let Pe=0;Pe<S;Pe++){const j=Pe/S,Je=v*Math.cos(j*Math.PI/2),Ke=x*Math.sin(j*Math.PI/2)+w;for(let Ue=0,Ge=ce.length;Ue<Ge;Ue++){const xt=de(ce[Ue],Z[Ue],Ke);Ie(xt.x,xt.y,-Je)}for(let Ue=0,Ge=L.length;Ue<Ge;Ue++){const xt=L[Ue];Y=z[Ue];for(let tt=0,X=xt.length;tt<X;tt++){const H=de(xt[tt],Y[tt],Ke);Ie(H.x,H.y,-Je)}}}const Ne=x+w;for(let Pe=0;Pe<le;Pe++){const j=y?de(B[Pe],pe[Pe],Ne):B[Pe];R?(N.copy(O.normals[0]).multiplyScalar(j.x),F.copy(O.binormals[0]).multiplyScalar(j.y),U.copy(b[0]).add(N).add(F),Ie(U.x,U.y,U.z)):Ie(j.x,j.y,0)}for(let Pe=1;Pe<=p;Pe++)for(let j=0;j<le;j++){const Je=y?de(B[j],pe[j],Ne):B[j];R?(N.copy(O.normals[Pe]).multiplyScalar(Je.x),F.copy(O.binormals[Pe]).multiplyScalar(Je.y),U.copy(b[Pe]).add(N).add(F),Ie(U.x,U.y,U.z)):Ie(Je.x,Je.y,m/p*Pe)}for(let Pe=S-1;Pe>=0;Pe--){const j=Pe/S,Je=v*Math.cos(j*Math.PI/2),Ke=x*Math.sin(j*Math.PI/2)+w;for(let Ue=0,Ge=ce.length;Ue<Ge;Ue++){const xt=de(ce[Ue],Z[Ue],Ke);Ie(xt.x,xt.y,m+Je)}for(let Ue=0,Ge=L.length;Ue<Ge;Ue++){const xt=L[Ue];Y=z[Ue];for(let tt=0,X=xt.length;tt<X;tt++){const H=de(xt[tt],Y[tt],Ke);R?Ie(H.x,H.y+b[p-1].y,b[p-1].x+Je):Ie(H.x,H.y,m+Je)}}}oe(),ve();function oe(){const Pe=r.length/3;if(y){let j=0,Je=le*j;for(let Ke=0;Ke<ye;Ke++){const Ue=ie[Ke];Xe(Ue[2]+Je,Ue[1]+Je,Ue[0]+Je)}j=p+S*2,Je=le*j;for(let Ke=0;Ke<ye;Ke++){const Ue=ie[Ke];Xe(Ue[0]+Je,Ue[1]+Je,Ue[2]+Je)}}else{for(let j=0;j<ye;j++){const Je=ie[j];Xe(Je[2],Je[1],Je[0])}for(let j=0;j<ye;j++){const Je=ie[j];Xe(Je[0]+le*p,Je[1]+le*p,Je[2]+le*p)}}n.addGroup(Pe,r.length/3-Pe,0)}function ve(){const Pe=r.length/3;let j=0;be(ce,j),j+=ce.length;for(let Je=0,Ke=L.length;Je<Ke;Je++){const Ue=L[Je];be(Ue,j),j+=Ue.length}n.addGroup(Pe,r.length/3-Pe,1)}function be(Pe,j){let Je=Pe.length;for(;--Je>=0;){const Ke=Je;let Ue=Je-1;Ue<0&&(Ue=Pe.length-1);for(let Ge=0,xt=p+S*2;Ge<xt;Ge++){const tt=le*Ge,X=le*(Ge+1),H=j+Ke+tt,me=j+Ue+tt,Te=j+Ue+X,Fe=j+Ke+X;rt(H,me,Te,Fe)}}}function Ie(Pe,j,Je){c.push(Pe),c.push(j),c.push(Je)}function Xe(Pe,j,Je){pt(Pe),pt(j),pt(Je);const Ke=r.length/3,Ue=C.generateTopUV(n,r,Ke-3,Ke-2,Ke-1);We(Ue[0]),We(Ue[1]),We(Ue[2])}function rt(Pe,j,Je,Ke){pt(Pe),pt(j),pt(Ke),pt(j),pt(Je),pt(Ke);const Ue=r.length/3,Ge=C.generateSideWallUV(n,r,Ue-6,Ue-3,Ue-2,Ue-1);We(Ge[0]),We(Ge[1]),We(Ge[3]),We(Ge[1]),We(Ge[2]),We(Ge[3])}function pt(Pe){r.push(c[Pe*3+0]),r.push(c[Pe*3+1]),r.push(c[Pe*3+2])}function We(Pe){s.push(Pe.x),s.push(Pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return ck(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Iv[r.type]().fromJSON(r)),new A0(n,e.options)}}const lk={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],l=e[n*3],c=e[n*3+1],f=e[r*3],p=e[r*3+1];return[new De(s,o),new De(l,c),new De(f,p)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[n*3],p=e[n*3+1],m=e[n*3+2],y=e[r*3],v=e[r*3+1],x=e[r*3+2],w=e[s*3],S=e[s*3+1],M=e[s*3+2];return Math.abs(l-p)<Math.abs(o-f)?[new De(o,1-c),new De(f,1-m),new De(y,1-x),new De(w,1-M)]:[new De(l,1-c),new De(p,1-m),new De(v,1-x),new De(S,1-M)]}};function ck(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class S0 extends Ac{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new S0(e.radius,e.detail)}}class Pm extends Ac{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pm(e.radius,e.detail)}}class M0 extends jt{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const l=[],c=[],f=[],p=[];let m=e;const y=(t-e)/r,v=new W,x=new De;for(let w=0;w<=r;w++){for(let S=0;S<=n;S++){const M=s+S/n*o;v.x=m*Math.cos(M),v.y=m*Math.sin(M),c.push(v.x,v.y,v.z),f.push(0,0,1),x.x=(v.x/t+1)/2,x.y=(v.y/t+1)/2,p.push(x.x,x.y)}m+=y}for(let w=0;w<r;w++){const S=w*(n+1);for(let M=0;M<n;M++){const C=M+S,b=C,R=C+n+1,O=C+n+2,F=C+1;l.push(b,R,F),l.push(R,O,F)}}this.setIndex(l),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new M0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class w0 extends jt{constructor(e=new Wu([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(s,3)),this.setAttribute("uv",new St(o,2));function f(p){const m=r.length/3,y=p.extractPoints(t);let v=y.shape;const x=y.holes;ca.isClockWise(v)===!1&&(v=v.reverse());for(let S=0,M=x.length;S<M;S++){const C=x[S];ca.isClockWise(C)===!0&&(x[S]=C.reverse())}const w=ca.triangulateShape(v,x);for(let S=0,M=x.length;S<M;S++){const C=x[S];v=v.concat(C)}for(let S=0,M=v.length;S<M;S++){const C=v[S];r.push(C.x,C.y,0),s.push(0,0,1),o.push(C.x,C.y)}for(let S=0,M=w.length;S<M;S++){const C=w[S],b=C[0]+m,R=C[1]+m,O=C[2]+m;n.push(b,R,O),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return uk(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new w0(n,e.curveSegments)}}function uk(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class Im extends jt{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+l,Math.PI);let f=0;const p=[],m=new W,y=new W,v=[],x=[],w=[],S=[];for(let M=0;M<=n;M++){const C=[],b=M/n;let R=0;M===0&&o===0?R=.5/t:M===n&&c===Math.PI&&(R=-.5/t);for(let O=0;O<=t;O++){const F=O/t;m.x=-e*Math.cos(r+F*s)*Math.sin(o+b*l),m.y=e*Math.cos(o+b*l),m.z=e*Math.sin(r+F*s)*Math.sin(o+b*l),x.push(m.x,m.y,m.z),y.copy(m).normalize(),w.push(y.x,y.y,y.z),S.push(F+R,1-b),C.push(f++)}p.push(C)}for(let M=0;M<n;M++)for(let C=0;C<t;C++){const b=p[M][C+1],R=p[M][C],O=p[M+1][C],F=p[M+1][C+1];(M!==0||o>0)&&v.push(b,R,F),(M!==n-1||c<Math.PI)&&v.push(R,O,F)}this.setIndex(v),this.setAttribute("position",new St(x,3)),this.setAttribute("normal",new St(w,3)),this.setAttribute("uv",new St(S,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Im(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class E0 extends Ac{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new E0(e.radius,e.detail)}}class Bm extends jt{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],f=[],p=new W,m=new W,y=new W;for(let v=0;v<=n;v++)for(let x=0;x<=r;x++){const w=x/r*s,S=v/n*Math.PI*2;m.x=(e+t*Math.cos(S))*Math.cos(w),m.y=(e+t*Math.cos(S))*Math.sin(w),m.z=t*Math.sin(S),l.push(m.x,m.y,m.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),y.subVectors(m,p).normalize(),c.push(y.x,y.y,y.z),f.push(x/r),f.push(v/n)}for(let v=1;v<=n;v++)for(let x=1;x<=r;x++){const w=(r+1)*v+x-1,S=(r+1)*(v-1)+x-1,M=(r+1)*(v-1)+x,C=(r+1)*v+x;o.push(w,S,C),o.push(S,M,C)}this.setIndex(o),this.setAttribute("position",new St(l,3)),this.setAttribute("normal",new St(c,3)),this.setAttribute("uv",new St(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class C0 extends jt{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const l=[],c=[],f=[],p=[],m=new W,y=new W,v=new W,x=new W,w=new W,S=new W,M=new W;for(let b=0;b<=n;++b){const R=b/n*s*Math.PI*2;C(R,s,o,e,v),C(R+.01,s,o,e,x),S.subVectors(x,v),M.addVectors(x,v),w.crossVectors(S,M),M.crossVectors(w,S),w.normalize(),M.normalize();for(let O=0;O<=r;++O){const F=O/r*Math.PI*2,N=-t*Math.cos(F),U=t*Math.sin(F);m.x=v.x+(N*M.x+U*w.x),m.y=v.y+(N*M.y+U*w.y),m.z=v.z+(N*M.z+U*w.z),c.push(m.x,m.y,m.z),y.subVectors(m,v).normalize(),f.push(y.x,y.y,y.z),p.push(b/n),p.push(O/r)}}for(let b=1;b<=n;b++)for(let R=1;R<=r;R++){const O=(r+1)*(b-1)+(R-1),F=(r+1)*b+(R-1),N=(r+1)*b+R,U=(r+1)*(b-1)+R;l.push(O,F,U),l.push(F,N,U)}this.setIndex(l),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(f,3)),this.setAttribute("uv",new St(p,2));function C(b,R,O,F,N){const U=Math.cos(b),J=Math.sin(b),B=O/R*b,L=Math.cos(B);N.x=F*(2+L)*.5*U,N.y=F*(2+L)*J*.5,N.z=F*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class b0 extends jt{constructor(e=new WS(new W(-1,-1,0),new W(-1,1,0),new W(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new W,c=new W,f=new De;let p=new W;const m=[],y=[],v=[],x=[];w(),this.setIndex(x),this.setAttribute("position",new St(m,3)),this.setAttribute("normal",new St(y,3)),this.setAttribute("uv",new St(v,2));function w(){for(let b=0;b<t;b++)S(b);S(s===!1?t:0),C(),M()}function S(b){p=e.getPointAt(b/t,p);const R=o.normals[b],O=o.binormals[b];for(let F=0;F<=r;F++){const N=F/r*Math.PI*2,U=Math.sin(N),J=-Math.cos(N);c.x=J*R.x+U*O.x,c.y=J*R.y+U*O.y,c.z=J*R.z+U*O.z,c.normalize(),y.push(c.x,c.y,c.z),l.x=p.x+n*c.x,l.y=p.y+n*c.y,l.z=p.z+n*c.z,m.push(l.x,l.y,l.z)}}function M(){for(let b=1;b<=t;b++)for(let R=1;R<=r;R++){const O=(r+1)*(b-1)+(R-1),F=(r+1)*b+(R-1),N=(r+1)*b+R,U=(r+1)*(b-1)+R;x.push(O,F,U),x.push(F,N,U)}}function C(){for(let b=0;b<=t;b++)for(let R=0;R<=r;R++)f.x=b/t,f.y=R/r,v.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new b0(new Iv[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class rR extends jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new W,s=new W;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const m=c[f],y=m.start,v=m.count;for(let x=y,w=y+v;x<w;x+=3)for(let S=0;S<3;S++){const M=l.getX(x+S),C=l.getX(x+(S+1)%3);r.fromBufferAttribute(o,M),s.fromBufferAttribute(o,C),z1(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let f=0;f<3;f++){const p=3*l+f,m=3*l+(f+1)%3;r.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),z1(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new St(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function z1(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var H1=Object.freeze({__proto__:null,BoxGeometry:of,CapsuleGeometry:g0,CircleGeometry:y0,ConeGeometry:v0,CylinderGeometry:yd,DodecahedronGeometry:x0,EdgesGeometry:eR,ExtrudeGeometry:A0,IcosahedronGeometry:S0,LatheGeometry:Rm,OctahedronGeometry:Pm,PlaneGeometry:md,PolyhedronGeometry:Ac,RingGeometry:M0,ShapeGeometry:w0,SphereGeometry:Im,TetrahedronGeometry:E0,TorusGeometry:Bm,TorusKnotGeometry:C0,TubeGeometry:b0,WireframeGeometry:rR});class sR extends Si{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new it(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class oR extends Ro{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Dm extends Si{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new it(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ys extends Dm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new it(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new it(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new it(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class aR extends Si{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new it(16777215),this.specular=new it(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fr,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lR extends Si{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new it(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class cR extends Si{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class uR extends Si{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new it(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new it(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fr,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fR extends Si{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new it(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_c,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hR extends yr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Fu(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function dR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function pR(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function FA(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[o++]=i[l+c]}return r}function XS(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function fk(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],p=f.getValueSize(),m=[],y=[];for(let v=0;v<f.times.length;++v){const x=f.times[v]*r;if(!(x<t||x>=n)){m.push(f.times[v]);for(let w=0;w<p;++w)y.push(f.values[v*p+w])}}m.length!==0&&(f.times=Fu(m,f.times.constructor),f.values=Fu(y,f.values.constructor),o.push(f))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function hk(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=i.tracks.find(function(M){return M.name===l.name&&M.ValueTypeName===c});if(f===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let y=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);const x=l.times.length-1;let w;if(s<=l.times[0]){const M=p,C=m-p;w=l.values.slice(M,C)}else if(s>=l.times[x]){const M=x*m+p,C=M+m-p;w=l.values.slice(M,C)}else{const M=l.createInterpolant(),C=p,b=m-p;M.evaluate(s),w=M.resultBuffer.slice(C,b)}c==="quaternion"&&new ki().fromArray(w).normalize().conjugate().toArray(w);const S=f.times.length;for(let M=0;M<S;++M){const C=M*v+y;if(c==="quaternion")ki.multiplyQuaternionsFlat(f.values,C,w,0,f.values,C);else{const b=v-y*2;for(let R=0;R<b;++R)f.values[C+R]-=w[R]}}}return i.blendMode=AS,i}const dk={convertArray:Fu,isTypedArray:dR,getKeyframeOrder:pR,sortedArray:FA,flattenJSON:XS,subclip:fk,makeClipAdditive:hk};class vd{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mR extends vd{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Bu,endingEnd:Bu}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case Du:s=e,l=2*t-n;break;case $p:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Du:o=e,c=2*n-t;break;case $p:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}const f=(n-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-n),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=this._offsetPrev,m=this._offsetNext,y=this._weightPrev,v=this._weightNext,x=(n-t)/(r-t),w=x*x,S=w*x,M=-y*S+2*y*w-y*x,C=(1+y)*S+(-1.5-2*y)*w+(-.5+y)*x+1,b=(-1-v)*S+(1.5+v)*w+.5*x,R=v*S-v*w;for(let O=0;O!==l;++O)s[O]=M*o[p+O]+C*o[f+O]+b*o[c+O]+R*o[m+O];return s}}class JS extends vd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=(n-t)/(r-t),m=1-p;for(let y=0;y!==l;++y)s[y]=o[f+y]*m+o[c+y]*p;return s}}class gR extends vd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class No{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fu(t,this.TimeBufferType),this.values=Fu(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Fu(e.times,Array),values:Fu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new gR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new JS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case td:t=this.InterpolantFactoryMethodDiscrete;break;case nd:t=this.InterpolantFactoryMethodLinear;break;case Uy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return td;case this.InterpolantFactoryMethodLinear:return nd;case this.InterpolantFactoryMethodSmooth:return Uy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&dR(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Uy,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(r)c=!0;else{const m=l*n,y=m-n,v=m+n;for(let x=0;x!==n;++x){const w=t[m+x];if(w!==t[y+x]||w!==t[v+x]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const m=l*n,y=o*n;for(let v=0;v!==n;++v)t[y+v]=t[m+v]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,c=o*n,f=0;f!==n;++f)t[c+f]=t[l+f];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}No.prototype.TimeBufferType=Float32Array;No.prototype.ValueBufferType=Float32Array;No.prototype.DefaultInterpolation=nd;class af extends No{constructor(e,t,n){super(e,t,n)}}af.prototype.ValueTypeName="bool";af.prototype.ValueBufferType=Array;af.prototype.DefaultInterpolation=td;af.prototype.InterpolantFactoryMethodLinear=void 0;af.prototype.InterpolantFactoryMethodSmooth=void 0;class KS extends No{}KS.prototype.ValueTypeName="color";class Zu extends No{}Zu.prototype.ValueTypeName="number";class yR extends vd{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(r-t);let f=e*l;for(let p=f+l;f!==p;f+=4)ki.slerpFlat(s,0,o,f-l,o,f,c);return s}}class $u extends No{InterpolantFactoryMethodLinear(e){return new yR(this.times,this.values,this.getValueSize(),e)}}$u.prototype.ValueTypeName="quaternion";$u.prototype.InterpolantFactoryMethodSmooth=void 0;class lf extends No{constructor(e,t,n){super(e,t,n)}}lf.prototype.ValueTypeName="string";lf.prototype.ValueBufferType=Array;lf.prototype.DefaultInterpolation=td;lf.prototype.InterpolantFactoryMethodLinear=void 0;lf.prototype.InterpolantFactoryMethodSmooth=void 0;class ef extends No{}ef.prototype.ValueTypeName="vector";class sd{constructor(e="",t=-1,n=[],r=a0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=_s(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(mk(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(No.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],f=[];c.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const p=pR(c);c=FA(c,1,p),f=FA(f,1,p),!r&&c[0]===0&&(c.push(s),f.push(f[0])),o.push(new Zu(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],p=f.name.match(s);if(p&&p.length>1){const m=p[1];let y=r[m];y||(r[m]=y=[]),y.push(f)}}const o=[];for(const l in r)o.push(this.CreateFromMorphTargetSequence(l,r[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,y,v,x,w){if(v.length!==0){const S=[],M=[];XS(v,S,M,x),S.length!==0&&w.push(new m(y,S,M))}},r=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let m=0;m<f.length;m++){const y=f[m].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const v={};let x;for(x=0;x<y.length;x++)if(y[x].morphTargets)for(let w=0;w<y[x].morphTargets.length;w++)v[y[x].morphTargets[w]]=-1;for(const w in v){const S=[],M=[];for(let C=0;C!==y[x].morphTargets.length;++C){const b=y[x];S.push(b.time),M.push(b.morphTarget===w?1:0)}r.push(new Zu(".morphTargetInfluence["+w+"]",S,M))}c=v.length*o}else{const v=".bones["+t[m].name+"]";n(ef,v+".position",y,"pos",r),n($u,v+".quaternion",y,"rot",r),n(ef,v+".scale",y,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function pk(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Zu;case"vector":case"vector2":case"vector3":case"vector4":return ef;case"color":return KS;case"quaternion":return $u;case"bool":case"boolean":return af;case"string":return lf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function mk(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=pk(i.type);if(i.times===void 0){const t=[],n=[];XS(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Za={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class YS{constructor(e,t,n){const r=this;let s=!1,o=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,r.onProgress!==void 0&&r.onProgress(p,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,m){return f.push(p,m),this},this.removeHandler=function(p){const m=f.indexOf(p);return m!==-1&&f.splice(m,2),this},this.getHandler=function(p){for(let m=0,y=f.length;m<y;m+=2){const v=f[m],x=f[m+1];if(v.global&&(v.lastIndex=0),v.test(p))return x}return null}}}const vR=new YS;class vr{constructor(e){this.manager=e!==void 0?e:vR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}vr.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xa={};class gk extends Error{constructor(e,t){super(e),this.response=t}}class Ms extends vr{constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Za.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Xa[e]!==void 0){Xa[e].push({onLoad:t,onProgress:n,onError:r});return}Xa[e]=[],Xa[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=Xa[e],m=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),v=y?parseInt(y):0,x=v!==0;let w=0;const S=new ReadableStream({start(M){C();function C(){m.read().then(({done:b,value:R})=>{if(b)M.close();else{w+=R.byteLength;const O=new ProgressEvent("progress",{lengthComputable:x,loaded:w,total:v});for(let F=0,N=p.length;F<N;F++){const U=p[F];U.onProgress&&U.onProgress(O)}M.enqueue(R),C()}},b=>{M.error(b)})}}});return new Response(S)}else throw new gk(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l===void 0)return f.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),y=m&&m[1]?m[1].toLowerCase():void 0,v=new TextDecoder(y);return f.arrayBuffer().then(x=>v.decode(x))}}}).then(f=>{Za.add(e,f);const p=Xa[e];delete Xa[e];for(let m=0,y=p.length;m<y;m++){const v=p[m];v.onLoad&&v.onLoad(f)}}).catch(f=>{const p=Xa[e];if(p===void 0)throw this.manager.itemError(e),f;delete Xa[e];for(let m=0,y=p.length;m<y;m++){const v=p[m];v.onError&&v.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yk extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ms(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=sd.parse(e[n]);t.push(r)}return t}}class vk extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],l=new p0,c=new Ms(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function p(m){c.load(e[m],function(y){const v=s.parse(y,!0);o[m]={width:v.width,height:v.height,format:v.format,mipmaps:v.mipmaps},f+=1,f===6&&(v.mipmapCount===1&&(l.minFilter=ei),l.image=o,l.format=v.format,l.needsUpdate=!0,t&&t(l))},n,r)}if(Array.isArray(e))for(let m=0,y=e.length;m<y;++m)p(m);else c.load(e,function(m){const y=s.parse(m,!0);if(y.isCubemap){const v=y.mipmaps.length/y.mipmapCount;for(let x=0;x<v;x++){o[x]={mipmaps:[]};for(let w=0;w<y.mipmapCount;w++)o[x].mipmaps.push(y.mipmaps[x*y.mipmapCount+w]),o[x].format=y.format,o[x].width=y.width,o[x].height=y.height}l.image=o}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=ei),l.format=y.format,l.needsUpdate=!0,t&&t(l)},n,r);return l}}class hm extends vr{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Za.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=sm("img");function c(){p(),Za.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(m){p(),r&&r(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class xk extends vr{constructor(e){super(e)}load(e,t,n,r){const s=new Em;s.colorSpace=Gs;const o=new hm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(f){o.load(e[f],function(p){s.images[f]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return s}}class _k extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new la,l=new Ms(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let f;try{f=s.parse(c)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}f.image!==void 0?o.image=f.image:f.data!==void 0&&(o.image.width=f.width,o.image.height=f.height,o.image.data=f.data),o.wrapS=f.wrapS!==void 0?f.wrapS:vs,o.wrapT=f.wrapT!==void 0?f.wrapT:vs,o.magFilter=f.magFilter!==void 0?f.magFilter:ei,o.minFilter=f.minFilter!==void 0?f.minFilter:ei,o.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(o.colorSpace=f.colorSpace),f.flipY!==void 0&&(o.flipY=f.flipY),f.format!==void 0&&(o.format=f.format),f.type!==void 0&&(o.type=f.type),f.mipmaps!==void 0&&(o.mipmaps=f.mipmaps,o.minFilter=Ws),f.mipmapCount===1&&(o.minFilter=ei),f.generateMipmaps!==void 0&&(o.generateMipmaps=f.generateMipmaps),o.needsUpdate=!0,t&&t(o,f)},n,r),o}}class xd extends vr{constructor(e){super(e)}load(e,t,n,r){const s=new Pn,o=new hm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class Sc extends ln{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new it(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class xR extends Sc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new it(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const f_=new Tt,G1=new W,V1=new W;class qS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new Tt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cm,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new yn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;G1.setFromMatrixPosition(e.matrixWorld),t.position.copy(G1),V1.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(V1),t.updateMatrixWorld(),f_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(f_),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(f_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ak extends qS{constructor(){super(new Ln(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=id*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QS extends Sc{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Ak}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const W1=new Tt,Ap=new W,h_=new W;class Sk extends qS{constructor(){super(new Ln(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new yn(2,1,1,1),new yn(0,1,1,1),new yn(3,1,1,1),new yn(1,1,1,1),new yn(3,0,1,1),new yn(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Ap.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ap),h_.copy(n.position),h_.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(h_),n.updateMatrixWorld(),r.makeTranslation(-Ap.x,-Ap.y,-Ap.z),W1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(W1)}}class T0 extends Sc{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Sk}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Mk extends qS{constructor(){super(new js(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ZS extends Sc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.shadow=new Mk}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class _R extends Sc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class AR extends Sc{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class SR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class MR extends Sc{constructor(e=new SR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class R0 extends vr{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new Ms(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new it().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new it().setHex(o.value);break;case"v2":r.uniforms[s].value=new De().fromArray(o.value);break;case"v3":r.uniforms[s].value=new W().fromArray(o.value);break;case"v4":r.uniforms[s].value=new yn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Yt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Tt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return R0.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:sR,SpriteMaterial:NS,RawShaderMaterial:oR,ShaderMaterial:Ro,PointsMaterial:qu,MeshPhysicalMaterial:Ys,MeshStandardMaterial:Dm,MeshPhongMaterial:aR,MeshToonMaterial:lR,MeshNormalMaterial:cR,MeshLambertMaterial:uR,MeshDepthMaterial:DS,MeshDistanceMaterial:LS,MeshBasicMaterial:xs,MeshMatcapMaterial:fR,LineDashedMaterial:hR,LineBasicMaterial:yr,Material:Si};return new t[e]}}class hc{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wR extends jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ER extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ms(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(v,x){if(t[x]!==void 0)return t[x];const S=v.interleavedBuffers[x],M=s(v,S.buffer),C=kh(S.type,M),b=new bm(C,S.stride);return b.uuid=S.uuid,t[x]=b,b}function s(v,x){if(n[x]!==void 0)return n[x];const S=v.arrayBuffers[x],M=new Uint32Array(S).buffer;return n[x]=M,M}const o=e.isInstancedBufferGeometry?new wR:new jt,l=e.data.index;if(l!==void 0){const v=kh(l.type,l.array);o.setIndex(new pn(v,1))}const c=e.data.attributes;for(const v in c){const x=c[v];let w;if(x.isInterleavedBufferAttribute){const S=r(e.data,x.data);w=new yc(S,x.itemSize,x.offset,x.normalized)}else{const S=kh(x.type,x.array),M=x.isInstancedBufferAttribute?Yu:pn;w=new M(S,x.itemSize,x.normalized)}x.name!==void 0&&(w.name=x.name),x.usage!==void 0&&w.setUsage(x.usage),o.setAttribute(v,w)}const f=e.data.morphAttributes;if(f)for(const v in f){const x=f[v],w=[];for(let S=0,M=x.length;S<M;S++){const C=x[S];let b;if(C.isInterleavedBufferAttribute){const R=r(e.data,C.data);b=new yc(R,C.itemSize,C.offset,C.normalized)}else{const R=kh(C.type,C.array);b=new pn(R,C.itemSize,C.normalized)}C.name!==void 0&&(b.name=C.name),w.push(b)}o.morphAttributes[v]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let v=0,x=m.length;v!==x;++v){const w=m[v];o.addGroup(w.start,w.count,w.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const v=new W;y.center!==void 0&&v.fromArray(y.center),o.boundingSphere=new $i(v,y.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class wk extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?hc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Ms(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(m){r!==void 0&&r(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?hc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ms(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,c,l,n),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),this.bindLightTargets(f),t!==void 0){let m=!1;for(const y in o)if(o[y].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,r,l,o,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new Wu().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Tm().fromJSON(e[s],r);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new ER;for(let s=0,o=e.length;s<o;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in H1?l=H1[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new R0;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),r[c.uuid]=n[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=sd.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return o(p)}else return c.data?{data:kh(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new YS(t);s=new hm(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const m=e[f],y=m.url;if(Array.isArray(y)){const v=[];for(let x=0,w=y.length;x<w;x++){const S=y[x],M=l(S);M!==null&&(M instanceof HTMLImageElement?v.push(M):v.push(new la(M.data,M.width,M.height)))}r[m.uuid]=new Lu(v)}else{const v=l(m.url);r[m.uuid]=new Lu(v)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const l=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return o.data?{data:kh(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new hm(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const c=e[o],f=c.url;if(Array.isArray(f)){const p=[];for(let m=0,y=f.length;m<y;m++){const v=f[m],x=await s(v);x!==null&&(x instanceof HTMLImageElement?p.push(x):p.push(new la(x.data,x.width,x.height)))}n[c.uuid]=new Lu(p)}else{const p=await s(c.url);n[c.uuid]=new Lu(p)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let p;Array.isArray(f)?(p=new Em,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new la:p=new Pn,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,Ek)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],j1),p.wrapT=n(l.wrap[1],j1)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,X1)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,X1)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,n,r,s){let o;function l(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function c(y){if(y!==void 0){if(Array.isArray(y)){const v=[];for(let x=0,w=y.length;x<w;x++){const S=y[x];n[S]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",S),v.push(n[S])}return v}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function f(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let p,m;switch(e.type){case"Scene":o=new om,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new it(e.background):o.background=f(e.background)),e.environment!==void 0&&(o.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new h0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new f0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ln(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new js(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new _R(e.color,e.intensity);break;case"DirectionalLight":o=new ZS(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new T0(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new AR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new QS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new xR(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new MR().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=c(e.material),o=new OS(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=c(e.material),o=new ti(p,m);break;case"InstancedMesh":p=l(e.geometry),m=c(e.material);const y=e.count,v=e.instanceMatrix,x=e.instanceColor;o=new kS(p,m,y),o.instanceMatrix=new Yu(new Float32Array(v.array),16),x!==void 0&&(o.instanceColor=new Yu(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":p=l(e.geometry),m=c(e.material),o=new KT(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=p,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const S=new pr;S.min.fromArray(w.boxMin),S.max.fromArray(w.boxMax);const M=new $i;return M.radius=w.sphereRadius,M.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:S,sphereInitialized:w.sphereInitialized,sphere:M}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=f(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=f(e.colorsTexture.uuid));break;case"LOD":o=new JT;break;case"Line":o=new ll(l(e.geometry),c(e.material));break;case"LineLoop":o=new US(l(e.geometry),c(e.material));break;case"LineSegments":o=new Lo(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new am(l(e.geometry),c(e.material));break;case"Sprite":o=new XT(c(e.material));break;case"Group":o=new Qa;break;case"Bone":o=new d0;break;default:o=new ln}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let v=0;v<y.length;v++)o.add(this.parseObject(y[v],t,n,r,s))}if(e.animations!==void 0){const y=e.animations;for(let v=0;v<y.length;v++){const x=y[v];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const y=e.levels;for(let v=0;v<y.length;v++){const x=y[v],w=o.getObjectByProperty("uuid",x.object);w!==void 0&&o.addLevel(w,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new ln}})}}const Ek={UVMapping:$v,CubeReflectionMapping:ol,CubeRefractionMapping:mc,EquirectangularReflectionMapping:Qp,EquirectangularRefractionMapping:Zp,CubeUVReflectionMapping:dd},j1={RepeatWrapping:gc,ClampToEdgeWrapping:vs,MirroredRepeatWrapping:$h},X1={NearestFilter:Ti,NearestMipmapNearestFilter:e0,NearestMipmapLinearFilter:Iu,LinearFilter:ei,LinearMipmapNearestFilter:Kh,LinearMipmapLinearFilter:Ws};class CR extends vr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Za.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Za.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){r&&r(f),Za.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Za.add(e,c),s.manager.itemStart(e)}}let Sy;class $S{static getContext(){return Sy===void 0&&(Sy=new(window.AudioContext||window.webkitAudioContext)),Sy}static setContext(e){Sy=e}}class Ck extends vr{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new Ms(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const f=c.slice(0);$S.getContext().decodeAudioData(f,function(m){t(m)}).catch(l)}catch(f){l(f)}},n,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}const J1=new Tt,K1=new Tt,mu=new Tt;class bk{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ln,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ln,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,mu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Gu*t.fov*.5)/t.zoom;let l,c;K1.elements[12]=-r,J1.elements[12]=r,l=-o*t.aspect+s,c=o*t.aspect+s,mu.elements[0]=2*t.near/(c-l),mu.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(mu),l=-o*t.aspect-s,c=o*t.aspect-s,mu.elements[0]=2*t.near/(c-l),mu.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(mu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(K1),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(J1)}}class P0{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Y1(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Y1();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Y1(){return performance.now()}const gu=new W,q1=new ki,Tk=new W,yu=new W;class Rk extends ln{constructor(){super(),this.type="AudioListener",this.context=$S.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new P0}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gu,q1,Tk),yu.set(0,0,-1).applyQuaternion(q1),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gu.x,r),t.positionY.linearRampToValueAtTime(gu.y,r),t.positionZ.linearRampToValueAtTime(gu.z,r),t.forwardX.linearRampToValueAtTime(yu.x,r),t.forwardY.linearRampToValueAtTime(yu.y,r),t.forwardZ.linearRampToValueAtTime(yu.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(gu.x,gu.y,gu.z),t.setOrientation(yu.x,yu.y,yu.z,n.x,n.y,n.z)}}class bR extends ln{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const vu=new W,Q1=new ki,Pk=new W,xu=new W;class Ik extends bR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(vu,Q1,Pk),xu.set(0,0,1).applyQuaternion(Q1);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(vu.x,n),t.positionY.linearRampToValueAtTime(vu.y,n),t.positionZ.linearRampToValueAtTime(vu.z,n),t.orientationX.linearRampToValueAtTime(xu.x,n),t.orientationY.linearRampToValueAtTime(xu.y,n),t.orientationZ.linearRampToValueAtTime(xu.z,n)}else t.setPosition(vu.x,vu.y,vu.z),t.setOrientation(xu.x,xu.y,xu.z)}}class Bk{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class TR{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==r;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,r,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(n[c]!==n[c+t]){l.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){ki.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;ki.multiplyQuaternionsFlat(e,o,e,t,e,n),ki.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[n+l]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*r}}}const eM="\\[\\]\\.:\\/",Dk=new RegExp("["+eM+"]","g"),tM="[^"+eM+"]",Lk="[^"+eM.replace("\\.","")+"]",Fk=/((?:WC+[\/:])*)/.source.replace("WC",tM),Nk=/(WCOD+)?/.source.replace("WCOD",Lk),Ok=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tM),kk=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tM),Uk=new RegExp("^"+Fk+Nk+Ok+kk+"$"),zk=["material","materials","bones","map"];class Hk{constructor(e,t,n){const r=n||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class dn{constructor(e,t,n){this.path=t,this.parsedPath=n||dn.parseTrackName(t),this.node=dn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new dn.Composite(e,t,n):new dn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Dk,"")}static parseTrackName(e){const t=Uk.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);zk.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=dn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const o=e[r];if(o===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}dn.Composite=Hk;dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayElement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement,dn.prototype._setValue_arrayElement_setNeedsUpdate,dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray,dn.prototype._setValue_fromArray_setNeedsUpdate,dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Gk{constructor(){this.isAnimationObjectGroup=!0,this.uuid=_s(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,f=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const y=arguments[p],v=y.uuid;let x=t[v];if(x===void 0){x=c++,t[v]=x,e.push(y);for(let w=0,S=o;w!==S;++w)s[w].push(new dn(y,n[w],r[w]))}else if(x<f){l=e[x];const w=--f,S=e[w];t[S.uuid]=x,e[x]=S,t[v]=w,e[w]=y;for(let M=0,C=o;M!==C;++M){const b=s[M],R=b[w];let O=b[x];b[x]=R,O===void 0&&(O=new dn(y,n[M],r[M])),b[w]=O}}else e[x]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],f=c.uuid,p=t[f];if(p!==void 0&&p>=s){const m=s++,y=e[m];t[y.uuid]=p,e[p]=y,t[f]=m,e[m]=c;for(let v=0,x=r;v!==x;++v){const w=n[v],S=w[m],M=w[p];w[p]=S,w[m]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],p=f.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const y=--s,v=e[y],x=--o,w=e[x];t[v.uuid]=m,e[m]=v,t[w.uuid]=y,e[y]=w,e.pop();for(let S=0,M=r;S!==M;++S){const C=n[S],b=C[y],R=C[x];C[m]=b,C[y]=R,C.pop()}}else{const y=--o,v=e[y];y>0&&(t[v.uuid]=m),e[m]=v,e.pop();for(let x=0,w=r;x!==w;++x){const S=n[x];S[m]=S[y],S.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,m=new Array(f);r=s.length,n[e]=r,o.push(e),l.push(t),s.push(m);for(let y=p,v=c.length;y!==v;++y){const x=c[y];m[y]=new dn(x,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],f=e[l];t[f]=n,o[n]=c,o.pop(),s[n]=s[l],s.pop(),r[n]=r[l],r.pop()}}}class RR{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:Bu,endingEnd:Bu};for(let f=0;f!==o;++f){const p=s[f].createInterpolant(null);l[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,s=e._clip.duration,o=s/r,l=r/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,c[1]=s+n,f[0]=e/o,f[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case AS:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),f[p].accumulateAdditive(l);break;case a0:default:for(let p=0,m=c.length;p!==m;++p)c[p].evaluate(o),f[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===xT;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===yT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Du,r.endingEnd=Du):(e?r.endingStart=this.zeroSlopeAtStart?Du:Bu:r.endingStart=$p,t?r.endingEnd=this.zeroSlopeAtEnd?Du:Bu:r.endingEnd=$p)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=n,this}}const Vk=new Float32Array(1);class Wk extends Do{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,l=e._interpolants,c=n.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let m=0;m!==s;++m){const y=r[m],v=y.name;let x=p[v];if(x!==void 0)++x.referenceCount,o[m]=x;else{if(x=o[m],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,c,v));continue}const w=t&&t._propertyBindings[m].binding.parsedPath;x=new TR(dn.create(n,v,w),y.ValueTypeName,y.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,v),o[m]=x}l[m].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete m[y],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new JS(new Float32Array(2),new Float32Array(2),1,Vk),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?sd.findByName(r,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let f=null;if(n===void 0&&(o!==null?n=o.blendMode:n=a0),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;f=c.knownActions[0],o===null&&(o=f._clip)}if(o===null)return null;const p=new RR(this,o,t,n);return this._bindAction(p,f),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?sd.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let f=0;f!==n;++f)t[f]._update(r,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const f=o[l];this._deactivateAction(f);const p=f._cacheIndex,m=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class nM{constructor(e){this.value=e}clone(){return new nM(this.value.clone===void 0?this.value:this.value.clone())}}let jk=0;class Xk extends Do{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:jk++}),this.name="",this.usage=im,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Jk extends bm{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Kk{constructor(e,t,n,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Z1=new Tt;class PR{constructor(e,t,n=0,r=1/0){this.ray=new sf(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Vu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Z1.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Z1),this}intersectObject(e,t=!0,n=[]){return NA(e,this,n,t),n.sort($1),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)NA(e[r],this,n,t);return n.sort($1),n}}function $1(i,e){return i.distance-e.distance}function NA(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,l=s.length;o<l;o++)NA(s[o],e,t,!0)}}class OA{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos($n(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Yk{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class iM{constructor(e,t,n,r){iM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const eE=new De;class qk{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=eE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,eE).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const tE=new W,My=new W;class Qk{constructor(e=new W,t=new W){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){tE.subVectors(e,this.start),My.subVectors(this.end,this.start);const n=My.dot(My);let s=My.dot(tE)/n;return t&&(s=$n(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const nE=new W;class Zk extends ln{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new jt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const f=o/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new St(r,3));const s=new yr({fog:!1,toneMapped:!1});this.cone=new Lo(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nE.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(nE),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const sc=new W,wy=new Tt,d_=new Tt;class $k extends Lo{constructor(e){const t=IR(e),n=new jt,r=[],s=[],o=new it(0,0,1),l=new it(0,1,0);for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new St(r,3)),n.setAttribute("color",new St(s,3));const c=new yr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");d_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(wy.multiplyMatrices(d_,l.matrixWorld),sc.setFromMatrixPosition(wy),r.setXYZ(o,sc.x,sc.y,sc.z),wy.multiplyMatrices(d_,l.parent.matrixWorld),sc.setFromMatrixPosition(wy),r.setXYZ(o+1,sc.x,sc.y,sc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function IR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push.apply(e,IR(i.children[t]));return e}class eU extends ti{constructor(e,t,n){const r=new Im(t,4,2),s=new xs({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tU=new W,iE=new it,rE=new it;class nU extends ln{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Pm(t);r.rotateY(Math.PI*.5),this.material=new xs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new pn(o,3)),this.add(new ti(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");iE.copy(this.light.color),rE.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?iE:rE;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tU.setFromMatrixPosition(this.light.matrixWorld).negate())}}class iU extends Lo{constructor(e=10,t=10,n=4473924,r=8947848){n=new it(n),r=new it(r);const s=t/2,o=e/t,l=e/2,c=[],f=[];for(let y=0,v=0,x=-l;y<=t;y++,x+=o){c.push(-l,0,x,l,0,x),c.push(x,0,-l,x,0,l);const w=y===s?n:r;w.toArray(f,v),v+=3,w.toArray(f,v),v+=3,w.toArray(f,v),v+=3,w.toArray(f,v),v+=3}const p=new jt;p.setAttribute("position",new St(c,3)),p.setAttribute("color",new St(f,3));const m=new yr({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rU extends Lo{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new it(s),o=new it(o);const l=[],c=[];if(t>1)for(let m=0;m<t;m++){const y=m/t*(Math.PI*2),v=Math.sin(y)*e,x=Math.cos(y)*e;l.push(0,0,0),l.push(v,0,x);const w=m&1?s:o;c.push(w.r,w.g,w.b),c.push(w.r,w.g,w.b)}for(let m=0;m<n;m++){const y=m&1?s:o,v=e-e/n*m;for(let x=0;x<r;x++){let w=x/r*(Math.PI*2),S=Math.sin(w)*v,M=Math.cos(w)*v;l.push(S,0,M),c.push(y.r,y.g,y.b),w=(x+1)/r*(Math.PI*2),S=Math.sin(w)*v,M=Math.cos(w)*v,l.push(S,0,M),c.push(y.r,y.g,y.b)}}const f=new jt;f.setAttribute("position",new St(l,3)),f.setAttribute("color",new St(c,3));const p=new yr({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const sE=new W,Ey=new W,oE=new W;class sU extends ln{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new jt;r.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new yr({fog:!1,toneMapped:!1});this.lightPlane=new ll(r,s),this.add(this.lightPlane),r=new jt,r.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new ll(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),sE.setFromMatrixPosition(this.light.matrixWorld),Ey.setFromMatrixPosition(this.light.target.matrixWorld),oE.subVectors(Ey,sE),this.lightPlane.lookAt(Ey),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ey),this.targetLine.scale.z=oE.length()}}const Cy=new W,Zn=new wm;class oU extends Lo{constructor(e){const t=new jt,n=new yr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(x,w){c(x),c(w)}function c(x){r.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new St(r,3)),t.setAttribute("color",new St(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const f=new it(16755200),p=new it(16711680),m=new it(43775),y=new it(16777215),v=new it(3355443);this.setColors(f,p,m,y,v)}setColors(e,t,n,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;Zn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ai("c",t,e,Zn,0,0,-1),ai("t",t,e,Zn,0,0,1),ai("n1",t,e,Zn,-n,-r,-1),ai("n2",t,e,Zn,n,-r,-1),ai("n3",t,e,Zn,-n,r,-1),ai("n4",t,e,Zn,n,r,-1),ai("f1",t,e,Zn,-n,-r,1),ai("f2",t,e,Zn,n,-r,1),ai("f3",t,e,Zn,-n,r,1),ai("f4",t,e,Zn,n,r,1),ai("u1",t,e,Zn,n*.7,r*1.1,-1),ai("u2",t,e,Zn,-n*.7,r*1.1,-1),ai("u3",t,e,Zn,0,r*2,-1),ai("cf1",t,e,Zn,-n,0,1),ai("cf2",t,e,Zn,n,0,1),ai("cf3",t,e,Zn,0,-r,1),ai("cf4",t,e,Zn,0,r,1),ai("cn1",t,e,Zn,-n,0,-1),ai("cn2",t,e,Zn,n,0,-1),ai("cn3",t,e,Zn,0,-r,-1),ai("cn4",t,e,Zn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ai(i,e,t,n,r,s,o){Cy.set(r,s,o).unproject(n);const l=e[i];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)c.setXYZ(l[f],Cy.x,Cy.y,Cy.z)}}const by=new pr;class aU extends Lo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new jt;s.setIndex(new pn(n,1)),s.setAttribute("position",new pn(r,3)),super(s,new yr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&by.setFromObject(this.object),by.isEmpty())return;const t=by.min,n=by.max,r=this.geometry.attributes.position,s=r.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lU extends Lo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new jt;s.setIndex(new pn(n,1)),s.setAttribute("position",new St(r,3)),super(s,new yr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class cU extends ll{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new jt;o.setAttribute("position",new St(s,3)),o.computeBoundingSphere(),super(o,new yr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new jt;c.setAttribute("position",new St(l,3)),c.computeBoundingSphere(),this.add(new ti(c,new xs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const aE=new W;let Ty,p_;class uU extends ln{constructor(e=new W(0,0,1),t=new W(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",Ty===void 0&&(Ty=new jt,Ty.setAttribute("position",new St([0,0,0,0,1,0],3)),p_=new yd(0,.5,1,5,1),p_.translate(0,-.5,0)),this.position.copy(t),this.line=new ll(Ty,new yr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ti(p_,new xs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{aE.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(aE,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fU extends Lo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new jt;r.setAttribute("position",new St(t,3)),r.setAttribute("color",new St(n,3));const s=new yr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new it,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hU{constructor(){this.type="ShapePath",this.color=new it,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new lm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const C=[];for(let b=0,R=M.length;b<R;b++){const O=M[b],F=new Wu;F.curves=O.curves,C.push(F)}return C}function n(M,C){const b=C.length;let R=!1;for(let O=b-1,F=0;F<b;O=F++){let N=C[O],U=C[F],J=U.x-N.x,B=U.y-N.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(N=C[F],J=-J,U=C[O],B=-B),M.y<N.y||M.y>U.y)continue;if(M.y===N.y){if(M.x===N.x)return!0}else{const L=B*(M.x-N.x)-J*(M.y-N.y);if(L===0)return!0;if(L<0)continue;R=!R}}else{if(M.y!==N.y)continue;if(U.x<=M.x&&M.x<=N.x||N.x<=M.x&&M.x<=U.x)return!0}}return R}const r=ca.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,c;const f=[];if(s.length===1)return l=s[0],c=new Wu,c.curves=l.curves,f.push(c),f;let p=!r(s[0].getPoints());p=e?!p:p;const m=[],y=[];let v=[],x=0,w;y[x]=void 0,v[x]=[];for(let M=0,C=s.length;M<C;M++)l=s[M],w=l.getPoints(),o=r(w),o=e?!o:o,o?(!p&&y[x]&&x++,y[x]={s:new Wu,p:w},y[x].s.curves=l.curves,p&&x++,v[x]=[]):v[x].push({h:l,p:w[0]});if(!y[0])return t(s);if(y.length>1){let M=!1,C=0;for(let b=0,R=y.length;b<R;b++)m[b]=[];for(let b=0,R=y.length;b<R;b++){const O=v[b];for(let F=0;F<O.length;F++){const N=O[F];let U=!0;for(let J=0;J<y.length;J++)n(N.p,y[J].p)&&(b!==J&&C++,U?(U=!1,m[J].push(N)):M=!0);U&&m[b].push(N)}}C>0&&M===!1&&(v=m)}let S;for(let M=0,C=y.length;M<C;M++){c=y[M].s,f.push(c),S=v[M];for(let b=0,R=S.length;b<R;b++)c.holes.push(S[b].h)}return f}}class dU extends Do{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class pU extends To{constructor(e=1,t=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:hd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=hd);const mU=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:fS,AddEquation:uc,AddOperation:cT,AdditiveAnimationBlendMode:AS,AdditiveBlending:MA,AgXToneMapping:pT,AlphaFormat:mS,AlwaysCompare:PT,AlwaysDepth:qy,AlwaysStencilFunc:bA,AmbientLight:_R,AnimationAction:RR,AnimationClip:sd,AnimationLoader:yk,AnimationMixer:Wk,AnimationObjectGroup:Gk,AnimationUtils:dk,ArcCurve:YT,ArrayCamera:WT,ArrowHelper:uU,AttachedBindMode:CA,Audio:bR,AudioAnalyser:Bk,AudioContext:$S,AudioListener:Rk,AudioLoader:Ck,AxesHelper:fU,BackSide:Dr,BasicDepthPacking:AT,BasicShadowMap:Vb,BatchedMesh:KT,Bone:d0,BooleanKeyframeTrack:af,Box2:qk,Box3:pr,Box3Helper:lU,BoxGeometry:of,BoxHelper:aU,BufferAttribute:pn,BufferGeometry:jt,BufferGeometryLoader:ER,ByteType:hS,Cache:Za,Camera:wm,CameraHelper:oU,CanvasTexture:OO,CapsuleGeometry:g0,CatmullRomCurve3:qT,CineonToneMapping:hT,CircleGeometry:y0,ClampToEdgeWrapping:vs,Clock:P0,Color:it,ColorKeyframeTrack:KS,ColorManagement:_n,CompressedArrayTexture:FO,CompressedCubeTexture:NO,CompressedTexture:p0,CompressedTextureLoader:vk,ConeGeometry:v0,ConstantAlphaFactor:oT,ConstantColorFactor:rT,Controls:dU,CubeCamera:RS,CubeReflectionMapping:ol,CubeRefractionMapping:mc,CubeTexture:Em,CubeTextureLoader:xk,CubeUVReflectionMapping:dd,CubicBezierCurve:HS,CubicBezierCurve3:QT,CubicInterpolant:mR,CullFaceBack:SA,CullFaceFront:Gb,CullFaceFrontBack:pB,CullFaceNone:Hb,Curve:Fo,CurvePath:$T,CustomBlending:Wb,CustomToneMapping:dT,CylinderGeometry:yd,Cylindrical:Yk,Data3DTexture:CS,DataArrayTexture:c0,DataTexture:la,DataTextureLoader:_k,DataUtils:wD,DecrementStencilOp:EB,DecrementWrapStencilOp:bB,DefaultLoadingManager:vR,DepthFormat:zu,DepthStencilFormat:Ku,DepthTexture:BS,DetachedBindMode:gT,DirectionalLight:ZS,DirectionalLightHelper:sU,DiscreteInterpolant:gR,DisplayP3ColorSpace:l0,DodecahedronGeometry:x0,DoubleSide:Vs,DstAlphaFactor:$b,DstColorFactor:tT,DynamicCopyUsage:HB,DynamicDrawUsage:Hu,DynamicReadUsage:kB,EdgesGeometry:eR,EllipseCurve:m0,EqualCompare:CT,EqualDepth:Zy,EqualStencilFunc:IB,EquirectangularReflectionMapping:Qp,EquirectangularRefractionMapping:Zp,Euler:Fr,EventDispatcher:Do,ExtrudeGeometry:A0,FileLoader:Ms,Float16BufferAttribute:PD,Float32BufferAttribute:St,FloatType:es,Fog:h0,FogExp2:f0,FramebufferTexture:LO,FrontSide:fa,Frustum:Cm,GLBufferAttribute:Kk,GLSL1:VB,GLSL3:TA,GreaterCompare:bT,GreaterDepth:ev,GreaterEqualCompare:RT,GreaterEqualDepth:$y,GreaterEqualStencilFunc:FB,GreaterStencilFunc:DB,GridHelper:iU,Group:Qa,HalfFloatType:pd,HemisphereLight:xR,HemisphereLightHelper:nU,IcosahedronGeometry:S0,ImageBitmapLoader:CR,ImageLoader:hm,ImageUtils:DT,IncrementStencilOp:wB,IncrementWrapStencilOp:CB,InstancedBufferAttribute:Yu,InstancedBufferGeometry:wR,InstancedInterleavedBuffer:Jk,InstancedMesh:kS,Int16BufferAttribute:TD,Int32BufferAttribute:RD,Int8BufferAttribute:ED,IntType:t0,InterleavedBuffer:bm,InterleavedBufferAttribute:yc,Interpolant:vd,InterpolateDiscrete:td,InterpolateLinear:nd,InterpolateSmooth:Uy,InvertStencilOp:TB,KeepStencilOp:Eu,KeyframeTrack:No,LOD:JT,LatheGeometry:Rm,Layers:Vu,LessCompare:ET,LessDepth:Qy,LessEqualCompare:MS,LessEqualDepth:Xu,LessEqualStencilFunc:BB,LessStencilFunc:PB,Light:Sc,LightProbe:MR,Line:ll,Line3:Qk,LineBasicMaterial:yr,LineCurve:GS,LineCurve3:ZT,LineDashedMaterial:hR,LineLoop:US,LineSegments:Lo,LinearDisplayP3ColorSpace:Mm,LinearFilter:ei,LinearInterpolant:JS,LinearMipMapLinearFilter:vB,LinearMipMapNearestFilter:yB,LinearMipmapLinearFilter:Ws,LinearMipmapNearestFilter:Kh,LinearSRGBColorSpace:ul,LinearToneMapping:uT,LinearTransfer:em,Loader:vr,LoaderUtils:hc,LoadingManager:YS,LoopOnce:yT,LoopPingPong:xT,LoopRepeat:vT,LuminanceAlphaFormat:vS,LuminanceFormat:yS,MOUSE:Mu,Material:Si,MaterialLoader:R0,MathUtils:ES,Matrix2:iM,Matrix3:Yt,Matrix4:Tt,MaxEquation:Kb,Mesh:ti,MeshBasicMaterial:xs,MeshDepthMaterial:DS,MeshDistanceMaterial:LS,MeshLambertMaterial:uR,MeshMatcapMaterial:fR,MeshNormalMaterial:cR,MeshPhongMaterial:aR,MeshPhysicalMaterial:Ys,MeshStandardMaterial:Dm,MeshToonMaterial:lR,MinEquation:Jb,MirroredRepeatWrapping:$h,MixOperation:lT,MultiplyBlending:EA,MultiplyOperation:Am,NearestFilter:Ti,NearestMipMapLinearFilter:gB,NearestMipMapNearestFilter:mB,NearestMipmapLinearFilter:Iu,NearestMipmapNearestFilter:e0,NeutralToneMapping:mT,NeverCompare:wT,NeverDepth:Yy,NeverStencilFunc:RB,NoBlending:el,NoColorSpace:Ya,NoToneMapping:aa,NormalAnimationBlendMode:a0,NormalBlending:Uu,NotEqualCompare:TT,NotEqualDepth:tv,NotEqualStencilFunc:LB,NumberKeyframeTrack:Zu,Object3D:ln,ObjectLoader:wk,ObjectSpaceNormalMap:MT,OctahedronGeometry:Pm,OneFactor:qb,OneMinusConstantAlphaFactor:aT,OneMinusConstantColorFactor:sT,OneMinusDstAlphaFactor:eT,OneMinusDstColorFactor:nT,OneMinusSrcAlphaFactor:Ky,OneMinusSrcColorFactor:Zb,OrthographicCamera:js,P3Primaries:nm,PCFShadowMap:Zv,PCFSoftShadowMap:Fp,PMREMGenerator:RA,Path:lm,PerspectiveCamera:Ln,Plane:Ka,PlaneGeometry:md,PlaneHelper:cU,PointLight:T0,PointLightHelper:eU,Points:am,PointsMaterial:qu,PolarGridHelper:rU,PolyhedronGeometry:Ac,PositionalAudio:Ik,PropertyBinding:dn,PropertyMixer:TR,QuadraticBezierCurve:VS,QuadraticBezierCurve3:WS,Quaternion:ki,QuaternionKeyframeTrack:$u,QuaternionLinearInterpolant:yR,RED_GREEN_RGTC2_Format:Cv,RED_RGTC1_Format:_S,REVISION:hd,RGBADepthPacking:ST,RGBAFormat:dr,RGBAIntegerFormat:o0,RGBA_ASTC_10x10_Format:_v,RGBA_ASTC_10x5_Format:yv,RGBA_ASTC_10x6_Format:vv,RGBA_ASTC_10x8_Format:xv,RGBA_ASTC_12x10_Format:Av,RGBA_ASTC_12x12_Format:Sv,RGBA_ASTC_4x4_Format:cv,RGBA_ASTC_5x4_Format:uv,RGBA_ASTC_5x5_Format:fv,RGBA_ASTC_6x5_Format:hv,RGBA_ASTC_6x6_Format:dv,RGBA_ASTC_8x5_Format:pv,RGBA_ASTC_8x6_Format:mv,RGBA_ASTC_8x8_Format:gv,RGBA_BPTC_Format:zp,RGBA_ETC2_EAC_Format:lv,RGBA_PVRTC_2BPPV1_Format:sv,RGBA_PVRTC_4BPPV1_Format:rv,RGBA_S3TC_DXT1_Format:Op,RGBA_S3TC_DXT3_Format:kp,RGBA_S3TC_DXT5_Format:Up,RGBDepthPacking:_B,RGBFormat:gS,RGBIntegerFormat:xB,RGB_BPTC_SIGNED_Format:Mv,RGB_BPTC_UNSIGNED_Format:wv,RGB_ETC1_Format:ov,RGB_ETC2_Format:av,RGB_PVRTC_2BPPV1_Format:iv,RGB_PVRTC_4BPPV1_Format:nv,RGB_S3TC_DXT1_Format:Np,RGDepthPacking:AB,RGFormat:xS,RGIntegerFormat:s0,RawShaderMaterial:oR,Ray:sf,Raycaster:PR,Rec709Primaries:tm,RectAreaLight:AR,RedFormat:r0,RedIntegerFormat:Sm,ReinhardToneMapping:fT,RenderTarget:LT,RepeatWrapping:gc,ReplaceStencilOp:MB,ReverseSubtractEquation:Xb,RingGeometry:M0,SIGNED_RED_GREEN_RGTC2_Format:bv,SIGNED_RED_RGTC1_Format:Ev,SRGBColorSpace:Gs,SRGBTransfer:Dn,Scene:om,ShaderChunk:$t,ShaderLib:So,ShaderMaterial:Ro,ShadowMaterial:sR,Shape:Wu,ShapeGeometry:w0,ShapePath:hU,ShapeUtils:ca,ShortType:dS,Skeleton:Tm,SkeletonHelper:$k,SkinnedMesh:OS,Source:Lu,Sphere:$i,SphereGeometry:Im,Spherical:OA,SphericalHarmonics3:SR,SplineCurve:jS,SpotLight:QS,SpotLightHelper:Zk,Sprite:XT,SpriteMaterial:NS,SrcAlphaFactor:Jy,SrcAlphaSaturateFactor:iT,SrcColorFactor:Qb,StaticCopyUsage:zB,StaticDrawUsage:im,StaticReadUsage:OB,StereoCamera:bk,StreamCopyUsage:GB,StreamDrawUsage:NB,StreamReadUsage:UB,StringKeyframeTrack:lf,SubtractEquation:jb,SubtractiveBlending:wA,TOUCH:wu,TangentSpaceNormalMap:_c,TetrahedronGeometry:E0,Texture:Pn,TextureLoader:xd,TextureUtils:dO,TorusGeometry:Bm,TorusKnotGeometry:C0,Triangle:$r,TriangleFanDrawMode:Tv,TriangleStripDrawMode:SS,TrianglesDrawMode:_T,TubeGeometry:b0,UVMapping:$v,Uint16BufferAttribute:bS,Uint32BufferAttribute:TS,Uint8BufferAttribute:CD,Uint8ClampedBufferAttribute:bD,Uniform:nM,UniformsGroup:Xk,UniformsLib:at,UniformsUtils:OT,UnsignedByteType:bo,UnsignedInt248Type:Ju,UnsignedInt5999Type:pS,UnsignedIntType:al,UnsignedShort4444Type:n0,UnsignedShort5551Type:i0,UnsignedShortType:ed,VSMShadowMap:Ao,Vector2:De,Vector3:W,Vector4:yn,VectorKeyframeTrack:ef,VideoTexture:DO,WebGL3DRenderTarget:pD,WebGLArrayRenderTarget:dD,WebGLCoordinateSystem:oa,WebGLCubeRenderTarget:PS,WebGLMultipleRenderTargets:pU,WebGLRenderTarget:To,WebGLRenderer:FS,WebGLUtils:VT,WebGPUCoordinateSystem:rm,WireframeGeometry:rR,WrapAroundEnding:$p,ZeroCurvatureEnding:Bu,ZeroFactor:Yb,ZeroSlopeEnding:Du,ZeroStencilOp:SB,createCanvasElement:BT},Symbol.toStringTag,{value:"Module"}));var m_={exports:{}},oc={};var lE;function gU(){return lE||(lE=1,oc.ConcurrentRoot=1,oc.ContinuousEventPriority=4,oc.DefaultEventPriority=16,oc.DiscreteEventPriority=1,oc.IdleEventPriority=536870912,oc.LegacyRoot=0),oc}var cE;function yU(){return cE||(cE=1,m_.exports=gU()),m_.exports}var Hh=yU();function vU(i){let e;const t=new Set,n=(f,p)=>{const m=typeof f=="function"?f(e):f;if(m!==e){const y=e;e=p?m:Object.assign({},e,m),t.forEach(v=>v(e,y))}},r=()=>e,s=(f,p=r,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let y=p(e);function v(){const x=p(e);if(!m(y,x)){const w=y;f(y=x,w)}}return t.add(v),()=>t.delete(v)},c={setState:n,getState:r,subscribe:(f,p,m)=>p||m?s(f,p,m):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=i(n,r,c),c}const xU=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),uE=xU?q.useEffect:q.useLayoutEffect;function _U(i){const e=typeof i=="function"?vU(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=q.useReducer(S=>S+1,0),o=e.getState(),l=q.useRef(o),c=q.useRef(n),f=q.useRef(r),p=q.useRef(!1),m=q.useRef();m.current===void 0&&(m.current=n(o));let y,v=!1;(l.current!==o||c.current!==n||f.current!==r||p.current)&&(y=n(o),v=!r(m.current,y)),uE(()=>{v&&(m.current=y),l.current=o,c.current=n,f.current=r,p.current=!1});const x=q.useRef(o);uE(()=>{const S=()=>{try{const C=e.getState(),b=c.current(C);f.current(m.current,b)||(l.current=C,m.current=b,s())}catch{p.current=!0,s()}},M=e.subscribe(S);return e.getState()!==x.current&&S(),M},[]);const w=v?y:m.current;return q.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}var g_={exports:{}},y_={exports:{}},v_={};var fE;function AU(){return fE||(fE=1,(function(i){function e(G,Z){var z=G.length;G.push(Z);e:for(;0<z;){var Y=z-1>>>1,pe=G[Y];if(0<r(pe,Z))G[Y]=Z,G[z]=pe,z=Y;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Z=G[0],z=G.pop();if(z!==Z){G[0]=z;e:for(var Y=0,pe=G.length,Ne=pe>>>1;Y<Ne;){var oe=2*(Y+1)-1,ve=G[oe],be=oe+1,Ie=G[be];if(0>r(ve,z))be<pe&&0>r(Ie,ve)?(G[Y]=Ie,G[be]=z,Y=be):(G[Y]=ve,G[oe]=z,Y=oe);else if(be<pe&&0>r(Ie,z))G[Y]=Ie,G[be]=z,Y=be;else break e}}return Z}function r(G,Z){var z=G.sortIndex-Z.sortIndex;return z!==0?z:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],f=[],p=1,m=null,y=3,v=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=G)n(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function R(G){if(w=!1,b(G),!x)if(t(c)!==null)x=!0,le(O);else{var Z=t(f);Z!==null&&ye(R,Z.startTime-G)}}function O(G,Z){x=!1,w&&(w=!1,M(U),U=-1),v=!0;var z=y;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||G&&!L());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,y=m.priorityLevel;var pe=Y(m.expirationTime<=Z);Z=i.unstable_now(),typeof pe=="function"?m.callback=pe:m===t(c)&&n(c),b(Z)}else n(c);m=t(c)}if(m!==null)var Ne=!0;else{var oe=t(f);oe!==null&&ye(R,oe.startTime-Z),Ne=!1}return Ne}finally{m=null,y=z,v=!1}}var F=!1,N=null,U=-1,J=5,B=-1;function L(){return!(i.unstable_now()-B<J)}function ne(){if(N!==null){var G=i.unstable_now();B=G;var Z=!0;try{Z=N(!0,G)}finally{Z?ie():(F=!1,N=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,de=ce.port2;ce.port1.onmessage=ne,ie=function(){de.postMessage(null)}}else ie=function(){S(ne,0)};function le(G){N=G,F||(F=!0,ie())}function ye(G,Z){U=S(function(){G(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){x||v||(x=!0,le(O))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var z=y;y=Z;try{return G()}finally{y=z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=y;y=G;try{return Z()}finally{y=z}},i.unstable_scheduleCallback=function(G,Z,z){var Y=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,G){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=z+pe,G={id:p++,callback:Z,priorityLevel:G,startTime:z,expirationTime:pe,sortIndex:-1},z>Y?(G.sortIndex=z,e(f,G),t(c)===null&&G===t(f)&&(w?(M(U),U=-1):w=!0,ye(R,z-Y))):(G.sortIndex=pe,e(c,G),x||v||(x=!0,le(O))),G},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(G){var Z=y;return function(){var z=y;y=Z;try{return G.apply(this,arguments)}finally{y=z}}}})(v_)),v_}var hE;function SU(){return hE||(hE=1,y_.exports=AU()),y_.exports}var x_,dE;function MU(){return dE||(dE=1,x_=function(e){var t={},n=fd(),r=SU(),s=Object.assign;function o(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),O=Symbol.iterator;function F(h){return h===null||typeof h!="object"?null:(h=O&&h[O]||h["@@iterator"],typeof h=="function"?h:null)}function N(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case f:return"Portal";case y:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case M:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case x:return(h.displayName||"Context")+".Consumer";case v:return(h._context.displayName||"Context")+".Provider";case w:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case C:return d=h.displayName||null,d!==null?d:N(h.type)||"Memo";case b:d=h._payload,h=h._init;try{return N(h(d))}catch{}}return null}function U(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(d);case 8:return d===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function J(h){var d=h,_=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,(d.flags&4098)!==0&&(_=d.return),h=d.return;while(h)}return d.tag===3?_:null}function B(h){if(J(h)!==h)throw Error(o(188))}function L(h){var d=h.alternate;if(!d){if(d=J(h),d===null)throw Error(o(188));return d!==h?null:h}for(var _=h,E=d;;){var P=_.return;if(P===null)break;var D=P.alternate;if(D===null){if(E=P.return,E!==null){_=E;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===_)return B(P),h;if(D===E)return B(P),d;D=D.sibling}throw Error(o(188))}if(_.return!==E.return)_=P,E=D;else{for(var K=!1,ae=P.child;ae;){if(ae===_){K=!0,_=P,E=D;break}if(ae===E){K=!0,E=P,_=D;break}ae=ae.sibling}if(!K){for(ae=D.child;ae;){if(ae===_){K=!0,_=D,E=P;break}if(ae===E){K=!0,E=D,_=P;break}ae=ae.sibling}if(!K)throw Error(o(189))}}if(_.alternate!==E)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?h:d}function ne(h){return h=L(h),h!==null?ie(h):null}function ie(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=ie(h);if(d!==null)return d;h=h.sibling}return null}function ce(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=ce(h);if(d!==null)return d}h=h.sibling}return null}var de=Array.isArray,le=e.getPublicInstance,ye=e.getRootHostContext,G=e.getChildHostContext,Z=e.prepareForCommit,z=e.resetAfterCommit,Y=e.createInstance,pe=e.appendInitialChild,Ne=e.finalizeInitialChildren,oe=e.prepareUpdate,ve=e.shouldSetTextContent,be=e.createTextInstance,Ie=e.scheduleTimeout,Xe=e.cancelTimeout,rt=e.noTimeout,pt=e.isPrimaryRenderer,We=e.supportsMutation,Pe=e.supportsPersistence,j=e.supportsHydration,Je=e.getInstanceFromNode,Ke=e.preparePortalMount,Ue=e.getCurrentEventPriority,Ge=e.detachDeletedInstance,xt=e.supportsMicrotasks,tt=e.scheduleMicrotask,X=e.supportsTestSelectors,H=e.findFiberRoot,me=e.getBoundingRect,Te=e.getTextContent,Fe=e.isHiddenSubtree,Be=e.matchAccessibilityRole,gt=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,lt=e.appendChild,Qt=e.appendChildToContainer,ze=e.commitTextUpdate,st=e.commitMount,Ft=e.commitUpdate,It=e.insertBefore,ht=e.insertInContainerBefore,re=e.removeChild,Re=e.removeChildFromContainer,et=e.resetTextContent,$=e.hideInstance,je=e.hideTextInstance,we=e.unhideInstance,Le=e.unhideTextInstance,nt=e.clearContainer,ct=e.cloneInstance,kt=e.createContainerChildSet,rn=e.appendChildToContainerChildSet,Fn=e.finalizeContainerChildren,Xt=e.replaceContainerChildren,bn=e.cloneHiddenInstance,ui=e.cloneHiddenTextInstance,Oo=e.canHydrateInstance,fl=e.canHydrateTextInstance,xr=e.canHydrateSuspenseInstance,hl=e.isSuspenseInstancePending,Es=e.isSuspenseInstanceFallback,da=e.registerSuspenseInstanceRetry,_r=e.getNextHydratableSibling,dl=e.getFirstHydratableChild,pl=e.getFirstHydratableChildWithinContainer,ff=e.getFirstHydratableChildWithinSuspenseInstance,hf=e.hydrateInstance,qs=e.hydrateTextInstance,df=e.hydrateSuspenseInstance,pf=e.getNextHydratableInstanceAfterSuspenseInstance,V=e.commitHydratedContainer,ue=e.commitHydratedSuspenseInstance,Ae=e.clearSuspenseBoundary,Se=e.clearSuspenseBoundaryFromContainer,he=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,ft=e.didNotMatchHydratedTextInstance,Ze;function vt(h){if(Ze===void 0)try{throw Error()}catch(_){var d=_.stack.trim().match(/\n( *(at )?)/);Ze=d&&d[1]||""}return`
`+Ze+h}var Rt=!1;function Bt(h,d){if(!h||Rt)return"";Rt=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Ye){var E=Ye}Reflect.construct(h,[],d)}else{try{d.call()}catch(Ye){E=Ye}h.call(d.prototype)}else{try{throw Error()}catch(Ye){E=Ye}h()}}catch(Ye){if(Ye&&E&&typeof Ye.stack=="string"){for(var P=Ye.stack.split(`
`),D=E.stack.split(`
`),K=P.length-1,ae=D.length-1;1<=K&&0<=ae&&P[K]!==D[ae];)ae--;for(;1<=K&&0<=ae;K--,ae--)if(P[K]!==D[ae]){if(K!==1||ae!==1)do if(K--,ae--,0>ae||P[K]!==D[ae]){var Ce=`
`+P[K].replace(" at new "," at ");return h.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",h.displayName)),Ce}while(1<=K&&0<=ae);break}}}finally{Rt=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?vt(h):""}var Mt=Object.prototype.hasOwnProperty,cn=[],un=-1;function sn(h){return{current:h}}function Ot(h){0>un||(h.current=cn[un],cn[un]=null,un--)}function bt(h,d){un++,cn[un]=h.current,h.current=d}var ot={},on=sn(ot),zt=sn(!1),ni=ot;function Ii(h,d){var _=h.type.contextTypes;if(!_)return ot;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in _)P[D]=d[D];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=P),P}function mn(h){return h=h.childContextTypes,h!=null}function Nr(){Ot(zt),Ot(on)}function An(h,d,_){if(on.current!==ot)throw Error(o(168));bt(on,d),bt(zt,_)}function is(h,d,_){var E=h.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return _;E=E.getChildContext();for(var P in E)if(!(P in d))throw Error(o(108,U(h)||"Unknown",P));return s({},_,E)}function ko(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||ot,ni=on.current,bt(on,h),bt(zt,zt.current),!0}function Mi(h,d,_){var E=h.stateNode;if(!E)throw Error(o(169));_?(h=is(h,d,ni),E.__reactInternalMemoizedMergedChildContext=h,Ot(zt),Ot(on),bt(on,h)):Ot(zt),bt(zt,_)}var Bi=Math.clz32?Math.clz32:W0,Cc=Math.log,Uo=Math.LN2;function W0(h){return h>>>=0,h===0?32:31-(Cc(h)/Uo|0)|0}var ml=64,hn=4194304;function gl(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function bc(h,d){var _=h.pendingLanes;if(_===0)return 0;var E=0,P=h.suspendedLanes,D=h.pingedLanes,K=_&268435455;if(K!==0){var ae=K&~P;ae!==0?E=gl(ae):(D&=K,D!==0&&(E=gl(D)))}else K=_&~P,K!==0?E=gl(K):D!==0&&(E=gl(D));if(E===0)return 0;if(d!==0&&d!==E&&(d&P)===0&&(P=E&-E,D=d&-d,P>=D||P===16&&(D&4194240)!==0))return d;if((E&4)!==0&&(E|=_&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=E;0<d;)_=31-Bi(d),P=1<<_,E|=h[_],d&=~P;return E}function Ad(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vm(h,d){for(var _=h.suspendedLanes,E=h.pingedLanes,P=h.expirationTimes,D=h.pendingLanes;0<D;){var K=31-Bi(D),ae=1<<K,Ce=P[K];Ce===-1?((ae&_)===0||(ae&E)!==0)&&(P[K]=Ad(ae,d)):Ce<=d&&(h.expiredLanes|=ae),D&=~ae}}function mf(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function gf(h){for(var d=[],_=0;31>_;_++)d.push(h);return d}function pa(h,d,_){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-Bi(d),h[d]=_}function yf(h,d){var _=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<_;){var P=31-Bi(_),D=1<<P;d[P]=0,E[P]=-1,h[P]=-1,_&=~D}}function Cs(h,d){var _=h.entangledLanes|=d;for(h=h.entanglements;_;){var E=31-Bi(_),P=1<<E;P&d|h[E]&d&&(h[E]|=d),_&=~P}}var Zt=0;function Qs(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var ma=r.unstable_scheduleCallback,yl=r.unstable_cancelCallback,zo=r.unstable_shouldYield,j0=r.unstable_requestPaint,ii=r.unstable_now,ga=r.unstable_ImmediatePriority,X0=r.unstable_UserBlockingPriority,vf=r.unstable_NormalPriority,xf=r.unstable_IdlePriority,Tc=null,bs=null;function Rc(h){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(Tc,h,void 0,(h.current.flags&128)===128)}catch{}}function Pc(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var Hi=typeof Object.is=="function"?Object.is:Pc,Or=null,_f=!1,Sd=!1;function Af(h){Or===null?Or=[h]:Or.push(h)}function Sf(h){_f=!0,Af(h)}function kr(){if(!Sd&&Or!==null){Sd=!0;var h=0,d=Zt;try{var _=Or;for(Zt=1;h<_.length;h++){var E=_[h];do E=E(!0);while(E!==null)}Or=null,_f=!1}catch(P){throw Or!==null&&(Or=Or.slice(h+1)),ma(ga,kr),P}finally{Zt=d,Sd=!1}}return null}var Wm=l.ReactCurrentBatchConfig;function rs(h,d){if(Hi(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var _=Object.keys(h),E=Object.keys(d);if(_.length!==E.length)return!1;for(E=0;E<_.length;E++){var P=_[E];if(!Mt.call(d,P)||!Hi(h[P],d[P]))return!1}return!0}function Md(h){switch(h.tag){case 5:return vt(h.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return h=Bt(h.type,!1),h;case 11:return h=Bt(h.type.render,!1),h;case 1:return h=Bt(h.type,!0),h;default:return""}}function tr(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var _ in h)d[_]===void 0&&(d[_]=h[_]);return d}return d}var Ic=sn(null),ya=null,Zs=null,Mf=null;function Gi(){Mf=Zs=ya=null}function va(h,d,_){pt?(bt(Ic,d._currentValue),d._currentValue=_):(bt(Ic,d._currentValue2),d._currentValue2=_)}function Bc(h){var d=Ic.current;Ot(Ic),pt?h._currentValue=d:h._currentValue2=d}function xa(h,d,_){for(;h!==null;){var E=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),h===_)break;h=h.return}}function vl(h,d){ya=h,Mf=Zs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&d)!==0&&(pi=!0),h.firstContext=null)}function nr(h){var d=pt?h._currentValue:h._currentValue2;if(Mf!==h)if(h={context:h,memoizedValue:d,next:null},Zs===null){if(ya===null)throw Error(o(308));Zs=h,ya.dependencies={lanes:0,firstContext:h}}else Zs=Zs.next=h;return d}var Ur=null,zr=!1;function xl(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wd(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function $s(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function Ho(h,d){var _=h.updateQueue;_!==null&&(_=_.shared,kn!==null&&(h.mode&1)!==0&&(Kt&2)===0?(h=_.interleaved,h===null?(d.next=d,Ur===null?Ur=[_]:Ur.push(_)):(d.next=h.next,h.next=d),_.interleaved=d):(h=_.pending,h===null?d.next=d:(d.next=h.next,h.next=d),_.pending=d))}function wf(h,d,_){if(d=d.updateQueue,d!==null&&(d=d.shared,(_&4194240)!==0)){var E=d.lanes;E&=h.pendingLanes,_|=E,d.lanes=_,Cs(h,_)}}function Ef(h,d){var _=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,_===E)){var P=null,D=null;if(_=_.firstBaseUpdate,_!==null){do{var K={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};D===null?P=D=K:D=D.next=K,_=_.next}while(_!==null);D===null?P=D=d:D=D.next=d}else P=D=d;_={baseState:E.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:E.shared,effects:E.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=d:h.next=d,_.lastBaseUpdate=d}function Cf(h,d,_,E){var P=h.updateQueue;zr=!1;var D=P.firstBaseUpdate,K=P.lastBaseUpdate,ae=P.shared.pending;if(ae!==null){P.shared.pending=null;var Ce=ae,Ye=Ce.next;Ce.next=null,K===null?D=Ye:K.next=Ye,K=Ce;var yt=h.alternate;yt!==null&&(yt=yt.updateQueue,ae=yt.lastBaseUpdate,ae!==K&&(ae===null?yt.firstBaseUpdate=Ye:ae.next=Ye,yt.lastBaseUpdate=Ce))}if(D!==null){var Wt=P.baseState;K=0,yt=Ye=Ce=null,ae=D;do{var Pt=ae.lane,Mn=ae.eventTime;if((E&Pt)===Pt){yt!==null&&(yt=yt.next={eventTime:Mn,lane:0,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null});e:{var dt=h,vn=ae;switch(Pt=d,Mn=_,vn.tag){case 1:if(dt=vn.payload,typeof dt=="function"){Wt=dt.call(Mn,Wt,Pt);break e}Wt=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=vn.payload,Pt=typeof dt=="function"?dt.call(Mn,Wt,Pt):dt,Pt==null)break e;Wt=s({},Wt,Pt);break e;case 2:zr=!0}}ae.callback!==null&&ae.lane!==0&&(h.flags|=64,Pt=P.effects,Pt===null?P.effects=[ae]:Pt.push(ae))}else Mn={eventTime:Mn,lane:Pt,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},yt===null?(Ye=yt=Mn,Ce=Wt):yt=yt.next=Mn,K|=Pt;if(ae=ae.next,ae===null){if(ae=P.shared.pending,ae===null)break;Pt=ae,ae=Pt.next,Pt.next=null,P.lastBaseUpdate=Pt,P.shared.pending=null}}while(!0);if(yt===null&&(Ce=Wt),P.baseState=Ce,P.firstBaseUpdate=Ye,P.lastBaseUpdate=yt,d=P.shared.interleaved,d!==null){P=d;do K|=P.lane,P=P.next;while(P!==d)}else D===null&&(P.shared.lanes=0);Fa|=K,h.lanes=K,h.memoizedState=Wt}}function jm(h,d,_){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var E=h[d],P=E.callback;if(P!==null){if(E.callback=null,E=_,typeof P!="function")throw Error(o(191,P));P.call(E)}}}var Xm=new n.Component().refs;function Ed(h,d,_,E){d=h.memoizedState,_=_(E,d),_=_==null?d:s({},d,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var bf={isMounted:function(h){return(h=h._reactInternals)?J(h)===h:!1},enqueueSetState:function(h,d,_){h=h._reactInternals;var E=yi(),P=Ds(h),D=$s(E,P);D.payload=d,_!=null&&(D.callback=_),Ho(h,D),d=or(h,P,E),d!==null&&wf(d,h,P)},enqueueReplaceState:function(h,d,_){h=h._reactInternals;var E=yi(),P=Ds(h),D=$s(E,P);D.tag=1,D.payload=d,_!=null&&(D.callback=_),Ho(h,D),d=or(h,P,E),d!==null&&wf(d,h,P)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var _=yi(),E=Ds(h),P=$s(_,E);P.tag=2,d!=null&&(P.callback=d),Ho(h,P),d=or(h,E,_),d!==null&&wf(d,h,E)}};function Cd(h,d,_,E,P,D,K){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,D,K):d.prototype&&d.prototype.isPureReactComponent?!rs(_,E)||!rs(P,D):!0}function Jm(h,d,_){var E=!1,P=ot,D=d.contextType;return typeof D=="object"&&D!==null?D=nr(D):(P=mn(d)?ni:on.current,E=d.contextTypes,D=(E=E!=null)?Ii(h,P):ot),d=new d(_,D),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=bf,h.stateNode=d,d._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=P,h.__reactInternalMemoizedMaskedChildContext=D),d}function Km(h,d,_,E){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(_,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(_,E),d.state!==h&&bf.enqueueReplaceState(d,d.state,null)}function bd(h,d,_,E){var P=h.stateNode;P.props=_,P.state=h.memoizedState,P.refs=Xm,xl(h);var D=d.contextType;typeof D=="object"&&D!==null?P.context=nr(D):(D=mn(d)?ni:on.current,P.context=Ii(h,D)),P.state=h.memoizedState,D=d.getDerivedStateFromProps,typeof D=="function"&&(Ed(h,d,D,_),P.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(d=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),d!==P.state&&bf.enqueueReplaceState(P,P.state,null),Cf(h,_,P,E),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308)}var _l=[],Go=0,Tf=null,Rf=0,Hr=[],Ar=0,_a=null,eo=1,to="";function Aa(h,d){_l[Go++]=Rf,_l[Go++]=Tf,Tf=h,Rf=d}function Ym(h,d,_){Hr[Ar++]=eo,Hr[Ar++]=to,Hr[Ar++]=_a,_a=h;var E=eo;h=to;var P=32-Bi(E)-1;E&=~(1<<P),_+=1;var D=32-Bi(d)+P;if(30<D){var K=P-P%5;D=(E&(1<<K)-1).toString(32),E>>=K,P-=K,eo=1<<32-Bi(d)+P|_<<P|E,to=D+h}else eo=1<<D|_<<P|E,to=h}function Td(h){h.return!==null&&(Aa(h,1),Ym(h,1,0))}function Rd(h){for(;h===Tf;)Tf=_l[--Go],_l[Go]=null,Rf=_l[--Go],_l[Go]=null;for(;h===_a;)_a=Hr[--Ar],Hr[Ar]=null,to=Hr[--Ar],Hr[Ar]=null,eo=Hr[--Ar],Hr[Ar]=null}var Vi=null,wi=null,In=!1,Al=!1,Gr=null;function Pd(h,d){var _=Cr(5,null,null,0);_.elementType="DELETED",_.stateNode=d,_.return=h,d=h.deletions,d===null?(h.deletions=[_],h.flags|=16):d.push(_)}function Id(h,d){switch(h.tag){case 5:return d=Oo(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,Vi=h,wi=dl(d),!0):!1;case 6:return d=fl(d,h.pendingProps),d!==null?(h.stateNode=d,Vi=h,wi=null,!0):!1;case 13:if(d=xr(d),d!==null){var _=_a!==null?{id:eo,overflow:to}:null;return h.memoizedState={dehydrated:d,treeContext:_,retryLane:1073741824},_=Cr(18,null,null,0),_.stateNode=d,_.return=h,h.child=_,Vi=h,wi=null,!0}return!1;default:return!1}}function Pf(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Vo(h){if(In){var d=wi;if(d){var _=d;if(!Id(h,d)){if(Pf(h))throw Error(o(418));d=_r(_);var E=Vi;d&&Id(h,d)?Pd(E,_):(h.flags=h.flags&-4097|2,In=!1,Vi=h)}}else{if(Pf(h))throw Error(o(418));h.flags=h.flags&-4097|2,In=!1,Vi=h}}}function qm(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Vi=h}function Dc(h){if(!j||h!==Vi)return!1;if(!In)return qm(h),In=!0,!1;if(h.tag!==3&&(h.tag!==5||he(h.type)&&!ve(h.type,h.memoizedProps))){var d=wi;if(d){if(Pf(h)){for(h=wi;h;)h=_r(h);throw Error(o(418))}for(;d;)Pd(h,d),d=_r(d)}}if(qm(h),h.tag===13){if(!j)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));wi=pf(h)}else wi=Vi?_r(h.stateNode):null;return!0}function Sl(){j&&(wi=Vi=null,Al=In=!1)}function If(h){Gr===null?Gr=[h]:Gr.push(h)}function Ml(h,d,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var E=_.stateNode}if(!E)throw Error(o(147,h));var P=E,D=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===D?d.ref:(d=function(K){var ae=P.refs;ae===Xm&&(ae=P.refs={}),K===null?delete ae[D]:ae[D]=K},d._stringRef=D,d)}if(typeof h!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,h))}return h}function Wo(h,d){throw h=Object.prototype.toString.call(d),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function wl(h){var d=h._init;return d(h._payload)}function Qm(h){function d(_e,fe){if(h){var Ee=_e.deletions;Ee===null?(_e.deletions=[fe],_e.flags|=16):Ee.push(fe)}}function _(_e,fe){if(!h)return null;for(;fe!==null;)d(_e,fe),fe=fe.sibling;return null}function E(_e,fe){for(_e=new Map;fe!==null;)fe.key!==null?_e.set(fe.key,fe):_e.set(fe.index,fe),fe=fe.sibling;return _e}function P(_e,fe){return _e=po(_e,fe),_e.index=0,_e.sibling=null,_e}function D(_e,fe,Ee){return _e.index=Ee,h?(Ee=_e.alternate,Ee!==null?(Ee=Ee.index,Ee<fe?(_e.flags|=2,fe):Ee):(_e.flags|=2,fe)):(_e.flags|=1048576,fe)}function K(_e){return h&&_e.alternate===null&&(_e.flags|=2),_e}function ae(_e,fe,Ee,ut){return fe===null||fe.tag!==6?(fe=ch(Ee,_e.mode,ut),fe.return=_e,fe):(fe=P(fe,Ee),fe.return=_e,fe)}function Ce(_e,fe,Ee,ut){var wt=Ee.type;return wt===p?yt(_e,fe,Ee.props.children,ut,Ee.key):fe!==null&&(fe.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===b&&wl(wt)===fe.type)?(ut=P(fe,Ee.props),ut.ref=Ml(_e,fe,Ee),ut.return=_e,ut):(ut=nu(Ee.type,Ee.key,Ee.props,null,_e.mode,ut),ut.ref=Ml(_e,fe,Ee),ut.return=_e,ut)}function Ye(_e,fe,Ee,ut){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ee.containerInfo||fe.stateNode.implementation!==Ee.implementation?(fe=uh(Ee,_e.mode,ut),fe.return=_e,fe):(fe=P(fe,Ee.children||[]),fe.return=_e,fe)}function yt(_e,fe,Ee,ut,wt){return fe===null||fe.tag!==7?(fe=na(Ee,_e.mode,ut,wt),fe.return=_e,fe):(fe=P(fe,Ee),fe.return=_e,fe)}function Wt(_e,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=ch(""+fe,_e.mode,Ee),fe.return=_e,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case c:return Ee=nu(fe.type,fe.key,fe.props,null,_e.mode,Ee),Ee.ref=Ml(_e,null,fe),Ee.return=_e,Ee;case f:return fe=uh(fe,_e.mode,Ee),fe.return=_e,fe;case b:var ut=fe._init;return Wt(_e,ut(fe._payload),Ee)}if(de(fe)||F(fe))return fe=na(fe,_e.mode,Ee,null),fe.return=_e,fe;Wo(_e,fe)}return null}function Pt(_e,fe,Ee,ut){var wt=fe!==null?fe.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return wt!==null?null:ae(_e,fe,""+Ee,ut);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case c:return Ee.key===wt?Ce(_e,fe,Ee,ut):null;case f:return Ee.key===wt?Ye(_e,fe,Ee,ut):null;case b:return wt=Ee._init,Pt(_e,fe,wt(Ee._payload),ut)}if(de(Ee)||F(Ee))return wt!==null?null:yt(_e,fe,Ee,ut,null);Wo(_e,Ee)}return null}function Mn(_e,fe,Ee,ut,wt){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return _e=_e.get(Ee)||null,ae(fe,_e,""+ut,wt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case c:return _e=_e.get(ut.key===null?Ee:ut.key)||null,Ce(fe,_e,ut,wt);case f:return _e=_e.get(ut.key===null?Ee:ut.key)||null,Ye(fe,_e,ut,wt);case b:var Jt=ut._init;return Mn(_e,fe,Ee,Jt(ut._payload),wt)}if(de(ut)||F(ut))return _e=_e.get(Ee)||null,yt(fe,_e,ut,wt,null);Wo(fe,ut)}return null}function dt(_e,fe,Ee,ut){for(var wt=null,Jt=null,Ht=fe,fn=fe=0,si=null;Ht!==null&&fn<Ee.length;fn++){Ht.index>fn?(si=Ht,Ht=null):si=Ht.sibling;var an=Pt(_e,Ht,Ee[fn],ut);if(an===null){Ht===null&&(Ht=si);break}h&&Ht&&an.alternate===null&&d(_e,Ht),fe=D(an,fe,fn),Jt===null?wt=an:Jt.sibling=an,Jt=an,Ht=si}if(fn===Ee.length)return _(_e,Ht),In&&Aa(_e,fn),wt;if(Ht===null){for(;fn<Ee.length;fn++)Ht=Wt(_e,Ee[fn],ut),Ht!==null&&(fe=D(Ht,fe,fn),Jt===null?wt=Ht:Jt.sibling=Ht,Jt=Ht);return In&&Aa(_e,fn),wt}for(Ht=E(_e,Ht);fn<Ee.length;fn++)si=Mn(Ht,_e,fn,Ee[fn],ut),si!==null&&(h&&si.alternate!==null&&Ht.delete(si.key===null?fn:si.key),fe=D(si,fe,fn),Jt===null?wt=si:Jt.sibling=si,Jt=si);return h&&Ht.forEach(function(Ls){return d(_e,Ls)}),In&&Aa(_e,fn),wt}function vn(_e,fe,Ee,ut){var wt=F(Ee);if(typeof wt!="function")throw Error(o(150));if(Ee=wt.call(Ee),Ee==null)throw Error(o(151));for(var Jt=wt=null,Ht=fe,fn=fe=0,si=null,an=Ee.next();Ht!==null&&!an.done;fn++,an=Ee.next()){Ht.index>fn?(si=Ht,Ht=null):si=Ht.sibling;var Ls=Pt(_e,Ht,an.value,ut);if(Ls===null){Ht===null&&(Ht=si);break}h&&Ht&&Ls.alternate===null&&d(_e,Ht),fe=D(Ls,fe,fn),Jt===null?wt=Ls:Jt.sibling=Ls,Jt=Ls,Ht=si}if(an.done)return _(_e,Ht),In&&Aa(_e,fn),wt;if(Ht===null){for(;!an.done;fn++,an=Ee.next())an=Wt(_e,an.value,ut),an!==null&&(fe=D(an,fe,fn),Jt===null?wt=an:Jt.sibling=an,Jt=an);return In&&Aa(_e,fn),wt}for(Ht=E(_e,Ht);!an.done;fn++,an=Ee.next())an=Mn(Ht,_e,fn,an.value,ut),an!==null&&(h&&an.alternate!==null&&Ht.delete(an.key===null?fn:an.key),fe=D(an,fe,fn),Jt===null?wt=an:Jt.sibling=an,Jt=an);return h&&Ht.forEach(function(gg){return d(_e,gg)}),In&&Aa(_e,fn),wt}function br(_e,fe,Ee,ut){if(typeof Ee=="object"&&Ee!==null&&Ee.type===p&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case c:e:{for(var wt=Ee.key,Jt=fe;Jt!==null;){if(Jt.key===wt){if(wt=Ee.type,wt===p){if(Jt.tag===7){_(_e,Jt.sibling),fe=P(Jt,Ee.props.children),fe.return=_e,_e=fe;break e}}else if(Jt.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===b&&wl(wt)===Jt.type){_(_e,Jt.sibling),fe=P(Jt,Ee.props),fe.ref=Ml(_e,Jt,Ee),fe.return=_e,_e=fe;break e}_(_e,Jt);break}else d(_e,Jt);Jt=Jt.sibling}Ee.type===p?(fe=na(Ee.props.children,_e.mode,ut,Ee.key),fe.return=_e,_e=fe):(ut=nu(Ee.type,Ee.key,Ee.props,null,_e.mode,ut),ut.ref=Ml(_e,fe,Ee),ut.return=_e,_e=ut)}return K(_e);case f:e:{for(Jt=Ee.key;fe!==null;){if(fe.key===Jt)if(fe.tag===4&&fe.stateNode.containerInfo===Ee.containerInfo&&fe.stateNode.implementation===Ee.implementation){_(_e,fe.sibling),fe=P(fe,Ee.children||[]),fe.return=_e,_e=fe;break e}else{_(_e,fe);break}else d(_e,fe);fe=fe.sibling}fe=uh(Ee,_e.mode,ut),fe.return=_e,_e=fe}return K(_e);case b:return Jt=Ee._init,br(_e,fe,Jt(Ee._payload),ut)}if(de(Ee))return dt(_e,fe,Ee,ut);if(F(Ee))return vn(_e,fe,Ee,ut);Wo(_e,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"?(Ee=""+Ee,fe!==null&&fe.tag===6?(_(_e,fe.sibling),fe=P(fe,Ee),fe.return=_e,_e=fe):(_(_e,fe),fe=ch(Ee,_e.mode,ut),fe.return=_e,_e=fe),K(_e)):_(_e,fe)}return br}var no=Qm(!0),Zm=Qm(!1),El={},ir=sn(El),Sa=sn(El),Ma=sn(El);function ss(h){if(h===El)throw Error(o(174));return h}function Bf(h,d){bt(Ma,d),bt(Sa,h),bt(ir,El),h=ye(d),Ot(ir),bt(ir,h)}function Cl(){Ot(ir),Ot(Sa),Ot(Ma)}function $m(h){var d=ss(Ma.current),_=ss(ir.current);d=G(_,h.type,d),_!==d&&(bt(Sa,h),bt(ir,d))}function Bd(h){Sa.current===h&&(Ot(ir),Ot(Sa))}var Nn=sn(0);function Df(h){for(var d=h;d!==null;){if(d.tag===13){var _=d.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||hl(_)||Es(_)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Sr=[];function wa(){for(var h=0;h<Sr.length;h++){var d=Sr[h];pt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}Sr.length=0}var Lc=l.ReactCurrentDispatcher,Mr=l.ReactCurrentBatchConfig,Ea=0,On=null,fi=null,hi=null,Lf=!1,Ts=!1,Ca=0,Fc=0;function di(){throw Error(o(321))}function Ff(h,d){if(d===null)return!1;for(var _=0;_<d.length&&_<h.length;_++)if(!Hi(h[_],d[_]))return!1;return!0}function bl(h,d,_,E,P,D){if(Ea=D,On=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Lc.current=h===null||h.memoizedState===null?kd:Ud,h=_(E,P),Ts){D=0;do{if(Ts=!1,Ca=0,25<=D)throw Error(o(301));D+=1,hi=fi=null,d.updateQueue=null,Lc.current=zd,h=_(E,P)}while(Ts)}if(Lc.current=Il,d=fi!==null&&fi.next!==null,Ea=0,hi=fi=On=null,Lf=!1,d)throw Error(o(300));return h}function jo(){var h=Ca!==0;return Ca=0,h}function os(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?On.memoizedState=hi=h:hi=hi.next=h,hi}function as(){if(fi===null){var h=On.alternate;h=h!==null?h.memoizedState:null}else h=fi.next;var d=hi===null?On.memoizedState:hi.next;if(d!==null)hi=d,fi=h;else{if(h===null)throw Error(o(310));fi=h,h={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},hi===null?On.memoizedState=hi=h:hi=hi.next=h}return hi}function Rs(h,d){return typeof d=="function"?d(h):d}function Nc(h){var d=as(),_=d.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var E=fi,P=E.baseQueue,D=_.pending;if(D!==null){if(P!==null){var K=P.next;P.next=D.next,D.next=K}E.baseQueue=P=D,_.pending=null}if(P!==null){D=P.next,E=E.baseState;var ae=K=null,Ce=null,Ye=D;do{var yt=Ye.lane;if((Ea&yt)===yt)Ce!==null&&(Ce=Ce.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),E=Ye.hasEagerState?Ye.eagerState:h(E,Ye.action);else{var Wt={lane:yt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Ce===null?(ae=Ce=Wt,K=E):Ce=Ce.next=Wt,On.lanes|=yt,Fa|=yt}Ye=Ye.next}while(Ye!==null&&Ye!==D);Ce===null?K=E:Ce.next=ae,Hi(E,d.memoizedState)||(pi=!0),d.memoizedState=E,d.baseState=K,d.baseQueue=Ce,_.lastRenderedState=E}if(h=_.interleaved,h!==null){P=h;do D=P.lane,On.lanes|=D,Fa|=D,P=P.next;while(P!==h)}else P===null&&(_.lanes=0);return[d.memoizedState,_.dispatch]}function Oc(h){var d=as(),_=d.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var E=_.dispatch,P=_.pending,D=d.memoizedState;if(P!==null){_.pending=null;var K=P=P.next;do D=h(D,K.action),K=K.next;while(K!==P);Hi(D,d.memoizedState)||(pi=!0),d.memoizedState=D,d.baseQueue===null&&(d.baseState=D),_.lastRenderedState=D}return[D,E]}function Dd(){}function Ld(h,d){var _=On,E=as(),P=d(),D=!Hi(E.memoizedState,P);if(D&&(E.memoizedState=P,pi=!0),E=E.queue,Tl(io.bind(null,_,E,h),[h]),E.getSnapshot!==d||D||hi!==null&&hi.memoizedState.tag&1){if(_.flags|=2048,Uc(9,Nd.bind(null,_,E,P,d),void 0,null),kn===null)throw Error(o(349));(Ea&30)!==0||Fd(_,d,P)}return P}function Fd(h,d,_){h.flags|=16384,h={getSnapshot:d,value:_},d=On.updateQueue,d===null?(d={lastEffect:null,stores:null},On.updateQueue=d,d.stores=[h]):(_=d.stores,_===null?d.stores=[h]:_.push(h))}function Nd(h,d,_,E){d.value=_,d.getSnapshot=E,Nf(d)&&or(h,1,-1)}function io(h,d,_){return _(function(){Nf(d)&&or(h,1,-1)})}function Nf(h){var d=h.getSnapshot;h=h.value;try{var _=d();return!Hi(h,_)}catch{return!0}}function kc(h){var d=os();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:h},d.queue=h,h=h.dispatch=J0.bind(null,On,h),[d.memoizedState,h]}function Uc(h,d,_,E){return h={tag:h,create:d,destroy:_,deps:E,next:null},d=On.updateQueue,d===null?(d={lastEffect:null,stores:null},On.updateQueue=d,d.lastEffect=h.next=h):(_=d.lastEffect,_===null?d.lastEffect=h.next=h:(E=_.next,_.next=h,h.next=E,d.lastEffect=h)),h}function eg(){return as().memoizedState}function Xo(h,d,_,E){var P=os();On.flags|=h,P.memoizedState=Uc(1|d,_,void 0,E===void 0?null:E)}function Of(h,d,_,E){var P=as();E=E===void 0?null:E;var D=void 0;if(fi!==null){var K=fi.memoizedState;if(D=K.destroy,E!==null&&Ff(E,K.deps)){P.memoizedState=Uc(d,_,D,E);return}}On.flags|=h,P.memoizedState=Uc(1|d,_,D,E)}function kf(h,d){return Xo(8390656,8,h,d)}function Tl(h,d){return Of(2048,8,h,d)}function wn(h,d){return Of(4,2,h,d)}function Uf(h,d){return Of(4,4,h,d)}function zc(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function Rl(h,d,_){return _=_!=null?_.concat([h]):null,Of(4,4,zc.bind(null,d,h),_)}function zf(){}function Hf(h,d){var _=as();d=d===void 0?null:d;var E=_.memoizedState;return E!==null&&d!==null&&Ff(d,E[1])?E[0]:(_.memoizedState=[h,d],h)}function Pl(h,d){var _=as();d=d===void 0?null:d;var E=_.memoizedState;return E!==null&&d!==null&&Ff(d,E[1])?E[0]:(h=h(),_.memoizedState=[h,d],h)}function Gf(h,d){var _=Zt;Zt=_!==0&&4>_?_:4,h(!0);var E=Mr.transition;Mr.transition={};try{h(!1),d()}finally{Zt=_,Mr.transition=E}}function ba(){return as().memoizedState}function tg(h,d,_){var E=Ds(h);_={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null},ng(h)?Od(d,_):(Hc(h,d,_),_=yi(),h=or(h,E,_),h!==null&&Gc(h,d,E))}function J0(h,d,_){var E=Ds(h),P={lane:E,action:_,hasEagerState:!1,eagerState:null,next:null};if(ng(h))Od(d,P);else{Hc(h,d,P);var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=d.lastRenderedReducer,D!==null))try{var K=d.lastRenderedState,ae=D(K,_);if(P.hasEagerState=!0,P.eagerState=ae,Hi(ae,K))return}catch{}finally{}_=yi(),h=or(h,E,_),h!==null&&Gc(h,d,E)}}function ng(h){var d=h.alternate;return h===On||d!==null&&d===On}function Od(h,d){Ts=Lf=!0;var _=h.pending;_===null?d.next=d:(d.next=_.next,_.next=d),h.pending=d}function Hc(h,d,_){kn!==null&&(h.mode&1)!==0&&(Kt&2)===0?(h=d.interleaved,h===null?(_.next=_,Ur===null?Ur=[d]:Ur.push(d)):(_.next=h.next,h.next=_),d.interleaved=_):(h=d.pending,h===null?_.next=_:(_.next=h.next,h.next=_),d.pending=_)}function Gc(h,d,_){if((_&4194240)!==0){var E=d.lanes;E&=h.pendingLanes,_|=E,d.lanes=_,Cs(h,_)}}var Il={readContext:nr,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useInsertionEffect:di,useLayoutEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useMutableSource:di,useSyncExternalStore:di,useId:di,unstable_isNewReconciler:!1},kd={readContext:nr,useCallback:function(h,d){return os().memoizedState=[h,d===void 0?null:d],h},useContext:nr,useEffect:kf,useImperativeHandle:function(h,d,_){return _=_!=null?_.concat([h]):null,Xo(4194308,4,zc.bind(null,d,h),_)},useLayoutEffect:function(h,d){return Xo(4194308,4,h,d)},useInsertionEffect:function(h,d){return Xo(4,2,h,d)},useMemo:function(h,d){var _=os();return d=d===void 0?null:d,h=h(),_.memoizedState=[h,d],h},useReducer:function(h,d,_){var E=os();return d=_!==void 0?_(d):d,E.memoizedState=E.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},E.queue=h,h=h.dispatch=tg.bind(null,On,h),[E.memoizedState,h]},useRef:function(h){var d=os();return h={current:h},d.memoizedState=h},useState:kc,useDebugValue:zf,useDeferredValue:function(h){var d=kc(h),_=d[0],E=d[1];return kf(function(){var P=Mr.transition;Mr.transition={};try{E(h)}finally{Mr.transition=P}},[h]),_},useTransition:function(){var h=kc(!1),d=h[0];return h=Gf.bind(null,h[1]),os().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,_){var E=On,P=os();if(In){if(_===void 0)throw Error(o(407));_=_()}else{if(_=d(),kn===null)throw Error(o(349));(Ea&30)!==0||Fd(E,d,_)}P.memoizedState=_;var D={value:_,getSnapshot:d};return P.queue=D,kf(io.bind(null,E,D,h),[h]),E.flags|=2048,Uc(9,Nd.bind(null,E,D,_,d),void 0,null),_},useId:function(){var h=os(),d=kn.identifierPrefix;if(In){var _=to,E=eo;_=(E&~(1<<32-Bi(E)-1)).toString(32)+_,d=":"+d+"R"+_,_=Ca++,0<_&&(d+="H"+_.toString(32)),d+=":"}else _=Fc++,d=":"+d+"r"+_.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},Ud={readContext:nr,useCallback:Hf,useContext:nr,useEffect:Tl,useImperativeHandle:Rl,useInsertionEffect:wn,useLayoutEffect:Uf,useMemo:Pl,useReducer:Nc,useRef:eg,useState:function(){return Nc(Rs)},useDebugValue:zf,useDeferredValue:function(h){var d=Nc(Rs),_=d[0],E=d[1];return Tl(function(){var P=Mr.transition;Mr.transition={};try{E(h)}finally{Mr.transition=P}},[h]),_},useTransition:function(){var h=Nc(Rs)[0],d=as().memoizedState;return[h,d]},useMutableSource:Dd,useSyncExternalStore:Ld,useId:ba,unstable_isNewReconciler:!1},zd={readContext:nr,useCallback:Hf,useContext:nr,useEffect:Tl,useImperativeHandle:Rl,useInsertionEffect:wn,useLayoutEffect:Uf,useMemo:Pl,useReducer:Oc,useRef:eg,useState:function(){return Oc(Rs)},useDebugValue:zf,useDeferredValue:function(h){var d=Oc(Rs),_=d[0],E=d[1];return Tl(function(){var P=Mr.transition;Mr.transition={};try{E(h)}finally{Mr.transition=P}},[h]),_},useTransition:function(){var h=Oc(Rs)[0],d=as().memoizedState;return[h,d]},useMutableSource:Dd,useSyncExternalStore:Ld,useId:ba,unstable_isNewReconciler:!1};function Hd(h,d){try{var _="",E=d;do _+=Md(E),E=E.return;while(E);var P=_}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:h,source:d,stack:P}}function Vf(h,d){try{console.error(d.value)}catch(_){setTimeout(function(){throw _})}}var K0=typeof WeakMap=="function"?WeakMap:Map;function ig(h,d,_){_=$s(-1,_),_.tag=3,_.payload={element:null};var E=d.value;return _.callback=function(){Qo||(Qo=!0,Xr=E),Vf(h,d)},_}function Wf(h,d,_){_=$s(-1,_),_.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var P=d.value;_.payload=function(){return E(P)},_.callback=function(){Vf(h,d)}}var D=h.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(_.callback=function(){Vf(h,d),typeof E!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var K=d.stack;this.componentDidCatch(d.value,{componentStack:K!==null?K:""})}),_}function ro(h,d,_){var E=h.pingCache;if(E===null){E=h.pingCache=new K0;var P=new Set;E.set(d,P)}else P=E.get(d),P===void 0&&(P=new Set,E.set(d,P));P.has(_)||(P.add(_),h=ag.bind(null,h,d,_),d.then(h,h))}function Gd(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function Ta(h,d,_,E,P){return(h.mode&1)===0?(h===d?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(d=$s(-1,1),d.tag=2,Ho(_,d))),_.lanes|=1),h):(h.flags|=65536,h.lanes=P,h)}function ri(h){h.flags|=4}function Bl(h,d){if(h!==null&&h.child===d.child)return!0;if((d.flags&16)!==0)return!1;for(h=d.child;h!==null;){if((h.flags&12854)!==0||(h.subtreeFlags&12854)!==0)return!1;h=h.sibling}return!0}var wr,Ra,jf,Xf;if(We)wr=function(h,d){for(var _=d.child;_!==null;){if(_.tag===5||_.tag===6)pe(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===d)break;for(;_.sibling===null;){if(_.return===null||_.return===d)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Ra=function(){},jf=function(h,d,_,E,P){if(h=h.memoizedProps,h!==E){var D=d.stateNode,K=ss(ir.current);_=oe(D,_,h,E,P,K),(d.updateQueue=_)&&ri(d)}},Xf=function(h,d,_,E){_!==E&&ri(d)};else if(Pe){wr=function(h,d,_,E){for(var P=d.child;P!==null;){if(P.tag===5){var D=P.stateNode;_&&E&&(D=bn(D,P.type,P.memoizedProps,P)),pe(h,D)}else if(P.tag===6)D=P.stateNode,_&&E&&(D=ui(D,P.memoizedProps,P)),pe(h,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),wr(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===d)break;for(;P.sibling===null;){if(P.return===null||P.return===d)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var Jo=function(h,d,_,E){for(var P=d.child;P!==null;){if(P.tag===5){var D=P.stateNode;_&&E&&(D=bn(D,P.type,P.memoizedProps,P)),rn(h,D)}else if(P.tag===6)D=P.stateNode,_&&E&&(D=ui(D,P.memoizedProps,P)),rn(h,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),Jo(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===d)break;for(;P.sibling===null;){if(P.return===null||P.return===d)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Ra=function(h,d){var _=d.stateNode;if(!Bl(h,d)){h=_.containerInfo;var E=kt(h);Jo(E,d,!1,!1),_.pendingChildren=E,ri(d),Fn(h,E)}},jf=function(h,d,_,E,P){var D=h.stateNode,K=h.memoizedProps;if((h=Bl(h,d))&&K===E)d.stateNode=D;else{var ae=d.stateNode,Ce=ss(ir.current),Ye=null;K!==E&&(Ye=oe(ae,_,K,E,P,Ce)),h&&Ye===null?d.stateNode=D:(D=ct(D,Ye,_,K,E,d,h,ae),Ne(D,_,E,P,Ce)&&ri(d),d.stateNode=D,h?ri(d):wr(D,d,!1,!1))}},Xf=function(h,d,_,E){_!==E?(h=ss(Ma.current),_=ss(ir.current),d.stateNode=be(E,h,_,d),ri(d)):d.stateNode=h.stateNode}}else Ra=function(){},jf=function(){},Xf=function(){};function so(h,d){if(!In)switch(h.tailMode){case"hidden":d=h.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var E=null;_!==null;)_.alternate!==null&&(E=_),_=_.sibling;E===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function Vn(h){var d=h.alternate!==null&&h.alternate.child===h.child,_=0,E=0;if(d)for(var P=h.child;P!==null;)_|=P.lanes|P.childLanes,E|=P.subtreeFlags&14680064,E|=P.flags&14680064,P.return=h,P=P.sibling;else for(P=h.child;P!==null;)_|=P.lanes|P.childLanes,E|=P.subtreeFlags,E|=P.flags,P.return=h,P=P.sibling;return h.subtreeFlags|=E,h.childLanes=_,d}function Jf(h,d,_){var E=d.pendingProps;switch(Rd(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(d),null;case 1:return mn(d.type)&&Nr(),Vn(d),null;case 3:return E=d.stateNode,Cl(),Ot(zt),Ot(on),wa(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(Dc(d)?ri(d):h===null||h.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Gr!==null&&(jn(Gr),Gr=null))),Ra(h,d),Vn(d),null;case 5:Bd(d),_=ss(Ma.current);var P=d.type;if(h!==null&&d.stateNode!=null)jf(h,d,P,E,_),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(o(166));return Vn(d),null}if(h=ss(ir.current),Dc(d)){if(!j)throw Error(o(175));h=hf(d.stateNode,d.type,d.memoizedProps,_,h,d,!Al),d.updateQueue=h,h!==null&&ri(d)}else{var D=Y(P,E,_,h,d);wr(D,d,!1,!1),d.stateNode=D,Ne(D,P,E,_,h)&&ri(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Vn(d),null;case 6:if(h&&d.stateNode!=null)Xf(h,d,h.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(o(166));if(h=ss(Ma.current),_=ss(ir.current),Dc(d)){if(!j)throw Error(o(176));if(h=d.stateNode,E=d.memoizedProps,(_=qs(h,E,d,!Al))&&(P=Vi,P!==null))switch(D=(P.mode&1)!==0,P.tag){case 3:Qe(P.stateNode.containerInfo,h,E,D);break;case 5:ft(P.type,P.memoizedProps,P.stateNode,h,E,D)}_&&ri(d)}else d.stateNode=be(E,h,_,d)}return Vn(d),null;case 13:if(Ot(Nn),E=d.memoizedState,In&&wi!==null&&(d.mode&1)!==0&&(d.flags&128)===0){for(h=wi;h;)h=_r(h);return Sl(),d.flags|=98560,d}if(E!==null&&E.dehydrated!==null){if(E=Dc(d),h===null){if(!E)throw Error(o(318));if(!j)throw Error(o(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));df(h,d)}else Sl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;return Vn(d),null}return Gr!==null&&(jn(Gr),Gr=null),(d.flags&128)!==0?(d.lanes=_,d):(E=E!==null,_=!1,h===null?Dc(d):_=h.memoizedState!==null,E&&!_&&(d.child.flags|=8192,(d.mode&1)!==0&&(h===null||(Nn.current&1)!==0?qn===0&&(qn=3):Qc())),d.updateQueue!==null&&(d.flags|=4),Vn(d),null);case 4:return Cl(),Ra(h,d),h===null&&Ke(d.stateNode.containerInfo),Vn(d),null;case 10:return Bc(d.type._context),Vn(d),null;case 17:return mn(d.type)&&Nr(),Vn(d),null;case 19:if(Ot(Nn),P=d.memoizedState,P===null)return Vn(d),null;if(E=(d.flags&128)!==0,D=P.rendering,D===null)if(E)so(P,!1);else{if(qn!==0||h!==null&&(h.flags&128)!==0)for(h=d.child;h!==null;){if(D=Df(h),D!==null){for(d.flags|=128,so(P,!1),h=D.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=_,E=d.child;E!==null;)_=E,P=h,_.flags&=14680066,D=_.alternate,D===null?(_.childLanes=0,_.lanes=P,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=D.childLanes,_.lanes=D.lanes,_.child=D.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=D.memoizedProps,_.memoizedState=D.memoizedState,_.updateQueue=D.updateQueue,_.type=D.type,P=D.dependencies,_.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),E=E.sibling;return bt(Nn,Nn.current&1|2),d.child}h=h.sibling}P.tail!==null&&ii()>qo&&(d.flags|=128,E=!0,so(P,!1),d.lanes=4194304)}else{if(!E)if(h=Df(D),h!==null){if(d.flags|=128,E=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),so(P,!0),P.tail===null&&P.tailMode==="hidden"&&!D.alternate&&!In)return Vn(d),null}else 2*ii()-P.renderingStartTime>qo&&_!==1073741824&&(d.flags|=128,E=!0,so(P,!1),d.lanes=4194304);P.isBackwards?(D.sibling=d.child,d.child=D):(h=P.last,h!==null?h.sibling=D:d.child=D,P.last=D)}return P.tail!==null?(d=P.tail,P.rendering=d,P.tail=d.sibling,P.renderingStartTime=ii(),d.sibling=null,h=Nn.current,bt(Nn,E?h&1|2:h&1),d):(Vn(d),null);case 22:case 23:return Qd(),E=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(d.flags|=8192),E&&(d.mode&1)!==0?(Ki&1073741824)!==0&&(Vn(d),We&&d.subtreeFlags&6&&(d.flags|=8192)):Vn(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var Vd=l.ReactCurrentOwner,pi=!1;function Hn(h,d,_,E){d.child=h===null?Zm(d,null,_,E):no(d,h.child,_,E)}function En(h,d,_,E,P){_=_.render;var D=d.ref;return vl(d,P),E=bl(h,d,_,E,D,P),_=jo(),h!==null&&!pi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~P,rr(h,d,P)):(In&&_&&Td(d),d.flags|=1,Hn(h,d,E,P),d.child)}function Sn(h,d,_,E,P){if(h===null){var D=_.type;return typeof D=="function"&&!tu(D)&&D.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(d.tag=15,d.type=D,oo(h,d,D,E,P)):(h=nu(_.type,null,E,d,d.mode,P),h.ref=d.ref,h.return=d,d.child=h)}if(D=h.child,(h.lanes&P)===0){var K=D.memoizedProps;if(_=_.compare,_=_!==null?_:rs,_(K,E)&&h.ref===d.ref)return rr(h,d,P)}return d.flags|=1,h=po(D,E),h.ref=d.ref,h.return=d,d.child=h}function oo(h,d,_,E,P){if(h!==null&&rs(h.memoizedProps,E)&&h.ref===d.ref)if(pi=!1,(h.lanes&P)!==0)(h.flags&131072)!==0&&(pi=!0);else return d.lanes=h.lanes,rr(h,d,P);return ao(h,d,_,E,P)}function Ei(h,d,_){var E=d.pendingProps,P=E.children,D=h!==null?h.memoizedState:null;if(E.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null},bt(ho,Ki),Ki|=_;else if((_&1073741824)!==0)d.memoizedState={baseLanes:0,cachePool:null},E=D!==null?D.baseLanes:_,bt(ho,Ki),Ki|=E;else return h=D!==null?D.baseLanes|_:_,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,bt(ho,Ki),Ki|=h,null;else D!==null?(E=D.baseLanes|_,d.memoizedState=null):E=_,bt(ho,Ki),Ki|=E;return Hn(h,d,P,_),d.child}function Wi(h,d){var _=d.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(d.flags|=512,d.flags|=2097152)}function ao(h,d,_,E,P){var D=mn(_)?ni:on.current;return D=Ii(d,D),vl(d,P),_=bl(h,d,_,E,D,P),E=jo(),h!==null&&!pi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~P,rr(h,d,P)):(In&&E&&Td(d),d.flags|=1,Hn(h,d,_,P),d.child)}function Pa(h,d,_,E,P){if(mn(_)){var D=!0;ko(d)}else D=!1;if(vl(d,P),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),Jm(d,_,E),bd(d,_,E,P),E=!0;else if(h===null){var K=d.stateNode,ae=d.memoizedProps;K.props=ae;var Ce=K.context,Ye=_.contextType;typeof Ye=="object"&&Ye!==null?Ye=nr(Ye):(Ye=mn(_)?ni:on.current,Ye=Ii(d,Ye));var yt=_.getDerivedStateFromProps,Wt=typeof yt=="function"||typeof K.getSnapshotBeforeUpdate=="function";Wt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ae!==E||Ce!==Ye)&&Km(d,K,E,Ye),zr=!1;var Pt=d.memoizedState;K.state=Pt,Cf(d,E,K,P),Ce=d.memoizedState,ae!==E||Pt!==Ce||zt.current||zr?(typeof yt=="function"&&(Ed(d,_,yt,E),Ce=d.memoizedState),(ae=zr||Cd(d,_,ae,E,Pt,Ce,Ye))?(Wt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(d.flags|=4194308)):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=Ce),K.props=E,K.state=Ce,K.context=Ye,E=ae):(typeof K.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{K=d.stateNode,wd(h,d),ae=d.memoizedProps,Ye=d.type===d.elementType?ae:tr(d.type,ae),K.props=Ye,Wt=d.pendingProps,Pt=K.context,Ce=_.contextType,typeof Ce=="object"&&Ce!==null?Ce=nr(Ce):(Ce=mn(_)?ni:on.current,Ce=Ii(d,Ce));var Mn=_.getDerivedStateFromProps;(yt=typeof Mn=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ae!==Wt||Pt!==Ce)&&Km(d,K,E,Ce),zr=!1,Pt=d.memoizedState,K.state=Pt,Cf(d,E,K,P);var dt=d.memoizedState;ae!==Wt||Pt!==dt||zt.current||zr?(typeof Mn=="function"&&(Ed(d,_,Mn,E),dt=d.memoizedState),(Ye=zr||Cd(d,_,Ye,E,Pt,dt,Ce)||!1)?(yt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(E,dt,Ce),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(E,dt,Ce)),typeof K.componentDidUpdate=="function"&&(d.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof K.componentDidUpdate!="function"||ae===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=dt),K.props=E,K.state=dt,K.context=Ce,E=Ye):(typeof K.componentDidUpdate!="function"||ae===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Pt===h.memoizedState||(d.flags|=1024),E=!1)}return Di(h,d,_,E,D,P)}function Di(h,d,_,E,P,D){Wi(h,d);var K=(d.flags&128)!==0;if(!E&&!K)return P&&Mi(d,_,!1),rr(h,d,D);E=d.stateNode,Vd.current=d;var ae=K&&typeof _.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,h!==null&&K?(d.child=no(d,h.child,null,D),d.child=no(d,null,ae,D)):Hn(h,d,ae,D),d.memoizedState=E.state,P&&Mi(d,_,!0),d.child}function Vc(h){var d=h.stateNode;d.pendingContext?An(h,d.pendingContext,d.pendingContext!==d.context):d.context&&An(h,d.context,!1),Bf(h,d.containerInfo)}function Wd(h,d,_,E,P){return Sl(),If(P),d.flags|=256,Hn(h,d,_,E),d.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Ia(h){return{baseLanes:h,cachePool:null}}function jd(h,d,_){var E=d.pendingProps,P=Nn.current,D=!1,K=(d.flags&128)!==0,ae;if((ae=K)||(ae=h!==null&&h.memoizedState===null?!1:(P&2)!==0),ae?(D=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(P|=1),bt(Nn,P&1),h===null)return Vo(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((d.mode&1)===0?d.lanes=1:Es(h)?d.lanes=8:d.lanes=1073741824,null):(P=E.children,h=E.fallback,D?(E=d.mode,D=d.child,P={mode:"hidden",children:P},(E&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=P):D=Wl(P,E,0,null),h=na(h,E,_,null),D.return=d,h.return=d,D.sibling=h,d.child=D,d.child.memoizedState=Ia(_),d.memoizedState=Wc,h):ls(d,P));if(P=h.memoizedState,P!==null){if(ae=P.dehydrated,ae!==null){if(K)return d.flags&256?(d.flags&=-257,Xc(h,d,_,Error(o(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(D=E.fallback,P=d.mode,E=Wl({mode:"visible",children:E.children},P,0,null),D=na(D,P,_,null),D.flags|=2,E.return=d,D.return=d,E.sibling=D,d.child=E,(d.mode&1)!==0&&no(d,h.child,null,_),d.child.memoizedState=Ia(_),d.memoizedState=Wc,D);if((d.mode&1)===0)d=Xc(h,d,_,null);else if(Es(ae))d=Xc(h,d,_,Error(o(419)));else if(E=(_&h.childLanes)!==0,pi||E){if(E=kn,E!==null){switch(_&-_){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}E=(D&(E.suspendedLanes|_))!==0?0:D,E!==0&&E!==P.retryLane&&(P.retryLane=E,or(h,E,-1))}Qc(),d=Xc(h,d,_,Error(o(421)))}else hl(ae)?(d.flags|=128,d.child=h.child,d=lg.bind(null,h),da(ae,d),d=null):(_=P.treeContext,j&&(wi=ff(ae),Vi=d,In=!0,Gr=null,Al=!1,_!==null&&(Hr[Ar++]=eo,Hr[Ar++]=to,Hr[Ar++]=_a,eo=_.id,to=_.overflow,_a=d)),d=ls(d,d.pendingProps.children),d.flags|=4096);return d}return D?(E=Kf(h,d,E.children,E.fallback,_),D=d.child,P=h.child.memoizedState,D.memoizedState=P===null?Ia(_):{baseLanes:P.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,d.memoizedState=Wc,E):(_=jc(h,d,E.children,_),d.memoizedState=null,_)}return D?(E=Kf(h,d,E.children,E.fallback,_),D=d.child,P=h.child.memoizedState,D.memoizedState=P===null?Ia(_):{baseLanes:P.baseLanes|_,cachePool:null},D.childLanes=h.childLanes&~_,d.memoizedState=Wc,E):(_=jc(h,d,E.children,_),d.memoizedState=null,_)}function ls(h,d){return d=Wl({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function jc(h,d,_,E){var P=h.child;return h=P.sibling,_=po(P,{mode:"visible",children:_}),(d.mode&1)===0&&(_.lanes=E),_.return=d,_.sibling=null,h!==null&&(E=d.deletions,E===null?(d.deletions=[h],d.flags|=16):E.push(h)),d.child=_}function Kf(h,d,_,E,P){var D=d.mode;h=h.child;var K=h.sibling,ae={mode:"hidden",children:_};return(D&1)===0&&d.child!==h?(_=d.child,_.childLanes=0,_.pendingProps=ae,d.deletions=null):(_=po(h,ae),_.subtreeFlags=h.subtreeFlags&14680064),K!==null?E=po(K,E):(E=na(E,D,P,null),E.flags|=2),E.return=d,_.return=d,_.sibling=E,d.child=_,E}function Xc(h,d,_,E){return E!==null&&If(E),no(d,h.child,null,_),h=ls(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function rg(h,d,_){h.lanes|=d;var E=h.alternate;E!==null&&(E.lanes|=d),xa(h.return,d,_)}function Ps(h,d,_,E,P){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:_,tailMode:P}:(D.isBackwards=d,D.rendering=null,D.renderingStartTime=0,D.last=E,D.tail=_,D.tailMode=P)}function Ba(h,d,_){var E=d.pendingProps,P=E.revealOrder,D=E.tail;if(Hn(h,d,E.children,_),E=Nn.current,(E&2)!==0)E=E&1|2,d.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&rg(h,_,d);else if(h.tag===19)rg(h,_,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(bt(Nn,E),(d.mode&1)===0)d.memoizedState=null;else switch(P){case"forwards":for(_=d.child,P=null;_!==null;)h=_.alternate,h!==null&&Df(h)===null&&(P=_),_=_.sibling;_=P,_===null?(P=d.child,d.child=null):(P=_.sibling,_.sibling=null),Ps(d,!1,P,_,D);break;case"backwards":for(_=null,P=d.child,d.child=null;P!==null;){if(h=P.alternate,h!==null&&Df(h)===null){d.child=P;break}h=P.sibling,P.sibling=_,_=P,P=h}Ps(d,!0,_,null,D);break;case"together":Ps(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function rr(h,d,_){if(h!==null&&(d.dependencies=h.dependencies),Fa|=d.lanes,(_&d.childLanes)===0)return null;if(h!==null&&d.child!==h.child)throw Error(o(153));if(d.child!==null){for(h=d.child,_=po(h,h.pendingProps),d.child=_,_.return=d;h.sibling!==null;)h=h.sibling,_=_.sibling=po(h,h.pendingProps),_.return=d;_.sibling=null}return d.child}function Yf(h,d,_){switch(d.tag){case 3:Vc(d),Sl();break;case 5:$m(d);break;case 1:mn(d.type)&&ko(d);break;case 4:Bf(d,d.stateNode.containerInfo);break;case 10:va(d,d.type._context,d.memoizedProps.value);break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(bt(Nn,Nn.current&1),d.flags|=128,null):(_&d.child.childLanes)!==0?jd(h,d,_):(bt(Nn,Nn.current&1),h=rr(h,d,_),h!==null?h.sibling:null);bt(Nn,Nn.current&1);break;case 19:if(E=(_&d.childLanes)!==0,(h.flags&128)!==0){if(E)return Ba(h,d,_);d.flags|=128}var P=d.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),bt(Nn,Nn.current),E)break;return null;case 22:case 23:return d.lanes=0,Ei(h,d,_)}return rr(h,d,_)}function qf(h,d){switch(Rd(d),d.tag){case 1:return mn(d.type)&&Nr(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Cl(),Ot(zt),Ot(on),wa(),h=d.flags,(h&65536)!==0&&(h&128)===0?(d.flags=h&-65537|128,d):null;case 5:return Bd(d),null;case 13:if(Ot(Nn),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(o(340));Sl()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return Ot(Nn),null;case 4:return Cl(),null;case 10:return Bc(d.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var ji=!1,mi=!1,Da=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Vr(h,d){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(E){qi(h,d,E)}else _.current=null}function lo(h,d,_){try{_()}catch(E){qi(h,d,E)}}var Xd=!1;function Jd(h,d){for(Z(h.containerInfo),$e=d;$e!==null;)if(h=$e,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,$e=d;else for(;$e!==null;){h=$e;try{var _=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,P=_.memoizedState,D=h.stateNode,K=D.getSnapshotBeforeUpdate(h.elementType===h.type?E:tr(h.type,E),P);D.__reactInternalSnapshotBeforeUpdate=K}break;case 3:We&&nt(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ae){qi(h,h.return,ae)}if(d=h.sibling,d!==null){d.return=h.return,$e=d;break}$e=h.return}return _=Xd,Xd=!1,_}function co(h,d,_){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&h)===h){var D=P.destroy;P.destroy=void 0,D!==void 0&&lo(d,_,D)}P=P.next}while(P!==E)}}function Ci(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var _=d=d.next;do{if((_.tag&h)===h){var E=_.create;_.destroy=E()}_=_.next}while(_!==d)}}function Xi(h){var d=h.ref;if(d!==null){var _=h.stateNode;switch(h.tag){case 5:h=le(_);break;default:h=_}typeof d=="function"?d(h):d.current=h}}function Tn(h,d,_){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(Tc,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var P=E,D=P.destroy;P=P.tag,D!==void 0&&((P&2)!==0||(P&4)!==0)&&lo(d,_,D),E=E.next}while(E!==h)}break;case 1:if(Vr(d,_),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(K){qi(d,_,K)}break;case 5:Vr(d,_);break;case 4:We?qd(h,d,_):Pe&&Pe&&(d=d.stateNode.containerInfo,_=kt(d),Xt(d,_))}}function Wr(h,d,_){for(var E=d;;)if(Tn(h,E,_),E.child===null||We&&E.tag===4){if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function Kd(h){var d=h.alternate;d!==null&&(h.alternate=null,Kd(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&Ge(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Yd(h){return h.tag===5||h.tag===3||h.tag===4}function Qf(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Yd(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Zf(h){if(We){e:{for(var d=h.return;d!==null;){if(Yd(d))break e;d=d.return}throw Error(o(160))}var _=d;switch(_.tag){case 5:d=_.stateNode,_.flags&32&&(et(d),_.flags&=-33),_=Qf(h),Dl(h,_,d);break;case 3:case 4:d=_.stateNode.containerInfo,_=Qf(h),$f(h,_,d);break;default:throw Error(o(161))}}}function $f(h,d,_){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?ht(_,h,d):Qt(_,h);else if(E!==4&&(h=h.child,h!==null))for($f(h,d,_),h=h.sibling;h!==null;)$f(h,d,_),h=h.sibling}function Dl(h,d,_){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?It(_,h,d):lt(_,h);else if(E!==4&&(h=h.child,h!==null))for(Dl(h,d,_),h=h.sibling;h!==null;)Dl(h,d,_),h=h.sibling}function qd(h,d,_){for(var E=d,P=!1,D,K;;){if(!P){P=E.return;e:for(;;){if(P===null)throw Error(o(160));switch(D=P.stateNode,P.tag){case 5:K=!1;break e;case 3:D=D.containerInfo,K=!0;break e;case 4:D=D.containerInfo,K=!0;break e}P=P.return}P=!0}if(E.tag===5||E.tag===6)Wr(h,E,_),K?Re(D,E.stateNode):re(D,E.stateNode);else if(E.tag===18)K?Se(D,E.stateNode):Ae(D,E.stateNode);else if(E.tag===4){if(E.child!==null){D=E.stateNode.containerInfo,K=!0,E.child.return=E,E=E.child;continue}}else if(Tn(h,E,_),E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return,E.tag===4&&(P=!1)}E.sibling.return=E.return,E=E.sibling}}function Ko(h,d){if(We){switch(d.tag){case 0:case 11:case 14:case 15:co(3,d,d.return),Ci(3,d),co(5,d,d.return);return;case 1:return;case 5:var _=d.stateNode;if(_!=null){var E=d.memoizedProps;h=h!==null?h.memoizedProps:E;var P=d.type,D=d.updateQueue;d.updateQueue=null,D!==null&&Ft(_,D,P,h,E,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));_=d.memoizedProps,ze(d.stateNode,h!==null?h.memoizedProps:_,_);return;case 3:j&&h!==null&&h.memoizedState.isDehydrated&&V(d.stateNode.containerInfo);return;case 12:return;case 13:Ll(d);return;case 19:Ll(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:co(3,d,d.return),Ci(3,d),co(5,d,d.return);return;case 12:return;case 13:Ll(d);return;case 19:Ll(d);return;case 3:j&&h!==null&&h.memoizedState.isDehydrated&&V(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Pe){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Xt(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Ll(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new Da),d.forEach(function(E){var P=$c.bind(null,h,E);_.has(E)||(_.add(E),E.then(P,P))})}}function Y0(h,d){for($e=d;$e!==null;){d=$e;var _=d.deletions;if(_!==null)for(var E=0;E<_.length;E++){var P=_[E];try{var D=h;We?qd(D,P,d):Wr(D,P,d);var K=P.alternate;K!==null&&(K.return=null),P.return=null}catch(wt){qi(P,d,wt)}}if(_=d.child,(d.subtreeFlags&12854)!==0&&_!==null)_.return=d,$e=_;else for(;$e!==null;){d=$e;try{var ae=d.flags;if(ae&32&&We&&et(d.stateNode),ae&512){var Ce=d.alternate;if(Ce!==null){var Ye=Ce.ref;Ye!==null&&(typeof Ye=="function"?Ye(null):Ye.current=null)}}if(ae&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var yt=d.alternate;(yt===null||yt.memoizedState===null)&&(nh=ii())}break;case 22:var Wt=d.memoizedState!==null,Pt=d.alternate,Mn=Pt!==null&&Pt.memoizedState!==null;if(_=d,We){e:if(E=_,P=Wt,D=null,We)for(var dt=E;;){if(dt.tag===5){if(D===null){D=dt;var vn=dt.stateNode;P?$(vn):we(dt.stateNode,dt.memoizedProps)}}else if(dt.tag===6){if(D===null){var br=dt.stateNode;P?je(br):Le(br,dt.memoizedProps)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===E)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===E)break;for(;dt.sibling===null;){if(dt.return===null||dt.return===E)break e;D===dt&&(D=null),dt=dt.return}D===dt&&(D=null),dt.sibling.return=dt.return,dt=dt.sibling}}if(Wt&&!Mn&&(_.mode&1)!==0){$e=_;for(var _e=_.child;_e!==null;){for(_=$e=_e;$e!==null;){E=$e;var fe=E.child;switch(E.tag){case 0:case 11:case 14:case 15:co(4,E,E.return);break;case 1:Vr(E,E.return);var Ee=E.stateNode;if(typeof Ee.componentWillUnmount=="function"){var ut=E.return;try{Ee.props=E.memoizedProps,Ee.state=E.memoizedState,Ee.componentWillUnmount()}catch(wt){qi(E,ut,wt)}}break;case 5:Vr(E,E.return);break;case 22:if(E.memoizedState!==null){La(_);continue}}fe!==null?(fe.return=E,$e=fe):La(_)}_e=_e.sibling}}}switch(ae&4102){case 2:Zf(d),d.flags&=-3;break;case 6:Zf(d),d.flags&=-3,Ko(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,Ko(d.alternate,d);break;case 4:Ko(d.alternate,d)}}catch(wt){qi(d,d.return,wt)}if(_=d.sibling,_!==null){_.return=d.return,$e=_;break}$e=d.return}}}function cs(h,d,_){$e=h,Jc(h)}function Jc(h,d,_){for(var E=(h.mode&1)!==0;$e!==null;){var P=$e,D=P.child;if(P.tag===22&&E){var K=P.memoizedState!==null||ji;if(!K){var ae=P.alternate,Ce=ae!==null&&ae.memoizedState!==null||mi;ae=ji;var Ye=mi;if(ji=K,(mi=Ce)&&!Ye)for($e=P;$e!==null;)K=$e,Ce=K.child,K.tag===22&&K.memoizedState!==null?eh(P):Ce!==null?(Ce.return=K,$e=Ce):eh(P);for(;D!==null;)$e=D,Jc(D),D=D.sibling;$e=P,ji=ae,mi=Ye}Kc(h)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,$e=D):Kc(h)}}function Kc(h){for(;$e!==null;){var d=$e;if((d.flags&8772)!==0){var _=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:mi||Ci(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!mi)if(_===null)E.componentDidMount();else{var P=d.elementType===d.type?_.memoizedProps:tr(d.type,_.memoizedProps);E.componentDidUpdate(P,_.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var D=d.updateQueue;D!==null&&jm(d,D,E);break;case 3:var K=d.updateQueue;if(K!==null){if(_=null,d.child!==null)switch(d.child.tag){case 5:_=le(d.child.stateNode);break;case 1:_=d.child.stateNode}jm(d,K,_)}break;case 5:var ae=d.stateNode;_===null&&d.flags&4&&st(ae,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(j&&d.memoizedState===null){var Ce=d.alternate;if(Ce!==null){var Ye=Ce.memoizedState;if(Ye!==null){var yt=Ye.dehydrated;yt!==null&&ue(yt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}mi||d.flags&512&&Xi(d)}catch(Wt){qi(d,d.return,Wt)}}if(d===h){$e=null;break}if(_=d.sibling,_!==null){_.return=d.return,$e=_;break}$e=d.return}}function La(h){for(;$e!==null;){var d=$e;if(d===h){$e=null;break}var _=d.sibling;if(_!==null){_.return=d.return,$e=_;break}$e=d.return}}function eh(h){for(;$e!==null;){var d=$e;try{switch(d.tag){case 0:case 11:case 15:var _=d.return;try{Ci(4,d)}catch(Ce){qi(d,_,Ce)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var P=d.return;try{E.componentDidMount()}catch(Ce){qi(d,P,Ce)}}var D=d.return;try{Xi(d)}catch(Ce){qi(d,D,Ce)}break;case 5:var K=d.return;try{Xi(d)}catch(Ce){qi(d,K,Ce)}}}catch(Ce){qi(d,d.return,Ce)}if(d===h){$e=null;break}var ae=d.sibling;if(ae!==null){ae.return=d.return,$e=ae;break}$e=d.return}}var Fl=0,Nl=1,Ol=2,uo=3,Ji=4;if(typeof Symbol=="function"&&Symbol.for){var us=Symbol.for;Fl=us("selector.component"),Nl=us("selector.has_pseudo_class"),Ol=us("selector.role"),uo=us("selector.test_id"),Ji=us("selector.text")}function Yc(h){var d=Je(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(h=H(h),h===null)throw Error(o(362));return h.stateNode.current}function th(h,d){switch(d.$$typeof){case Fl:if(h.type===d.value)return!0;break;case Nl:e:{d=d.value,h=[h,0];for(var _=0;_<h.length;){var E=h[_++],P=h[_++],D=d[P];if(E.tag!==5||!Fe(E)){for(;D!=null&&th(E,D);)P++,D=d[P];if(P===d.length){d=!0;break e}else for(E=E.child;E!==null;)h.push(E,P),E=E.sibling}}d=!1}return d;case Ol:if(h.tag===5&&Be(h.stateNode,d.value))return!0;break;case Ji:if((h.tag===5||h.tag===6)&&(h=Te(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case uo:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function fs(h){switch(h.$$typeof){case Fl:return"<"+(N(h.value)||"Unknown")+">";case Nl:return":has("+(fs(h)||"")+")";case Ol:return'[role="'+h.value+'"]';case Ji:return'"'+h.value+'"';case uo:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function fo(h,d){var _=[];h=[h,0];for(var E=0;E<h.length;){var P=h[E++],D=h[E++],K=d[D];if(P.tag!==5||!Fe(P)){for(;K!=null&&th(P,K);)D++,K=d[D];if(D===d.length)_.push(P);else for(P=P.child;P!==null;)h.push(P,D),P=P.sibling}}return _}function qc(h,d){if(!X)throw Error(o(363));h=Yc(h),h=fo(h,d),d=[],h=Array.from(h);for(var _=0;_<h.length;){var E=h[_++];if(E.tag===5)Fe(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return d}var sg=Math.ceil,jr=l.ReactCurrentDispatcher,Is=l.ReactCurrentOwner,Bn=l.ReactCurrentBatchConfig,Kt=0,kn=null,Wn=null,gi=0,Ki=0,ho=sn(0),qn=0,kl=null,Fa=0,Ul=0,Na=0,Yo=null,Yi=null,nh=0,qo=1/0;function Oa(){qo=ii()+500}var Qo=!1,Xr=null,Jr=null,Zo=!1,sr=null,zl=0,Bs=0,ih=null,Hl=-1,Cn=0;function yi(){return(Kt&6)!==0?ii():Hl!==-1?Hl:Hl=ii()}function Ds(h){return(h.mode&1)===0?1:(Kt&2)!==0&&gi!==0?gi&-gi:Wm.transition!==null?(Cn===0&&(h=ml,ml<<=1,(ml&4194240)===0&&(ml=64),Cn=h),Cn):(h=Zt,h!==0?h:Ue())}function or(h,d,_){if(50<Bs)throw Bs=0,ih=null,Error(o(185));var E=ka(h,d);return E===null?null:(pa(E,d,_),((Kt&2)===0||E!==kn)&&(E===kn&&((Kt&2)===0&&(Ul|=d),qn===4&&hs(E,gi)),Li(E,_),d===1&&Kt===0&&(h.mode&1)===0&&(Oa(),_f&&kr())),E)}function ka(h,d){h.lanes|=d;var _=h.alternate;for(_!==null&&(_.lanes|=d),_=h,h=h.return;h!==null;)h.childLanes|=d,_=h.alternate,_!==null&&(_.childLanes|=d),_=h,h=h.return;return _.tag===3?_.stateNode:null}function Li(h,d){var _=h.callbackNode;Vm(h,d);var E=bc(h,h===kn?gi:0);if(E===0)_!==null&&yl(_),h.callbackNode=null,h.callbackPriority=0;else if(d=E&-E,h.callbackPriority!==d){if(_!=null&&yl(_),d===1)h.tag===0?Sf(Gl.bind(null,h)):Af(Gl.bind(null,h)),xt?tt(function(){Kt===0&&kr()}):ma(ga,kr),_=null;else{switch(Qs(E)){case 1:_=ga;break;case 4:_=X0;break;case 16:_=vf;break;case 536870912:_=xf;break;default:_=vf}_=eu(_,$o.bind(null,h))}h.callbackPriority=d,h.callbackNode=_}}function $o(h,d){if(Hl=-1,Cn=0,(Kt&6)!==0)throw Error(o(327));var _=h.callbackNode;if(ta()&&h.callbackNode!==_)return null;var E=bc(h,h===kn?gi:0);if(E===0)return null;if((E&30)!==0||(E&h.expiredLanes)!==0||d)d=Er(h,E);else{d=E;var P=Kt;Kt|=2;var D=sh();(kn!==h||gi!==d)&&(Oa(),Gn(h,d));do try{Zc();break}catch(ae){rh(h,ae)}while(!0);Gi(),jr.current=D,Kt=P,Wn!==null?d=0:(kn=null,gi=0,d=qn)}if(d!==0){if(d===2&&(P=mf(h),P!==0&&(E=P,d=Rn(h,P))),d===1)throw _=kl,Gn(h,0),hs(h,E),Li(h,ii()),_;if(d===6)hs(h,E);else{if(P=h.current.alternate,(E&30)===0&&!vi(P)&&(d=Er(h,E),d===2&&(D=mf(h),D!==0&&(E=D,d=Rn(h,D))),d===1))throw _=kl,Gn(h,0),hs(h,E),Li(h,ii()),_;switch(h.finishedWork=P,h.finishedLanes=E,d){case 0:case 1:throw Error(o(345));case 2:ea(h,Yi);break;case 3:if(hs(h,E),(E&130023424)===E&&(d=nh+500-ii(),10<d)){if(bc(h,0)!==0)break;if(P=h.suspendedLanes,(P&E)!==E){yi(),h.pingedLanes|=h.suspendedLanes&P;break}h.timeoutHandle=Ie(ea.bind(null,h,Yi),d);break}ea(h,Yi);break;case 4:if(hs(h,E),(E&4194240)===E)break;for(d=h.eventTimes,P=-1;0<E;){var K=31-Bi(E);D=1<<K,K=d[K],K>P&&(P=K),E&=~D}if(E=P,E=ii()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*sg(E/1960))-E,10<E){h.timeoutHandle=Ie(ea.bind(null,h,Yi),E);break}ea(h,Yi);break;case 5:ea(h,Yi);break;default:throw Error(o(329))}}}return Li(h,ii()),h.callbackNode===_?$o.bind(null,h):null}function Rn(h,d){var _=Yo;return h.current.memoizedState.isDehydrated&&(Gn(h,d).flags|=256),h=Er(h,d),h!==2&&(d=Yi,Yi=_,d!==null&&jn(d)),h}function jn(h){Yi===null?Yi=h:Yi.push.apply(Yi,h)}function vi(h){for(var d=h;;){if(d.flags&16384){var _=d.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var E=0;E<_.length;E++){var P=_[E],D=P.getSnapshot;P=P.value;try{if(!Hi(D(),P))return!1}catch{return!1}}}if(_=d.child,d.subtreeFlags&16384&&_!==null)_.return=d,d=_;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function hs(h,d){for(d&=~Na,d&=~Ul,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var _=31-Bi(d),E=1<<_;h[_]=-1,d&=~E}}function Gl(h){if((Kt&6)!==0)throw Error(o(327));ta();var d=bc(h,0);if((d&1)===0)return Li(h,ii()),null;var _=Er(h,d);if(h.tag!==0&&_===2){var E=mf(h);E!==0&&(d=E,_=Rn(h,E))}if(_===1)throw _=kl,Gn(h,0),hs(h,d),Li(h,ii()),_;if(_===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,ea(h,Yi),Li(h,ii()),null}function Vl(h){sr!==null&&sr.tag===0&&(Kt&6)===0&&ta();var d=Kt;Kt|=1;var _=Bn.transition,E=Zt;try{if(Bn.transition=null,Zt=1,h)return h()}finally{Zt=E,Bn.transition=_,Kt=d,(Kt&6)===0&&kr()}}function Qd(){Ki=ho.current,Ot(ho)}function Gn(h,d){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==rt&&(h.timeoutHandle=rt,Xe(_)),Wn!==null)for(_=Wn.return;_!==null;){var E=_;switch(Rd(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Nr();break;case 3:Cl(),Ot(zt),Ot(on),wa();break;case 5:Bd(E);break;case 4:Cl();break;case 13:Ot(Nn);break;case 19:Ot(Nn);break;case 10:Bc(E.type._context);break;case 22:case 23:Qd()}_=_.return}if(kn=h,Wn=h=po(h.current,null),gi=Ki=d,qn=0,kl=null,Na=Ul=Fa=0,Yi=Yo=null,Ur!==null){for(d=0;d<Ur.length;d++)if(_=Ur[d],E=_.interleaved,E!==null){_.interleaved=null;var P=E.next,D=_.pending;if(D!==null){var K=D.next;D.next=P,E.next=K}_.pending=E}Ur=null}return h}function rh(h,d){do{var _=Wn;try{if(Gi(),Lc.current=Il,Lf){for(var E=On.memoizedState;E!==null;){var P=E.queue;P!==null&&(P.pending=null),E=E.next}Lf=!1}if(Ea=0,hi=fi=On=null,Ts=!1,Ca=0,Is.current=null,_===null||_.return===null){qn=1,kl=d,Wn=null;break}e:{var D=h,K=_.return,ae=_,Ce=d;if(d=gi,ae.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Ye=Ce,yt=ae,Wt=yt.tag;if((yt.mode&1)===0&&(Wt===0||Wt===11||Wt===15)){var Pt=yt.alternate;Pt?(yt.updateQueue=Pt.updateQueue,yt.memoizedState=Pt.memoizedState,yt.lanes=Pt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var Mn=Gd(K);if(Mn!==null){Mn.flags&=-257,Ta(Mn,K,ae,D,d),Mn.mode&1&&ro(D,Ye,d),d=Mn,Ce=Ye;var dt=d.updateQueue;if(dt===null){var vn=new Set;vn.add(Ce),d.updateQueue=vn}else dt.add(Ce);break e}else{if((d&1)===0){ro(D,Ye,d),Qc();break e}Ce=Error(o(426))}}else if(In&&ae.mode&1){var br=Gd(K);if(br!==null){(br.flags&65536)===0&&(br.flags|=256),Ta(br,K,ae,D,d),If(Ce);break e}}D=Ce,qn!==4&&(qn=2),Yo===null?Yo=[D]:Yo.push(D),Ce=Hd(Ce,ae),ae=K;do{switch(ae.tag){case 3:ae.flags|=65536,d&=-d,ae.lanes|=d;var _e=ig(ae,Ce,d);Ef(ae,_e);break e;case 1:D=Ce;var fe=ae.type,Ee=ae.stateNode;if((ae.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||Ee!==null&&typeof Ee.componentDidCatch=="function"&&(Jr===null||!Jr.has(Ee)))){ae.flags|=65536,d&=-d,ae.lanes|=d;var ut=Wf(ae,D,d);Ef(ae,ut);break e}}ae=ae.return}while(ae!==null)}ah(_)}catch(wt){d=wt,Wn===_&&_!==null&&(Wn=_=_.return);continue}break}while(!0)}function sh(){var h=jr.current;return jr.current=Il,h===null?Il:h}function Qc(){(qn===0||qn===3||qn===2)&&(qn=4),kn===null||(Fa&268435455)===0&&(Ul&268435455)===0||hs(kn,gi)}function Er(h,d){var _=Kt;Kt|=2;var E=sh();kn===h&&gi===d||Gn(h,d);do try{Kr();break}catch(P){rh(h,P)}while(!0);if(Gi(),Kt=_,jr.current=E,Wn!==null)throw Error(o(261));return kn=null,gi=0,qn}function Kr(){for(;Wn!==null;)oh(Wn)}function Zc(){for(;Wn!==null&&!zo();)oh(Wn)}function oh(h){var d=ep(h.alternate,h,Ki);h.memoizedProps=h.pendingProps,d===null?ah(h):Wn=d,Is.current=null}function ah(h){var d=h;do{var _=d.alternate;if(h=d.return,(d.flags&32768)===0){if(_=Jf(_,d,Ki),_!==null){Wn=_;return}}else{if(_=qf(_,d),_!==null){_.flags&=32767,Wn=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{qn=6,Wn=null;return}}if(d=d.sibling,d!==null){Wn=d;return}Wn=d=h}while(d!==null);qn===0&&(qn=5)}function ea(h,d){var _=Zt,E=Bn.transition;try{Bn.transition=null,Zt=1,og(h,d,_)}finally{Bn.transition=E,Zt=_}return null}function og(h,d,_){do ta();while(sr!==null);if((Kt&6)!==0)throw Error(o(327));var E=h.finishedWork,P=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var D=E.lanes|E.childLanes;if(yf(h,D),h===kn&&(Wn=kn=null,gi=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||Zo||(Zo=!0,eu(vf,function(){return ta(),null})),D=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||D){D=Bn.transition,Bn.transition=null;var K=Zt;Zt=1;var ae=Kt;Kt|=4,Is.current=null,Jd(h,E),Y0(h,E),z(h.containerInfo),h.current=E,cs(E),j0(),Kt=ae,Zt=K,Bn.transition=D}else h.current=E;if(Zo&&(Zo=!1,sr=h,zl=P),D=h.pendingLanes,D===0&&(Jr=null),Rc(E.stateNode),Li(h,ii()),d!==null)for(_=h.onRecoverableError,E=0;E<d.length;E++)_(d[E]);if(Qo)throw Qo=!1,h=Xr,Xr=null,h;return(zl&1)!==0&&h.tag!==0&&ta(),D=h.pendingLanes,(D&1)!==0?h===ih?Bs++:(Bs=0,ih=h):Bs=0,kr(),null}function ta(){if(sr!==null){var h=Qs(zl),d=Bn.transition,_=Zt;try{if(Bn.transition=null,Zt=16>h?16:h,sr===null)var E=!1;else{if(h=sr,sr=null,zl=0,(Kt&6)!==0)throw Error(o(331));var P=Kt;for(Kt|=4,$e=h.current;$e!==null;){var D=$e,K=D.child;if(($e.flags&16)!==0){var ae=D.deletions;if(ae!==null){for(var Ce=0;Ce<ae.length;Ce++){var Ye=ae[Ce];for($e=Ye;$e!==null;){var yt=$e;switch(yt.tag){case 0:case 11:case 15:co(8,yt,D)}var Wt=yt.child;if(Wt!==null)Wt.return=yt,$e=Wt;else for(;$e!==null;){yt=$e;var Pt=yt.sibling,Mn=yt.return;if(Kd(yt),yt===Ye){$e=null;break}if(Pt!==null){Pt.return=Mn,$e=Pt;break}$e=Mn}}}var dt=D.alternate;if(dt!==null){var vn=dt.child;if(vn!==null){dt.child=null;do{var br=vn.sibling;vn.sibling=null,vn=br}while(vn!==null)}}$e=D}}if((D.subtreeFlags&2064)!==0&&K!==null)K.return=D,$e=K;else e:for(;$e!==null;){if(D=$e,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:co(9,D,D.return)}var _e=D.sibling;if(_e!==null){_e.return=D.return,$e=_e;break e}$e=D.return}}var fe=h.current;for($e=fe;$e!==null;){K=$e;var Ee=K.child;if((K.subtreeFlags&2064)!==0&&Ee!==null)Ee.return=K,$e=Ee;else e:for(K=fe;$e!==null;){if(ae=$e,(ae.flags&2048)!==0)try{switch(ae.tag){case 0:case 11:case 15:Ci(9,ae)}}catch(wt){qi(ae,ae.return,wt)}if(ae===K){$e=null;break e}var ut=ae.sibling;if(ut!==null){ut.return=ae.return,$e=ut;break e}$e=ae.return}}if(Kt=P,kr(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(Tc,h)}catch{}E=!0}return E}finally{Zt=_,Bn.transition=d}}return!1}function Zd(h,d,_){d=Hd(_,d),d=ig(h,d,1),Ho(h,d),d=yi(),h=ka(h,1),h!==null&&(pa(h,1,d),Li(h,d))}function qi(h,d,_){if(h.tag===3)Zd(h,h,_);else for(;d!==null;){if(d.tag===3){Zd(d,h,_);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Jr===null||!Jr.has(E))){h=Hd(_,h),h=Wf(d,h,1),Ho(d,h),h=yi(),d=ka(d,1),d!==null&&(pa(d,1,h),Li(d,h));break}}d=d.return}}function ag(h,d,_){var E=h.pingCache;E!==null&&E.delete(d),d=yi(),h.pingedLanes|=h.suspendedLanes&_,kn===h&&(gi&_)===_&&(qn===4||qn===3&&(gi&130023424)===gi&&500>ii()-nh?Gn(h,0):Na|=_),Li(h,d)}function $d(h,d){d===0&&((h.mode&1)===0?d=1:(d=hn,hn<<=1,(hn&130023424)===0&&(hn=4194304)));var _=yi();h=ka(h,d),h!==null&&(pa(h,d,_),Li(h,_))}function lg(h){var d=h.memoizedState,_=0;d!==null&&(_=d.retryLane),$d(h,_)}function $c(h,d){var _=0;switch(h.tag){case 13:var E=h.stateNode,P=h.memoizedState;P!==null&&(_=P.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(d),$d(h,_)}var ep;ep=function(h,d,_){if(h!==null)if(h.memoizedProps!==d.pendingProps||zt.current)pi=!0;else{if((h.lanes&_)===0&&(d.flags&128)===0)return pi=!1,Yf(h,d,_);pi=(h.flags&131072)!==0}else pi=!1,In&&(d.flags&1048576)!==0&&Ym(d,Rf,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var P=Ii(d,on.current);vl(d,_),P=bl(null,d,E,h,P,_);var D=jo();return d.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,mn(E)?(D=!0,ko(d)):D=!1,d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,xl(d),P.updater=bf,d.stateNode=P,P._reactInternals=d,bd(d,E,h,_),d=Di(null,d,E,!0,D,_)):(d.tag=0,In&&D&&Td(d),Hn(null,d,P,_),d=d.child),d;case 16:E=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,P=E._init,E=P(E._payload),d.type=E,P=d.tag=cg(E),h=tr(E,h),P){case 0:d=ao(null,d,E,h,_);break e;case 1:d=Pa(null,d,E,h,_);break e;case 11:d=En(null,d,E,h,_);break e;case 14:d=Sn(null,d,E,tr(E.type,h),_);break e}throw Error(o(306,E,""))}return d;case 0:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:tr(E,P),ao(h,d,E,P,_);case 1:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:tr(E,P),Pa(h,d,E,P,_);case 3:e:{if(Vc(d),h===null)throw Error(o(387));E=d.pendingProps,D=d.memoizedState,P=D.element,wd(h,d),Cf(d,E,null,_);var K=d.memoizedState;if(E=K.element,j&&D.isDehydrated)if(D={element:E,isDehydrated:!1,cache:K.cache,transitions:K.transitions},d.updateQueue.baseState=D,d.memoizedState=D,d.flags&256){P=Error(o(423)),d=Wd(h,d,E,_,P);break e}else if(E!==P){P=Error(o(424)),d=Wd(h,d,E,_,P);break e}else for(j&&(wi=pl(d.stateNode.containerInfo),Vi=d,In=!0,Gr=null,Al=!1),_=Zm(d,null,E,_),d.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Sl(),E===P){d=rr(h,d,_);break e}Hn(h,d,E,_)}d=d.child}return d;case 5:return $m(d),h===null&&Vo(d),E=d.type,P=d.pendingProps,D=h!==null?h.memoizedProps:null,K=P.children,ve(E,P)?K=null:D!==null&&ve(E,D)&&(d.flags|=32),Wi(h,d),Hn(h,d,K,_),d.child;case 6:return h===null&&Vo(d),null;case 13:return jd(h,d,_);case 4:return Bf(d,d.stateNode.containerInfo),E=d.pendingProps,h===null?d.child=no(d,null,E,_):Hn(h,d,E,_),d.child;case 11:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:tr(E,P),En(h,d,E,P,_);case 7:return Hn(h,d,d.pendingProps,_),d.child;case 8:return Hn(h,d,d.pendingProps.children,_),d.child;case 12:return Hn(h,d,d.pendingProps.children,_),d.child;case 10:e:{if(E=d.type._context,P=d.pendingProps,D=d.memoizedProps,K=P.value,va(d,E,K),D!==null)if(Hi(D.value,K)){if(D.children===P.children&&!zt.current){d=rr(h,d,_);break e}}else for(D=d.child,D!==null&&(D.return=d);D!==null;){var ae=D.dependencies;if(ae!==null){K=D.child;for(var Ce=ae.firstContext;Ce!==null;){if(Ce.context===E){if(D.tag===1){Ce=$s(-1,_&-_),Ce.tag=2;var Ye=D.updateQueue;if(Ye!==null){Ye=Ye.shared;var yt=Ye.pending;yt===null?Ce.next=Ce:(Ce.next=yt.next,yt.next=Ce),Ye.pending=Ce}}D.lanes|=_,Ce=D.alternate,Ce!==null&&(Ce.lanes|=_),xa(D.return,_,d),ae.lanes|=_;break}Ce=Ce.next}}else if(D.tag===10)K=D.type===d.type?null:D.child;else if(D.tag===18){if(K=D.return,K===null)throw Error(o(341));K.lanes|=_,ae=K.alternate,ae!==null&&(ae.lanes|=_),xa(K,_,d),K=D.sibling}else K=D.child;if(K!==null)K.return=D;else for(K=D;K!==null;){if(K===d){K=null;break}if(D=K.sibling,D!==null){D.return=K.return,K=D;break}K=K.return}D=K}Hn(h,d,P.children,_),d=d.child}return d;case 9:return P=d.type,E=d.pendingProps.children,vl(d,_),P=nr(P),E=E(P),d.flags|=1,Hn(h,d,E,_),d.child;case 14:return E=d.type,P=tr(E,d.pendingProps),P=tr(E.type,P),Sn(h,d,E,P,_);case 15:return oo(h,d,d.type,d.pendingProps,_);case 17:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:tr(E,P),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,mn(E)?(h=!0,ko(d)):h=!1,vl(d,_),Jm(d,E,P),bd(d,E,P,_),Di(null,d,E,!0,h,_);case 19:return Ba(h,d,_);case 22:return Ei(h,d,_)}throw Error(o(156,d.tag))};function eu(h,d){return ma(h,d)}function lh(h,d,_,E){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cr(h,d,_,E){return new lh(h,d,_,E)}function tu(h){return h=h.prototype,!(!h||!h.isReactComponent)}function cg(h){if(typeof h=="function")return tu(h)?1:0;if(h!=null){if(h=h.$$typeof,h===w)return 11;if(h===C)return 14}return 2}function po(h,d){var _=h.alternate;return _===null?(_=Cr(h.tag,d,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=d,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,d=h.dependencies,_.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function nu(h,d,_,E,P,D){var K=2;if(E=h,typeof h=="function")tu(h)&&(K=1);else if(typeof h=="string")K=5;else e:switch(h){case p:return na(_.children,P,D,d);case m:K=8,P|=8;break;case y:return h=Cr(12,_,d,P|2),h.elementType=y,h.lanes=D,h;case S:return h=Cr(13,_,d,P),h.elementType=S,h.lanes=D,h;case M:return h=Cr(19,_,d,P),h.elementType=M,h.lanes=D,h;case R:return Wl(_,P,D,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case v:K=10;break e;case x:K=9;break e;case w:K=11;break e;case C:K=14;break e;case b:K=16,E=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return d=Cr(K,_,d,P),d.elementType=h,d.type=E,d.lanes=D,d}function na(h,d,_,E){return h=Cr(7,h,E,d),h.lanes=_,h}function Wl(h,d,_,E){return h=Cr(22,h,E,d),h.elementType=R,h.lanes=_,h.stateNode={},h}function ch(h,d,_){return h=Cr(6,h,null,d),h.lanes=_,h}function uh(h,d,_){return d=Cr(4,h.children!==null?h.children:[],h.key,d),d.lanes=_,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function ug(h,d,_,E,P){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gf(0),this.expirationTimes=gf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gf(0),this.identifierPrefix=E,this.onRecoverableError=P,j&&(this.mutableSourceEagerHydrationData=null)}function fg(h,d,_,E,P,D,K,ae,Ce){return h=new ug(h,d,_,ae,Ce),d===1?(d=1,D===!0&&(d|=8)):d=0,D=Cr(3,null,null,d),h.current=D,D.stateNode=h,D.memoizedState={element:E,isDehydrated:_,cache:null,transitions:null},xl(D),h}function tp(h){if(!h)return ot;h=h._reactInternals;e:{if(J(h)!==h||h.tag!==1)throw Error(o(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(mn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(h.tag===1){var _=h.type;if(mn(_))return is(h,_,d)}return d}function hg(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=ne(d),h===null?null:h.stateNode}function dg(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<d?_:d}}function fh(h,d){dg(h,d),(h=h.alternate)&&dg(h,d)}function pg(h){return h=ne(h),h===null?null:h.stateNode}function mg(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var d=yi();or(h,134217728,d),fh(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=yi(),_=Ds(h);or(h,_,d),fh(h,_)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var _=gl(d.pendingLanes);_!==0&&(Cs(d,_|1),Li(d,ii()),(Kt&6)===0&&(Oa(),kr()))}break;case 13:var E=yi();Vl(function(){return or(h,1,E)}),fh(h,1)}},t.batchedUpdates=function(h,d){var _=Kt;Kt|=1;try{return h(d)}finally{Kt=_,Kt===0&&(Oa(),_f&&kr())}},t.createComponentSelector=function(h){return{$$typeof:Fl,value:h}},t.createContainer=function(h,d,_,E,P,D,K){return fg(h,d,!1,null,_,E,P,D,K)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Nl,value:h}},t.createHydrationContainer=function(h,d,_,E,P,D,K,ae,Ce){return h=fg(_,E,!0,h,P,D,K,ae,Ce),h.context=tp(null),_=h.current,E=yi(),P=Ds(_),D=$s(E,P),D.callback=d??null,Ho(_,D),h.current.lanes=P,pa(h,P,E),Li(h,E),h},t.createPortal=function(h,d,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:E==null?null:""+E,children:h,containerInfo:d,implementation:_}},t.createRoleSelector=function(h){return{$$typeof:Ol,value:h}},t.createTestNameSelector=function(h){return{$$typeof:uo,value:h}},t.createTextSelector=function(h){return{$$typeof:Ji,value:h}},t.deferredUpdates=function(h){var d=Zt,_=Bn.transition;try{return Bn.transition=null,Zt=16,h()}finally{Zt=d,Bn.transition=_}},t.discreteUpdates=function(h,d,_,E,P){var D=Zt,K=Bn.transition;try{return Bn.transition=null,Zt=1,h(d,_,E,P)}finally{Zt=D,Bn.transition=K,Kt===0&&Oa()}},t.findAllNodes=qc,t.findBoundingRects=function(h,d){if(!X)throw Error(o(363));d=qc(h,d),h=[];for(var _=0;_<d.length;_++)h.push(me(d[_]));for(d=h.length-1;0<d;d--){_=h[d];for(var E=_.x,P=E+_.width,D=_.y,K=D+_.height,ae=d-1;0<=ae;ae--)if(d!==ae){var Ce=h[ae],Ye=Ce.x,yt=Ye+Ce.width,Wt=Ce.y,Pt=Wt+Ce.height;if(E>=Ye&&D>=Wt&&P<=yt&&K<=Pt){h.splice(d,1);break}else if(E!==Ye||_.width!==Ce.width||Pt<D||Wt>K){if(!(D!==Wt||_.height!==Ce.height||yt<E||Ye>P)){Ye>E&&(Ce.width+=Ye-E,Ce.x=E),yt<P&&(Ce.width=P-Ye),h.splice(d,1);break}}else{Wt>D&&(Ce.height+=Wt-D,Ce.y=D),Pt<K&&(Ce.height=K-Wt),h.splice(d,1);break}}}return h},t.findHostInstance=hg,t.findHostInstanceWithNoPortals=function(h){return h=L(h),h=h!==null?ce(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return hg(h)},t.flushControlled=function(h){var d=Kt;Kt|=1;var _=Bn.transition,E=Zt;try{Bn.transition=null,Zt=1,h()}finally{Zt=E,Bn.transition=_,Kt=d,Kt===0&&(Oa(),kr())}},t.flushPassiveEffects=ta,t.flushSync=Vl,t.focusWithin=function(h,d){if(!X)throw Error(o(363));for(h=Yc(h),d=fo(h,d),d=Array.from(d),h=0;h<d.length;){var _=d[h++];if(!Fe(_)){if(_.tag===5&&gt(_.stateNode))return!0;for(_=_.child;_!==null;)d.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Zt},t.getFindAllNodesFailureDescription=function(h,d){if(!X)throw Error(o(363));var _=0,E=[];h=[Yc(h),0];for(var P=0;P<h.length;){var D=h[P++],K=h[P++],ae=d[K];if((D.tag!==5||!Fe(D))&&(th(D,ae)&&(E.push(fs(ae)),K++,K>_&&(_=K)),K<d.length))for(D=D.child;D!==null;)h.push(D,K),D=D.sibling}if(_<d.length){for(h=[];_<d.length;_++)h.push(fs(d[_]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return le(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:pg,findFiberByHostInstance:h.findFiberByHostInstance||mg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{Tc=d.inject(h),bs=d}catch{}h=!!d.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,d,_,E){if(!X)throw Error(o(363));h=qc(h,d);var P=Ve(h,_,E).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(h,d){var _=d._getVersion;_=_(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,_]:h.mutableSourceEagerHydrationData.push(d,_)},t.runWithPriority=function(h,d){var _=Zt;try{return Zt=h,d()}finally{Zt=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,d,_,E){var P=d.current,D=yi(),K=Ds(P);return _=tp(_),d.context===null?d.context=_:d.pendingContext=_,d=$s(D,K),d.payload={element:h},E=E===void 0?null:E,E!==null&&(d.callback=E),Ho(P,d),h=or(P,K,D),h!==null&&wf(h,P,K),K},t}),x_}var pE;function wU(){return pE||(pE=1,g_.exports=MU()),g_.exports}var EU=wU();const CU=Kv(EU);var __={exports:{}},A_={};var mE;function bU(){return mE||(mE=1,(function(i){function e(G,Z){var z=G.length;G.push(Z);e:for(;0<z;){var Y=z-1>>>1,pe=G[Y];if(0<r(pe,Z))G[Y]=Z,G[z]=pe,z=Y;else break e}}function t(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var Z=G[0],z=G.pop();if(z!==Z){G[0]=z;e:for(var Y=0,pe=G.length,Ne=pe>>>1;Y<Ne;){var oe=2*(Y+1)-1,ve=G[oe],be=oe+1,Ie=G[be];if(0>r(ve,z))be<pe&&0>r(Ie,ve)?(G[Y]=Ie,G[be]=z,Y=be):(G[Y]=ve,G[oe]=z,Y=oe);else if(be<pe&&0>r(Ie,z))G[Y]=Ie,G[be]=z,Y=be;else break e}}return Z}function r(G,Z){var z=G.sortIndex-Z.sortIndex;return z!==0?z:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],f=[],p=1,m=null,y=3,v=!1,x=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(G){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=G)n(f),Z.sortIndex=Z.expirationTime,e(c,Z);else break;Z=t(f)}}function R(G){if(w=!1,b(G),!x)if(t(c)!==null)x=!0,le(O);else{var Z=t(f);Z!==null&&ye(R,Z.startTime-G)}}function O(G,Z){x=!1,w&&(w=!1,M(U),U=-1),v=!0;var z=y;try{for(b(Z),m=t(c);m!==null&&(!(m.expirationTime>Z)||G&&!L());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,y=m.priorityLevel;var pe=Y(m.expirationTime<=Z);Z=i.unstable_now(),typeof pe=="function"?m.callback=pe:m===t(c)&&n(c),b(Z)}else n(c);m=t(c)}if(m!==null)var Ne=!0;else{var oe=t(f);oe!==null&&ye(R,oe.startTime-Z),Ne=!1}return Ne}finally{m=null,y=z,v=!1}}var F=!1,N=null,U=-1,J=5,B=-1;function L(){return!(i.unstable_now()-B<J)}function ne(){if(N!==null){var G=i.unstable_now();B=G;var Z=!0;try{Z=N(!0,G)}finally{Z?ie():(F=!1,N=null)}}else F=!1}var ie;if(typeof C=="function")ie=function(){C(ne)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,de=ce.port2;ce.port1.onmessage=ne,ie=function(){de.postMessage(null)}}else ie=function(){S(ne,0)};function le(G){N=G,F||(F=!0,ie())}function ye(G,Z){U=S(function(){G(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_continueExecution=function(){x||v||(x=!0,le(O))},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var z=y;y=Z;try{return G()}finally{y=z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var z=y;y=G;try{return Z()}finally{y=z}},i.unstable_scheduleCallback=function(G,Z,z){var Y=i.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Y+z:Y):z=Y,G){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=z+pe,G={id:p++,callback:Z,priorityLevel:G,startTime:z,expirationTime:pe,sortIndex:-1},z>Y?(G.sortIndex=z,e(f,G),t(c)===null&&G===t(f)&&(w?(M(U),U=-1):w=!0,ye(R,z-Y))):(G.sortIndex=pe,e(c,G),x||v||(x=!0,le(O))),G},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(G){var Z=y;return function(){var z=y;y=Z;try{return G.apply(this,arguments)}finally{y=z}}}})(A_)),A_}var gE;function TU(){return gE||(gE=1,__.exports=bU()),__.exports}var yE=TU();const RU=i=>typeof i=="object"&&typeof i.then=="function",Nu=[];function BR(i,e,t=(n,r)=>n===r){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let r=0;r<n;r++)if(!t(i[r],e[r]))return!1;return!0}function DR(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const s of Nu)if(BR(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:n.equal,remove:()=>{const s=Nu.indexOf(r);s!==-1&&Nu.splice(s,1)},promise:(RU(i)?i:i(...e)).then(s=>{r.response=s,n.lifespan&&n.lifespan>0&&(r.timeout=setTimeout(r.remove,n.lifespan))}).catch(s=>r.error=s)};if(Nu.push(r),!t)throw r.promise}const PU=(i,e,t)=>DR(i,e,!1,t),IU=(i,e,t)=>void DR(i,e,!0,t),BU=i=>{if(i===void 0||i.length===0)Nu.splice(0,Nu.length);else{const e=Nu.find(t=>BR(i,t.keys,t.equal));e&&e.remove()}},rM={},DU=i=>void Object.assign(rM,i);function LU(i,e){function t(p,{args:m=[],attach:y,...v},x){let w=`${p[0].toUpperCase()}${p.slice(1)}`,S;if(p==="primitive"){if(v.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=v.object;S=Nh(M,{type:p,root:x,attach:y,primitive:!0})}else{const M=rM[w];if(!M)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");S=Nh(new M(...m),{type:p,root:x,attach:y,memoizedProps:{args:m}})}return S.__r3f.attach===void 0&&(S instanceof jt?S.__r3f.attach="geometry":S instanceof Si&&(S.__r3f.attach="material")),w!=="inject"&&w_(S,v),S}function n(p,m){let y=!1;if(m){var v,x;(v=m.__r3f)!=null&&v.attach?M_(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),y=!0),y||(x=p.__r3f)==null||x.objects.push(m),m.__r3f||Nh(m,{}),m.__r3f.parent=p,UA(m),Oh(m)}}function r(p,m,y){let v=!1;if(m){var x,w;if((x=m.__r3f)!=null&&x.attach)M_(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const S=p.children.filter(C=>C!==m),M=S.indexOf(y);p.children=[...S.slice(0,M),m,...S.slice(M)],v=!0}v||(w=p.__r3f)==null||w.objects.push(m),m.__r3f||Nh(m,{}),m.__r3f.parent=p,UA(m),Oh(m)}}function s(p,m,y=!1){p&&[...p].forEach(v=>o(m,v,y))}function o(p,m,y){if(m){var v,x,w;if(m.__r3f&&(m.__r3f.parent=null),(v=p.__r3f)!=null&&v.objects&&(p.__r3f.objects=p.__r3f.objects.filter(R=>R!==m)),(x=m.__r3f)!=null&&x.attach)SE(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var S;p.remove(m),(S=m.__r3f)!=null&&S.root&&GU(m.__r3f.root,m)}const C=(w=m.__r3f)==null?void 0:w.primitive,b=y===void 0?m.dispose!==null&&!C:y;if(!C){var M;s((M=m.__r3f)==null?void 0:M.objects,m,b),s(m.children,m,b)}delete m.__r3f,b&&m.dispose&&m.type!=="Scene"&&yE.unstable_scheduleCallback(yE.unstable_IdlePriority,()=>{try{m.dispose()}catch{}}),Oh(p)}}function l(p,m,y,v){var x;const w=(x=p.__r3f)==null?void 0:x.parent;if(!w)return;const S=t(m,y,p.__r3f.root);if(p.children){for(const M of p.children)M.__r3f&&n(S,M);p.children=p.children.filter(M=>!M.__r3f)}p.__r3f.objects.forEach(M=>n(S,M)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(w,p),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),n(w,S),S.raycast&&S.__r3f.eventCount&&S.__r3f.root.getState().internal.interaction.push(S),[v,v.alternate].forEach(M=>{M!==null&&(M.stateNode=S,M.ref&&(typeof M.ref=="function"?M.ref(S):M.ref.current=S))})}const c=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:CU({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const y=p.getState().scene;y.__r3f&&(y.__r3f.root=p,n(y,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,y)=>{if(!m||!y)return;const v=p.getState().scene;v.__r3f&&r(v,m,y)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p?.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,y,v){var x;if(((x=p?.__r3f)!=null?x:{}).primitive&&v.object&&v.object!==p)return[!0];{const{args:S=[],children:M,...C}=v,{args:b=[],children:R,...O}=y;if(!Array.isArray(S))throw new Error("R3F: the args prop must be an array!");if(S.some((N,U)=>N!==b[U]))return[!0];const F=zR(p,C,O,!0);return F.changes.length?[!1,F]:null}},commitUpdate(p,[m,y],v,x,w,S){m?l(p,v,w,S):w_(p,y)},commitMount(p,m,y,v){var x;const w=(x=p.__r3f)!=null?x:{};p.raycast&&w.handlers&&w.eventCount&&p.__r3f.root.getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Nh(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:y,parent:v}=(m=p.__r3f)!=null?m:{};y&&v&&SE(v,p,y),p.isObject3D&&(p.visible=!1),Oh(p)},unhideInstance(p,m){var y;const{attach:v,parent:x}=(y=p.__r3f)!=null?y:{};v&&x&&M_(x,p,v),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),Oh(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Hh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Un.fun(performance.now)?performance.now:Un.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Un.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Un.fun(clearTimeout)?clearTimeout:void 0}),applyProps:w_}}var vE,xE;const S_=i=>"colorSpace"in i||"outputColorSpace"in i,LR=()=>{var i;return(i=rM.ColorManagement)!=null?i:null},FR=i=>i&&i.isOrthographicCamera,FU=i=>i&&i.hasOwnProperty("current"),Lm=typeof window<"u"&&((vE=window.document)!=null&&vE.createElement||((xE=window.navigator)==null?void 0:xE.product)==="ReactNative")?q.useLayoutEffect:q.useEffect;function NR(i){const e=q.useRef(i);return Lm(()=>void(e.current=i),[i]),e}function NU({set:i}){return Lm(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class OR extends q.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}OR.getDerivedStateFromError=()=>({error:!0});const kR="__default",_E=new Map,OU=i=>i&&!!i.memoized&&!!i.changes;function UR(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Sp=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()},Un={obj:i=>i===Object(i)&&!Un.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Un.str(i)||Un.num(i))return i===e;const s=Un.obj(i);if(s&&n==="reference")return i===e;const o=Un.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in r?e:i)if(!Un.equ(i[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:i)if(i[l]!==e[l])return!1;if(Un.und(l)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function kU(i){const e={nodes:{},materials:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function UU(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function Nh(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function kA(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const AE=/-\d+$/;function M_(i,e,t){if(Un.str(t)){if(AE.test(t)){const s=t.replace(AE,""),{target:o,key:l}=kA(i,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:r}=kA(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function SE(i,e,t){var n,r;if(Un.str(t)){const{target:s,key:o}=kA(i,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function zR(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:l,...c}={},f=!1){var p;const m=(p=i?.__r3f)!=null?p:{},y=Object.entries(r),v=[];if(f){const w=Object.keys(c);for(let S=0;S<w.length;S++)r.hasOwnProperty(w[S])||y.unshift([w[S],kR+"remove"])}y.forEach(([w,S])=>{var M;if((M=i.__r3f)!=null&&M.primitive&&w==="object"||Un.equ(S,c[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return v.push([w,S,!0,[]]);let C=[];w.includes("-")&&(C=w.split("-")),v.push([w,S,!1,C]);for(const b in r){const R=r[b];b.startsWith(`${w}-`)&&v.push([b,R,!1,b.split("-")])}});const x={...r};return m.memoizedProps&&m.memoizedProps.args&&(x.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(x.attach=m.memoizedProps.attach),{memoized:x,changes:v}}function w_(i,e){var t,n,r;const s=(t=i.__r3f)!=null?t:{},o=s.root,l=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:c,changes:f}=OU(e)?e:zR(i,e),p=s.eventCount;i.__r3f&&(i.__r3f.memoizedProps=c);for(let y=0;y<f.length;y++){let[v,x,w,S]=f[y];if(S_(i)){const R="srgb",O="srgb-linear";v==="encoding"?(v="colorSpace",x=x===3001?R:O):v==="outputEncoding"&&(v="outputColorSpace",x=x===3001?R:O)}let M=i,C=M[v];if(S.length&&(C=S.reduce((b,R)=>b[R],i),!(C&&C.set))){const[b,...R]=S.reverse();M=R.reverse().reduce((O,F)=>O[F],i),v=b}if(x===kR+"remove")if(M.constructor){let b=_E.get(M.constructor);b||(b=new M.constructor,_E.set(M.constructor,b)),x=b[v]}else x=0;if(w)x?s.handlers[v]=x:delete s.handlers[v],s.eventCount=Object.keys(s.handlers).length;else if(C&&C.set&&(C.copy||C instanceof Vu)){if(Array.isArray(x))C.fromArray?C.fromArray(x):C.set(...x);else if(C.copy&&x&&x.constructor&&C.constructor===x.constructor)C.copy(x);else if(x!==void 0){const b=C instanceof it;!b&&C.setScalar?C.setScalar(x):C instanceof Vu&&x instanceof Vu?C.mask=x.mask:C.set(x),!LR()&&!l.linear&&b&&C.convertSRGBToLinear()}}else if(M[v]=x,M[v]instanceof Pn&&M[v].format===dr&&M[v].type===bo){const b=M[v];S_(b)&&S_(l.gl)?b.colorSpace=l.gl.outputColorSpace:b.encoding=l.gl.outputEncoding}Oh(i)}if(s.parent&&l.internal&&i.raycast&&p!==s.eventCount){const y=l.internal.interaction.indexOf(i);y>-1&&l.internal.interaction.splice(y,1),s.eventCount&&l.internal.interaction.push(i)}return!(f.length===1&&f[0][0]==="onUpdate")&&f.length&&(r=i.__r3f)!=null&&r.parent&&UA(i),i}function Oh(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function UA(i){i.onUpdate==null||i.onUpdate(i)}function zU(i,e){i.manual||(FR(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Ry(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function HU(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Hh.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hh.ContinuousEventPriority;default:return Hh.DefaultEventPriority}}function HR(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function GU(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{HR(t.capturedMap,e,n,r)})}function VU(i){function e(c){const{internal:f}=i.getState(),p=c.offsetX-f.initialClick[0],m=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=f.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function n(c,f){const p=i.getState(),m=new Set,y=[],v=f?f(p.internal.interaction):p.internal.interaction;for(let M=0;M<v.length;M++){const C=Sp(v[M]);C&&(C.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function x(M){const C=Sp(M);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var b;C.events.compute==null||C.events.compute(c,C,(b=C.previousRoot)==null?void 0:b.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(M,!0):[]}let w=v.flatMap(x).sort((M,C)=>{const b=Sp(M.object),R=Sp(C.object);return!b||!R?M.distance-C.distance:R.events.priority-b.events.priority||M.distance-C.distance}).filter(M=>{const C=Ry(M);return m.has(C)?!1:(m.add(C),!0)});p.events.filter&&(w=p.events.filter(w,p));for(const M of w){let C=M.object;for(;C;){var S;(S=C.__r3f)!=null&&S.eventCount&&y.push({...M,eventObject:C}),C=C.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let M of p.internal.capturedMap.get(c.pointerId).values())m.has(Ry(M.intersection))||y.push(M.intersection);return y}function r(c,f,p,m){const y=i.getState();if(c.length){const v={stopped:!1};for(const x of c){const w=Sp(x.object)||y,{raycaster:S,pointer:M,camera:C,internal:b}=w,R=new W(M.x,M.y,0).unproject(C),O=B=>{var L,ne;return(L=(ne=b.capturedMap.get(B))==null?void 0:ne.has(x.eventObject))!=null?L:!1},F=B=>{const L={intersection:x,target:f.target};b.capturedMap.has(B)?b.capturedMap.get(B).set(x.eventObject,L):b.capturedMap.set(B,new Map([[x.eventObject,L]])),f.target.setPointerCapture(B)},N=B=>{const L=b.capturedMap.get(B);L&&HR(b.capturedMap,x.eventObject,L,B)};let U={};for(let B in f){let L=f[B];typeof L!="function"&&(U[B]=L)}let J={...x,...U,pointer:M,intersections:c,stopped:v.stopped,delta:p,unprojectedPoint:R,ray:S.ray,camera:C,stopPropagation(){const B="pointerId"in f&&b.capturedMap.get(f.pointerId);if((!B||B.has(x.eventObject))&&(J.stopped=v.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(L=>L.eventObject===x.eventObject))){const L=c.slice(0,c.indexOf(x));s([...L,x])}},target:{hasPointerCapture:O,setPointerCapture:F,releasePointerCapture:N},currentTarget:{hasPointerCapture:O,setPointerCapture:F,releasePointerCapture:N},nativeEvent:f};if(m(J),v.stopped===!0)break}}return c}function s(c){const{internal:f}=i.getState();for(const p of f.hovered.values())if(!c.length||!c.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const y=p.eventObject.__r3f,v=y?.handlers;if(f.hovered.delete(Ry(p)),y!=null&&y.eventCount){const x={...p,intersections:c};v.onPointerOut==null||v.onPointerOut(x),v.onPointerLeave==null||v.onPointerLeave(x)}}}function o(c,f){for(let p=0;p<f.length;p++){const m=f[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:p}=i.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:y}=i.getState();y.lastEvent.current=p;const v=c==="onPointerMove",x=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",S=n(p,v?t:void 0),M=x?e(p):0;c==="onPointerDown"&&(y.initialClick=[p.offsetX,p.offsetY],y.initialHits=S.map(b=>b.eventObject)),x&&!S.length&&M<=2&&(o(p,y.interaction),m&&m(p)),v&&s(S);function C(b){const R=b.eventObject,O=R.__r3f,F=O?.handlers;if(O!=null&&O.eventCount)if(v){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const N=Ry(b),U=y.hovered.get(N);U?U.stopped&&b.stopPropagation():(y.hovered.set(N,b),F.onPointerOver==null||F.onPointerOver(b),F.onPointerEnter==null||F.onPointerEnter(b))}F.onPointerMove==null||F.onPointerMove(b)}else{const N=F[c];N?(!x||y.initialHits.includes(R))&&(o(p,y.interaction.filter(U=>!y.initialHits.includes(U))),N(b)):x&&y.initialHits.includes(R)&&o(p,y.interaction.filter(U=>!y.initialHits.includes(U)))}}r(S,p,M,C)}}return{handlePointer:l}}const GR=i=>!!(i!=null&&i.render),VR=q.createContext(null),WU=(i,e)=>{const t=_U((l,c)=>{const f=new W,p=new W,m=new W;function y(M=c().camera,C=p,b=c().size){const{width:R,height:O,top:F,left:N}=b,U=R/O;C instanceof W?m.copy(C):m.set(...C);const J=M.getWorldPosition(f).distanceTo(m);if(FR(M))return{width:R/M.zoom,height:O/M.zoom,top:F,left:N,factor:1,distance:J,aspect:U};{const B=M.fov*Math.PI/180,L=2*Math.tan(B/2)*J,ne=L*(R/O);return{width:ne,height:L,top:F,left:N,factor:R/ne,distance:J,aspect:U}}}let v;const x=M=>l(C=>({performance:{...C.performance,current:M}})),w=new De;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>i(c(),M),advance:(M,C)=>e(M,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new P0,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=c();v&&clearTimeout(v),M.performance.current!==M.performance.min&&x(M.performance.min),v=setTimeout(()=>x(c().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:M=>l(C=>({...C,events:{...C.events,...M}})),setSize:(M,C,b,R,O)=>{const F=c().camera,N={width:M,height:C,top:R||0,left:O||0,updateStyle:b};l(U=>({size:N,viewport:{...U.viewport,...y(F,p,N)}}))},setDpr:M=>l(C=>{const b=UR(M);return{viewport:{...C.viewport,dpr:b,initialDpr:C.viewport.initialDpr||b}}}),setFrameloop:(M="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,M!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:q.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,C,b)=>{const R=c().internal;return R.priority=R.priority+(C>0?1:0),R.subscribers.push({ref:M,priority:C,store:b}),R.subscribers=R.subscribers.sort((O,F)=>O.priority-F.priority),()=>{const O=c().internal;O!=null&&O.subscribers&&(O.priority=O.priority-(C>0?1:0),O.subscribers=O.subscribers.filter(F=>F.ref!==M))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:p,set:m}=t.getState();if(c!==r||f.dpr!==s){var y;r=c,s=f.dpr,zU(l,c),p.setPixelRatio(f.dpr);const v=(y=c.updateStyle)!=null?y:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,v)}l!==o&&(o=l,m(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>i(l)),t};let Py,jU=new Set,XU=new Set,JU=new Set;function E_(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Mp(i,e){switch(i){case"before":return E_(jU,e);case"after":return E_(XU,e);case"tail":return E_(JU,e)}}let C_,b_;function T_(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),C_=e.internal.subscribers,Py=0;Py<C_.length;Py++)b_=C_[Py],b_.ref.current(b_.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function KU(i){let e=!1,t,n,r;function s(c){n=requestAnimationFrame(s),e=!0,t=0,Mp("before",c);for(const p of i.values()){var f;r=p.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((f=r.gl.xr)!=null&&f.isPresenting)&&(t+=T_(c,r))}if(Mp("after",c),t===0)return Mp("tail",c),e=!1,cancelAnimationFrame(n)}function o(c,f=1){var p;if(!c)return i.forEach(m=>o(m.store.getState()),f);(p=c.gl.xr)!=null&&p.isPresenting||!c.internal.active||c.frameloop==="never"||(c.internal.frames=Math.min(60,c.internal.frames+f),e||(e=!0,requestAnimationFrame(s)))}function l(c,f=!0,p,m){if(f&&Mp("before",c),p)T_(c,p,m);else for(const y of i.values())T_(c,y.store.getState());f&&Mp("after",c)}return{loop:s,invalidate:o,advance:l}}function WR(){const i=q.useContext(VR);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function ys(i=t=>t,e){return WR()(i,e)}function _d(i,e=0){const t=WR(),n=t.getState().internal.subscribe,r=NR(i);return Lm(()=>n(r,e,t),[e,n,t]),null}function jR(i,e){return function(t,...n){const r=new t;return i&&i(r),Promise.all(n.map(s=>new Promise((o,l)=>r.load(s,c=>{c.scene&&Object.assign(c,kU(c.scene)),o(c)},e,c=>l(new Error(`Could not load ${s}: ${c.message}`))))))}}function Mc(i,e,t,n){const r=Array.isArray(e)?e:[e],s=PU(jR(t,n),[i,...r],{equal:Un.equ});return Array.isArray(e)?s:s[0]}Mc.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return IU(jR(t),[i,...n])};Mc.clear=function(i,e){const t=Array.isArray(e)?e:[e];return BU([i,...t])};const od=new Map,{invalidate:ME,advance:wE}=KU(od),{reconciler:Bv,applyProps:sa}=LU(od,HU),Lh={objects:"shallow",strict:!1},YU=(i,e)=>{const t=typeof i=="function"?i(e):i;return GR(t)?t:new FS({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function qU(i,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:r,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:s}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function QU(i){const e=od.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||WU(ME,wE),o=t||Bv.createContainer(s,Hh.ConcurrentRoot,null,!1,null,"",r,null);e||od.set(i,{fiber:o,store:s});let l,c=!1,f;return{configure(p={}){let{gl:m,size:y,scene:v,events:x,onCreated:w,shadows:S=!1,linear:M=!1,flat:C=!1,legacy:b=!1,orthographic:R=!1,frameloop:O="always",dpr:F=[1,2],performance:N,raycaster:U,camera:J,onPointerMissed:B}=p,L=s.getState(),ne=L.gl;L.gl||L.set({gl:ne=YU(m,i)});let ie=L.raycaster;ie||L.set({raycaster:ie=new PR});const{params:ce,...de}=U||{};if(Un.equ(de,ie,Lh)||sa(ie,{...de}),Un.equ(ce,ie.params,Lh)||sa(ie,{params:{...ie.params,...ce}}),!L.camera||L.camera===f&&!Un.equ(f,J,Lh)){f=J;const pe=J instanceof wm,Ne=pe?J:R?new js(0,0,0,0,.1,1e3):new Ln(75,0,.1,1e3);pe||(Ne.position.z=5,J&&sa(Ne,J),!L.camera&&!(J!=null&&J.rotation)&&Ne.lookAt(0,0,0)),L.set({camera:Ne})}if(!L.scene){let pe;v instanceof om?pe=v:(pe=new om,v&&sa(pe,v)),L.set({scene:Nh(pe)})}if(!L.xr){var le;const pe=(ve,be)=>{const Ie=s.getState();Ie.frameloop!=="never"&&wE(ve,!0,Ie,be)},Ne=()=>{const ve=s.getState();ve.gl.xr.enabled=ve.gl.xr.isPresenting,ve.gl.xr.setAnimationLoop(ve.gl.xr.isPresenting?pe:null),ve.gl.xr.isPresenting||ME(ve)},oe={connect(){const ve=s.getState().gl;ve.xr.addEventListener("sessionstart",Ne),ve.xr.addEventListener("sessionend",Ne)},disconnect(){const ve=s.getState().gl;ve.xr.removeEventListener("sessionstart",Ne),ve.xr.removeEventListener("sessionend",Ne)}};typeof((le=ne.xr)==null?void 0:le.addEventListener)=="function"&&oe.connect(),L.set({xr:oe})}if(ne.shadowMap){const pe=ne.shadowMap.enabled,Ne=ne.shadowMap.type;if(ne.shadowMap.enabled=!!S,Un.boo(S))ne.shadowMap.type=Fp;else if(Un.str(S)){var ye;const oe={basic:Vb,percentage:Zv,soft:Fp,variance:Ao};ne.shadowMap.type=(ye=oe[S])!=null?ye:Fp}else Un.obj(S)&&Object.assign(ne.shadowMap,S);(pe!==ne.shadowMap.enabled||Ne!==ne.shadowMap.type)&&(ne.shadowMap.needsUpdate=!0)}const G=LR();G&&("enabled"in G?G.enabled=!b:"legacyMode"in G&&(G.legacyMode=b)),sa(ne,{outputEncoding:M?3e3:3001,toneMapping:C?aa:fS}),L.legacy!==b&&L.set(()=>({legacy:b})),L.linear!==M&&L.set(()=>({linear:M})),L.flat!==C&&L.set(()=>({flat:C})),m&&!Un.fun(m)&&!GR(m)&&!Un.equ(m,ne,Lh)&&sa(ne,m),x&&!L.events.handlers&&L.set({events:x(s)});const Y=qU(i,y);return Un.equ(Y,L.size,Lh)||L.setSize(Y.width,Y.height,Y.updateStyle,Y.top,Y.left),F&&L.viewport.dpr!==UR(F)&&L.setDpr(F),L.frameloop!==O&&L.setFrameloop(O),L.onPointerMissed||L.set({onPointerMissed:B}),N&&!Un.equ(N,L.performance,Lh)&&L.set(pe=>({performance:{...pe.performance,...N}})),l=w,c=!0,this},render(p){return c||this.configure(),Bv.updateContainer(q.createElement(ZU,{store:s,children:p,onCreated:l,rootElement:i}),o,null,()=>{}),s},unmount(){XR(i)}}}function ZU({store:i,children:e,onCreated:t,rootElement:n}){return Lm(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),q.createElement(VR.Provider,{value:i},e)}function XR(i,e){const t=od.get(i),n=t?.fiber;if(n){const r=t?.store.getState();r&&(r.internal.active=!1),Bv.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),UU(r),od.delete(i)}catch{}},500)})}}Bv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:q.version});function Xs(){return Xs=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Xs.apply(null,arguments)}var R_,EE;function $U(){if(EE)return R_;EE=1;function i(e,t,n){var r,s,o,l,c;t==null&&(t=100);function f(){var m=Date.now()-l;m<t&&m>=0?r=setTimeout(f,t-m):(r=null,n||(c=e.apply(o,s),o=s=null))}var p=function(){o=this,s=arguments,l=Date.now();var m=n&&!r;return r||(r=setTimeout(f,t)),m&&(c=e.apply(o,s),o=s=null),c};return p.clear=function(){r&&(clearTimeout(r),r=null)},p.flush=function(){r&&(c=e.apply(o,s),o=s=null,clearTimeout(r),r=null)},p}return i.debounce=i,R_=i,R_}var ez=$U();const CE=Kv(ez);function tz(i){let{debounce:e,scroll:t,polyfill:n,offsetSize:r}=i===void 0?{debounce:0,scroll:!1,offsetSize:!1}:i;const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,l]=q.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=q.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),f=e?typeof e=="number"?e:e.scroll:null,p=e?typeof e=="number"?e:e.resize:null,m=q.useRef(!1);q.useEffect(()=>(m.current=!0,()=>void(m.current=!1)));const[y,v,x]=q.useMemo(()=>{const C=()=>{if(!c.current.element)return;const{left:b,top:R,width:O,height:F,bottom:N,right:U,x:J,y:B}=c.current.element.getBoundingClientRect(),L={left:b,top:R,width:O,height:F,bottom:N,right:U,x:J,y:B};c.current.element instanceof HTMLElement&&r&&(L.height=c.current.element.offsetHeight,L.width=c.current.element.offsetWidth),Object.freeze(L),m.current&&!sz(c.current.lastBounds,L)&&l(c.current.lastBounds=L)};return[C,p?CE(C,p):C,f?CE(C,f):C]},[l,r,f,p]);function w(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(C=>C.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function S(){c.current.element&&(c.current.resizeObserver=new s(x),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(C=>C.addEventListener("scroll",x,{capture:!0,passive:!0})))}const M=C=>{!C||C===c.current.element||(w(),c.current.element=C,c.current.scrollContainers=JR(C),S())};return iz(x,!!t),nz(v),q.useEffect(()=>{w(),S()},[t,x,v]),q.useEffect(()=>w,[]),[M,o,y]}function nz(i){q.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function iz(i,e){q.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function JR(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...JR(i.parentElement)]}const rz=["x","y","top","bottom","left","right","width","height"],sz=(i,e)=>rz.every(t=>i[t]===e[t]);var oz=Object.defineProperty,az=Object.defineProperties,lz=Object.getOwnPropertyDescriptors,bE=Object.getOwnPropertySymbols,cz=Object.prototype.hasOwnProperty,uz=Object.prototype.propertyIsEnumerable,TE=(i,e,t)=>e in i?oz(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,RE=(i,e)=>{for(var t in e||(e={}))cz.call(e,t)&&TE(i,t,e[t]);if(bE)for(var t of bE(e))uz.call(e,t)&&TE(i,t,e[t]);return i},fz=(i,e)=>az(i,lz(e));function KR(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=KR(n,e,t);if(r)return r;n=n.sibling}}function YR(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const sM=YR(q.createContext(null));class qR extends q.Component{render(){return q.createElement(sM.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:PE,ReactCurrentDispatcher:IE}=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function hz(){const i=q.useContext(sM);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=q.useId();return q.useMemo(()=>{for(const n of[PE?.current,i,i?.alternate]){if(!n)continue;const r=KR(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function dz(){var i,e;const t=hz(),[n]=q.useState(()=>new Map);n.clear();let r=t;for(;r;){const s=(i=r.type)==null?void 0:i._context;s&&s!==sM&&!n.has(s)&&n.set(s,(e=IE?.current)==null?void 0:e.readContext(YR(s))),r=r.return}return n}function pz(){const i=dz();return q.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>q.createElement(e,null,q.createElement(t.Provider,fz(RE({},n),{value:i.get(t)}))),e=>q.createElement(qR,RE({},e))),[i])}const P_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function mz(i){const{handlePointer:e}=VU(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(P_).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[c,f]=P_[o];t.addEventListener(c,l,{passive:f})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=P_[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const gz=q.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=mz,eventSource:l,eventPrefix:c,shadows:f,linear:p,flat:m,legacy:y,orthographic:v,frameloop:x,dpr:w,performance:S,raycaster:M,camera:C,scene:b,onPointerMissed:R,onCreated:O,...F},N){q.useMemo(()=>DU(mU),[]);const U=pz(),[J,B]=tz({scroll:!0,debounce:{scroll:50,resize:0},...n}),L=q.useRef(null),ne=q.useRef(null);q.useImperativeHandle(N,()=>L.current);const ie=NR(R),[ce,de]=q.useState(!1),[le,ye]=q.useState(!1);if(ce)throw ce;if(le)throw le;const G=q.useRef(null);Lm(()=>{const z=L.current;B.width>0&&B.height>0&&z&&(G.current||(G.current=QU(z)),G.current.configure({gl:s,events:o,shadows:f,linear:p,flat:m,legacy:y,orthographic:v,frameloop:x,dpr:w,performance:S,raycaster:M,camera:C,scene:b,size:B,onPointerMissed:(...Y)=>ie.current==null?void 0:ie.current(...Y),onCreated:Y=>{Y.events.connect==null||Y.events.connect(l?FU(l)?l.current:l:ne.current),c&&Y.setEvents({compute:(pe,Ne)=>{const oe=pe[c+"X"],ve=pe[c+"Y"];Ne.pointer.set(oe/Ne.size.width*2-1,-(ve/Ne.size.height)*2+1),Ne.raycaster.setFromCamera(Ne.pointer,Ne.camera)}}),O?.(Y)}}),G.current.render(q.createElement(U,null,q.createElement(OR,{set:ye},q.createElement(q.Suspense,{fallback:q.createElement(NU,{set:de})},e)))))}),q.useEffect(()=>{const z=L.current;if(z)return()=>XR(z)},[]);const Z=l?"none":"auto";return q.createElement("div",Xs({ref:ne,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...r}},F),q.createElement("div",{ref:J,style:{width:"100%",height:"100%"}},q.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),I0=q.forwardRef(function(e,t){return q.createElement(qR,null,q.createElement(gz,Xs({},e,{ref:t})))}),Fm=new W,oM=new W,yz=new W,BE=new De;function vz(i,e,t){const n=Fm.setFromMatrixPosition(i.matrixWorld);n.project(e);const r=t.width/2,s=t.height/2;return[n.x*r+r,-(n.y*s)+s]}function xz(i,e){const t=Fm.setFromMatrixPosition(i.matrixWorld),n=oM.setFromMatrixPosition(e.matrixWorld),r=t.sub(n),s=e.getWorldDirection(yz);return r.angleTo(s)>Math.PI/2}function _z(i,e,t,n){const r=Fm.setFromMatrixPosition(i.matrixWorld),s=r.clone();s.project(e),BE.set(s.x,s.y),t.setFromCamera(BE,e);const o=t.intersectObjects(n,!0);if(o.length){const l=o[0].distance;return r.distanceTo(t.ray.origin)<l}return!0}function Az(i,e){if(e instanceof js)return e.zoom;if(e instanceof Ln){const t=Fm.setFromMatrixPosition(i.matrixWorld),n=oM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(n);return 1/(2*Math.tan(r/2)*s)}else return 1}function Sz(i,e,t){if(e instanceof Ln||e instanceof js){const n=Fm.setFromMatrixPosition(i.matrixWorld),r=oM.setFromMatrixPosition(e.matrixWorld),s=n.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),l=t[1]-o*e.far;return Math.round(o*s+l)}}const zA=i=>Math.abs(i)<1e-10?0:i;function QR(i,e,t=""){let n="matrix3d(";for(let r=0;r!==16;r++)n+=zA(e[r]*i.elements[r])+(r!==15?",":")");return t+n}const Mz=(i=>e=>QR(e,i))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),wz=(i=>(e,t)=>QR(e,i(t),"translate(-50%,-50%)"))(i=>[1/i,1/i,1/i,1,-1/i,-1/i,-1/i,-1,1/i,1/i,1/i,1,1,1,1,1]);function Ez(i){return i&&typeof i=="object"&&"current"in i}const Cz=q.forwardRef(({children:i,eps:e=.001,style:t,className:n,prepend:r,center:s,fullscreen:o,portal:l,distanceFactor:c,sprite:f=!1,transform:p=!1,occlude:m,onOcclude:y,castShadow:v,receiveShadow:x,material:w,geometry:S,zIndexRange:M=[16777271,0],calculatePosition:C=vz,as:b="div",wrapperClass:R,pointerEvents:O="auto",...F},N)=>{const{gl:U,camera:J,scene:B,size:L,raycaster:ne,events:ie,viewport:ce}=ys(),[de]=q.useState(()=>document.createElement(b)),le=q.useRef(),ye=q.useRef(null),G=q.useRef(0),Z=q.useRef([0,0]),z=q.useRef(null),Y=q.useRef(null),pe=l?.current||ie.connected||U.domElement.parentNode,Ne=q.useRef(null),oe=q.useRef(!1),ve=q.useMemo(()=>m&&m!=="blending"||Array.isArray(m)&&m.length&&Ez(m[0]),[m]);q.useLayoutEffect(()=>{const pt=U.domElement;m&&m==="blending"?(pt.style.zIndex=`${Math.floor(M[0]/2)}`,pt.style.position="absolute",pt.style.pointerEvents="none"):(pt.style.zIndex=null,pt.style.position=null,pt.style.pointerEvents=null)},[m]),q.useLayoutEffect(()=>{if(ye.current){const pt=le.current=Pb.createRoot(de);if(B.updateMatrixWorld(),p)de.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const We=C(ye.current,J,L);de.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${We[0]}px,${We[1]}px,0);transform-origin:0 0;`}return pe&&(r?pe.prepend(de):pe.appendChild(de)),()=>{pe&&pe.removeChild(de),pt.unmount()}}},[pe,p]),q.useLayoutEffect(()=>{R&&(de.className=R)},[R]);const be=q.useMemo(()=>p?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,o,L,p]),Ie=q.useMemo(()=>({position:"absolute",pointerEvents:O}),[O]);q.useLayoutEffect(()=>{if(oe.current=!1,p){var pt;(pt=le.current)==null||pt.render(q.createElement("div",{ref:z,style:be},q.createElement("div",{ref:Y,style:Ie},q.createElement("div",{ref:N,className:n,style:t,children:i}))))}else{var We;(We=le.current)==null||We.render(q.createElement("div",{ref:N,style:be,className:n,children:i}))}});const Xe=q.useRef(!0);_d(pt=>{if(ye.current){J.updateMatrixWorld(),ye.current.updateWorldMatrix(!0,!1);const We=p?Z.current:C(ye.current,J,L);if(p||Math.abs(G.current-J.zoom)>e||Math.abs(Z.current[0]-We[0])>e||Math.abs(Z.current[1]-We[1])>e){const Pe=xz(ye.current,J);let j=!1;ve&&(Array.isArray(m)?j=m.map(Ge=>Ge.current):m!=="blending"&&(j=[B]));const Je=Xe.current;if(j){const Ge=_z(ye.current,J,ne,j);Xe.current=Ge&&!Pe}else Xe.current=!Pe;Je!==Xe.current&&(y?y(!Xe.current):de.style.display=Xe.current?"block":"none");const Ke=Math.floor(M[0]/2),Ue=m?ve?[M[0],Ke]:[Ke-1,0]:M;if(de.style.zIndex=`${Sz(ye.current,J,Ue)}`,p){const[Ge,xt]=[L.width/2,L.height/2],tt=J.projectionMatrix.elements[5]*xt,{isOrthographicCamera:X,top:H,left:me,bottom:Te,right:Fe}=J,Be=Mz(J.matrixWorldInverse),gt=X?`scale(${tt})translate(${zA(-(Fe+me)/2)}px,${zA((H+Te)/2)}px)`:`translateZ(${tt}px)`;let Ve=ye.current.matrixWorld;f&&(Ve=J.matrixWorldInverse.clone().transpose().copyPosition(Ve).scale(ye.current.scale),Ve.elements[3]=Ve.elements[7]=Ve.elements[11]=0,Ve.elements[15]=1),de.style.width=L.width+"px",de.style.height=L.height+"px",de.style.perspective=X?"":`${tt}px`,z.current&&Y.current&&(z.current.style.transform=`${gt}${Be}translate(${Ge}px,${xt}px)`,Y.current.style.transform=wz(Ve,1/((c||10)/400)))}else{const Ge=c===void 0?1:Az(ye.current,J)*c;de.style.transform=`translate3d(${We[0]}px,${We[1]}px,0) scale(${Ge})`}Z.current=We,G.current=J.zoom}}if(!ve&&Ne.current&&!oe.current)if(p){if(z.current){const We=z.current.children[0];if(We!=null&&We.clientWidth&&We!=null&&We.clientHeight){const{isOrthographicCamera:Pe}=J;if(Pe||S)F.scale&&(Array.isArray(F.scale)?F.scale instanceof W?Ne.current.scale.copy(F.scale.clone().divideScalar(1)):Ne.current.scale.set(1/F.scale[0],1/F.scale[1],1/F.scale[2]):Ne.current.scale.setScalar(1/F.scale));else{const j=(c||10)/400,Je=We.clientWidth*j,Ke=We.clientHeight*j;Ne.current.scale.set(Je,Ke,1)}oe.current=!0}}}else{const We=de.children[0];if(We!=null&&We.clientWidth&&We!=null&&We.clientHeight){const Pe=1/ce.factor,j=We.clientWidth*Pe,Je=We.clientHeight*Pe;Ne.current.scale.set(j,Je,1),oe.current=!0}Ne.current.lookAt(pt.camera.position)}});const rt=q.useMemo(()=>({vertexShader:p?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[p]);return q.createElement("group",Xs({},F,{ref:ye}),m&&!ve&&q.createElement("mesh",{castShadow:v,receiveShadow:x,ref:Ne},S||q.createElement("planeGeometry",null),w||q.createElement("shaderMaterial",{side:Vs,vertexShader:rt.vertexShader,fragmentShader:rt.fragmentShader})))}),bz=parseInt(hd.replace(/\D+/g,""));function DE(i,e){if(e===_T)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Tv||e===SS){let t=i.getIndex();if(t===null){const o=[],l=i.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(t)if(e===Tv)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var Tz=Object.defineProperty,Rz=(i,e,t)=>e in i?Tz(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Vt=(i,e,t)=>(Rz(i,typeof e!="symbol"?e+"":e,t),t);const Iy=new sf,LE=new Ka,Pz=Math.cos(70*(Math.PI/180)),FE=(i,e)=>(i%e+e)%e;let Iz=class extends Do{constructor(e,t){super(),Vt(this,"object"),Vt(this,"domElement"),Vt(this,"enabled",!0),Vt(this,"target",new W),Vt(this,"minDistance",0),Vt(this,"maxDistance",1/0),Vt(this,"minZoom",0),Vt(this,"maxZoom",1/0),Vt(this,"minPolarAngle",0),Vt(this,"maxPolarAngle",Math.PI),Vt(this,"minAzimuthAngle",-1/0),Vt(this,"maxAzimuthAngle",1/0),Vt(this,"enableDamping",!1),Vt(this,"dampingFactor",.05),Vt(this,"enableZoom",!0),Vt(this,"zoomSpeed",1),Vt(this,"enableRotate",!0),Vt(this,"rotateSpeed",1),Vt(this,"enablePan",!0),Vt(this,"panSpeed",1),Vt(this,"screenSpacePanning",!0),Vt(this,"keyPanSpeed",7),Vt(this,"zoomToCursor",!1),Vt(this,"autoRotate",!1),Vt(this,"autoRotateSpeed",2),Vt(this,"reverseOrbit",!1),Vt(this,"reverseHorizontalOrbit",!1),Vt(this,"reverseVerticalOrbit",!1),Vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Vt(this,"mouseButtons",{LEFT:Mu.ROTATE,MIDDLE:Mu.DOLLY,RIGHT:Mu.PAN}),Vt(this,"touches",{ONE:wu.ROTATE,TWO:wu.DOLLY_PAN}),Vt(this,"target0"),Vt(this,"position0"),Vt(this,"zoom0"),Vt(this,"_domElementKeyEvents",null),Vt(this,"getPolarAngle"),Vt(this,"getAzimuthalAngle"),Vt(this,"setPolarAngle"),Vt(this,"setAzimuthalAngle"),Vt(this,"getDistance"),Vt(this,"listenToKeyEvents"),Vt(this,"stopListenToKeyEvents"),Vt(this,"saveState"),Vt(this,"reset"),Vt(this,"update"),Vt(this,"connect"),Vt(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=re=>{let Re=FE(re,2*Math.PI),et=p.phi;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let $=Math.abs(Re-et);2*Math.PI-$<$&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),m.phi=Re-et,n.update()},this.setAzimuthalAngle=re=>{let Re=FE(re,2*Math.PI),et=p.theta;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let $=Math.abs(Re-et);2*Math.PI-$<$&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),m.theta=Re-et,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=re=>{re.addEventListener("keydown",Ve),this._domElementKeyEvents=re},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ve),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),c=l.NONE},this.update=(()=>{const re=new W,Re=new W(0,1,0),et=new ki().setFromUnitVectors(e.up,Re),$=et.clone().invert(),je=new W,we=new ki,Le=2*Math.PI;return function(){const ct=n.object.position;et.setFromUnitVectors(e.up,Re),$.copy(et).invert(),re.copy(ct).sub(n.target),re.applyQuaternion(et),p.setFromVector3(re),n.autoRotate&&c===l.NONE&&ce(ne()),n.enableDamping?(p.theta+=m.theta*n.dampingFactor,p.phi+=m.phi*n.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let kt=n.minAzimuthAngle,rn=n.maxAzimuthAngle;isFinite(kt)&&isFinite(rn)&&(kt<-Math.PI?kt+=Le:kt>Math.PI&&(kt-=Le),rn<-Math.PI?rn+=Le:rn>Math.PI&&(rn-=Le),kt<=rn?p.theta=Math.max(kt,Math.min(rn,p.theta)):p.theta=p.theta>(kt+rn)/2?Math.max(kt,p.theta):Math.min(rn,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(v,n.dampingFactor):n.target.add(v),n.zoomToCursor&&J||n.object.isOrthographicCamera?p.radius=pe(p.radius):p.radius=pe(p.radius*y),re.setFromSpherical(p),re.applyQuaternion($),ct.copy(n.target).add(re),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,v.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),v.set(0,0,0));let Fn=!1;if(n.zoomToCursor&&J){let Xt=null;if(n.object instanceof Ln&&n.object.isPerspectiveCamera){const bn=re.length();Xt=pe(bn*y);const ui=bn-Xt;n.object.position.addScaledVector(N,ui),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const bn=new W(U.x,U.y,0);bn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),Fn=!0;const ui=new W(U.x,U.y,0);ui.unproject(n.object),n.object.position.sub(ui).add(bn),n.object.updateMatrixWorld(),Xt=re.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Xt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Xt).add(n.object.position):(Iy.origin.copy(n.object.position),Iy.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Iy.direction))<Pz?e.lookAt(n.target):(LE.setFromNormalAndCoplanarPoint(n.object.up,n.target),Iy.intersectPlane(LE,n.target))))}else n.object instanceof js&&n.object.isOrthographicCamera&&(Fn=y!==1,Fn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,J=!1,Fn||je.distanceToSquared(n.object.position)>f||8*(1-we.dot(n.object.quaternion))>f?(n.dispatchEvent(r),je.copy(n.object.position),we.copy(n.object.quaternion),Fn=!1,!0):!1}})(),this.connect=re=>{n.domElement=re,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ze),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",Te),n.domElement.addEventListener("wheel",gt)},this.dispose=()=>{var re,Re,et,$,je,we;n.domElement&&(n.domElement.style.touchAction="auto"),(re=n.domElement)==null||re.removeEventListener("contextmenu",ze),(Re=n.domElement)==null||Re.removeEventListener("pointerdown",H),(et=n.domElement)==null||et.removeEventListener("pointercancel",Te),($=n.domElement)==null||$.removeEventListener("wheel",gt),(je=n.domElement)==null||je.ownerDocument.removeEventListener("pointermove",me),(we=n.domElement)==null||we.ownerDocument.removeEventListener("pointerup",Te),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ve)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,p=new OA,m=new OA;let y=1;const v=new W,x=new De,w=new De,S=new De,M=new De,C=new De,b=new De,R=new De,O=new De,F=new De,N=new W,U=new De;let J=!1;const B=[],L={};function ne(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ie(){return Math.pow(.95,n.zoomSpeed)}function ce(re){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=re:m.theta-=re}function de(re){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=re:m.phi-=re}const le=(()=>{const re=new W;return function(et,$){re.setFromMatrixColumn($,0),re.multiplyScalar(-et),v.add(re)}})(),ye=(()=>{const re=new W;return function(et,$){n.screenSpacePanning===!0?re.setFromMatrixColumn($,1):(re.setFromMatrixColumn($,0),re.crossVectors(n.object.up,re)),re.multiplyScalar(et),v.add(re)}})(),G=(()=>{const re=new W;return function(et,$){const je=n.domElement;if(je&&n.object instanceof Ln&&n.object.isPerspectiveCamera){const we=n.object.position;re.copy(we).sub(n.target);let Le=re.length();Le*=Math.tan(n.object.fov/2*Math.PI/180),le(2*et*Le/je.clientHeight,n.object.matrix),ye(2*$*Le/je.clientHeight,n.object.matrix)}else je&&n.object instanceof js&&n.object.isOrthographicCamera?(le(et*(n.object.right-n.object.left)/n.object.zoom/je.clientWidth,n.object.matrix),ye($*(n.object.top-n.object.bottom)/n.object.zoom/je.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Z(re){n.object instanceof Ln&&n.object.isPerspectiveCamera||n.object instanceof js&&n.object.isOrthographicCamera?y/=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(re){n.object instanceof Ln&&n.object.isPerspectiveCamera||n.object instanceof js&&n.object.isOrthographicCamera?y*=re:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Y(re){if(!n.zoomToCursor||!n.domElement)return;J=!0;const Re=n.domElement.getBoundingClientRect(),et=re.clientX-Re.left,$=re.clientY-Re.top,je=Re.width,we=Re.height;U.x=et/je*2-1,U.y=-($/we)*2+1,N.set(U.x,U.y,1).unproject(n.object).sub(n.object.position).normalize()}function pe(re){return Math.max(n.minDistance,Math.min(n.maxDistance,re))}function Ne(re){x.set(re.clientX,re.clientY)}function oe(re){Y(re),R.set(re.clientX,re.clientY)}function ve(re){M.set(re.clientX,re.clientY)}function be(re){w.set(re.clientX,re.clientY),S.subVectors(w,x).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ce(2*Math.PI*S.x/Re.clientHeight),de(2*Math.PI*S.y/Re.clientHeight)),x.copy(w),n.update()}function Ie(re){O.set(re.clientX,re.clientY),F.subVectors(O,R),F.y>0?Z(ie()):F.y<0&&z(ie()),R.copy(O),n.update()}function Xe(re){C.set(re.clientX,re.clientY),b.subVectors(C,M).multiplyScalar(n.panSpeed),G(b.x,b.y),M.copy(C),n.update()}function rt(re){Y(re),re.deltaY<0?z(ie()):re.deltaY>0&&Z(ie()),n.update()}function pt(re){let Re=!1;switch(re.code){case n.keys.UP:G(0,n.keyPanSpeed),Re=!0;break;case n.keys.BOTTOM:G(0,-n.keyPanSpeed),Re=!0;break;case n.keys.LEFT:G(n.keyPanSpeed,0),Re=!0;break;case n.keys.RIGHT:G(-n.keyPanSpeed,0),Re=!0;break}Re&&(re.preventDefault(),n.update())}function We(){if(B.length==1)x.set(B[0].pageX,B[0].pageY);else{const re=.5*(B[0].pageX+B[1].pageX),Re=.5*(B[0].pageY+B[1].pageY);x.set(re,Re)}}function Pe(){if(B.length==1)M.set(B[0].pageX,B[0].pageY);else{const re=.5*(B[0].pageX+B[1].pageX),Re=.5*(B[0].pageY+B[1].pageY);M.set(re,Re)}}function j(){const re=B[0].pageX-B[1].pageX,Re=B[0].pageY-B[1].pageY,et=Math.sqrt(re*re+Re*Re);R.set(0,et)}function Je(){n.enableZoom&&j(),n.enablePan&&Pe()}function Ke(){n.enableZoom&&j(),n.enableRotate&&We()}function Ue(re){if(B.length==1)w.set(re.pageX,re.pageY);else{const et=ht(re),$=.5*(re.pageX+et.x),je=.5*(re.pageY+et.y);w.set($,je)}S.subVectors(w,x).multiplyScalar(n.rotateSpeed);const Re=n.domElement;Re&&(ce(2*Math.PI*S.x/Re.clientHeight),de(2*Math.PI*S.y/Re.clientHeight)),x.copy(w)}function Ge(re){if(B.length==1)C.set(re.pageX,re.pageY);else{const Re=ht(re),et=.5*(re.pageX+Re.x),$=.5*(re.pageY+Re.y);C.set(et,$)}b.subVectors(C,M).multiplyScalar(n.panSpeed),G(b.x,b.y),M.copy(C)}function xt(re){const Re=ht(re),et=re.pageX-Re.x,$=re.pageY-Re.y,je=Math.sqrt(et*et+$*$);O.set(0,je),F.set(0,Math.pow(O.y/R.y,n.zoomSpeed)),Z(F.y),R.copy(O)}function tt(re){n.enableZoom&&xt(re),n.enablePan&&Ge(re)}function X(re){n.enableZoom&&xt(re),n.enableRotate&&Ue(re)}function H(re){var Re,et;n.enabled!==!1&&(B.length===0&&((Re=n.domElement)==null||Re.ownerDocument.addEventListener("pointermove",me),(et=n.domElement)==null||et.ownerDocument.addEventListener("pointerup",Te)),st(re),re.pointerType==="touch"?lt(re):Fe(re))}function me(re){n.enabled!==!1&&(re.pointerType==="touch"?Qt(re):Be(re))}function Te(re){var Re,et,$;Ft(re),B.length===0&&((Re=n.domElement)==null||Re.releasePointerCapture(re.pointerId),(et=n.domElement)==null||et.ownerDocument.removeEventListener("pointermove",me),($=n.domElement)==null||$.ownerDocument.removeEventListener("pointerup",Te)),n.dispatchEvent(o),c=l.NONE}function Fe(re){let Re;switch(re.button){case 0:Re=n.mouseButtons.LEFT;break;case 1:Re=n.mouseButtons.MIDDLE;break;case 2:Re=n.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case Mu.DOLLY:if(n.enableZoom===!1)return;oe(re),c=l.DOLLY;break;case Mu.ROTATE:if(re.ctrlKey||re.metaKey||re.shiftKey){if(n.enablePan===!1)return;ve(re),c=l.PAN}else{if(n.enableRotate===!1)return;Ne(re),c=l.ROTATE}break;case Mu.PAN:if(re.ctrlKey||re.metaKey||re.shiftKey){if(n.enableRotate===!1)return;Ne(re),c=l.ROTATE}else{if(n.enablePan===!1)return;ve(re),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function Be(re){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;be(re);break;case l.DOLLY:if(n.enableZoom===!1)return;Ie(re);break;case l.PAN:if(n.enablePan===!1)return;Xe(re);break}}function gt(re){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(re.preventDefault(),n.dispatchEvent(s),rt(re),n.dispatchEvent(o))}function Ve(re){n.enabled===!1||n.enablePan===!1||pt(re)}function lt(re){switch(It(re),B.length){case 1:switch(n.touches.ONE){case wu.ROTATE:if(n.enableRotate===!1)return;We(),c=l.TOUCH_ROTATE;break;case wu.PAN:if(n.enablePan===!1)return;Pe(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case wu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Je(),c=l.TOUCH_DOLLY_PAN;break;case wu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ke(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(s)}function Qt(re){switch(It(re),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ue(re),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;Ge(re),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;tt(re),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;X(re),n.update();break;default:c=l.NONE}}function ze(re){n.enabled!==!1&&re.preventDefault()}function st(re){B.push(re)}function Ft(re){delete L[re.pointerId];for(let Re=0;Re<B.length;Re++)if(B[Re].pointerId==re.pointerId){B.splice(Re,1);return}}function It(re){let Re=L[re.pointerId];Re===void 0&&(Re=new De,L[re.pointerId]=Re),Re.set(re.pageX,re.pageY)}function ht(re){const Re=re.pointerId===B[0].pointerId?B[1]:B[0];return L[Re.pointerId]}t!==void 0&&this.connect(t),this.update()}};function Dv(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Ou="srgb",tl="srgb-linear",NE=3001,Bz=3e3;class aM extends vr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Oz(t)}),this.register(function(t){return new kz(t)}),this.register(function(t){return new Jz(t)}),this.register(function(t){return new Kz(t)}),this.register(function(t){return new Yz(t)}),this.register(function(t){return new zz(t)}),this.register(function(t){return new Hz(t)}),this.register(function(t){return new Gz(t)}),this.register(function(t){return new Vz(t)}),this.register(function(t){return new Nz(t)}),this.register(function(t){return new Wz(t)}),this.register(function(t){return new Uz(t)}),this.register(function(t){return new Xz(t)}),this.register(function(t){return new jz(t)}),this.register(function(t){return new Lz(t)}),this.register(function(t){return new qz(t)}),this.register(function(t){return new Qz(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const f=hc.extractUrlBase(e);o=hc.resolveURL(f,this.path)}else o=hc.extractUrlBase(e);this.manager.itemStart(e);const l=function(f){r?r(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Ms(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){try{s.parse(f,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Dv(new Uint8Array(e.slice(0,4)))===ZR){try{o[nn.KHR_BINARY_GLTF]=new Zz(e)}catch(p){r&&r(p);return}s=JSON.parse(o[nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(Dv(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new fH(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const p=this.pluginCallbacks[f](c);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const p=s.extensionsUsed[f],m=s.extensionsRequired||[];switch(p){case nn.KHR_MATERIALS_UNLIT:o[p]=new Fz;break;case nn.KHR_DRACO_MESH_COMPRESSION:o[p]=new $z(s,this.dracoLoader);break;case nn.KHR_TEXTURE_TRANSFORM:o[p]=new eH;break;case nn.KHR_MESH_QUANTIZATION:o[p]=new tH;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}c.setExtensions(o),c.setPlugins(l),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function Dz(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Lz{constructor(e){this.parser=e,this.name=nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const p=new it(16777215);c.color!==void 0&&p.setRGB(c.color[0],c.color[1],c.color[2],tl);const m=c.range!==void 0?c.range:0;switch(c.type){case"directional":f=new ZS(p),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new T0(p),f.distance=m;break;case"spot":f=new QS(p),f.distance=m,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,f.angle=c.spot.outerConeAngle,f.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return f.position.set(0,0,0),f.decay=2,Ja(f,c),c.intensity!==void 0&&(f.intensity=c.intensity),f.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(f),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return n._getNodeRef(t.cache,l,c)})}}class Fz{constructor(){this.name=nn.KHR_MATERIALS_UNLIT}getMaterialType(){return xs}extendParams(e,t,n){const r=[];e.color=new it(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],tl),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Ou))}return Promise.all(r)}}class Nz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Oz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(l,l)}return Promise.all(s)}}class kz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Uz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class zz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new it(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],tl)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ou)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Hz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Gz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new it().setRGB(l[0],l[1],l[2],tl),Promise.all(s)}}class Vz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Wz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new it().setRGB(l[0],l[1],l[2],tl),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Ou)),Promise.all(s)}}class jz{constructor(e){this.parser=e,this.name=nn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Xz{constructor(e){this.parser=e,this.name=nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Ys}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Jz{constructor(e){this.parser=e,this.name=nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Kz{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Yz{constructor(e){this.parser=e,this.name=nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=r.images[o.source];let c=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class qz{constructor(e){this.name=nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const c=r.byteOffset||0,f=r.byteLength||0,p=r.count,m=r.byteStride,y=new Uint8Array(l,c,f);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,m,y,r.mode,r.filter).then(function(v){return v.buffer}):o.ready.then(function(){const v=new ArrayBuffer(p*m);return o.decodeGltfBuffer(new Uint8Array(v),p,m,y,r.mode,r.filter),v})})}else return null}}class Qz{constructor(e){this.name=nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const f of r.primitives)if(f.mode!==Hs.TRIANGLES&&f.mode!==Hs.TRIANGLE_STRIP&&f.mode!==Hs.TRIANGLE_FAN&&f.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],c={};for(const f in o)l.push(this.parser.getDependency("accessor",o[f]).then(p=>(c[f]=p,c[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(f=>{const p=f.pop(),m=p.isGroup?p.children:[p],y=f[0].count,v=[];for(const x of m){const w=new Tt,S=new W,M=new ki,C=new W(1,1,1),b=new kS(x.geometry,x.material,y);for(let R=0;R<y;R++)c.TRANSLATION&&S.fromBufferAttribute(c.TRANSLATION,R),c.ROTATION&&M.fromBufferAttribute(c.ROTATION,R),c.SCALE&&C.fromBufferAttribute(c.SCALE,R),b.setMatrixAt(R,w.compose(S,M,C));for(const R in c)if(R==="_COLOR_0"){const O=c[R];b.instanceColor=new Yu(O.array,O.itemSize,O.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&x.geometry.setAttribute(R,c[R]);ln.prototype.copy.call(b,x),this.parser.assignFinalMaterial(b),v.push(b)}return p.isGroup?(p.clear(),p.add(...v),p):v[0]}))}}const ZR="glTF",wp=12,OE={JSON:1313821514,BIN:5130562};class Zz{constructor(e){this.name=nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,wp);if(this.header={magic:Dv(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ZR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-wp,r=new DataView(e,wp);let s=0;for(;s<n;){const o=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===OE.JSON){const c=new Uint8Array(e,wp+s,o);this.content=Dv(c)}else if(l===OE.BIN){const c=wp+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class $z{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},c={},f={};for(const p in o){const m=HA[p]||p.toLowerCase();l[m]=o[p]}for(const p in e.attributes){const m=HA[p]||p.toLowerCase();if(o[p]!==void 0){const y=n.accessors[e.attributes[p]],v=qh[y.componentType];f[m]=v.name,c[m]=y.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(m,y){r.decodeDracoFile(p,function(v){for(const x in v.attributes){const w=v.attributes[x],S=c[x];S!==void 0&&(w.normalized=S)}m(v)},l,f,tl,y)})})}}class eH{constructor(){this.name=nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class tH{constructor(){this.name=nn.KHR_MESH_QUANTIZATION}}class $R extends vd{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=l*2,f=l*3,p=r-t,m=(n-t)/p,y=m*m,v=y*m,x=e*f,w=x-f,S=-2*v+3*y,M=v-y,C=1-S,b=M-y+m;for(let R=0;R!==l;R++){const O=o[w+R+l],F=o[w+R+c]*p,N=o[x+R+l],U=o[x+R]*p;s[R]=C*O+b*F+S*N+M*U}return s}}const nH=new ki;class iH extends $R{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return nH.fromArray(s).normalize().toArray(s),s}}const Hs={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},qh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kE={9728:Ti,9729:ei,9984:e0,9985:Kh,9986:Iu,9987:Ws},UE={33071:vs,33648:$h,10497:gc},I_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...bz>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ac={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rH={CUBICSPLINE:void 0,LINEAR:nd,STEP:td},B_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function sH(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Dm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:fa})),i.DefaultMaterial}function _u(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ja(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oH(i,e,t){let n=!1,r=!1,s=!1;for(let f=0,p=e.length;f<p;f++){const m=e[f];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(r=!0),m.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],l=[],c=[];for(let f=0,p=e.length;f<p;f++){const m=e[f];if(n){const y=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):i.attributes.position;o.push(y)}if(r){const y=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):i.attributes.normal;l.push(y)}if(s){const y=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):i.attributes.color;c.push(y)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(f){const p=f[0],m=f[1],y=f[2];return n&&(i.morphAttributes.position=p),r&&(i.morphAttributes.normal=m),s&&(i.morphAttributes.color=y),i.morphTargetsRelative=!0,i})}function aH(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lH(i){let e;const t=i.extensions&&i.extensions[nn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+D_(t.attributes):e=i.indices+":"+D_(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+D_(i.targets[n]);return e}function D_(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function GA(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cH(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const uH=new Tt;class fH{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Dz,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&s<98?this.textureLoader=new xd(this.options.manager):this.textureLoader=new CR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ms(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return _u(s,l,r),Ja(l,r),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,l)=>{const c=this.associations.get(o);c!=null&&this.associations.set(l,c);for(const[f,p]of o.children.entries())s(p,l.children[f])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[nn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(hc.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=I_[r.type],l=qh[r.componentType],c=r.normalized===!0,f=new l(r.count*o);return Promise.resolve(new pn(f,o,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],c=I_[r.type],f=qh[r.componentType],p=f.BYTES_PER_ELEMENT,m=p*c,y=r.byteOffset||0,v=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,x=r.normalized===!0;let w,S;if(v&&v!==m){const M=Math.floor(y/v),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+M+":"+r.count;let b=t.cache.get(C);b||(w=new f(l,M*v,r.count*v/p),b=new bm(w,v/p),t.cache.add(C,b)),S=new yc(b,c,y%v/p,x)}else l===null?w=new f(r.count*c):w=new f(l,y,r.count*c),S=new pn(w,c,x);if(r.sparse!==void 0){const M=I_.SCALAR,C=qh[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,R=r.sparse.values.byteOffset||0,O=new C(o[1],b,r.sparse.count*M),F=new f(o[2],R,r.sparse.count*c);l!==null&&(S=new pn(S.array.slice(),S.itemSize,S.normalized));for(let N=0,U=O.length;N<U;N++){const J=O[N];if(S.setX(J,F[N*c]),c>=2&&S.setY(J,F[N*c+1]),c>=3&&S.setZ(J,F[N*c+2]),c>=4&&S.setW(J,F[N*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return S})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const c=n.manager.getHandler(o.uri);c!==null&&(l=c)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],l=s.images[t],c=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const f=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const y=(s.samplers||{})[o.sampler]||{};return p.magFilter=kE[y.magFilter]||ei,p.minFilter=kE[y.minFilter]||Ws,p.wrapS=UE[y.wrapS]||gc,p.wrapT=UE[y.wrapT]||gc,r.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[c]=f,f}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=r.images[e],l=self.URL||self.webkitURL;let c=o.uri||"",f=!1;if(o.bufferView!==void 0)c=n.getDependency("bufferView",o.bufferView).then(function(m){f=!0;const y=new Blob([m],{type:o.mimeType});return c=l.createObjectURL(y),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(c).then(function(m){return new Promise(function(y,v){let x=y;t.isImageBitmapLoader===!0&&(x=function(w){const S=new Pn(w);S.needsUpdate=!0,y(S)}),t.load(hc.resolveURL(m,s.path),x,void 0,v)})}).then(function(m){return f===!0&&l.revokeObjectURL(c),Ja(m,o),m.userData.mimeType=o.mimeType||cH(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),m});return this.sourceCache[e]=p,p}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[nn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[nn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=s.associations.get(o);o=s.extensions[nn.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===NE?Ou:tl),"colorSpace"in o?o.colorSpace=r:o.encoding=r===Ou?NE:Bz),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new qu,Si.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new yr,Si.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(l,c)),n=c}if(r||s||o){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=n.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Dm}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const l={},c=s.extensions||{},f=[];if(c[nn.KHR_MATERIALS_UNLIT]){const m=r[nn.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),f.push(m.extendParams(l,s,t))}else{const m=s.pbrMetallicRoughness||{};if(l.color=new it(1,1,1),l.opacity=1,Array.isArray(m.baseColorFactor)){const y=m.baseColorFactor;l.color.setRGB(y[0],y[1],y[2],tl),l.opacity=y[3]}m.baseColorTexture!==void 0&&f.push(t.assignTexture(l,"map",m.baseColorTexture,Ou)),l.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,l.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(l,"metalnessMap",m.metallicRoughnessTexture)),f.push(t.assignTexture(l,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Vs);const p=s.alphaMode||B_.OPAQUE;if(p===B_.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===B_.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==xs&&(f.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new De(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;l.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==xs&&(f.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==xs){const m=s.emissiveFactor;l.emissive=new it().setRGB(m[0],m[1],m[2],tl)}return s.emissiveTexture!==void 0&&o!==xs&&f.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,Ou)),Promise.all(f).then(function(){const m=new o(l);return s.name&&(m.name=s.name),Ja(m,s),t.associations.set(m,{materials:e}),s.extensions&&_u(r,m,s),m})}createUniqueName(e){const t=dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return zE(c,l,t)})}const o=[];for(let l=0,c=e.length;l<c;l++){const f=e[l],p=lH(f),m=r[p];if(m)o.push(m.promise);else{let y;f.extensions&&f.extensions[nn.KHR_DRACO_MESH_COMPRESSION]?y=s(f):y=zE(new jt,f,t),r[p]={primitive:f,promise:y},o.push(y)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let c=0,f=o.length;c<f;c++){const p=o[c].material===void 0?sH(this.cache):this.getDependency("material",o[c].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(c){const f=c.slice(0,c.length-1),p=c[c.length-1],m=[];for(let v=0,x=p.length;v<x;v++){const w=p[v],S=o[v];let M;const C=f[v];if(S.mode===Hs.TRIANGLES||S.mode===Hs.TRIANGLE_STRIP||S.mode===Hs.TRIANGLE_FAN||S.mode===void 0)M=s.isSkinnedMesh===!0?new OS(w,C):new ti(w,C),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),S.mode===Hs.TRIANGLE_STRIP?M.geometry=DE(M.geometry,SS):S.mode===Hs.TRIANGLE_FAN&&(M.geometry=DE(M.geometry,Tv));else if(S.mode===Hs.LINES)M=new Lo(w,C);else if(S.mode===Hs.LINE_STRIP)M=new ll(w,C);else if(S.mode===Hs.LINE_LOOP)M=new US(w,C);else if(S.mode===Hs.POINTS)M=new am(w,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+S.mode);Object.keys(M.geometry.morphAttributes).length>0&&aH(M,s),M.name=t.createUniqueName(s.name||"mesh_"+e),Ja(M,s),S.extensions&&_u(r,M,S),t.assignFinalMaterial(M),m.push(M)}for(let v=0,x=m.length;v<x;v++)t.associations.set(m[v],{meshes:e,primitives:v});if(m.length===1)return s.extensions&&_u(r,m[0],s),m[0];const y=new Qa;s.extensions&&_u(r,y,s),t.associations.set(y,{meshes:e});for(let v=0,x=m.length;v<x;v++)y.add(m[v]);return y})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ln(ES.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new js(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ja(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,l=[],c=[];for(let f=0,p=o.length;f<p;f++){const m=o[f];if(m){l.push(m);const y=new Tt;s!==null&&y.fromArray(s.array,f*16),c.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new Tm(l,c)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],l=[],c=[],f=[],p=[];for(let m=0,y=r.channels.length;m<y;m++){const v=r.channels[m],x=r.samplers[v.sampler],w=v.target,S=w.node,M=r.parameters!==void 0?r.parameters[x.input]:x.input,C=r.parameters!==void 0?r.parameters[x.output]:x.output;w.node!==void 0&&(o.push(this.getDependency("node",S)),l.push(this.getDependency("accessor",M)),c.push(this.getDependency("accessor",C)),f.push(x),p.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(c),Promise.all(f),Promise.all(p)]).then(function(m){const y=m[0],v=m[1],x=m[2],w=m[3],S=m[4],M=[];for(let C=0,b=y.length;C<b;C++){const R=y[C],O=v[C],F=x[C],N=w[C],U=S[C];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const J=n._createAnimationTracks(R,O,F,N,U);if(J)for(let B=0;B<J.length;B++)M.push(J[B])}return new sd(s,void 0,M)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let c=0,f=r.weights.length;c<f;c++)l.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=r.children||[];for(let f=0,p=l.length;f<p;f++)o.push(n.getDependency("node",l[f]));const c=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(f){const p=f[0],m=f[1],y=f[2];y!==null&&p.traverse(function(v){v.isSkinnedMesh&&v.bind(y,uH)});for(let v=0,x=m.length;v<x;v++)p.add(m[v]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",l=[],c=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(f){return r._getNodeRef(r.cameraCache,s.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){l.push(f)}),this.nodeCache[e]=Promise.all(l).then(function(f){let p;if(s.isBone===!0?p=new d0:f.length>1?p=new Qa:f.length===1?p=f[0]:p=new ln,p!==f[0])for(let m=0,y=f.length;m<y;m++)p.add(f[m]);if(s.name&&(p.userData.name=s.name,p.name=o),Ja(p,s),s.extensions&&_u(n,p,s),s.matrix!==void 0){const m=new Tt;m.fromArray(s.matrix),p.applyMatrix4(m)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return r.associations.has(p)||r.associations.set(p,{}),r.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Qa;n.name&&(s.name=r.createUniqueName(n.name)),Ja(s,n),n.extensions&&_u(t,s,n);const o=n.nodes||[],l=[];for(let c=0,f=o.length;c<f;c++)l.push(r.getDependency("node",o[c]));return Promise.all(l).then(function(c){for(let p=0,m=c.length;p<m;p++)s.add(c[p]);const f=p=>{const m=new Map;for(const[y,v]of r.associations)(y instanceof Si||y instanceof Pn)&&m.set(y,v);return p.traverse(y=>{const v=r.associations.get(y);v!=null&&m.set(y,v)}),m};return r.associations=f(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],l=e.name?e.name:e.uuid,c=[];ac[s.path]===ac.weights?e.traverse(function(y){y.morphTargetInfluences&&c.push(y.name?y.name:y.uuid)}):c.push(l);let f;switch(ac[s.path]){case ac.weights:f=Zu;break;case ac.rotation:f=$u;break;case ac.position:case ac.scale:f=ef;break;default:switch(n.itemSize){case 1:f=Zu;break;case 2:case 3:default:f=ef;break}break}const p=r.interpolation!==void 0?rH[r.interpolation]:nd,m=this._getArrayFromAccessor(n);for(let y=0,v=c.length;y<v;y++){const x=new f(c[y]+"."+ac[s.path],t.array,m,p);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),o.push(x)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=GA(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof $u?iH:$R;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function hH(i,e,t){const n=e.attributes,r=new pr;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],c=l.min,f=l.max;if(c!==void 0&&f!==void 0){if(r.set(new W(c[0],c[1],c[2]),new W(f[0],f[1],f[2])),l.normalized){const p=GA(qh[l.componentType]);r.min.multiplyScalar(p),r.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new W,c=new W;for(let f=0,p=s.length;f<p;f++){const m=s[f];if(m.POSITION!==void 0){const y=t.json.accessors[m.POSITION],v=y.min,x=y.max;if(v!==void 0&&x!==void 0){if(c.setX(Math.max(Math.abs(v[0]),Math.abs(x[0]))),c.setY(Math.max(Math.abs(v[1]),Math.abs(x[1]))),c.setZ(Math.max(Math.abs(v[2]),Math.abs(x[2]))),y.normalized){const w=GA(qh[y.componentType]);c.multiplyScalar(w)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const o=new $i;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function zE(i,e,t){const n=e.attributes,r=[];function s(o,l){return t.getDependency("accessor",o).then(function(c){i.setAttribute(l,c)})}for(const o in n){const l=HA[o]||o.toLowerCase();l in i.attributes||r.push(s(n[o],l))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(o)}return Ja(i,e),hH(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?oH(i,e.targets,t):i})}class dH extends jt{constructor(e,t,n,r){super();const s=[],o=[],l=[],c=new W,f=new Tt;f.makeRotationFromEuler(n),f.setPosition(t);const p=new Tt;p.copy(f).invert(),m(),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(o,3)),this.setAttribute("uv",new St(l,2));function m(){let w,S=[];const M=new W,C=new W;if(e.geometry.isGeometry===!0){console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const b=e.geometry,R=b.attributes.position,O=b.attributes.normal;if(b.index!==null){const F=b.index;for(w=0;w<F.count;w++)M.fromBufferAttribute(R,F.getX(w)),C.fromBufferAttribute(O,F.getX(w)),y(S,M,C)}else for(w=0;w<R.count;w++)M.fromBufferAttribute(R,w),C.fromBufferAttribute(O,w),y(S,M,C);for(S=v(S,c.set(1,0,0)),S=v(S,c.set(-1,0,0)),S=v(S,c.set(0,1,0)),S=v(S,c.set(0,-1,0)),S=v(S,c.set(0,0,1)),S=v(S,c.set(0,0,-1)),w=0;w<S.length;w++){const F=S[w];l.push(.5+F.position.x/r.x,.5+F.position.y/r.y),F.position.applyMatrix4(f),s.push(F.position.x,F.position.y,F.position.z),o.push(F.normal.x,F.normal.y,F.normal.z)}}function y(w,S,M){S.applyMatrix4(e.matrixWorld),S.applyMatrix4(p),M.transformDirection(e.matrixWorld),w.push(new HE(S.clone(),M.clone()))}function v(w,S){const M=[],C=.5*Math.abs(r.dot(S));for(let b=0;b<w.length;b+=3){let R,O,F,N=0,U,J,B,L;const ne=w[b+0].position.dot(S)-C,ie=w[b+1].position.dot(S)-C,ce=w[b+2].position.dot(S)-C;switch(R=ne>0,O=ie>0,F=ce>0,N=(R?1:0)+(O?1:0)+(F?1:0),N){case 0:{M.push(w[b]),M.push(w[b+1]),M.push(w[b+2]);break}case 1:{if(R&&(U=w[b+1],J=w[b+2],B=x(w[b],U,S,C),L=x(w[b],J,S,C)),O){U=w[b],J=w[b+2],B=x(w[b+1],U,S,C),L=x(w[b+1],J,S,C),M.push(B),M.push(J.clone()),M.push(U.clone()),M.push(J.clone()),M.push(B.clone()),M.push(L);break}F&&(U=w[b],J=w[b+1],B=x(w[b+2],U,S,C),L=x(w[b+2],J,S,C)),M.push(U.clone()),M.push(J.clone()),M.push(B),M.push(L),M.push(B.clone()),M.push(J.clone());break}case 2:{R||(U=w[b].clone(),J=x(U,w[b+1],S,C),B=x(U,w[b+2],S,C),M.push(U),M.push(J),M.push(B)),O||(U=w[b+1].clone(),J=x(U,w[b+2],S,C),B=x(U,w[b],S,C),M.push(U),M.push(J),M.push(B)),F||(U=w[b+2].clone(),J=x(U,w[b],S,C),B=x(U,w[b+1],S,C),M.push(U),M.push(J),M.push(B));break}}}return M}function x(w,S,M,C){const b=w.position.dot(M)-C,R=S.position.dot(M)-C,O=b/(b-R);return new HE(new W(w.position.x+O*(S.position.x-w.position.x),w.position.y+O*(S.position.y-w.position.y),w.position.z+O*(S.position.z-w.position.z)),new W(w.normal.x+O*(S.normal.x-w.normal.x),w.normal.y+O*(S.normal.y-w.normal.y),w.normal.z+O*(S.normal.z-w.normal.z)))}}}class HE{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}const L_=new WeakMap;class pH extends vr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new Ms(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(r)},n,r)}decodeDracoFile(e,t,n,r){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const f=t.attributeTypes[c];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=f.name)}const n=JSON.stringify(t);if(L_.has(e)){const c=L_.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(c=>(r=c,new Promise((f,p)=>{r._callbacks[s]={resolve:f,reject:p},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),L_.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new jt;e.index&&t.setIndex(new pn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,o=r.array,l=r.itemSize;t.setAttribute(s,new pn(o,l))}return t}_loadLibrary(e,t){const n=new Ms(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=mH.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function mH(){let i,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(p){i.onModuleLoaded=function(m){p({draco:m})},DracoDecoderModule(i)});break;case"decode":const c=l.buffer,f=l.taskConfig;e.then(p=>{const m=p.draco,y=new m.Decoder,v=new m.DecoderBuffer;v.Init(new Int8Array(c),c.byteLength);try{const x=t(m,y,v,f),w=x.attributes.map(S=>S.array.buffer);x.index&&w.push(x.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:x},w)}catch(x){console.error(x),self.postMessage({type:"error",id:l.id,error:x.message})}finally{m.destroy(v),m.destroy(y)}});break}};function t(o,l,c,f){const p=f.attributeIDs,m=f.attributeTypes;let y,v;const x=l.GetEncodedGeometryType(c);if(x===o.TRIANGULAR_MESH)y=new o.Mesh,v=l.DecodeBufferToMesh(c,y);else if(x===o.POINT_CLOUD)y=new o.PointCloud,v=l.DecodeBufferToPointCloud(c,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());const w={index:null,attributes:[]};for(const S in p){const M=self[m[S]];let C,b;if(f.useUniqueIDs)b=p[S],C=l.GetAttributeByUniqueId(y,b);else{if(b=l.GetAttributeId(y,o[p[S]]),b===-1)continue;C=l.GetAttribute(y,b)}w.attributes.push(r(o,l,y,S,M,C))}return x===o.TRIANGULAR_MESH&&(w.index=n(o,l,y)),o.destroy(y),w}function n(o,l,c){const p=c.num_faces()*3,m=p*4,y=o._malloc(m);l.GetTrianglesUInt32Array(c,m,y);const v=new Uint32Array(o.HEAPF32.buffer,y,p).slice();return o._free(y),{array:v,itemSize:1}}function r(o,l,c,f,p,m){const y=m.num_components(),x=c.num_points()*y,w=x*p.BYTES_PER_ELEMENT,S=s(o,p),M=o._malloc(w);l.GetAttributeDataArrayForAllPoints(c,m,S,w,M);const C=new p(o.HEAPF32.buffer,M,x).slice();return o._free(M),{name:f,array:C,itemSize:y}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let By;const F_=()=>{if(By)return By;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(l(r),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function l(m){const y=new Uint8Array(m.length);for(let x=0;x<m.length;++x){const w=m.charCodeAt(x);y[x]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let v=0;for(let x=0;x<m.length;++x)y[v++]=y[x]<60?n[y[x]]:(y[x]-60)*64+y[++x];return y.buffer.slice(0,v)}function c(m,y,v,x,w,S){const M=s.exports.sbrk,C=v+3&-4,b=M(C*x),R=M(w.length),O=new Uint8Array(s.exports.memory.buffer);O.set(w,R);const F=m(b,v,x,R,w.length);if(F===0&&S&&S(b,C,x),y.set(O.subarray(b,b+v*x)),M(b-M(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return By={ready:o,supported:!0,decodeVertexBuffer(m,y,v,x,w){c(s.exports.meshopt_decodeVertexBuffer,m,y,v,x,s.exports[f[w]])},decodeIndexBuffer(m,y,v,x){c(s.exports.meshopt_decodeIndexBuffer,m,y,v,x)},decodeIndexSequence(m,y,v,x){c(s.exports.meshopt_decodeIndexSequence,m,y,v,x)},decodeGltfBuffer(m,y,v,x,w,S){c(s.exports[p[w]],m,y,v,x,s.exports[f[S]])}},By},N_=i=>i===Object(i)&&!Array.isArray(i)&&typeof i!="function";function lM(i,e){const t=ys(s=>s.gl),n=Mc(xd,N_(i)?Object.values(i):i);return q.useLayoutEffect(()=>{e?.(n)},[e]),q.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(n)?s=n:n instanceof Pn?s=[n]:N_(n)&&(s=Object.values(n)),s.forEach(o=>{o instanceof Pn&&t.initTexture(o)})}},[t,n]),q.useMemo(()=>{if(N_(i)){const s={};let o=0;for(const l in i)s[l]=n[o++];return s}else return n},[i,n])}lM.preload=i=>Mc.preload(xd,i);lM.clear=i=>Mc.clear(xd,i);const gH=()=>parseInt(hd.replace(/\D+/g,"")),eP=gH();function yH(i){return Array.isArray(i)}function O_(i=[0,0,0]){return yH(i)?i:i instanceof W||i instanceof Fr?[i.x,i.y,i.z]:[i,i,i]}const vH=q.forwardRef(function({debug:e,depthTest:t=!1,polygonOffsetFactor:n=-10,map:r,mesh:s,children:o,position:l,rotation:c,scale:f,...p},m){const y=q.useRef(null);q.useImperativeHandle(m,()=>y.current);const v=q.useRef(null);return q.useLayoutEffect(()=>{const x=s?.current||y.current.parent,w=y.current;if(!(x instanceof ti))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const S={position:new W,rotation:new Fr,scale:new W(1,1,1)};if(x){sa(S,{position:l,scale:f});const M=x.matrixWorld.clone();if(x.matrixWorld.identity(),!c||typeof c=="number"){const C=new ln;C.position.copy(S.position),C.lookAt(x.position),typeof c=="number"&&C.rotateZ(c),sa(S,{rotation:C.rotation})}else sa(S,{rotation:c});return w.geometry=new dH(x,S.position,S.rotation,S.scale),v.current&&(sa(v.current,S),v.current.traverse(C=>C.raycast=()=>null)),x.matrixWorld=M,()=>{w.geometry.dispose()}}},[s,...O_(l),...O_(f),...O_(c)]),q.createElement("mesh",Xs({ref:y,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":n,"material-depthTest":t,"material-map":r},p),o,e&&q.createElement("mesh",{ref:v},q.createElement("boxGeometry",null),q.createElement("meshNormalMaterial",{wireframe:!0}),q.createElement("axesHelper",null)))});let Dy=null,tP="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function nP(i=!0,e=!0,t){return n=>{t&&t(n),i&&(Dy||(Dy=new pH),Dy.setDecoderPath(typeof i=="string"?i:tP),n.setDRACOLoader(Dy)),e&&n.setMeshoptDecoder(typeof F_=="function"?F_():F_)}}const Nm=(i,e,t,n)=>Mc(aM,i,nP(e,t,n));Nm.preload=(i,e,t,n)=>Mc.preload(aM,i,nP(e,t,n));Nm.clear=i=>Mc.clear(aM,i);Nm.setDecoderPath=i=>{tP=i};const cM=q.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:c,...f},p)=>{const m=ys(F=>F.invalidate),y=ys(F=>F.camera),v=ys(F=>F.gl),x=ys(F=>F.events),w=ys(F=>F.setEvents),S=ys(F=>F.set),M=ys(F=>F.get),C=ys(F=>F.performance),b=e||y,R=n||x.connected||v.domElement,O=q.useMemo(()=>new Iz(b),[b]);return _d(()=>{O.enabled&&O.update()},-1),q.useEffect(()=>(s&&O.connect(s===!0?R:s),O.connect(R),()=>void O.dispose()),[s,R,t,O,m]),q.useEffect(()=>{const F=J=>{m(),t&&C.regress(),o&&o(J)},N=J=>{l&&l(J)},U=J=>{c&&c(J)};return O.addEventListener("change",F),O.addEventListener("start",N),O.addEventListener("end",U),()=>{O.removeEventListener("start",N),O.removeEventListener("end",U),O.removeEventListener("change",F)}},[o,l,c,O,m,w]),q.useEffect(()=>{if(i){const F=M().controls;return S({controls:O}),()=>S({controls:F})}},[i,O]),q.createElement("primitive",Xs({ref:p,object:O,enableDamping:r},f))});var k_={exports:{}},U_,GE;function xH(){if(GE)return U_;GE=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return U_=i,U_}var z_,VE;function _H(){if(VE)return z_;VE=1;var i=xH();function e(){}function t(){}return t.resetWarningCache=e,z_=function(){function n(o,l,c,f,p,m){if(m!==i){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function r(){return n}var s={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},z_}var WE;function iP(){return WE||(WE=1,k_.exports=_H()()),k_.exports}const H_=eP>=154?"opaque_fragment":"output_fragment";class AH extends qu{constructor(e){super(e),this.onBeforeCompile=(t,n)=>{const{isWebGL2:r}=n.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${H_}>`,`
        ${r?`#include <${H_}>`:`#extension GL_OES_standard_derivatives : enable
#include <${H_}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${eP>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const SH=q.forwardRef((i,e)=>{const[t]=q.useState(()=>new AH(null));return q.createElement("primitive",Xs({},i,{object:t,ref:e,attach:"material"}))}),MH=q.forwardRef(({children:i,enabled:e=!0,speed:t=1,rotationIntensity:n=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:o=!1,...l},c)=>{const f=q.useRef(null);q.useImperativeHandle(c,()=>f.current,[]);const p=q.useRef(Math.random()*1e4);return _d(m=>{var y,v;if(!e||t===0)return;o&&m.invalidate();const x=p.current+m.clock.getElapsedTime();f.current.rotation.x=Math.cos(x/4*t)/8*n,f.current.rotation.y=Math.sin(x/4*t)/8*n,f.current.rotation.z=Math.sin(x/4*t)/20*n;let w=Math.sin(x/4*t)/10;w=ES.mapLinear(w,-.1,.1,(y=s?.[0])!==null&&y!==void 0?y:-.1,(v=s?.[1])!==null&&v!==void 0?v:.1),f.current.position.y=w*r,f.current.updateMatrix()}),q.createElement("group",l,q.createElement("group",{ref:f,matrixAutoUpdate:!1},i))});let Au,Ep;const wH=q.createContext(null),jE=new Tt,XE=new W,EH=q.forwardRef(({children:i,range:e,limit:t=1e3,...n},r)=>{const s=q.useRef(null);q.useImperativeHandle(r,()=>s.current,[]);const[o,l]=q.useState([]),[[c,f,p]]=q.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);q.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),_d(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),jE.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),Au=0;Au<o.length;Au++)Ep=o[Au].current,Ep.getWorldPosition(XE).applyMatrix4(jE),XE.toArray(c,Au*3),s.current.geometry.attributes.position.needsUpdate=!0,Ep.matrixWorldNeedsUpdate=!0,Ep.color.toArray(f,Au*3),s.current.geometry.attributes.color.needsUpdate=!0,p.set([Ep.size],Au),s.current.geometry.attributes.size.needsUpdate=!0});const m=q.useMemo(()=>({getParent:()=>s,subscribe:y=>(l(v=>[...v,y]),()=>l(v=>v.filter(x=>x.current!==y.current)))}),[]);return q.createElement("points",Xs({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},n),q.createElement("bufferGeometry",null,q.createElement("bufferAttribute",{attach:"attributes-position",count:c.length/3,array:c,itemSize:3,usage:Hu}),q.createElement("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:Hu}),q.createElement("bufferAttribute",{attach:"attributes-size",count:p.length,array:p,itemSize:1,usage:Hu})),q.createElement(wH.Provider,{value:m},i))}),CH=q.forwardRef(({children:i,positions:e,colors:t,sizes:n,stride:r=3,...s},o)=>{const l=q.useRef(null);return q.useImperativeHandle(o,()=>l.current,[]),_d(()=>{const c=l.current.geometry.attributes;c.position.needsUpdate=!0,t&&(c.color.needsUpdate=!0),n&&(c.size.needsUpdate=!0)}),q.createElement("points",Xs({ref:l},s),q.createElement("bufferGeometry",null,q.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Hu}),t&&q.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Hu}),n&&q.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/r,array:n,itemSize:1,usage:Hu})),i)}),bH=q.forwardRef((i,e)=>i.positions instanceof Float32Array?q.createElement(CH,Xs({},i,{ref:e})):q.createElement(EH,Xs({},i,{ref:e})));function B0({all:i,scene:e,camera:t}){const n=ys(({gl:o})=>o),r=ys(({camera:o})=>o),s=ys(({scene:o})=>o);return q.useLayoutEffect(()=>{const o=[];i&&(e||s).traverse(f=>{f.visible===!1&&(o.push(f),f.visible=!0)}),n.compile(e||s,t||r);const l=new PS(128);new RS(.01,1e5,l).update(n,e||s),l.dispose(),o.forEach(f=>f.visible=!1)},[]),null}const uM=()=>te.jsx(Cz,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:te.jsx("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40,opacity:0},children:"Loadingggggggggggggggggggggggggggggggggggg"})}),TH=()=>{const i=Nm("./earth/scene.gltf");return te.jsx("primitive",{object:i.scene,scale:2,"position-y":0,"rotation-y":0})},RH=()=>te.jsx(I0,{shadows:!0,frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},children:te.jsxs(q.Suspense,{fallback:te.jsx(uM,{}),children:[te.jsx(cM,{autoRotate:!0,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),te.jsx(TH,{}),te.jsx(B0,{all:!0})]})}),PH=i=>{const[e]=lM([i.imgUrl]);return te.jsxs(MH,{speed:1.75,rotationIntensity:1,floatIntensity:2,children:[te.jsx("ambientLight",{intensity:.25}),te.jsx("directionalLight",{position:[0,0,.05]}),te.jsxs("mesh",{castShadow:!0,receiveShadow:!0,scale:2.75,children:[te.jsx("icosahedronGeometry",{args:[1,1]}),te.jsx("meshStandardMaterial",{color:"#fff8eb",polygonOffset:!0,polygonOffsetFactor:-5,flatShading:!0}),te.jsx(vH,{position:[0,0,1],rotation:[2*Math.PI,0,6.25],scale:1,map:e,flatShading:!0})]})]})},IH=({icon:i})=>te.jsxs(I0,{frameloop:"demand",dpr:[1,2],gl:{preserveDrawingBuffer:!0},children:[te.jsxs(q.Suspense,{fallback:te.jsx(uM,{}),children:[te.jsx(cM,{enableZoom:!1}),te.jsx(PH,{imgUrl:i})]}),te.jsx(B0,{all:!0})]}),BH=({isMobile:i})=>{const e=Nm("./gaming_desktop_pc/scene.gltf");return te.jsxs("mesh",{children:[te.jsx("hemisphereLight",{intensity:1.5,groundColor:"black"}),te.jsx("pointLight",{intensity:3}),te.jsx("spotLight",{position:[-20,50,10],angle:.12,penumbra:1,intensity:1,castShadow:!0,"shadow-mapSize":1024}),te.jsx("primitive",{object:e.scene,scale:i?.6:.75,position:i?[0,-4.5,-2.2]:[0,-3.25,-1.5],rotation:[-.01,-.2,-.1]})]})},DH=()=>{const[i,e]=q.useState(!1);return q.useEffect(()=>{const t=window.matchMedia("(max-width:500px)");e(t.matches);const n=r=>{e(r.matches)};return t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},[]),te.jsx(te.Fragment,{children:te.jsxs(I0,{frameloop:"demand",shadows:!0,camera:{position:[20,3,5],fov:25},gl:{preserveDrawingBuffer:!0},children:[te.jsxs(q.Suspense,{fallback:te.jsx(uM,{}),children:[te.jsx(cM,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),te.jsx(BH,{isMobile:i})]}),te.jsx(B0,{all:!0})]})})};function Qh(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function JE(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function KE(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JE(Object(t),!0).forEach(function(n){Qh(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):JE(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function rP(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}new De;new De;var ks=function i(e,t,n){var r=this;rP(this,i),Qh(this,"dot2",function(s,o){return r.x*s+r.y*o}),Qh(this,"dot3",function(s,o,l){return r.x*s+r.y*o+r.z*l}),this.x=e,this.y=t,this.z=n},LH=[new ks(1,1,0),new ks(-1,1,0),new ks(1,-1,0),new ks(-1,-1,0),new ks(1,0,1),new ks(-1,0,1),new ks(1,0,-1),new ks(-1,0,-1),new ks(0,1,1),new ks(0,-1,1),new ks(0,1,-1),new ks(0,-1,-1)],YE=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],qE=new Array(512),QE=new Array(512),FH=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=YE[t]^e&255:n=YE[t]^e>>8&255,qE[t]=qE[t+256]=n,QE[t]=QE[t+256]=LH[n%12]}};FH(0);function NH(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function ZE(i){var e=NH(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var OH=function i(e){var t=this;rP(this,i),Qh(this,"seed",0),Qh(this,"init",function(n){t.seed=n,t.value=ZE(n)}),Qh(this,"value",ZE(this.seed)),this.init(e)},kH=new OH(Math.random()),UH={radius:1,center:[0,0,0]};function zH(i,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kH,n=KE(KE({},UH),e),r=n.radius,s=n.center,o=0;o<i.length;o+=3){var l=Math.pow(t.value(),.3333333333333333),c=t.value()*2-1,f=t.value()*2-1,p=t.value()*2-1,m=Math.sqrt(c*c+f*f+p*p);c=l*c/m,f=l*f/m,p=l*p/m,i[o]=c*r+s[0],i[o+1]=f*r+s[1],i[o+2]=p*r+s[2]}return i}const HH=i=>{const e=q.useRef(),[t]=q.useState(()=>zH(new Float32Array(1e4),{radius:1.2}));return console.log(t.some(isNaN)),_d((n,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),te.jsx("group",{rotation:[0,0,Math.PI/4],children:te.jsx(bH,{ref:e,positions:t,stride:3,frustumCulled:!0,...i,children:te.jsx(SH,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},GH=()=>te.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:te.jsxs(I0,{camera:{position:[0,0,1]},children:[te.jsx(q.Suspense,{fallback:null,children:te.jsx(HH,{})}),te.jsx(B0,{all:!0})]})}),sP=q.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"}),D0=q.createContext({}),fM=q.createContext(null),L0=typeof document<"u",$E=L0?q.useLayoutEffect:q.useEffect,oP=q.createContext({strict:!1});function VH(i,e,t,n){const{visualElement:r}=q.useContext(D0),s=q.useContext(oP),o=q.useContext(fM),l=q.useContext(sP).reducedMotion,c=q.useRef();n=n||s.renderer,!c.current&&n&&(c.current=n(i,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const f=c.current;return q.useInsertionEffect(()=>{f&&f.update(t,o)}),$E(()=>{f&&f.render()}),q.useEffect(()=>{f&&f.updateFeatures()}),(window.HandoffAppearAnimations?$E:q.useEffect)(()=>{f&&f.animationState&&f.animationState.animateChanges()}),f}function Gh(i){return typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function WH(i,e,t){return q.useCallback(n=>{n&&i.mount&&i.mount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):Gh(t)&&(t.current=n))},[e])}function dm(i){return typeof i=="string"||Array.isArray(i)}function F0(i){return typeof i=="object"&&typeof i.start=="function"}const hM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dM=["initial",...hM];function N0(i){return F0(i.animate)||dM.some(e=>dm(i[e]))}function aP(i){return!!(N0(i)||i.variants)}function jH(i,e){if(N0(i)){const{initial:t,animate:n}=i;return{initial:t===!1||dm(t)?t:void 0,animate:dm(n)?n:void 0}}return i.inherit!==!1?e:{}}function XH(i){const{initial:e,animate:t}=jH(i,q.useContext(D0));return q.useMemo(()=>({initial:e,animate:t}),[eC(e),eC(t)])}function eC(i){return Array.isArray(i)?i.join(" "):i}const tC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pm={};for(const i in tC)pm[i]={isEnabled:e=>tC[i].some(t=>!!e[t])};function JH(i){for(const e in i)pm[e]={...pm[e],...i[e]}}const lP=q.createContext({}),cP=q.createContext({}),KH=Symbol.for("motionComponentSymbol");function YH({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:r}){i&&JH(i);function s(l,c){let f;const p={...q.useContext(sP),...l,layoutId:qH(l)},{isStatic:m}=p,y=XH(l),v=n(l,m);if(!m&&L0){y.visualElement=VH(r,v,p,e);const x=q.useContext(cP),w=q.useContext(oP).strict;y.visualElement&&(f=y.visualElement.loadFeatures(p,w,i,x))}return q.createElement(D0.Provider,{value:y},f&&y.visualElement?q.createElement(f,{visualElement:y.visualElement,...p}):null,t(r,l,WH(v,y.visualElement,c),v,m,y.visualElement))}const o=q.forwardRef(s);return o[KH]=r,o}function qH({layoutId:i}){const e=q.useContext(lP).id;return e&&i!==void 0?e+"-"+i:i}function QH(i){function e(n,r={}){return YH(i(n,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(n,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const ZH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pM(i){return typeof i!="string"||i.includes("-")?!1:!!(ZH.indexOf(i)>-1||/[A-Z]/.test(i))}const Lv={};function $H(i){Object.assign(Lv,i)}const Om=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cf=new Set(Om);function uP(i,{layout:e,layoutId:t}){return cf.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!Lv[i]||i==="opacity")}const ns=i=>!!(i&&i.getVelocity),e4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t4=Om.length;function n4(i,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},n,r){let s="";for(let o=0;o<t4;o++){const l=Om[o];if(i[l]!==void 0){const c=e4[l]||l;s+=`${c}(${i[l]}) `}}return e&&!i.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(i,n?"":s):t&&n&&(s="none"),s}const fP=i=>e=>typeof e=="string"&&e.startsWith(i),hP=fP("--"),VA=fP("var(--"),i4=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,r4=(i,e)=>e&&typeof i=="number"?e.transform(i):i,vc=(i,e,t)=>Math.min(Math.max(t,i),e),uf={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Wp={...uf,transform:i=>vc(0,1,i)},Ly={...uf,default:1},jp=i=>Math.round(i*1e5)/1e5,O0=/(-)?([\d]*\.?[\d])+/g,dP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,s4=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function km(i){return typeof i=="string"}const Um=i=>({test:e=>km(e)&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),lc=Um("deg"),ua=Um("%"),Ut=Um("px"),o4=Um("vh"),a4=Um("vw"),nC={...ua,parse:i=>ua.parse(i)/100,transform:i=>ua.transform(i*100)},iC={...uf,transform:Math.round},pP={borderWidth:Ut,borderTopWidth:Ut,borderRightWidth:Ut,borderBottomWidth:Ut,borderLeftWidth:Ut,borderRadius:Ut,radius:Ut,borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomRightRadius:Ut,borderBottomLeftRadius:Ut,width:Ut,maxWidth:Ut,height:Ut,maxHeight:Ut,size:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,rotate:lc,rotateX:lc,rotateY:lc,rotateZ:lc,scale:Ly,scaleX:Ly,scaleY:Ly,scaleZ:Ly,skew:lc,skewX:lc,skewY:lc,distance:Ut,translateX:Ut,translateY:Ut,translateZ:Ut,x:Ut,y:Ut,z:Ut,perspective:Ut,transformPerspective:Ut,opacity:Wp,originX:nC,originY:nC,originZ:Ut,zIndex:iC,fillOpacity:Wp,strokeOpacity:Wp,numOctaves:iC};function mM(i,e,t,n){const{style:r,vars:s,transform:o,transformOrigin:l}=i;let c=!1,f=!1,p=!0;for(const m in e){const y=e[m];if(hP(m)){s[m]=y;continue}const v=pP[m],x=r4(y,v);if(cf.has(m)){if(c=!0,o[m]=x,!p)continue;y!==(v.default||0)&&(p=!1)}else m.startsWith("origin")?(f=!0,l[m]=x):r[m]=x}if(e.transform||(c||n?r.transform=n4(i.transform,t,p,n):r.transform&&(r.transform="none")),f){const{originX:m="50%",originY:y="50%",originZ:v=0}=l;r.transformOrigin=`${m} ${y} ${v}`}}const gM=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mP(i,e,t){for(const n in e)!ns(e[n])&&!uP(n,t)&&(i[n]=e[n])}function l4({transformTemplate:i},e,t){return q.useMemo(()=>{const n=gM();return mM(n,e,{enableHardwareAcceleration:!t},i),Object.assign({},n.vars,n.style)},[e])}function c4(i,e,t){const n=i.style||{},r={};return mP(r,n,i),Object.assign(r,l4(i,e,t)),i.transformValues?i.transformValues(r):r}function u4(i,e,t){const n={},r=c4(i,e,t);return i.drag&&i.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(n.tabIndex=0),n.style=r,n}const f4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Fv(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||f4.has(i)}let gP=i=>!Fv(i);function h4(i){i&&(gP=e=>e.startsWith("on")?!Fv(e):i(e))}try{h4(require("@emotion/is-prop-valid").default)}catch{}function d4(i,e,t){const n={};for(const r in i)r==="values"&&typeof i.values=="object"||(gP(r)||t===!0&&Fv(r)||!e&&!Fv(r)||i.draggable&&r.startsWith("onDrag"))&&(n[r]=i[r]);return n}function rC(i,e,t){return typeof i=="string"?i:Ut.transform(e+t*i)}function p4(i,e,t){const n=rC(e,i.x,i.width),r=rC(t,i.y,i.height);return`${n} ${r}`}const m4={offset:"stroke-dashoffset",array:"stroke-dasharray"},g4={offset:"strokeDashoffset",array:"strokeDasharray"};function y4(i,e,t=1,n=0,r=!0){i.pathLength=1;const s=r?m4:g4;i[s.offset]=Ut.transform(-n);const o=Ut.transform(e),l=Ut.transform(t);i[s.array]=`${o} ${l}`}function yM(i,{attrX:e,attrY:t,attrScale:n,originX:r,originY:s,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...f},p,m,y){if(mM(i,f,p,y),m){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:v,style:x,dimensions:w}=i;v.transform&&(w&&(x.transform=v.transform),delete v.transform),w&&(r!==void 0||s!==void 0||x.transform)&&(x.transformOrigin=p4(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),n!==void 0&&(v.scale=n),o!==void 0&&y4(v,o,l,c,!1)}const yP=()=>({...gM(),attrs:{}}),vM=i=>typeof i=="string"&&i.toLowerCase()==="svg";function v4(i,e,t,n){const r=q.useMemo(()=>{const s=yP();return yM(s,e,{enableHardwareAcceleration:!1},vM(n),i.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(i.style){const s={};mP(s,i.style,i),r.style={...s,...r.style}}return r}function x4(i=!1){return(t,n,r,{latestValues:s},o)=>{const c=(pM(t)?v4:u4)(n,s,o,t),p={...d4(n,typeof t=="string",i),...c,ref:r},{children:m}=n,y=q.useMemo(()=>ns(m)?m.get():m,[m]);return q.createElement(t,{...p,children:y})}}const xM=i=>i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function vP(i,{style:e,vars:t},n,r){Object.assign(i.style,e,r&&r.getProjectionStyles(n));for(const s in t)i.style.setProperty(s,t[s])}const xP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _P(i,e,t,n){vP(i,e,void 0,n);for(const r in e.attrs)i.setAttribute(xP.has(r)?r:xM(r),e.attrs[r])}function _M(i,e){const{style:t}=i,n={};for(const r in t)(ns(t[r])||e.style&&ns(e.style[r])||uP(r,i))&&(n[r]=t[r]);return n}function AP(i,e){const t=_M(i,e);for(const n in i)if(ns(i[n])||ns(e[n])){const r=Om.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;t[r]=i[n]}return t}function AM(i,e,t,n={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:i.custom,n,r)),typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:i.custom,n,r)),e}function _4(i){const e=q.useRef(null);return e.current===null&&(e.current=i()),e.current}const Nv=i=>Array.isArray(i),A4=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),S4=i=>Nv(i)?i[i.length-1]||0:i;function Gy(i){const e=ns(i)?i.get():i;return A4(e)?e.toValue():e}function M4({scrapeMotionValuesFromProps:i,createRenderState:e,onMount:t},n,r,s){const o={latestValues:w4(n,r,s,i),renderState:e()};return t&&(o.mount=l=>t(n,l,o)),o}const SP=i=>(e,t)=>{const n=q.useContext(D0),r=q.useContext(fM),s=()=>M4(i,e,n,r);return t?s():_4(s)};function w4(i,e,t,n){const r={},s=n(i,{});for(const y in s)r[y]=Gy(s[y]);let{initial:o,animate:l}=i;const c=N0(i),f=aP(i);e&&f&&!c&&i.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let p=t?t.initial===!1:!1;p=p||o===!1;const m=p?l:o;return m&&typeof m!="boolean"&&!F0(m)&&(Array.isArray(m)?m:[m]).forEach(v=>{const x=AM(i,v);if(!x)return;const{transitionEnd:w,transition:S,...M}=x;for(const C in M){let b=M[C];if(Array.isArray(b)){const R=p?b.length-1:0;b=b[R]}b!==null&&(r[C]=b)}for(const C in w)r[C]=w[C]}),r}const E4={useVisualState:SP({scrapeMotionValuesFromProps:AP,createRenderState:yP,onMount:(i,e,{renderState:t,latestValues:n})=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}yM(t,n,{enableHardwareAcceleration:!1},vM(e.tagName),i.transformTemplate),_P(e,t)}})},C4={useVisualState:SP({scrapeMotionValuesFromProps:_M,createRenderState:gM})};function b4(i,{forwardMotionProps:e=!1},t,n){return{...pM(i)?E4:C4,preloadedFeatures:t,useRender:x4(e),createVisualElement:n,Component:i}}function $a(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}const MP=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1;function k0(i,e="page"){return{point:{x:i[e+"X"],y:i[e+"Y"]}}}const T4=i=>e=>MP(e)&&i(e,k0(e));function nl(i,e,t,n){return $a(i,e,T4(t),n)}const R4=(i,e)=>t=>e(i(t)),dc=(...i)=>i.reduce(R4);function wP(i){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=i,t):!1}}const sC=wP("dragHorizontal"),oC=wP("dragVertical");function EP(i){let e=!1;if(i==="y")e=oC();else if(i==="x")e=sC();else{const t=sC(),n=oC();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function CP(){const i=EP(!0);return i?(i(),!1):!0}class wc{constructor(e){this.isMounted=!1,this.node=e}update(){}}const li=i=>i;function P4(i){let e=[],t=[],n=0,r=!1,s=!1;const o=new WeakSet,l={schedule:(c,f=!1,p=!1)=>{const m=p&&r,y=m?e:t;return f&&o.add(c),y.indexOf(c)===-1&&(y.push(c),m&&r&&(n=e.length)),c},cancel:c=>{const f=t.indexOf(c);f!==-1&&t.splice(f,1),o.delete(c)},process:c=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.length=0,n=e.length,n)for(let f=0;f<n;f++){const p=e[f];p(c),o.has(p)&&(l.schedule(p),i())}r=!1,s&&(s=!1,l.process(c))}};return l}const Fy=["prepare","read","update","preRender","render","postRender"],I4=40;function B4(i,e){let t=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Fy.reduce((m,y)=>(m[y]=P4(()=>t=!0),m),{}),o=m=>s[m].process(r),l=()=>{const m=performance.now();t=!1,r.delta=n?1e3/60:Math.max(Math.min(m-r.timestamp,I4),1),r.timestamp=m,r.isProcessing=!0,Fy.forEach(o),r.isProcessing=!1,t&&e&&(n=!1,i(l))},c=()=>{t=!0,n=!0,r.isProcessing||i(l)};return{schedule:Fy.reduce((m,y)=>{const v=s[y];return m[y]=(x,w=!1,S=!1)=>(t||c(),v.schedule(x,w,S)),m},{}),cancel:m=>Fy.forEach(y=>s[y].cancel(m)),state:r,steps:s}}const{schedule:Yn,cancel:cl,state:hr,steps:G_}=B4(typeof requestAnimationFrame<"u"?requestAnimationFrame:li,!0);function aC(i,e){const t="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||CP())return;const l=i.getProps();i.animationState&&l.whileHover&&i.animationState.setActive("whileHover",e),l[n]&&Yn.update(()=>l[n](s,o))};return nl(i.current,t,r,{passive:!i.getProps()[n]})}class D4 extends wc{mount(){this.unmount=dc(aC(this.node,!0),aC(this.node,!1))}unmount(){}}class L4 extends wc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dc($a(this.node.current,"focus",()=>this.onFocus()),$a(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const bP=(i,e)=>e?i===e?!0:bP(i,e.parentElement):!1;function V_(i,e){if(!e)return;const t=new PointerEvent("pointer"+i);e(t,k0(t))}class F4 extends wc{constructor(){super(...arguments),this.removeStartListeners=li,this.removeEndListeners=li,this.removeAccessibleListeners=li,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),s=nl(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:p}=this.node.getProps();Yn.update(()=>{bP(this.node.current,l.target)?f&&f(l,c):p&&p(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=nl(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=dc(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||V_("up",(c,f)=>{const{onTap:p}=this.node.getProps();p&&Yn.update(()=>p(c,f))})};this.removeEndListeners(),this.removeEndListeners=$a(this.node.current,"keyup",o),V_("down",(l,c)=>{this.startPress(l,c)})},t=$a(this.node.current,"keydown",e),n=()=>{this.isPressing&&V_("cancel",(s,o)=>this.cancelPress(s,o))},r=$a(this.node.current,"blur",n);this.removeAccessibleListeners=dc(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Yn.update(()=>n(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!CP()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Yn.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=nl(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=$a(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=dc(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const WA=new WeakMap,W_=new WeakMap,N4=i=>{const e=WA.get(i.target);e&&e(i)},O4=i=>{i.forEach(N4)};function k4({root:i,...e}){const t=i||document;W_.has(t)||W_.set(t,{});const n=W_.get(t),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(O4,{root:i,...e})),n[r]}function U4(i,e,t){const n=k4(e);return WA.set(i,t),n.observe(i),()=>{WA.delete(i),n.unobserve(i)}}const z4={some:0,all:1};class H4 extends wc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:z4[r]},l=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=f?p:m;y&&y(c)};return U4(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(G4(e,t))&&this.startObserver()}unmount(){}}function G4({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const V4={inView:{Feature:H4},tap:{Feature:F4},focus:{Feature:L4},hover:{Feature:D4}};function TP(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}function W4(i){const e={};return i.values.forEach((t,n)=>e[n]=t.get()),e}function j4(i){const e={};return i.values.forEach((t,n)=>e[n]=t.getVelocity()),e}function U0(i,e,t){const n=i.getProps();return AM(n,e,t!==void 0?t:n.custom,W4(i),j4(i))}const X4="framerAppearId",J4="data-"+xM(X4);let SM=li;const ju=i=>i*1e3,il=i=>i/1e3,K4={current:!1},RP=i=>Array.isArray(i)&&typeof i[0]=="number";function PP(i){return!!(!i||typeof i=="string"&&IP[i]||RP(i)||Array.isArray(i)&&i.every(PP))}const Lp=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,IP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lp([0,.65,.55,1]),circOut:Lp([.55,0,1,.45]),backIn:Lp([.31,.01,.66,-.59]),backOut:Lp([.33,1.53,.69,.99])};function BP(i){if(i)return RP(i)?Lp(i):Array.isArray(i)?i.map(BP):IP[i]}function Y4(i,e,t,{delay:n=0,duration:r,repeat:s=0,repeatType:o="loop",ease:l,times:c}={}){const f={[e]:t};c&&(f.offset=c);const p=BP(l);return Array.isArray(p)&&(f.easing=p),i.animate(f,{delay:n,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function q4(i,{repeat:e,repeatType:t="loop"}){const n=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[n]}const DP=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,Q4=1e-7,Z4=12;function $4(i,e,t,n,r){let s,o,l=0;do o=e+(t-e)/2,s=DP(o,n,r)-i,s>0?t=o:e=o;while(Math.abs(s)>Q4&&++l<Z4);return o}function zm(i,e,t,n){if(i===e&&t===n)return li;const r=s=>$4(s,0,1,i,t);return s=>s===0||s===1?s:DP(r(s),e,n)}const eG=zm(.42,0,1,1),tG=zm(0,0,.58,1),LP=zm(.42,0,.58,1),nG=i=>Array.isArray(i)&&typeof i[0]!="number",FP=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,NP=i=>e=>1-i(1-e),OP=i=>1-Math.sin(Math.acos(i)),MM=NP(OP),iG=FP(MM),kP=zm(.33,1.53,.69,.99),wM=NP(kP),rG=FP(wM),sG=i=>(i*=2)<1?.5*wM(i):.5*(2-Math.pow(2,-10*(i-1))),oG={linear:li,easeIn:eG,easeInOut:LP,easeOut:tG,circIn:OP,circInOut:iG,circOut:MM,backIn:wM,backInOut:rG,backOut:kP,anticipate:sG},lC=i=>{if(Array.isArray(i)){SM(i.length===4);const[e,t,n,r]=i;return zm(e,t,n,r)}else if(typeof i=="string")return oG[i];return i},EM=(i,e)=>t=>!!(km(t)&&s4.test(t)&&t.startsWith(i)||e&&Object.prototype.hasOwnProperty.call(t,e)),UP=(i,e,t)=>n=>{if(!km(n))return n;const[r,s,o,l]=n.match(O0);return{[i]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},aG=i=>vc(0,255,i),j_={...uf,transform:i=>Math.round(aG(i))},ku={test:EM("rgb","red"),parse:UP("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+j_.transform(i)+", "+j_.transform(e)+", "+j_.transform(t)+", "+jp(Wp.transform(n))+")"};function lG(i){let e="",t="",n="",r="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),r=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),r=i.substring(4,5),e+=e,t+=t,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const jA={test:EM("#"),parse:lG,transform:ku.transform},Vh={test:EM("hsl","hue"),parse:UP("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+ua.transform(jp(e))+", "+ua.transform(jp(t))+", "+jp(Wp.transform(n))+")"},Ir={test:i=>ku.test(i)||jA.test(i)||Vh.test(i),parse:i=>ku.test(i)?ku.parse(i):Vh.test(i)?Vh.parse(i):jA.parse(i),transform:i=>km(i)?i:i.hasOwnProperty("red")?ku.transform(i):Vh.transform(i)},Kn=(i,e,t)=>-t*i+t*e+i;function X_(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function cG({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;r=X_(c,l,i+1/3),s=X_(c,l,i),o=X_(c,l,i-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}const J_=(i,e,t)=>{const n=i*i;return Math.sqrt(Math.max(0,t*(e*e-n)+n))},uG=[jA,ku,Vh],fG=i=>uG.find(e=>e.test(i));function cC(i){const e=fG(i);let t=e.parse(i);return e===Vh&&(t=cG(t)),t}const zP=(i,e)=>{const t=cC(i),n=cC(e),r={...t};return s=>(r.red=J_(t.red,n.red,s),r.green=J_(t.green,n.green,s),r.blue=J_(t.blue,n.blue,s),r.alpha=Kn(t.alpha,n.alpha,s),ku.transform(r))};function hG(i){var e,t;return isNaN(i)&&km(i)&&(((e=i.match(O0))===null||e===void 0?void 0:e.length)||0)+(((t=i.match(dP))===null||t===void 0?void 0:t.length)||0)>0}const HP={regex:i4,countKey:"Vars",token:"${v}",parse:li},GP={regex:dP,countKey:"Colors",token:"${c}",parse:Ir.parse},VP={regex:O0,countKey:"Numbers",token:"${n}",parse:uf.parse};function K_(i,{regex:e,countKey:t,token:n,parse:r}){const s=i.tokenised.match(e);s&&(i["num"+t]=s.length,i.tokenised=i.tokenised.replace(e,n),i.values.push(...s.map(r)))}function Ov(i){const e=i.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&K_(t,HP),K_(t,GP),K_(t,VP),t}function WP(i){return Ov(i).values}function jP(i){const{values:e,numColors:t,numVars:n,tokenised:r}=Ov(i),s=e.length;return o=>{let l=r;for(let c=0;c<s;c++)c<n?l=l.replace(HP.token,o[c]):c<n+t?l=l.replace(GP.token,Ir.transform(o[c])):l=l.replace(VP.token,jp(o[c]));return l}}const dG=i=>typeof i=="number"?0:i;function pG(i){const e=WP(i);return jP(i)(e.map(dG))}const xc={test:hG,parse:WP,createTransformer:jP,getAnimatableNone:pG},XP=(i,e)=>t=>`${t>0?e:i}`;function JP(i,e){return typeof i=="number"?t=>Kn(i,e,t):Ir.test(i)?zP(i,e):i.startsWith("var(")?XP(i,e):YP(i,e)}const KP=(i,e)=>{const t=[...i],n=t.length,r=i.map((s,o)=>JP(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=r[o](s);return t}},mG=(i,e)=>{const t={...i,...e},n={};for(const r in t)i[r]!==void 0&&e[r]!==void 0&&(n[r]=JP(i[r],e[r]));return r=>{for(const s in n)t[s]=n[s](r);return t}},YP=(i,e)=>{const t=xc.createTransformer(e),n=Ov(i),r=Ov(e);return n.numVars===r.numVars&&n.numColors===r.numColors&&n.numNumbers>=r.numNumbers?dc(KP(n.values,r.values),t):XP(i,e)},mm=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n},uC=(i,e)=>t=>Kn(i,e,t);function gG(i){return typeof i=="number"?uC:typeof i=="string"?Ir.test(i)?zP:YP:Array.isArray(i)?KP:typeof i=="object"?mG:uC}function yG(i,e,t){const n=[],r=t||gG(i[0]),s=i.length-1;for(let o=0;o<s;o++){let l=r(i[o],i[o+1]);if(e){const c=Array.isArray(e)?e[o]||li:e;l=dc(c,l)}n.push(l)}return n}function qP(i,e,{clamp:t=!0,ease:n,mixer:r}={}){const s=i.length;if(SM(s===e.length),s===1)return()=>e[0];i[0]>i[s-1]&&(i=[...i].reverse(),e=[...e].reverse());const o=yG(e,n,r),l=o.length,c=f=>{let p=0;if(l>1)for(;p<i.length-2&&!(f<i[p+1]);p++);const m=mm(i[p],i[p+1],f);return o[p](m)};return t?f=>c(vc(i[0],i[s-1],f)):c}function vG(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const r=mm(0,e,n);i.push(Kn(t,1,r))}}function xG(i){const e=[0];return vG(e,i.length-1),e}function _G(i,e){return i.map(t=>t*e)}function AG(i,e){return i.map(()=>e||LP).splice(0,i.length-1)}function kv({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const r=nG(n)?n.map(lC):lC(n),s={done:!1,value:e[0]},o=_G(t&&t.length===e.length?t:xG(e),i),l=qP(o,e,{ease:Array.isArray(r)?r:AG(e,r)});return{calculatedDuration:i,next:c=>(s.value=l(c),s.done=c>=i,s)}}function QP(i,e){return e?i*(1e3/e):0}const SG=5;function ZP(i,e,t){const n=Math.max(e-SG,0);return QP(t-i(n),e-n)}const Y_=.001,MG=.01,wG=10,EG=.05,CG=1;function bG({duration:i=800,bounce:e=.25,velocity:t=0,mass:n=1}){let r,s,o=1-e;o=vc(EG,CG,o),i=vc(MG,wG,il(i)),o<1?(r=f=>{const p=f*o,m=p*i,y=p-t,v=XA(f,o),x=Math.exp(-m);return Y_-y/v*x},s=f=>{const m=f*o*i,y=m*t+t,v=Math.pow(o,2)*Math.pow(f,2)*i,x=Math.exp(-m),w=XA(Math.pow(f,2),o);return(-r(f)+Y_>0?-1:1)*((y-v)*x)/w}):(r=f=>{const p=Math.exp(-f*i),m=(f-t)*i+1;return-Y_+p*m},s=f=>{const p=Math.exp(-f*i),m=(t-f)*(i*i);return p*m});const l=5/i,c=RG(r,s,l);if(i=ju(i),isNaN(c))return{stiffness:100,damping:10,duration:i};{const f=Math.pow(c,2)*n;return{stiffness:f,damping:o*2*Math.sqrt(n*f),duration:i}}}const TG=12;function RG(i,e,t){let n=t;for(let r=1;r<TG;r++)n=n-i(n)/e(n);return n}function XA(i,e){return i*Math.sqrt(1-e*e)}const PG=["duration","bounce"],IG=["stiffness","damping","mass"];function fC(i,e){return e.some(t=>i[t]!==void 0)}function BG(i){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...i};if(!fC(i,IG)&&fC(i,PG)){const t=bG(i);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function $P({keyframes:i,restDelta:e,restSpeed:t,...n}){const r=i[0],s=i[i.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:f,velocity:p,duration:m,isResolvedFromDuration:y}=BG(n),v=p?-il(p):0,x=c/(2*Math.sqrt(l*f)),w=s-r,S=il(Math.sqrt(l/f)),M=Math.abs(w)<5;t||(t=M?.01:2),e||(e=M?.005:.5);let C;if(x<1){const b=XA(S,x);C=R=>{const O=Math.exp(-x*S*R);return s-O*((v+x*S*w)/b*Math.sin(b*R)+w*Math.cos(b*R))}}else if(x===1)C=b=>s-Math.exp(-S*b)*(w+(v+S*w)*b);else{const b=S*Math.sqrt(x*x-1);C=R=>{const O=Math.exp(-x*S*R),F=Math.min(b*R,300);return s-O*((v+x*S*w)*Math.sinh(F)+b*w*Math.cosh(F))/b}}return{calculatedDuration:y&&m||null,next:b=>{const R=C(b);if(y)o.done=b>=m;else{let O=v;b!==0&&(x<1?O=ZP(C,b,R):O=0);const F=Math.abs(O)<=t,N=Math.abs(s-R)<=e;o.done=F&&N}return o.value=o.done?s:R,o}}}function hC({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:f=.5,restSpeed:p}){const m=i[0],y={done:!1,value:m},v=U=>l!==void 0&&U<l||c!==void 0&&U>c,x=U=>l===void 0?c:c===void 0||Math.abs(l-U)<Math.abs(c-U)?l:c;let w=t*e;const S=m+w,M=o===void 0?S:o(S);M!==S&&(w=M-m);const C=U=>-w*Math.exp(-U/n),b=U=>M+C(U),R=U=>{const J=C(U),B=b(U);y.done=Math.abs(J)<=f,y.value=y.done?M:B};let O,F;const N=U=>{v(y.value)&&(O=U,F=$P({keyframes:[y.value,x(y.value)],velocity:ZP(b,U,y.value),damping:r,stiffness:s,restDelta:f,restSpeed:p}))};return N(0),{calculatedDuration:null,next:U=>{let J=!1;return!F&&O===void 0&&(J=!0,R(U),N(U)),O!==void 0&&U>O?F.next(U-O):(!J&&R(U),y)}}}const DG=i=>{const e=({timestamp:t})=>i(t);return{start:()=>Yn.update(e,!0),stop:()=>cl(e),now:()=>hr.isProcessing?hr.timestamp:performance.now()}},dC=2e4;function pC(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<dC;)e+=t,n=i.next(e);return e>=dC?1/0:e}const LG={decay:hC,inertia:hC,tween:kv,keyframes:kv,spring:$P};function Uv({autoplay:i=!0,delay:e=0,driver:t=DG,keyframes:n,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:f,onComplete:p,onUpdate:m,...y}){let v=1,x=!1,w,S;const M=()=>{S=new Promise(Y=>{w=Y})};M();let C;const b=LG[r]||kv;let R;b!==kv&&typeof n[0]!="number"&&(R=qP([0,100],n,{clamp:!1}),n=[0,100]);const O=b({...y,keyframes:n});let F;l==="mirror"&&(F=b({...y,keyframes:[...n].reverse(),velocity:-(y.velocity||0)}));let N="idle",U=null,J=null,B=null;O.calculatedDuration===null&&s&&(O.calculatedDuration=pC(O));const{calculatedDuration:L}=O;let ne=1/0,ie=1/0;L!==null&&(ne=L+o,ie=ne*(s+1)-o);let ce=0;const de=Y=>{if(J===null)return;v>0&&(J=Math.min(J,Y)),v<0&&(J=Math.min(Y-ie/v,J)),U!==null?ce=U:ce=Math.round(Y-J)*v;const pe=ce-e*(v>=0?1:-1),Ne=v>=0?pe<0:pe>ie;ce=Math.max(pe,0),N==="finished"&&U===null&&(ce=ie);let oe=ce,ve=O;if(s){const rt=ce/ne;let pt=Math.floor(rt),We=rt%1;!We&&rt>=1&&(We=1),We===1&&pt--,pt=Math.min(pt,s+1);const Pe=!!(pt%2);Pe&&(l==="reverse"?(We=1-We,o&&(We-=o/ne)):l==="mirror"&&(ve=F));let j=vc(0,1,We);ce>ie&&(j=l==="reverse"&&Pe?1:0),oe=j*ne}const be=Ne?{done:!1,value:n[0]}:ve.next(oe);R&&(be.value=R(be.value));let{done:Ie}=be;!Ne&&L!==null&&(Ie=v>=0?ce>=ie:ce<=0);const Xe=U===null&&(N==="finished"||N==="running"&&Ie);return m&&m(be.value),Xe&&G(),be},le=()=>{C&&C.stop(),C=void 0},ye=()=>{N="idle",le(),w(),M(),J=B=null},G=()=>{N="finished",p&&p(),le(),w()},Z=()=>{if(x)return;C||(C=t(de));const Y=C.now();c&&c(),U!==null?J=Y-U:(!J||N==="finished")&&(J=Y),N==="finished"&&M(),B=J,U=null,N="running",C.start()};i&&Z();const z={then(Y,pe){return S.then(Y,pe)},get time(){return il(ce)},set time(Y){Y=ju(Y),ce=Y,U!==null||!C||v===0?U=Y:J=C.now()-Y/v},get duration(){const Y=O.calculatedDuration===null?pC(O):O.calculatedDuration;return il(Y)},get speed(){return v},set speed(Y){Y===v||!C||(v=Y,z.time=il(ce))},get state(){return N},play:Z,pause:()=>{N="paused",U=ce},stop:()=>{x=!0,N!=="idle"&&(N="idle",f&&f(),ye())},cancel:()=>{B!==null&&de(B),ye()},complete:()=>{N="finished"},sample:Y=>(J=0,de(Y))};return z}function FG(i){let e;return()=>(e===void 0&&(e=i()),e)}const NG=FG(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),OG=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ny=10,kG=2e4,UG=(i,e)=>e.type==="spring"||i==="backgroundColor"||!PP(e.ease);function zG(i,e,{onUpdate:t,onComplete:n,...r}){if(!(NG()&&OG.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,l,c;const f=()=>{c=new Promise(C=>{l=C})};f();let{keyframes:p,duration:m=300,ease:y,times:v}=r;if(UG(e,r)){const C=Uv({...r,repeat:0,delay:0});let b={done:!1,value:p[0]};const R=[];let O=0;for(;!b.done&&O<kG;)b=C.sample(O),R.push(b.value),O+=Ny;v=void 0,p=R,m=O-Ny,y="linear"}const x=Y4(i.owner.current,e,p,{...r,duration:m,ease:y,times:v}),w=()=>x.cancel(),S=()=>{Yn.update(w),l(),f()};return x.onfinish=()=>{i.set(q4(p,r)),n&&n(),S()},{then(C,b){return c.then(C,b)},attachTimeline(C){return x.timeline=C,x.onfinish=null,li},get time(){return il(x.currentTime||0)},set time(C){x.currentTime=ju(C)},get speed(){return x.playbackRate},set speed(C){x.playbackRate=C},get duration(){return il(m)},play:()=>{o||(x.play(),cl(w))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:C}=x;if(C){const b=Uv({...r,autoplay:!1});i.setWithVelocity(b.sample(C-Ny).value,b.sample(C).value,Ny)}S()},complete:()=>x.finish(),cancel:S}}function HG({keyframes:i,delay:e,onUpdate:t,onComplete:n}){const r=()=>(t&&t(i[i.length-1]),n&&n(),{time:0,speed:1,duration:0,play:li,pause:li,stop:li,then:s=>(s(),Promise.resolve()),cancel:li,complete:li});return e?Uv({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const GG={type:"spring",stiffness:500,damping:25,restSpeed:10},VG=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),WG={type:"keyframes",duration:.8},jG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XG=(i,{keyframes:e})=>e.length>2?WG:cf.has(i)?i.startsWith("scale")?VG(e[1]):GG:jG,JA=(i,e)=>i==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(xc.test(e)||e==="0")&&!e.startsWith("url(")),JG=new Set(["brightness","contrast","saturate","opacity"]);function KG(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(O0)||[];if(!n)return i;const r=t.replace(n,"");let s=JG.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+r+")"}const YG=/([a-z-]*)\(.*?\)/g,KA={...xc,getAnimatableNone:i=>{const e=i.match(YG);return e?e.map(KG).join(" "):i}},qG={...pP,color:Ir,backgroundColor:Ir,outlineColor:Ir,fill:Ir,stroke:Ir,borderColor:Ir,borderTopColor:Ir,borderRightColor:Ir,borderBottomColor:Ir,borderLeftColor:Ir,filter:KA,WebkitFilter:KA},CM=i=>qG[i];function e2(i,e){let t=CM(i);return t!==KA&&(t=xc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const t2=i=>/^0[^.\s]+$/.test(i);function QG(i){if(typeof i=="number")return i===0;if(i!==null)return i==="none"||i==="0"||t2(i)}function ZG(i,e,t,n){const r=JA(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=n.from!==void 0?n.from:i.get();let l;const c=[];for(let f=0;f<s.length;f++)s[f]===null&&(s[f]=f===0?o:s[f-1]),QG(s[f])&&c.push(f),typeof s[f]=="string"&&s[f]!=="none"&&s[f]!=="0"&&(l=s[f]);if(r&&c.length&&l)for(let f=0;f<c.length;f++){const p=c[f];s[p]=e2(e,l)}return s}function $G({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:f,...p}){return!!Object.keys(p).length}function n2(i,e){return i[e]||i.default||i}const bM=(i,e,t,n={})=>r=>{const s=n2(n,i)||{},o=s.delay||n.delay||0;let{elapsed:l=0}=n;l=l-ju(o);const c=ZG(e,i,t,s),f=c[0],p=c[c.length-1],m=JA(i,f),y=JA(i,p);let v={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-l,onUpdate:x=>{e.set(x),s.onUpdate&&s.onUpdate(x)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if($G(s)||(v={...v,...XG(i,v)}),v.duration&&(v.duration=ju(v.duration)),v.repeatDelay&&(v.repeatDelay=ju(v.repeatDelay)),!m||!y||K4.current||s.type===!1)return HG(v);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const x=zG(e,i,v);if(x)return x}return Uv(v)};function zv(i){return!!(ns(i)&&i.add)}const i2=i=>/^\-?\d*\.?\d+$/.test(i);function TM(i,e){i.indexOf(e)===-1&&i.push(e)}function RM(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}class PM{constructor(){this.subscriptions=[]}add(e){return TM(this.subscriptions,e),()=>RM(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const eV=i=>!isNaN(parseFloat(i));class tV{constructor(e,t={}){this.version="10.15.2",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,r=!0)=>{this.prev=this.current,this.current=n;const{delta:s,timestamp:o}=hr;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Yn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Yn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=eV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new PM);const n=this.events[e].add(t);return e==="change"?()=>{n(),Yn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?QP(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ad(i,e){return new tV(i,e)}const r2=i=>e=>e.test(i),nV={test:i=>i==="auto",parse:i=>i},s2=[uf,Ut,ua,lc,a4,o4,nV],Cp=i=>s2.find(r2(i)),iV=[...s2,Ir,xc],rV=i=>iV.find(r2(i));function sV(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,ad(t))}function oV(i,e){const t=U0(i,e);let{transitionEnd:n={},transition:r={},...s}=t?i.makeTargetAnimatable(t,!1):{};s={...s,...n};for(const o in s){const l=S4(s[o]);sV(i,o,l)}}function aV(i,e,t){var n,r;const s=Object.keys(e).filter(l=>!i.hasValue(l)),o=s.length;if(o)for(let l=0;l<o;l++){const c=s[l],f=e[c];let p=null;Array.isArray(f)&&(p=f[0]),p===null&&(p=(r=(n=t[c])!==null&&n!==void 0?n:i.readValue(c))!==null&&r!==void 0?r:e[c]),p!=null&&(typeof p=="string"&&(i2(p)||t2(p))?p=parseFloat(p):!rV(p)&&xc.test(f)&&(p=e2(c,f)),i.addValue(c,ad(p,{owner:i})),t[c]===void 0&&(t[c]=p),p!==null&&i.setBaseTarget(c,p))}}function lV(i,e){return e?(e[i]||e.default||e).from:void 0}function cV(i,e,t){const n={};for(const r in i){const s=lV(r,e);if(s!==void 0)n[r]=s;else{const o=t.getValue(r);o&&(n[r]=o.get())}}return n}function uV({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function o2(i,e,{delay:t=0,transitionOverride:n,type:r}={}){let{transition:s=i.getDefaultTransition(),transitionEnd:o,...l}=i.makeTargetAnimatable(e);const c=i.getValue("willChange");n&&(s=n);const f=[],p=r&&i.animationState&&i.animationState.getState()[r];for(const m in l){const y=i.getValue(m),v=l[m];if(!y||v===void 0||p&&uV(p,m))continue;const x={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!y.hasAnimated){const S=i.getProps()[J4];S&&(x.elapsed=window.HandoffAppearAnimations(S,m,y,Yn))}y.start(bM(m,y,v,i.shouldReduceMotion&&cf.has(m)?{type:!1}:x));const w=y.animation;zv(c)&&(c.add(m),w.then(()=>c.remove(m))),f.push(w)}return o&&Promise.all(f).then(()=>{o&&oV(i,o)}),f}function YA(i,e,t={}){const n=U0(i,e,t.custom);let{transition:r=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(r=t.transitionOverride);const s=n?()=>Promise.all(o2(i,n,t)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=r;return fV(i,e,f+c,p,m,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,f]=l==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(t.delay)])}function fV(i,e,t=0,n=0,r=1,s){const o=[],l=(i.variantChildren.size-1)*n,c=r===1?(f=0)=>f*n:(f=0)=>l-f*n;return Array.from(i.variantChildren).sort(hV).forEach((f,p)=>{f.notify("AnimationStart",e),o.push(YA(f,e,{...s,delay:t+c(p)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(o)}function hV(i,e){return i.sortNodePosition(e)}function dV(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(s=>YA(i,s,t));n=Promise.all(r)}else if(typeof e=="string")n=YA(i,e,t);else{const r=typeof e=="function"?U0(i,e,t.custom):e;n=Promise.all(o2(i,r,t))}return n.then(()=>i.notify("AnimationComplete",e))}const pV=[...hM].reverse(),mV=hM.length;function gV(i){return e=>Promise.all(e.map(({animation:t,options:n})=>dV(i,t,n)))}function yV(i){let e=gV(i);const t=xV();let n=!0;const r=(c,f)=>{const p=U0(i,f);if(p){const{transition:m,transitionEnd:y,...v}=p;c={...c,...v,...y}}return c};function s(c){e=c(i)}function o(c,f){const p=i.getProps(),m=i.getVariantContext(!0)||{},y=[],v=new Set;let x={},w=1/0;for(let M=0;M<mV;M++){const C=pV[M],b=t[C],R=p[C]!==void 0?p[C]:m[C],O=dm(R),F=C===f?b.isActive:null;F===!1&&(w=M);let N=R===m[C]&&R!==p[C]&&O;if(N&&n&&i.manuallyAnimateOnMount&&(N=!1),b.protectedKeys={...x},!b.isActive&&F===null||!R&&!b.prevProp||F0(R)||typeof R=="boolean")continue;const U=vV(b.prevProp,R);let J=U||C===f&&b.isActive&&!N&&O||M>w&&O;const B=Array.isArray(R)?R:[R];let L=B.reduce(r,{});F===!1&&(L={});const{prevResolvedValues:ne={}}=b,ie={...ne,...L},ce=de=>{J=!0,v.delete(de),b.needsAnimating[de]=!0};for(const de in ie){const le=L[de],ye=ne[de];x.hasOwnProperty(de)||(le!==ye?Nv(le)&&Nv(ye)?!TP(le,ye)||U?ce(de):b.protectedKeys[de]=!0:le!==void 0?ce(de):v.add(de):le!==void 0&&v.has(de)?ce(de):b.protectedKeys[de]=!0)}b.prevProp=R,b.prevResolvedValues=L,b.isActive&&(x={...x,...L}),n&&i.blockInitialAnimation&&(J=!1),J&&!N&&y.push(...B.map(de=>({animation:de,options:{type:C,...c}})))}if(v.size){const M={};v.forEach(C=>{const b=i.getBaseTarget(C);b!==void 0&&(M[C]=b)}),y.push({animation:M})}let S=!!y.length;return n&&p.initial===!1&&!i.manuallyAnimateOnMount&&(S=!1),n=!1,S?e(y):Promise.resolve()}function l(c,f,p){var m;if(t[c].isActive===f)return Promise.resolve();(m=i.variantChildren)===null||m===void 0||m.forEach(v=>{var x;return(x=v.animationState)===null||x===void 0?void 0:x.setActive(c,f)}),t[c].isActive=f;const y=o(p,c);for(const v in t)t[v].protectedKeys={};return y}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>t}}function vV(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!TP(e,i):!1}function Su(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xV(){return{animate:Su(!0),whileInView:Su(),whileHover:Su(),whileTap:Su(),whileDrag:Su(),whileFocus:Su(),exit:Su()}}class _V extends wc{constructor(e){super(e),e.animationState||(e.animationState=yV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),F0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let AV=0;class SV extends wc{constructor(){super(...arguments),this.id=AV++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const MV={animation:{Feature:_V},exit:{Feature:SV}},mC=(i,e)=>Math.abs(i-e);function wV(i,e){const t=mC(i.x,e.x),n=mC(i.y,e.y);return Math.sqrt(t**2+n**2)}class a2{constructor(e,t,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Q_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=wV(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:v}=hr;this.history.push({...y,timestamp:v});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=q_(p,this.transformPagePoint),Yn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:m,onSessionEnd:y}=this.handlers,v=Q_(f.type==="pointercancel"?this.lastMoveEventInfo:q_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,v),y&&y(f,v)},!MP(e))return;this.handlers=t,this.transformPagePoint=n;const r=k0(e),s=q_(r,this.transformPagePoint),{point:o}=s,{timestamp:l}=hr;this.history=[{...o,timestamp:l}];const{onSessionStart:c}=t;c&&c(e,Q_(s,this.history)),this.removeListeners=dc(nl(window,"pointermove",this.handlePointerMove),nl(window,"pointerup",this.handlePointerUp),nl(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cl(this.updatePoint)}}function q_(i,e){return e?{point:e(i.point)}:i}function gC(i,e){return{x:i.x-e.x,y:i.y-e.y}}function Q_({point:i},e){return{point:i,delta:gC(i,l2(e)),offset:gC(i,EV(e)),velocity:CV(e,.1)}}function EV(i){return i[0]}function l2(i){return i[i.length-1]}function CV(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const r=l2(i);for(;t>=0&&(n=i[t],!(r.timestamp-n.timestamp>ju(e)));)t--;if(!n)return{x:0,y:0};const s=il(r.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ws(i){return i.max-i.min}function qA(i,e=0,t=.01){return Math.abs(i-e)<=t}function yC(i,e,t,n=.5){i.origin=n,i.originPoint=Kn(e.min,e.max,i.origin),i.scale=ws(t)/ws(e),(qA(i.scale,1,1e-4)||isNaN(i.scale))&&(i.scale=1),i.translate=Kn(t.min,t.max,i.origin)-i.originPoint,(qA(i.translate)||isNaN(i.translate))&&(i.translate=0)}function Xp(i,e,t,n){yC(i.x,e.x,t.x,n?n.originX:void 0),yC(i.y,e.y,t.y,n?n.originY:void 0)}function vC(i,e,t){i.min=t.min+e.min,i.max=i.min+ws(e)}function bV(i,e,t){vC(i.x,e.x,t.x),vC(i.y,e.y,t.y)}function xC(i,e,t){i.min=e.min-t.min,i.max=i.min+ws(e)}function Jp(i,e,t){xC(i.x,e.x,t.x),xC(i.y,e.y,t.y)}function TV(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?Kn(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?Kn(t,i,n.max):Math.min(i,t)),i}function _C(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function RV(i,{top:e,left:t,bottom:n,right:r}){return{x:_C(i.x,t,r),y:_C(i.y,e,n)}}function AC(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function PV(i,e){return{x:AC(i.x,e.x),y:AC(i.y,e.y)}}function IV(i,e){let t=.5;const n=ws(i),r=ws(e);return r>n?t=mm(e.min,e.max-n,i.min):n>r&&(t=mm(i.min,i.max-r,e.min)),vc(0,1,t)}function BV(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const QA=.35;function DV(i=QA){return i===!1?i=0:i===!0&&(i=QA),{x:SC(i,"left","right"),y:SC(i,"top","bottom")}}function SC(i,e,t){return{min:MC(i,e),max:MC(i,t)}}function MC(i,e){return typeof i=="number"?i:i[e]||0}const wC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wh=()=>({x:wC(),y:wC()}),EC=()=>({min:0,max:0}),Ai=()=>({x:EC(),y:EC()});function ra(i){return[i("x"),i("y")]}function c2({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function LV({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function FV(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function Z_(i){return i===void 0||i===1}function ZA({scale:i,scaleX:e,scaleY:t}){return!Z_(i)||!Z_(e)||!Z_(t)}function bu(i){return ZA(i)||u2(i)||i.z||i.rotate||i.rotateX||i.rotateY}function u2(i){return CC(i.x)||CC(i.y)}function CC(i){return i&&i!=="0%"}function Hv(i,e,t){const n=i-t,r=e*n;return t+r}function bC(i,e,t,n,r){return r!==void 0&&(i=Hv(i,r,n)),Hv(i,t,n)+e}function $A(i,e=0,t=1,n,r){i.min=bC(i.min,e,t,n,r),i.max=bC(i.max,e,t,n,r)}function f2(i,{x:e,y:t}){$A(i.x,e.translate,e.scale,e.originPoint),$A(i.y,t.translate,t.scale,t.originPoint)}function NV(i,e,t,n=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let l=0;l<r;l++){s=t[l],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&jh(i,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,f2(i,o)),n&&bu(s.latestValues)&&jh(i,s.latestValues))}e.x=TC(e.x),e.y=TC(e.y)}function TC(i){return Number.isInteger(i)||i>1.0000000000001||i<.999999999999?i:1}function cc(i,e){i.min=i.min+e,i.max=i.max+e}function RC(i,e,[t,n,r]){const s=e[r]!==void 0?e[r]:.5,o=Kn(i.min,i.max,s);$A(i,e[t],e[n],o,e.scale)}const OV=["x","scaleX","originX"],kV=["y","scaleY","originY"];function jh(i,e){RC(i.x,e,OV),RC(i.y,e,kV)}function h2(i,e){return c2(FV(i.getBoundingClientRect(),e))}function UV(i,e,t){const n=h2(i,t),{scroll:r}=e;return r&&(cc(n.x,r.offset.x),cc(n.y,r.offset.y)),n}const zV=new WeakMap;class HV{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ai(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=c=>{this.stopAnimation(),t&&this.snapToCursor(k0(c,"page").point)},s=(c,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=EP(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ra(x=>{let w=this.getAxisMotionValue(x).get()||0;if(ua.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const M=S.layout.layoutBox[x];M&&(w=ws(M)*(parseFloat(w)/100))}}this.originPoint[x]=w}),y&&Yn.update(()=>y(c,f),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=GV(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),v&&v(c,f)},l=(c,f)=>this.stop(c,f);this.panSession=new a2(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:l},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Yn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Oy(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=TV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:n}=this.visualElement.projection||{},r=this.constraints;e&&Gh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=RV(n.layoutBox,e):this.constraints=!1,this.elastic=DV(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ra(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=BV(n.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gh(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=UV(n,r.root,this.visualElement.getTransformPagePoint());let o=PV(r.layout.layoutBox,s);if(t){const l=t(LV(o));this.hasMutatedConstraints=!!l,l&&(o=c2(l))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},f=ra(p=>{if(!Oy(p,t,this.currentDirection))return;let m=c&&c[p]||{};o&&(m={min:0,max:0});const y=r?200:1e6,v=r?40:1e7,x={type:"inertia",velocity:n?e[p]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(p,x)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(bM(e,n,0,t))}stopAnimation(){ra(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ra(t=>{const{drag:n}=this.getProps();if(!Oy(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[t];s.set(e[t]-Kn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Gh(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ra(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();r[o]=IV({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ra(o=>{if(!Oy(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:f}=this.constraints[o];l.set(Kn(c,f,r[o]))})}addListeners(){if(!this.visualElement.current)return;zV.set(this.visualElement,this);const e=this.visualElement.current,t=nl(e,"pointerdown",c=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Gh(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();const o=$a(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(ra(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=c[p].translate,m.set(m.get()+c[p].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=QA,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Oy(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function GV(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class VV extends wc{constructor(e){super(e),this.removeGroupControls=li,this.removeListeners=li,this.controls=new HV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||li}unmount(){this.removeGroupControls(),this.removeListeners()}}const PC=i=>(e,t)=>{i&&Yn.update(()=>i(e,t))};class WV extends wc{constructor(){super(...arguments),this.removePointerDownListener=li}onPointerDown(e){this.session=new a2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:PC(e),onStart:PC(t),onMove:n,onEnd:(s,o)=>{delete this.session,r&&Yn.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=nl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function jV(){const i=q.useContext(fM);if(i===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:n}=i,r=q.useId();return q.useEffect(()=>n(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const Vy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IC(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const bp={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Ut.test(i))i=parseFloat(i);else return i;const t=IC(i,e.target.x),n=IC(i,e.target.y);return`${t}% ${n}%`}},XV={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,r=xc.parse(i);if(r.length>5)return n;const s=xc.createTransformer(i),o=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const f=Kn(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=f),typeof r[3+o]=="number"&&(r[3+o]/=f),s(r)}};class JV extends Zh.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;$H(KV),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Vy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Yn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function d2(i){const[e,t]=jV(),n=q.useContext(lP);return Zh.createElement(JV,{...i,layoutGroup:n,switchLayoutGroup:q.useContext(cP),isPresent:e,safeToRemove:t})}const KV={borderRadius:{...bp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bp,borderTopRightRadius:bp,borderBottomLeftRadius:bp,borderBottomRightRadius:bp,boxShadow:XV},p2=["TopLeft","TopRight","BottomLeft","BottomRight"],YV=p2.length,BC=i=>typeof i=="string"?parseFloat(i):i,DC=i=>typeof i=="number"||Ut.test(i);function qV(i,e,t,n,r,s){r?(i.opacity=Kn(0,t.opacity!==void 0?t.opacity:1,QV(n)),i.opacityExit=Kn(e.opacity!==void 0?e.opacity:1,0,ZV(n))):s&&(i.opacity=Kn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<YV;o++){const l=`border${p2[o]}Radius`;let c=LC(e,l),f=LC(t,l);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||DC(c)===DC(f)?(i[l]=Math.max(Kn(BC(c),BC(f),n),0),(ua.test(f)||ua.test(c))&&(i[l]+="%")):i[l]=f}(e.rotate||t.rotate)&&(i.rotate=Kn(e.rotate||0,t.rotate||0,n))}function LC(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const QV=m2(0,.5,MM),ZV=m2(.5,.95,li);function m2(i,e,t){return n=>n<i?0:n>e?1:t(mm(i,e,n))}function FC(i,e){i.min=e.min,i.max=e.max}function Us(i,e){FC(i.x,e.x),FC(i.y,e.y)}function NC(i,e,t,n,r){return i-=e,i=Hv(i,1/t,n),r!==void 0&&(i=Hv(i,1/r,n)),i}function $V(i,e=0,t=1,n=.5,r,s=i,o=i){if(ua.test(e)&&(e=parseFloat(e),e=Kn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Kn(s.min,s.max,n);i===s&&(l-=e),i.min=NC(i.min,e,t,l,r),i.max=NC(i.max,e,t,l,r)}function OC(i,e,[t,n,r],s,o){$V(i,e[t],e[n],e[r],e.scale,s,o)}const e9=["x","scaleX","originX"],t9=["y","scaleY","originY"];function kC(i,e,t,n){OC(i.x,e,e9,t?t.x:void 0,n?n.x:void 0),OC(i.y,e,t9,t?t.y:void 0,n?n.y:void 0)}function UC(i){return i.translate===0&&i.scale===1}function g2(i){return UC(i.x)&&UC(i.y)}function n9(i,e){return i.x.min===e.x.min&&i.x.max===e.x.max&&i.y.min===e.y.min&&i.y.max===e.y.max}function y2(i,e){return Math.round(i.x.min)===Math.round(e.x.min)&&Math.round(i.x.max)===Math.round(e.x.max)&&Math.round(i.y.min)===Math.round(e.y.min)&&Math.round(i.y.max)===Math.round(e.y.max)}function zC(i){return ws(i.x)/ws(i.y)}class i9{constructor(){this.members=[]}add(e){TM(this.members,e),e.scheduleRender()}remove(e){if(RM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let n;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HC(i,e,t){let n="";const r=i.x.translate/e.x,s=i.y.translate/e.y;if((r||s)&&(n=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:f,rotateY:p}=t;c&&(n+=`rotate(${c}deg) `),f&&(n+=`rotateX(${f}deg) `),p&&(n+=`rotateY(${p}deg) `)}const o=i.x.scale*e.x,l=i.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const r9=(i,e)=>i.depth-e.depth;class s9{constructor(){this.children=[],this.isDirty=!1}add(e){TM(this.children,e),this.isDirty=!0}remove(e){RM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(r9),this.isDirty=!1,this.children.forEach(e)}}function o9(i,e){const t=performance.now(),n=({timestamp:r})=>{const s=r-t;s>=e&&(cl(n),i(s-e))};return Yn.read(n,!0),()=>cl(n)}function a9(i){window.MotionDebug&&window.MotionDebug.record(i)}function l9(i){return i instanceof SVGElement&&i.tagName!=="svg"}function c9(i,e,t){const n=ns(i)?i:ad(i);return n.start(bM("",n,e,t)),n.animation}const GC=["","X","Y","Z"],VC=1e3;let u9=0;const Tu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function v2({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(o={},l=e?.()){this.id=u9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Tu.totalNodes=Tu.resolvedTargetDeltas=Tu.recalculatedProjection=0,this.nodes.forEach(d9),this.nodes.forEach(v9),this.nodes.forEach(x9),this.nodes.forEach(p9),a9(Tu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new s9)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new PM),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=l9(o),this.instance=o;const{layoutId:c,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(f||c)&&(this.isLayoutDirty=!0),i){let m;const y=()=>this.root.updateBlockedByResize=!1;i(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=o9(y,250),Vy.hasAnimatedSinceResize&&(Vy.hasAnimatedSinceResize=!1,this.nodes.forEach(jC))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeTargetChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||w9,{onLayoutAnimationStart:S,onLayoutAnimationComplete:M}=p.getProps(),C=!this.targetLayout||!y2(this.targetLayout,x)||v,b=!y&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||y&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const R={...n2(w,"layout"),onPlay:S,onComplete:M};(p.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else y||jC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_9),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WC);return}this.isUpdating||this.nodes.forEach(g9),this.isUpdating=!1,this.nodes.forEach(y9),this.nodes.forEach(f9),this.nodes.forEach(h9),this.clearAllSnapshots();const l=performance.now();hr.delta=vc(0,1e3/60,l-hr.timestamp),hr.timestamp=l,hr.isProcessing=!0,G_.update.process(hr),G_.preRender.process(hr),G_.render.process(hr),hr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(m9),this.sharedNodes.forEach(A9)}scheduleUpdateProjection(){Yn.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Yn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!g2(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;o&&(l||bu(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),E9(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ai();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(cc(l.x,c.offset.x),cc(l.y,c.offset.y)),l}removeElementScroll(o){const l=Ai();Us(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:p,options:m}=f;if(f!==this.root&&p&&m.layoutScroll){if(p.isRoot){Us(l,o);const{scroll:y}=this.root;y&&(cc(l.x,-y.offset.x),cc(l.y,-y.offset.y))}cc(l.x,p.offset.x),cc(l.y,p.offset.y)}}return l}applyTransform(o,l=!1){const c=Ai();Us(c,o);for(let f=0;f<this.path.length;f++){const p=this.path[f];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&jh(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),bu(p.latestValues)&&jh(c,p.latestValues)}return bu(this.latestValues)&&jh(c,this.latestValues),c}removeTransform(o){const l=Ai();Us(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!bu(f.latestValues))continue;ZA(f.latestValues)&&f.updateSnapshot();const p=Ai(),m=f.measurePageBox();Us(p,m),kC(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return bu(this.latestValues)&&kC(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(o||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:y}=this.options;if(!(!this.layout||!(m||y))){if(this.resolvedRelativeTargetAt=hr.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),Jp(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ai(),this.targetWithTransforms=Ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Us(this.target,this.layout.layoutBox),f2(this.target,this.targetDelta)):Us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),Jp(this.relativeTargetOrigin,this.target,v.target),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Tu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ZA(this.parent.latestValues)||u2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===hr.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Us(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;NV(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:x}=l;if(!x){this.projectionTransform&&(this.projectionDelta=Wh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Wh(),this.projectionDeltaWithTransform=Wh());const w=this.projectionTransform;Xp(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=HC(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==y||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Tu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,f=c?c.latestValues:{},p={...this.latestValues},m=Wh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=Ai(),v=c?c.source:void 0,x=this.layout?this.layout.source:void 0,w=v!==x,S=this.getStack(),M=!S||S.members.length<=1,C=!!(w&&!M&&this.options.crossfade===!0&&!this.path.some(M9));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const O=R/1e3;XC(m.x,o.x,O),XC(m.y,o.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jp(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),S9(this.relativeTarget,this.relativeTargetOrigin,y,O),b&&n9(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ai()),Us(b,this.relativeTarget)),w&&(this.animationValues=p,qV(p,f,this.latestValues,O,C,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yn.update(()=>{Vy.hasAnimatedSinceResize=!0,this.currentAnimation=c9(0,VC,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:f,latestValues:p}=o;if(!(!l||!c||!f)){if(this!==o&&this.layout&&f&&x2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||Ai();const m=ws(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const y=ws(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+y}Us(l,c),jh(l,p),Xp(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new i9),this.sharedNodes.get(o).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const f={};for(let p=0;p<GC.length;p++){const m="rotate"+GC[p];c[m]&&(f[m]=c[m],o.setStaticValue(m,0))}o.render();for(const p in f)o.setStaticValue(p,f[p]);o.scheduleRender()}getProjectionStyles(o={}){var l,c;const f={};if(!this.instance||this.isSVG)return f;if(this.isVisible)f.visibility="";else return{visibility:"hidden"};const p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Gy(o.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Gy(o.pointerEvents)||""),this.hasProjected&&!bu(this.latestValues)&&(w.transform=p?p({},""):"none",this.hasProjected=!1),w}const y=m.animationValues||m.latestValues;this.applyTransformsToTarget(),f.transform=HC(this.projectionDeltaWithTransform,this.treeScale,y),p&&(f.transform=p(y,f.transform));const{x:v,y:x}=this.projectionDelta;f.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,m.animationValues?f.opacity=m===this?(c=(l=y.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:f.opacity=m===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const w in Lv){if(y[w]===void 0)continue;const{correct:S,applyTo:M}=Lv[w],C=f.transform==="none"?y[w]:S(y[w],m);if(M){const b=M.length;for(let R=0;R<b;R++)f[M[R]]=C}else f[w]=C}return this.options.layoutId&&(f.pointerEvents=m===this?Gy(o.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(WC),this.root.sharedNodes.clear()}}}function f9(i){i.updateLayout()}function h9(i){var e;const t=((e=i.resumeFrom)===null||e===void 0?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=i.layout,{animationType:s}=i.options,o=t.source!==i.layout.source;s==="size"?ra(m=>{const y=o?t.measuredBox[m]:t.layoutBox[m],v=ws(y);y.min=n[m].min,y.max=y.min+v}):x2(s,t.layoutBox,n)&&ra(m=>{const y=o?t.measuredBox[m]:t.layoutBox[m],v=ws(n[m]);y.max=y.min+v,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[m].max=i.relativeTarget[m].min+v)});const l=Wh();Xp(l,n,t.layoutBox);const c=Wh();o?Xp(c,i.applyTransform(r,!0),t.measuredBox):Xp(c,n,t.layoutBox);const f=!g2(l);let p=!1;if(!i.resumeFrom){const m=i.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const x=Ai();Jp(x,t.layoutBox,y.layoutBox);const w=Ai();Jp(w,n,v.layoutBox),y2(x,w)||(p=!0),m.options.layoutRoot&&(i.relativeTarget=w,i.relativeTargetOrigin=x,i.relativeParent=m)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function d9(i){Tu.totalNodes++,i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function p9(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function m9(i){i.clearSnapshot()}function WC(i){i.clearMeasurements()}function g9(i){i.isLayoutDirty=!1}function y9(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function jC(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function v9(i){i.resolveTargetDelta()}function x9(i){i.calcProjection()}function _9(i){i.resetRotation()}function A9(i){i.removeLeadSnapshot()}function XC(i,e,t){i.translate=Kn(e.translate,0,t),i.scale=Kn(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function JC(i,e,t,n){i.min=Kn(e.min,t.min,n),i.max=Kn(e.max,t.max,n)}function S9(i,e,t,n){JC(i.x,e.x,t.x,n),JC(i.y,e.y,t.y,n)}function M9(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const w9={duration:.45,ease:[.4,0,.1,1]},KC=i=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(i),YC=KC("applewebkit/")&&!KC("chrome/")?Math.round:li;function qC(i){i.min=YC(i.min),i.max=YC(i.max)}function E9(i){qC(i.x),qC(i.y)}function x2(i,e,t){return i==="position"||i==="preserve-aspect"&&!qA(zC(e),zC(t),.2)}const C9=v2({attachResizeListener:(i,e)=>$a(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$_={current:void 0},_2=v2({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!$_.current){const i=new C9({});i.mount(window),i.setOptions({layoutScroll:!0}),$_.current=i}return $_.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),b9={pan:{Feature:WV},drag:{Feature:VV,ProjectionNode:_2,MeasureLayout:d2}},T9=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function R9(i){const e=T9.exec(i);if(!e)return[,];const[,t,n]=e;return[t,n]}function eS(i,e,t=1){const[n,r]=R9(i);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return i2(o)?parseFloat(o):o}else return VA(r)?eS(r,e,t+1):r}function P9(i,{...e},t){const n=i.current;if(!(n instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),i.values.forEach(r=>{const s=r.get();if(!VA(s))return;const o=eS(s,n);o&&r.set(o)});for(const r in e){const s=e[r];if(!VA(s))continue;const o=eS(s,n);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const I9=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),A2=i=>I9.has(i),B9=i=>Object.keys(i).some(A2),QC=i=>i===uf||i===Ut,ZC=(i,e)=>parseFloat(i.split(", ")[e]),$C=(i,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/);if(r)return ZC(r[1],e);{const s=n.match(/^matrix\((.+)\)$/);return s?ZC(s[1],i):0}},D9=new Set(["x","y","z"]),L9=Om.filter(i=>!D9.has(i));function F9(i){const e=[];return L9.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e.length&&i.render(),e}const ld={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:$C(4,13),y:$C(5,14)};ld.translateX=ld.x;ld.translateY=ld.y;const N9=(i,e,t)=>{const n=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,l={};o==="none"&&e.setStaticValue("display",i.display||"block"),t.forEach(f=>{l[f]=ld[f](n,s)}),e.render();const c=e.measureViewportBox();return t.forEach(f=>{const p=e.getValue(f);p&&p.jump(l[f]),i[f]=ld[f](c,s)}),i},O9=(i,e,t={},n={})=>{e={...e},n={...n};const r=Object.keys(e).filter(A2);let s=[],o=!1;const l=[];if(r.forEach(c=>{const f=i.getValue(c);if(!i.hasValue(c))return;let p=t[c],m=Cp(p);const y=e[c];let v;if(Nv(y)){const x=y.length,w=y[0]===null?1:0;p=y[w],m=Cp(p);for(let S=w;S<x&&y[S]!==null;S++)v?SM(Cp(y[S])===v):v=Cp(y[S])}else v=Cp(y);if(m!==v)if(QC(m)&&QC(v)){const x=f.get();typeof x=="string"&&f.set(parseFloat(x)),typeof y=="string"?e[c]=parseFloat(y):Array.isArray(y)&&v===Ut&&(e[c]=y.map(parseFloat))}else m?.transform&&v?.transform&&(p===0||y===0)?p===0?f.set(v.transform(p)):e[c]=m.transform(y):(o||(s=F9(i),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:e[c],f.jump(y))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,f=N9(e,i,l);return s.length&&s.forEach(([p,m])=>{i.getValue(p).set(m)}),i.render(),L0&&c!==null&&window.scrollTo({top:c}),{target:f,transitionEnd:n}}else return{target:e,transitionEnd:n}};function k9(i,e,t,n){return B9(e)?O9(i,e,t,n):{target:e,transitionEnd:n}}const U9=(i,e,t,n)=>{const r=P9(i,e,n);return e=r.target,n=r.transitionEnd,k9(i,e,t,n)},tS={current:null},S2={current:!1};function z9(){if(S2.current=!0,!!L0)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>tS.current=i.matches;i.addListener(e),e()}else tS.current=!1}function H9(i,e,t){const{willChange:n}=e;for(const r in e){const s=e[r],o=t[r];if(ns(s))i.addValue(r,s),zv(n)&&n.add(r);else if(ns(o))i.addValue(r,ad(s,{owner:i})),zv(n)&&n.remove(r);else if(o!==s)if(i.hasValue(r)){const l=i.getValue(r);!l.hasAnimated&&l.set(s)}else{const l=i.getStaticValue(r);i.addValue(r,ad(l!==void 0?l:s,{owner:i}))}}for(const r in t)e[r]===void 0&&i.removeValue(r);return e}const eb=new WeakMap,M2=Object.keys(pm),G9=M2.length,tb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],V9=dM.length;class W9{constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Yn.render(this.render,!1,!0);const{latestValues:l,renderState:c}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=N0(t),this.isVariantNode=aP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{});for(const m in p){const y=p[m];l[m]!==void 0&&ns(y)&&(y.set(l[m],!1),zv(f)&&f.add(m))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,eb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),S2.current||z9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){eb.delete(this.current),this.projection&&this.projection.unmount(),cl(this.notifyUpdate),cl(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=cf.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Yn.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},n,r,s){let o,l;for(let c=0;c<G9;c++){const f=M2[c],{isEnabled:p,Feature:m,ProjectionNode:y,MeasureLayout:v}=pm[f];y&&(o=y),p(t)&&(!this.features[f]&&m&&(this.features[f]=new m(this)),v&&(l=v))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:f,drag:p,dragConstraints:m,layoutScroll:y,layoutRoot:v}=t;this.projection.setOptions({layoutId:c,layout:f,alwaysMeasureLayout:!!p||m&&Gh(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:s,layoutScroll:y,layoutRoot:v})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ai()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<tb.length;n++){const r=tb[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=H9(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const t={};for(let n=0;n<V9;n++){const r=dM[n],s=this.props[r];(dm(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=ad(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r=typeof n=="string"||typeof n=="object"?(t=AM(this.props,n))===null||t===void 0?void 0:t[e]:void 0;if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ns(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new PM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class w2 extends W9{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...n},{transformValues:r},s){let o=cV(n,e||{},this);if(r&&(t&&(t=r(t)),n&&(n=r(n)),o&&(o=r(o))),s){aV(this,n,o);const l=U9(this,n,o,t);t=l.transitionEnd,n=l.target}return{transition:e,transitionEnd:t,...n}}}function j9(i){return window.getComputedStyle(i)}class X9 extends w2{readValueFromInstance(e,t){if(cf.has(t)){const n=CM(t);return n&&n.default||0}else{const n=j9(e),r=(hP(t)?n.getPropertyValue(t):n[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return h2(e,t)}build(e,t,n,r){mM(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return _M(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ns(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,n,r){vP(e,t,n,r)}}class J9 extends w2{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(cf.has(t)){const n=CM(t);return n&&n.default||0}return t=xP.has(t)?t:xM(t),e.getAttribute(t)}measureInstanceViewportBox(){return Ai()}scrapeMotionValuesFromProps(e,t){return AP(e,t)}build(e,t,n,r){yM(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){_P(e,t,n,r)}mount(e){this.isSVGTag=vM(e.tagName),super.mount(e)}}const K9=(i,e)=>pM(i)?new J9(e,{enableHardwareAcceleration:!1}):new X9(e,{enableHardwareAcceleration:!0}),Y9={layout:{ProjectionNode:_2,MeasureLayout:d2}},q9={...MV,...V4,...b9,...Y9},Po=QH((i,e)=>b4(i,e,q9,K9)),Js={paddingX:"sm:px-16 px-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},Q9=({lightUpName:i})=>{const[e,t]=q.useState({checkboxS:i,checkboxU:i,checkboxB:i,checkboxA:i,checkboxR:i,checkboxN:i,checkboxAA:i});return te.jsxs("section",{className:"relative w-full h-screen mx-auto",children:[te.jsxs("div",{className:`absolute inset-0 top-[120px]  max-w-7xl mx-auto ${Js.paddingX} flex flex-row items-start gap-5`,children:[te.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[te.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915EFF]"}),te.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient"})]}),te.jsxs("div",{className:"nameContainer",children:[te.jsx("h1",{className:`${Js.heroHeadText} text-white`,children:"Hi, I am"}),te.jsxs("ul",{className:"ulList",children:[te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxS,onChange:()=>t({...e,checkboxS:!checkboxS})}),te.jsx("div",{className:"letters",children:"S"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxU,onChange:()=>t({...e,checkboxU:!checkboxU})}),te.jsx("div",{className:"letters",children:"U"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxB,onChange:()=>t({...e,checkboxB:!checkboxB})}),te.jsx("div",{className:"letters",children:"B"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxA,onChange:()=>t({...e,checkboxA:!checkboxA})}),te.jsx("div",{className:"letters",children:"A"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxR,onChange:()=>t({...e,checkboxR:!checkboxR})}),te.jsx("div",{className:"letters",children:"R"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxN,onChange:()=>t({...e,checkboxN:!checkboxN})}),te.jsx("div",{className:"letters",children:"N"})]}),te.jsxs("li",{className:"liList",children:[te.jsx("input",{type:"checkbox",checked:i||e.checkboxAA,onChange:()=>t({...e,checkboxAA:!checkboxAA})}),te.jsx("div",{className:"letters",children:"A"})]})]}),te.jsxs("div",{className:"wrapper",children:[te.jsx("div",{className:"static-txt",children:"I'm a "}),te.jsxs("ul",{className:"dynamic-txts",children:[te.jsxs("li",{children:[" ",te.jsx("span",{children:"Student"})]}),te.jsxs("li",{children:[" ",te.jsx("span",{children:"Software Developer"})]}),te.jsxs("li",{children:[" ",te.jsx("span",{children:"Gamer"})]})]})]})]})]}),te.jsx(DH,{}),te.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:te.jsx("a",{href:"#about",children:te.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-secondary flex justify-center items-start p-2",children:te.jsx(Po.div,{animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-secondary mb-1"})})})})]})},Z9="/assets/logo-DHwAr58l.png",$9="/assets/backend-hTXvHAtb.png",e5="/assets/mobile-DOyYxxYf.png",t5="/assets/web-08ko_qNY.png",n5="/assets/github-BUfx7uqA.png",i5="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",r5="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",s5="/assets/css-DlZE0Yf0.png",o5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANG0lEQVR4nO2dX6xcRR2AD9QYgpYElEDv3fltqdUSHtSISNWIiIE09vbuzMKa+GBq4p/4hoIGEx/qSxOiL1T62Adj4kN90gegSXnQxAdCIiYkloQKSKKQpo3c7szeikrXzPZCW3r39uzdc2bOzPm+5Jc0t7t7dn4z386cc+bMFAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFs415cdVqtHrJZjzqgTToudhFEn/N/8//nXxP6eAHAJIy13Oi3HnZFxqdBy3L+HJAJEZLy/e5016og1cr60vGvh3+Pf6z+DSgQIzGhZLVgjz80q7hUia/XC6mCHUIEAgfDCWS2vzCvvJRK/zrkxQILyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMbSe1OVFYmgtuciLxNBKnJE/xJaucomNeu1cr7s9dm4Baie3HpieGFoHEgMkDhIDJA4SAyQOEgMkDhIDNASn5YDV8vis70NigMg4LT++eFsFibnFBMngjPzoynujSIzE0Hhsv/vo9AkOSIzE0Fj8vrtXn6WExEgMjcMa9cPyUw2RGImhMVijfjD7fGEkRmKIjtXq4c1P+kdiJIZojLR8z+9wP9+TO0iMxBAcp+W788qLxDyKCBFwRr5TlbxIjMQQENeTb1st71QpLxIjMSQ2bJ4qsVE/m/V7+SVs/FI2l/8YqDeslmecVof9ebYPp9Uhq9VTTqtTdZahwlywPA80v+etSmJn5EVn5Aln5DPjorhm2mvHB4prR8uLd1stB61Wb8YWFYmhVlxPfSuUvPNcnd4M46Vt1zsjjzmj3oot6/RcqNfP9WVHiHxAZjit9oeWN7TEntGgs2i1PB9bViSGynB9+WYseecZTs/ZGx+NLesGueCcGMphtfq6NfLfRjTcgD3xeFBssUY9HbvM03PBcBqugjUyaIq8MSRe2Ss3Oi0vxy4zEsPMDI081DR5Y0g87KkvxS4vEkOyw+ZpMdTdfqhqndxHbkCZp/6gcU4MKfS8lzTYf9t9t90SqtZGpnNX7DIjMVwV36tZrf7T/MYqvwtdnc7IycbnRXNhq7WMTNekIK+PkVbfD50fp9UvY5e73I+b4hZT2xhp1bNavR278ZUWeHnx7tA5clqWYpcbieEKRj21LyV5fQwHt94cuipX9nV2xi43EsNlONPZY7U6F7uxzRrjwR0fDF2Vp5d3bY1d7pkl1pwTZ4vrd7/mr+bGbmSbEnhp2/Wh8+VnZsUu96YkNpwTZ4fT6oEUe953Y7W3oELn7MyenTfELvemJdb0xNmQurwTgXX386Hz5h/ji13uuSQ29MTJY42632pZjd2Y5m6MWj0S42Jf7HIjcYuxPflqDvJeEFh+Hzx/Wv0idrmRuKXYfvcr1sgoduOpTmD1dsiplH5ZnhRmYrmy+WM4nQ621703J3nfC61+GvJ2W/TyInH7GPbli06Ljd1Y6gl11hnZFiKPq4MdYrW8Er/M1Ybl6nRzmTzHmq28a6HVb0Llc70la3MIy3C6eZztyRecUcPYjSNIA9Tq4VB5pSeG2mmTvBcElv9Z3flGqKZFTwy1MTLd3WvnhtHFCiqx3yVCq59stIh7lSAxVI7fhcAZ+VdsmaKGlj8Ol+WOEM2L4TRUvORLc3cUCH6PWKtfj3Tnc3U3MXpimJvRg+qzyLu+zGVz6Iz81hn1Vy/krPlHYtg0rtf9tDNyJnav19Qoncc59x5iOA0zg7zVC4zEst4pCRuqVY0z2z9Fz1uPwEgsSFwn9sHFTzojp2MPT3MWGIkFietg2O/e3vSNqHMRGIkFiZE3bYGRWJC4Cs4ub99ltXojdo/WRoGRWJAYedMWGIkFiTfV8+qFT1gj/4zdk6UaVQqMxILEM8nbX/w48jZLYCQWJEbedHvgeR+CX2/apb+2Mdl/WKvDfuNyH06rQ1arp5xWp2KPYlyN+cgSvweP1fKP2JWSQ5TNechG69/jjLzojDzhnyDb6BHI8YHiWr+Rm9VysOm3Dy0SF8Vqf3s3x2VbchQ49DRDv52MM/JYkx9csW2edom86Qkco9GOBp1Fq+X52LK6huSjEZzbJ7f5gsdOfm5RNv+pDR/XeuOjsfPrGpKPqIyW1QLD5rQFjiLxl4sPOC3HY8vqNsiHb9tFzoz3d6+zRp6Lnexco2w9pDp8XNkrNzotL8fOs5uejz/H2Ao2GNaoI7GTnHOUrYdKG23gntjvvBE7z27jfBwpcn0g32p5J3aCc47SdVF1ow3cE0/uIzcg3269XBg5P9JyZ5EbTT5/ySVK10Utx+/sKYIuahg/31NDy/EiJ1LfLDqVKFsfNRz7ZKg1qt/FGvVq7HxvFFndWrL97qOxE9qGKFsfVR/XGvXzelvQOmXQ6lDsfDdtU/basFqOxU5oG6JsfVR93FFP7au3Ba1TBi1LsfO9Ufg2X+SC0+ql2AltQ5SujwyGi34OvWtAzqeGVi8VudCmzcdiRvn6qPa4p5d3bS0C44/pGpDz6aGGRS4gcN4CjwfFliIw/pguuqRtEZghdN4C33/Lh4rAJNADnyhygYtYeQvMObDkfRHLX1KP/4uYf5StjxqOvbfeFpTiVWiVz22ktVUZoic19yhbH5UfW6tD9bag9cqgnoyd79ZM5PAwlTJfgf2sqCIwjZ6JpTObSunxE7z9RO/oyc04ytZFHcf285OLQDR5LrTN9WEGD48T5iuwf0KoCESzn0ZSeT5O6OGB/nwFXut97qt/w7vOPbEldW19oN/Dkjr5CuyfSloZdG6qq+34z3ZG/hZbVNfWJXXeZXWwQ6yWV2InPbcom/96v4d61q9fVcfMK2vU07Fz7NaJdq5Muc6q/UQOAk/iaJVDySavSmnbtCLl+6EnrrYxlc17oIb9F7/2d87rQts29rzvB4nzFHgSWqzf++jMnp03zNou/PzqJu/MYJH3IgynMxX4YmN/0+93NDLd3X7/ow33RjLd3U3fG8m2edg8DSTOV+DLQqtTk4tRl+9OeHjtb43fndAi73QYTrdA4ITDMmy+OkiMwLFFdcg7H0hMDxxbWEfPi8ShG1rZjMcWIqWwDJvpiRE4vogOeePAcJoeGHkTB4kZQtPzJg4Scw7MsDlxkJiLWJzzJg4ScxWaC1aJw7TL99/qkHesVk+VzZ9/LZuty8X8MT0yPEh8YQE1a+RXK1p9bNb8+ff497Z9oUGLvPFos8RWq7/bXvfeeXPoP8N/VuzyIG9LaeM58eQB90H31qpyOFza9lGn1Z/alUPFw/hNoU09sV/p4tTg5g9XnUP/mf6zW5LD13iet2G0QWL/kPtqb0HVlUP/2U1+kB55Myf34fTQyEN159AaGWQrr2bY3Hiy7YkD7reT4z5WlmFzOuTYE1uj7g+VP6fVA1nlTtPzJkdmPfHJcVFcEyp3/lj+mFnIa7hglSwZ9cRPhM6d3/M3eXk1PW/y5CDxsCcPhs6bv2AWu9zIC1kMp4f97u2hq9IfM3a5NxuWYXN+pNwTn9ULHwmdr8nsrBTl1QybsyXVnriO3f6uhj9mcvIaLlhlT4o9sd8nKHSeTi/v2pqUvJqetzWk1hPH2AFvZV9nZzLyGnre1pGYxHtD58dpWWpAuZEXMhhOa3UodD06o56MXu6rhGXYDClI7B+4D11T1qhXY5cbeSGb4fTIdO4KVZ3+WI2Wl3NeSK0ntlqeCVVrVsux5uaBq82QqsRG7qu78ob9zj2xy4m8kKXE/rzUz5Cqq3pXBp2bmvoUEj0vZCGxM+rZOmZmjQfFFmvU0/HLh7yQ/4Wto+OlbddXVdH+s/xnNqBcVwQXrCDLntivILna396dt3pHg87iZJnaJpaRC1aQs8ROi7VaHj+zZ+cNs5bLz692Rh5zRr0VvRzICy0eTk+Wm7VaDo5Md/f4QHHttHL4//Ov8a9t8vKxDJuhdRK/F1qdmlyM0uqw7519TP594W+non8/5IVYNHo4nUFwzgu1g8TIC4mDxPS8kDhIzLAZEgeJOeeFxEFiLlhB4iAxV5shcZCYW0WQOEjMfV5IHCRmkgYkDhIzwwoSB4mZHgmJ03aJmdsMydNWiZEXsqFtEiMvZEdbJEZeyJbcJUZeyJ5cJUZeaA25SYy80DpykRh5obWkLjHyQutJVWLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFCMxoWS1YI89VIO8L/geBCgQIzHh/9zpr1BFr5PzM4ho579/rP4OKA4jISMudTsvx0gJrOe7fQ6UBNIhzfdlhtXrEajnmjDrhtNhJGHXC/83/n39N7O8JAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCE4v/t8177cNMPugAAAABJRU5ErkJggg==",a5="/assets/html-BlhLRGzY.png",l5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAOgElEQVR4nO2dCdCVZRXHz8Pnwi4groElmijuK6m4YCqJpZmJqJla40qGWjgYZZQL5p4GJZlboKKTGzoouWSAiQsuqONY42Q1LVrZYlpZnebcy51B6uO7977LeZ/7/H4z/wGGmfve5zznf577vu+ziAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtIW+JIqIQafkgKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyB/Sp+yKQJHwmlft+3l4kumiN62dmixx8WdJ9dg246LOjggUH79A4aQv3v79sg6Oab1P//pAlBL50iev9s0b8tq3bBkdTwDnjsisHA7zwj+v1viB62f9C+vbN9395rBx03JuhV00TfXFrF/kgM74DHriob+A8/EZ16YtChg7N9x+40oF/QyccGfXVhlfojMbwDHruqaOB3l4teMkV00IBijLuq1loz6PRJov94rgr9kRjeAY9dVTPwy/eJ7rZtOcZdVVtvHvSp2737IzG8DRC7qmTghdeWN+p2p769g94zEwNj4AqYMyYDz7tcdI0uX/PKCtn3mP01r/5IDG8DxK4qGPjumdUxr6yQvY6aezEGxsAVMGmVDWz3vAP7+xtWunnltGRu2f2RGN4GiF2eBranvttu4W9UWY3WHxL0tYcwMAaugFmrZuDzJ2e/fhkaN6a82WaSGt4GiF1eBv79Y6L9+/qbs1ndcCEGxsAVMGxVDDztZH9TtqIh64Ra0Sm+PxLD2wCxy8PANtNqw6H+pmxWgwcGvWZ6Wf2RGN4GiF0eBr732/nd+24/MugVU0WfuUP09cX11Ub259J5oldPE917l/oroXY//9hDgr6xpMz+SAxvA8QuDwNPOjq7cfv1qd+X/ufFnq9nr4J22LK1z990WKgtPyy/PxLD2wCxy8PANuc46/vZR29qfR3xxPE9f3ZXV9Azjwv61tNe/ZEY3gaIXWUb+O/PSs0kWa553ufba+u/losefuDqf44/eZt3fySGtwFiV9kGfnF+tmvarht/far99trIOmqz//3MGWeK/vP5KvRHYngHPHaVbeAHr8t2zQP2yD6pwh54NeZejx0d9JUFVeqPxPAOeOwq28C2cCHL9T57eD6zor46SfTa85p7CKal9kdieAc8dpVt4NuvzHZN28ius/sjMbwDHrvKNnDWd8AH7omBOwpvA8Susg38yA2S+f2v7VLZuf2RGN4Bj11lG9geGGW95qxzO7k/EsM74LGrbAPb6NmrV7Zrrjso6E/v79T+SAzvgMeusg1s2nJEtmuaRgwPtd08Oq8/EsM74LHLw8C2QCDrdU22Fc+NM6r3Kkgz9UdieAc8dnkY+KaL8t2Jw1YcPXZzp/RHYngHPHZ5GNiOTFlzjfwM3JAdZLZgduz9kRjeAY9dHgY2fXI1iwqyasetgt5yaTXmNmvL/ZEY3gGPXV4GtuWARRm4ITti1FYu/XZRTP2RGN4Bj11eBjbZrKqiTWxae62gnz406LN3xtAfieEd8NjlaeDn75LayYBlmHjl1UwPfLe6T64lNbwDHrs8DWz6+uk+e0NvNzLozZeI/vsF/z54b38khnfAY5e3gc1AB+9TvoEbsu19bruiSv2RGN4Bj13eBja9uVRqI6KXiUWCfvhD/mcDY+AKGCI2VcHApt8tzr7ZXVZ1dQX94gm+q50kNbwNELuqYmDTHx+X2mQMTxOLBN1qRNAnnDa3k9TwNkDsqpKBGycW2iiYdcVSVq3RFfSCM8p/Wi2p4W2A2FU1Azf0w+9JbSKG92h81MGhthUuBsbA7maNycAmO0zshMP8R+OD9irvvlhSw9sAsavKBl55G9j9Rvua+JCxobYxPAbGwO6mjc3ADc2fJbrLNn4mPuv44tsqqeFtgNgVk4EbWjRH9KP7Zjt1sB2FEGq7ahbbH4nhbYDYFaOBG3ruzvo9sh12VpaJN14/29EuPfdHYngbIHbFbOCVZ3JdeY7o+zcux8TnnlZcmyU1vJMndnWCgRt6d7norZeJ7jSqWAMP7B/0z08U1R+J4Z00sauTDLyyFl4rtfnNRZn4m18qqj8SwztRYlenGrghO+93/93zN/Do7Yppt6SGd4LErk43cEN3Xi26wbr5GbhXr6C/frSI/kgM78SIXakY2GR7Y+21c34mnnd5Ef2RGN5JEbtSMrDpradF99gxHwN/4YT82y6p4Z0QMcvm96ZmYNNrD0ntlMOsbT94HwyMgR0T+fXF1TSwLWIouu02LTJr27f5IAbGwE0m3M8flNrWqLboPa8kthP+sibxkQeFXN/jXnhGfXRcOq9YAy+Zm73t6w3BwBi4h0Sz0wVmnCnat3c9aU6ekF/S3Ped7El83Mfz+T7L737vQoVRmxW7DtemQ2Zte78+GBgD93CavW3vsuqE+rtn5pPENtplTeJTJ4bMo+75k6W2+fqqn33OScXeX2e9D+7qwsAYuJvXHXYEZ3erbQYPDPri/OwJvOdO2e8Dp3wm28buq5v2aNva2ESMIsxra3vt87O0vX9fDIyBV9kjeda5UjNoT8lj281kOaX+hXvy2VDdFhG0c1tgG7o3cyrDpsOCvrEkfwO/ujB7+zdaDwNj4BUJZXsS79riYvWhg4P+6Mb2Rp8xOYy+pjuuau3adj6RnR7YyjXGjs7/fvjqadkNvN1IDJy8gf+0VPRzx9Tvp9qd0jfp6FA7c7eZxH17mdQ2asvDvCZbk9vsqDt9UvvnAo/fO799qexzNt8ke9uPGIeBkzbw3ItFNxyaj5HsKfVJE0LtyfJfnnzvdWxr1JfvE71iqtR+kuZlXrumPYTqqZ3LfiC6fQ4nL9i+WLYBfNa4n35MddcFS2p4m7Bd/eyB7A9RVie7jx4xPOjwDetGK+Ia9hCsmbbuvkN+17T7zgWz24u5/QyffGx+3+XB6/LPC0kNbyNmkY2YRRm4DH3l1OYMvHiO5L5/1d671I8JbWanSNss/pZLpfZuOa/r9+1dzHtqSQ1vE2aRLUfLY06ul1o5DGzi+OJ+adi9qE12ue4CqW06d89M0RtnSO1khUP3C7ruoPyvO3E864GTN7Al9mVn+5yPm1X287yVY0dsAYFtReP9vfPSw9cXU9QlNbxH0awyE4wb45+QrcoKT6tttZ+x3t87D+00qrXihYE72MCm3/xYdP0h/onZrGwktddf7bT1xCP8v38VH17pCklqeJsvz3nPZe5vnEUXndV+O+09dB6vlLw0oeD1z5Ia3sbLU3d9q9hXS3nIJkBkffpqvzi2+IB/W1rVsA3yXc6JgTvMwCZ7elr2kSHNymZR5bVO95cP5zuppGj171vOod+SGt6GK0L2sKdPQZMvsuiqafkvKLCn2d7tkh5kSx3vb3PyCAZO0MAmq/Z2Do938jY07eRi7v1spZFNyvBun3SjQQPaWzCCgRMegRv61SP5rNnNIvs5bxMiimynzaf+8intL+goStuPDPrSveX2uaSGt8nKWCN8zfTm1gjnLZvBZBuil9XWx28t/lyjZrTWmkGnnljslj4YOBEDr7xLx6c+Vl8+WMaoa69L7Jplt9PmNl9/gc+9ca9eQT9xQNBXFvj1s6SGt7HKlu2kYdvt/L89pLLKfsIeMra1Oc5FydYP28O8Mu6P1xkQ9JQjQ23JpXe7JTW8A+4l2zvZTsjbd7f63lFZRh3bCcS2uPnFw/7t6u5p9SVT6mbOa7KLvdO1bXptR5F3ctooIA9JangHvAqyA65tIf9XJ4kefmDQnbcOtamZNrJYstpobffQm2xUX8NrezmbYefPqm/u7v39W5GZbdGc+t5hpx1VPx1hhy1DbWMEa2OjmA3oV//3ZsNDbfsgWz1kC/Bvv7K+Ftu7HdqNJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBBoiiMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEg+/BceiofdqS/+vQAAAABJRU5ErkJggg==",c5="/assets/nodejs-BctxLIqp.png",u5="/assets/reactjs-LYxsbuPE.png",f5="/assets/tailwind-CLR6e3yI.png",h5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANMUlEQVR4nO2d+48V9RXAv//Gtw/balttayOpjVZr06TPqLRJ09Q+09Yaa01sapNWKqiAqCiU+MJXfSGC+ADxQa1AK0WMogJW2L3syrIvdpcL+95ln7B7mu8Y7GaD9N7ZmXvuzPl8kvOLMXsvZ87nnLkz852vcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsfDX7BaCHOSlBpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPAIjMI2ARuCZwBQBjSDbNeCsoZ1wghx4BEZgGgGNwDOBKQIaQbZrwFlDO+EEOfAIjMA0AhqBZwJTBDSCbNeAs4Z2wgly4BEYgWkENALPBKYIaATZrgFnDe2EE+TAIzAC0whoBJ4JTBHQCLJdA84a2gknyIFHYASmEdAIPBOYIqARZLsGnDW0E06QA4/ACEwjoBF4JjBFQCPIdg04a2gnnCAHHoERmEZAI/BMYIqARpDtGnDW0E44QQ48AiMwjYBG4JnAFAGNINs14KyhnXCCHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMALTCGgEnglMEdAIsl0DzhraCSfIgUdgBKYR0Ag8E5gioBFkuwacNbQTTpADj8AITCOgEXgmMEVAI8h2DThraCecIAcegRGYRkAj8ExgioBGkO0acNbQTjhBDjwCIzCNgEbgmcAUAY0g2zXgrKGdcIIceARGYBoBjcAzgSkCGkG2a8BZQzvhBDnwCIzANAIagWcCUwQ0gmzXgLOGdsIJcuARGIFpBDQCzwSmCGgE2a4BZw3thBPkwCMwAtMIaASeCUwR0AiyXQPOGtoJJ8iBR2AEphHQCDwTmCKgEWS7Bpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPALnW+Dm7jEBkYUbOiqW81mLCvKjBxrl6qcPyF83FeXJt3tk275BebdtWJq6xqJj0jt0TPqG34+uI0ej/7bv8Gj0/2ypH5BndvbKfVs7ZcGLHXLlE61y0d0N8vkFtUzgJNGWE4GrQ+ALltbL3Ofa5eXafin2j6faL/uGj8nOliFZub1b5jzbJrOXN8ip82oS+Xc4a2jLicB6Ap97a100XeuLo6LNsYnJaHqv3dUrf17XJucsrkNgBM4XSQl88fIG+fue/kiaamXVm90IjMD5YqYCn3dbnWzY3SeT1evtBzz0WhcCI3C+iCvwR+bsjk5Lh8YmJCvc9cphBEbgfBFH4NOuq4kuTGWNpZuKCIzAtgU+a1FB9rQPSxa5MebZhrOG9hXmUoL7wOULfPoNtZmVN3Dt+nYERmCbAn/8L3vk9f1HJMtc/fQBBEZgmwIv23xIss4Vq1sQGIHtCXzhXfuq+v5uqfxqRTMCI7A9gbc1DEoeuOTBRgRGYFsC/+zhJskL37unAYER2JbAm/cOVOy7tHSPyT9q+qNHHu/d2im3bSxGz1U/uK0zWoUUvktrT/xVZN++Yx8CI7Adgc++ZW+qv33D395U6JdLH2uWMxcWSpbrjPm10bLEIPiOliEp9SuG1VHcB87JfeCfPNQol61sTiX+8NSBxIo8rKZJ63uGCM8yf1iOwprbtAjPT4cGkcSxPHNhQf74zAF5s+nkt7m+HPPznDW05dSOLywsJFbobzUNqf070jh9Hj82Kb9/sjW173zB0nr527ZOOXKCZ7TDcYnzN501tAXSjjwIHB7cGBxNdqFCONX93er05PXTTrPDKXb/8LEPPj/uAn9nDW2BtCMPAn9tab0kzYo34i3n8zMUOVwQC5P/o3Pi/Q1nDW2BtCMPAoeHHpIknNKWc6HKJxxxL2CFcNbQFkg78iBwuDqdJC/u7lM/Lj5mOGtoJ1w78iDwPf8+LEnyp7Vt6sfFxwxnDe2Ea0ceBH709S5JknDbTvu4+JjhrKGdcO3Ig8BP7eiRJJkd8zFGXwXhrKGdcO3Ig8DPvtMrSfLrmCuBfBWEs4Z2wrUjDwKvfrNbkiQ8XKF9XHzMcNbQTrh25EHgIFzSOyeEV/JoHxsfI5w1tBOuHXkQOOnbSIGwF5L2sfExwllDO+HakQeBw0KHNAgbk2kfH19mOGtoJ1w78iBwWKWUFkHi8Ky19nHyJYazhnbCtSMPAoc4NHBU0mJX69BJlzL6KgpnDe2Ea0deBF6f8K2k6QyMTERrjk+5trqnsbOGdsK1Iy8Cp/U7eDphc+/wWWG/Je1j5xEYgfMi8Kfm1UjP0P/W06bN7rbhaBVUtYnsrKGdcO3Ii8Ah7t6S7KKGUgjbt1y2sjn2+l0ERmAEnrKZ2YleT1MJ6oujctWaVvUr1s4a2h1TO/I0gUOEV7tq0tw9Fu1FrHWxy1lDu+C0I28Cf3LunujtmNp09I3L9S90yCfmVlZkZw3tgtOOvAkc4uLlDdF7paqBtt7xaKfBj1Xo1NpZQ7vYtCOPAoeY+1y7VBP1xVH56UNNCIzACFyqxPe/muwqpSR4/t0+mXVTMi+JP1E4a2hPCu3I6wQ+HmGvompjYGRC5jybznu3nDW0C0w78i5weNDikYTfmZXk2y9PT3jdsbOGdoFpR94FnrpmuBo3/m7qGpPv3BlvJ0IERmAzAof4wX37pXMwvVVLcRken4i9off0cNbQLirtsCRwiHMW18n2xpPvDKjByPiE/PzhmV+ldtbQLijtsCZwiPDc8rzn22VI6bHLDyPcu/7lozOT2FlDu5i0w6LAx+PcW+vklbrktyWdCeFZ7m/e/h4CIzAClypy+P1ZODgi1UJz95h85nq2F2UCM4FLljisIpq7vj3VV/OUw+Pbu2NNYWcN7dM47bB8Cn2iCIsPwmqiorLIE5MiF91d/hYvzhraBaMdCHzivJx2XY3c/NLBir7lYzqvNRxBYARG4Jk0uPBbdMnGovQP64h84V3lPeThrKE9AbWDCVxank6fXyu3//OQDI5W9tbTk2XuEOGsoS2QdiBw+fkKq5wqtd64f/hYWS8FcNbQFkg7EDhe3r66pF42FSpzD/mSMh6zdNbQFkg7EHhm+fvNymbpPpLuFetlmw8hMAIjcFpNcNaigrz63mBqAoenxZjATGAmcIpnMqdcu0c27O5LReDGzlEERmAErsTTXBtr+xMXOFwwK3UHCGcN7d+g2sFv4GTz+bkFtan8Jj51XmnPRjtraAukHQicfE6XbT6UuMBfvLGAwAiMwJV6L3XShEbLBGYCM4ErIPCXbt6buMBh90UERmAEroDA5y+pT1Te8DK+Uj/bWaMSB7SaIw+/gc+7rS5662Slti/5fzH7nobEH6cs9bOdNbQPtnbkQeCvL3t/4r3dPDSj19EkFQs3dEiS1HaMlPzZzhraB1s78iTw8dPN8CL3M0u86JNGvHNgWJIkPCBS6mc7a2gLpB15E3jqy+Hu/Neh6L5sJb/LLx5pkqRZvuVwyZ/vrKEtkHbkVeCp+xA98GpndGEp7e9x1qKCtPeOS9L8dlULAiOwTYGnvmMqLAq49LHmkm/JlBPnL6lPZWPxycnSH+II4ayhUXDVFFYEnn56Hbb5vGJVi3z6uppE3p01mNKbOuqKpV/AQuAqEAqB0xd4KuGiV6FjRNa81RNt+fndO/eddMfAcKsqbM9y5ROt0etuwil6moTX+CAwE5gJXCZh25XwgvW9B0fk3bbhaBK29oxV7FU6x0+fwz1uBEZgBM4gbzTyWll+A/MbOLNcEmPLUWcN7d+g2mHxIlZep69HYH2hEBiBx45OyjdiPhLqrKEtkHYwgauPhRs6Yh9PZw1tgbQDgauLTYX+aANyBEZgBM4YO1uGogdDZtKQnTW0J6B2MIGrg+2NR+SM+TNfeOGsoS2QdiCwPuvf6S1r/yMERmAErgIGRiaizcSTbMjOGtoTUDvyMIG/cmtd9OhjVpiYFFm7q1fOvmVv4rlw1tAWSDvyIHCIcAr64wcb5d6tnbKjZaiizyyXSvhOz/+nT751R3qv/XHW0BZIO/Ii8PQIOxn88P79smRjUbbUD1R8Y+6p1LSPyOKXizLrpuQnLgJXQbEhcPo5CPdWw6L7yx9viXZOeGlPv9QXR2X06GTiK4hausdk3a5euWZdW9mriRCYCVxWEeR1Ape7Pej3722Qq9a0yvwXO6I1uCve6IpOd7e+NxhtHTo9Nu8diNYDh/duXf9CR7Q+ePbyBvnsDcm/7aOccNbQLh6CHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4bf4LtvMh68AvCz8AAAAASUVORK5CYII=",d5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAjVBMVEX///8AAAD8/Pz29vbu7u7y8vLi4uL39/etra3Z2dn6+vrq6uq+vr5GRkbHx8ejo6NxcXG0tLSamprV1dV8fHzNzc1aWlre3t4pKSmHh4dhYWGnp6e6uro/Pz9MTEyysrKNjY0hISEwMDA4ODhtbW0QEBAYGBiSkpIsLCxJSUlUVFRlZWUcHByBgYELCwuNT6+5AAAN5UlEQVR4nO2da1/qPAzAGVcVBOWicEQFFLzz/T/eQ5ptJG3a+ABjm7/9Xx1hB1vaXJvGWq2ioqKioqKioqKioqKioqKioqKioqKi4g8waeY9gmy5+o6ix7fLvIeRIRcRcjNv5T2UjJhEKY/DP7mU9Yiyvek18h7RyXncTezfO5nl9eA+7zGdlsVuUsNa9+GOTPJ73LvKe1yno7+b0RP+62dJZvk0aOc8slPRgOkkP7QHT2SS059+niM7GSCIk/2P9d74m8zy86H8S4mCyLgfXtOlnE3k/1kWQBA/nFcbvZstmeW/i24OQzsRHZiBqDovhy9kku+L0i4lTGPkea85f6UewdNtKd30mSuIjNHbikzy5c33bRQXEMTP8CPN5y+6lK8lc9Nb1CJ6GTAHNnoplZu+CghiwjBy2N7My+Kma4JYQ6NpuLt/owq2JBFXTxXEmZnOJN7OXCrXJVhK45rWAw+MzVS6xq7EazZa0KW8LvpSkpFL3MQTNEs5SF9uXvxjS9nrnGGoB/LDRm5j5rEFUw/b+Y69N5lRW/kxLGrw7I6cYELjb2MARbvSvaDB83ZcyKVsBiziJ7y3jHUJxFXCMl1NZksyy6cC5kGWXkH8MOY9ccxhOz/IH9F9+KTGsmgprbFPEE2c+JLq2fnupy/vp3T6P3SSn0XKg3gEsW4swtP+hdB2RngeJBr3CyKV8sg7K2uCtdpUFkQO1TyFWcqVMPLGJnKWduwXxJS3yGbz0889OymMvGkm+I+/GBZEQyqLwzFbypxTWu7IzcaNXq3n4NVt8JPMtNZfqLouWUprOeuHfMNs6dqC2EVF4TwIFjG0GOjhNfdRdWN+Q5fy7iGvlNaaC2LbDOfHfQ6Ge+H/GJPVWTfR+0kX7HL4SCb5nk92kgvivRnKQnhuLmzdPcaFNQ6Qnd5q8ZTW1/PZU1q3VBAvzSjepOec7UwxZmJqnBnJmc83pdUlKgRPTT3BRkAQja1f4d70+BCtW5bS+jpndnKZjrwfmmBAEI2sPcbCF/B+RoslW8pzSWU68p75xV5tcusRxCvj4V2nP8MsvFE1j7ii1/k5ljIZ+dz8zlvvc7Cdv92Xr8Cfo9mecFS983l5xHWGlFasQm7N7+sFHtxIgtgwE6QOUC9yHCKH9i1dyV3ElW2iGX5HE4tPggejsJ2frddaxsNjm1cPQ2pCFvYxyzwIjByD2LDoP8O3zV9qriP3Rah+UIaburA0pbXJLA/ynPwKxUy1ncWRPTw9DDEu7DtIY9cqIvjIJOJCRy3aqp8dmSHZ/9Hx8NQwBP3VDszTaO72gOZBvse9k7vp8fG9GrG+ckFEB2jhPKYJotmZ3y1mfur9MV3KU9eD7B3H5TgU5lwwmcMJSsce26AgYpKygXt8Q97geZDlKetBLiKKP2KFXTlNfgh4eOn2k0APz6gU1/x0euMNGcrdqYJnGPmaRaw/8lJu94KIE5TnERJETFLip0vmx64HWZ4m4oKParR6PGIVijDAeZ6bf6GH53GAAmEI8/AE84M09KH8T16T0fKIdff98aV8iGLbgB6e1wFaOtsvHjlPUrrmh3DPhxIIvn8DVSEtnnxg9TQQH69riQX1awJPGNKwXdgo4ubHgu2q4zYrfJlUq/GlnC5GyVLikB60XymHIW4OzzI/EulQ5r+djAx8BI9jWmIeCUxZHycYcoC68Vozmlt7gpb58YEHDL+ah58v8UviS7nZaTXYnmarhc5Va/iNWYKIHh5fWdg7S21s10x2DyVVITbWUqZ6XPGsXTuAHp69YOuwIAKPluweCKiQqe9Nnt0Flpr2duwATnBmPwd7xx9z77gyKSzvIe7/wBVERuuWpQSvNV/DtgO+HN6Fb+/ENN4d2T2Uf7q2GrF6mu/wmQvffiPzXwQXNjE/HlrfruweilcQGTRejYJnLqkPAQRc2CgkiF0pvj4U2EYb7SF+PGiYejxYagcwSSnHxLISR3wnKAcCH6akg9Iw9bnPIgBpKYkdCLqwgb2Dymnx6xlowPqEEm1x2HMNKSSI6q2KcCeYS7cfurC+dQJBXInvtD3K6WAGkXjitMfYpSc6pKveDQvmLuhSJnZAc2HB0ZGU+KVfdg8EPjHgGdUTw1vn29lb3B/bAQyuAy7sP3nvjAKyeyhBQewYV80YXmc774K5NVtKsznNMV1Nd2EfxL2D2ldxyv8vIUHEvC+G7eJ2toIRWEr4B9ZuBl1Y2DuONxVUTgcDI3e8KoSd7MOQ3oWHrBTBa+oeKC5s5AqiEl8fivhlGiy7JAwp/Qy2lIat5sK6e0dTTgfjE0Sc4H55w3bFCkZCR/+Is+tV5XQwn/LI8WSf2KWhfzvH8KVU7hXZSnygKqeDkUfuli6Mol9E3C2qXqNV4F6RMT/7csahrpwORhy5EBWYISmHRHVHHv1LyfYOXg3IqIjK+jINE3eC6L6F9UA9UaTrAS3CkOtp6N75yXKC+GXykctRwTBSHOIOxq1b8401b616GnspYZvEfmBcV3XULEI4I/eULmiC2FnCf7sjSne0oEu5supp4DWjxM1XscmwdsEeuTcqELYzAQPzL8sOdJ+99TTJ3jEPLDM90ecj9xtedzsTMC0KDpDjzE8WU2kp471j4utVtkXiTIUEShdCgoj+gQnvrTDE0LbqaWApYe88Yny9yrjelo48ZHgnfkHEuDX28Dw+BD+5X70ZhW0m+HjsDDTgV8UnX0HDewXviekZ9A8S3e/3ftr8BkNM5hMkV58VwwtRr2Ta0D9Y0B+lMAThJ/fRCTL3vyAZuWZ4oWRdyKA4DpAgiAx2cn+KxLZKPHJT7hIKe8h2tl7lqZWg0kU6vTH2V1HK5E/ExAiD8SyChvcq3c4EdICYf6B6PwCem54o76sB+n1tPAvF8H64gihlHka/UB8nzvtqJImzqRI7uIKIxYaWA2TWOvxR3sr5jIhvvbxohhe2M2upgUk1R+Y+NEG8ZOblDMTtsdQIu2NZxIE8QVUQUfueMLGt0op36fZVuabN7xygfyBYyElYEL2nbhlCjgiD5cmstw3ubfFpeMP7XYUOpTJjEVH817RpSw38P3JaVFC6Kah9T5zYVoGRr4b6NW1ykx8vqnkcII/3A4QPpTLDqBC4NMBu3I/dSvPHRBCTpgQysvcDYPh58sS2Tjry+mRG29XZUpkIovEPtl4HyNu1wad9s4epEOv+B+2DEQuiWepNwAGyGooleLVv9thdeXZLSVMPaR8M3M5pva+XhSiIqH3z6VkkdU+wlnJsbtyDNjIaaRV0y/qSIKL2zatniNyVp9Nnd3ufBt3kWvMqXFgvuaazkPbNHn9XHuvGfbxttc9z8wFh7Zs9wfZYjd6YT1BPrTid/W5ynqDeled++EGmuJxNwoHIvsUmYrTvOtfub6E+dTGNHktgByvNLdVldFbIvJwB3k9IpkEtiNE3/ksDTHWZ5Z/m3P0k2JUH6aa9I+lBqOeaNlFddZNDyDqxraL3qcPUyg9s5/tLVpMpXdPeqy48VnzMr71CwjIKW+Ok3je5hWdd03695VKWqq6G2zElJ5SLvGlBM4Q/SfnuiB0rcTc9Vl0ou0WYoCKI+ytr1i285jMrsN33ekdBxFO3syS2VYL3B2lqBbYzC4/rk8WSLaV513xjDfe2RY6s/IKIybg4tSJeh+XBM7jp5hzRHAyfKbGt47/IyzP3vlt4u4iLdpW+S2zL2RLbKlSFMKzcEWxnX6V9+8GpCl9kMNQD8QmiUzMIQucPgup91iD8nHlfFasrTwweTdDUitKVp0avaZ8376shCqJwJ8/XDITRo8qpKEgqZOBOMNyVJ0Y4ViwAwsjlzP06KIhATnlfFUeFeCq2VUHUO6bkhH2j3pe51wTxFx1TcoK1x0pSK8J29HTlSZBktyDQ9ljxBOXajGCfOkxsF7RXPVUhJvrz5I5Ct7FDp275Q1RI0opEJHAbO+N632PZqxBsNufL3PvbIuSd99VILSK2IvHnjnzTyD3vqxJ3VsFmc4HnPIJoZHdTrJ7JFnij3mo2JyALopHdvNOiCnAI/WrSm+HUitgW4Sz1vsfSTsI6LbWyccWNdtkpMHHqQc08OG0R6qrsFoT4HshMa+Zs38a+KkzeV2PfHivc5QxKu8lNfnKftuikgmic0kAzZ2b30uskZSCy8J0S0pYaQqPIAgOC2Guz2+gbuzUWQASRXCcpA0lnFbufkr2UIIh45+Dc9b7HQjvsXbLejVO+lPAShB78OkkZ4K5zpzfeyksZ38ILdMouKm5nlfshrahZxUuJt/DyqPc9FrGzSof3iIDbvbCdX7JoZJE53hZHvDXWy76u+Nz1vkfDBZHRmLOlRIqX99VQ2mPxv+VZyLyvht4eqzF/TRVsEfO+GqD/5RZHlDZ2Fyhk3lclseVBCp331dDbYwWvk5QAtT1W7vW+x+LvypNQ9LyvCgw/VOyadSOL7FEEUb1tUXyGQUE0RxrrYud9NYJtTEh39fIideVJMBMsft5Xw9Paolb7xZFGOfC1triy/wRkaSEtjihOd/USI7qmmPctSjnskUitLbCguSSJbRVBEEuW99Vwb9SzNkJ/AKeNif8vJJaVay6IJcz7aryxFStj3leDCWL4LySWFOqaKn8hsazse8xofyGxrKSCWNh632NJBNHTRugPYO4PFrre92hMM5As+/vmDpyevf/lCcZGsMx5X43OX59gXEarto8vM4vS5301diHv+5+e4I6/qkQrKioqKioqKioqKioqKioqzsV/oHW5KIsqlL0AAAAASUVORK5CYII=",p5="/assets/angular-qbAumiAu.png",m5="/assets/mssql-Byq5GTYT.png",g5="/assets/cSharp-C3UF7IZo.png",y5="/assets/kali-DoC0rXw7.png",eA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX////6UFD6Tk76TEz6V1f7eHj6Ojr6Pz/6SUn/+vr7gID6PT37kpL6Vlb7hIT/9/f+6Oj6Xl76Q0P+4uL9yMj7aWn+5+f7Zmb7cXH7ior7enr7bm7+1NT8sbH+2tr9wcH8paX+7+/5KSn8n5/9ubn8l5f8qqr5ISF3zGj4AAACkUlEQVR4nO3acXeaMBSHYQRLUFpbwqyKxWrt1u//DWe77ZxxAyQBpeh5n7/xkh8YuSQGAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwNks1nfS8um7B3VWWRJJ8fN3D+qsVtFEUrd1D0l4/bIolNLbmofbzDC5rXsIAMDY6Wkfur7oIbF9MGl74s/y1/2mWGbW07dW+Sc2GiofcUNCZftg2ji2Q7mOlE5OL1z20zdX+T+h0RT7SJsS2j7Y1Hm/rGMdha6nd+rfR5UwX6fma4h3lbMmbPyWdhpb6ZfPNaGxwPDFKFZ/WFPCtP7w9lWMjXFdQlsVl4RbY5HoU2EkLGqPW/4pkgsv5tKTsD2YAbW8qCq01Kmp4mxane3htO3gw5uqSLMOZyzlHVTFruPgnXglfEzFxV/6n/A5Fb+g+rXr2N08DJ2wEFNfl12H7mjohLkoEU46D93R0Anvk2qJ5Nh56I6GTqgHnoWDJ8zlD6n+0X3sbgZO+C6fhSNPGE7vbTbVZ/VRTMOxJ5yEiY3o2uayTRx7QjvRM29vPqGxd0PC/gZOuLy2hKGyeav+0siudOwJo1Uws6lW+HllT4tTQk/llT3x/RPurq1r804YyJk89s7bP+FGvj3tu47c1dAJd7K17bLU42XohEbfpi49EQdfp5FviKG+6ErbNyQM9jKiOvZYDbXr9374sJifLFoU5ujn8pmY6KyYt7rrcQ16dm22Rf3aVf3FZVb1L5LQrnZP5Vd8iZ2ZMSUM8pU6/+7aqBJ+7pCqc++QjixhEDyVa/21yx3ag/ZJqOOqhr8k/E34Efv6aPv35Wz3ftxsp4nqVQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgJvyG4BCN5FyhVxfAAAAAElFTkSuQmCC",nb=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"contact",title:"Contact"},{id:"files",title:"Files"}],v5=[{title:"Web Developer",icon:t5},{title:"Backend Developer",icon:$9},{title:"Desktop App Developer",icon:e5}],x5=[{name:"HTML 5",icon:a5},{name:"CSS 3",icon:s5},{name:"JavaScript",icon:l5},{name:"TypeScript",icon:h5},{name:"React JS",icon:u5},{name:"Angular JS",icon:p5},{name:"Tailwind CSS",icon:f5},{name:"Node JS",icon:c5},{name:"MSSQL",icon:m5},{name:"Three JS",icon:d5},{name:"Git",icon:o5},{name:"C#",icon:g5},{name:"Kali",icon:y5}],_5=[{title:"C# (.NET Framework, .NET Core, ASP.NET, WPF)",company_name:"TEC P1",icon:eA,iconBg:"#E6DEDD",date:"Jan 2021 - July 2022",points:["Worked with console apps from basic functionality to retrieving and displaying datas from SQL database","Worked with ASP.NET Core Web App MVC to create fullstack web applications with MSSQL Database","Created numerous API with .NET Core Web API.","Have experience with creating WPF and Winforms applications"]},{title:"React.js/Next.js",company_name:"TEC P2",icon:eA,iconBg:"#383E56",date:"August 2022 - June 2023",points:["Developing and maintaining web applications using React.js and Next.js","Created web apps with implementation of RESTful API","Implementing responsive design and ensuring cross-browser compatibility.","Decent knowledge of using threejs with React"]},{title:"Angular.js",company_name:"TEC P3",icon:eA,iconBg:"#383E56",date:"July 2023 - now",points:["Decent knowledge in Typescript","Recently started working on Angular projects"]}],A5=[{name:"Robo Friends",description:"My first react project. A beginner-friendly, responsive and fun web app that allows users to filter through the robots.",tags:[{name:"react",color:"blue-text-gradient"},{name:"restapi",color:"green-text-gradient"},{name:"tachyons",color:"pink-text-gradient"}],image:"https://utfs.io/f/OxxexRswuBkzXsRtcj5NbBSKJUoDytkA0FhTRXm2d5WMY7is",source_code_link:"https://github.com/ZeroTwo5166/robofriends",demo_link:"https://zerotwo5166.github.io/robofriends/"},{name:"Starwars",description:"A cool website for Starwars fans that has all the information about people, planets, vehicles, etc.",tags:[{name:"vanillaJS",color:"blue-text-gradient"},{name:"restapi",color:"green-text-gradient"},{name:"css",color:"pink-text-gradient"}],image:"https://utfs.io/f/OxxexRswuBkz9caA46Ngkyro3nchBWMSbTRdq9KAZzfVwQeD",source_code_link:"https://github.com/ZeroTwo5166/Starwars_api",demo_link:"https://zerotwo5166.github.io/Starwars_api/"},{name:"Game Database",description:"An angular website that has adequate informations and images of more than 500000+ games!!!",tags:[{name:"angular",color:"blue-text-gradient"},{name:"restapi",color:"green-text-gradient"},{name:"scss",color:"pink-text-gradient"}],image:"https://utfs.io/f/OxxexRswuBkzPqDYWTec8qXHnKF0G7iO23RuT9vSosWQey4E",source_code_link:"https://github.com/ZeroTwo5166/ng_game_database",demo_link:"https://zerotwo5166.github.io/ng_game_database/"},{name:"Dcord",description:"A personalized discord clone built with Next.js, offering seamless communication, custom servers, and rich multimedia features tailored just for you.",tags:[{name:"Next.js",color:"blue-text-gradient"},{name:"restapi",color:"green-text-gradient"},{name:"tailwind",color:"pink-text-gradient"},{name:"shadcn",color:"pink-text-gradient"},{name:"convex",color:"yellow-text-gradient"}],image:"https://utfs.io/f/OxxexRswuBkz6BJYD7MNcqWwSFfrnuav1E9i2jxBTtJyAoPU",source_code_link:"https://github.com/ZeroTwo5166/DiscordClone",demo_link:"https://dcord.dryorc.com/"}],S5=({nyanStateToParent:i})=>{const[e,t]=q.useState(""),[n,r]=q.useState(!1),[s,o]=q.useState(!1),[l,c]=q.useState(!1),[f,p]=q.useState(!1),[m,y]=q.useState(!1),v=q.useRef(null);return q.useEffect(()=>{const x=()=>{const w=window.scrollY;o(w>100)};return window.addEventListener("scroll",x),()=>window.removeEventListener("scroll",x)},[]),q.useEffect(()=>{const x=w=>{v.current&&!v.current.contains(w.target)&&p(!1)};return f?document.addEventListener("mousedown",x):document.removeEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[f]),te.jsx("nav",{className:`${Js.paddingX} w-full flex items-center py-5 fixed top-0 z-20 ${s?"bg-primary":"bg-transparent"}`,children:te.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[te.jsx("button",{className:l?"bg-green-500 text-white font-bold py-2 px-4 rounded mr-2":"bg-red-500 text-white font-bold py-2 px-4 rounded mr-2",onClick:()=>{const x=!l;c(x),i(x)},children:l?"Nyan Mode: On":"Nyan Mode: Off"}),te.jsxs(hB,{to:"/",className:"flex items-center gap-2",onClick:()=>{t(""),window.scrollTo(0,0)},children:[te.jsx("img",{src:Z9,alt:"logo",className:"w-9 h-9 object-contain"}),te.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex ",children:["Subarna ",te.jsx("span",{className:"sm:block hidden",children:" | 02"})]})]}),te.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:nb.map(x=>te.jsxs("li",{className:`${e===x.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>{x.title!=="Files"?(t(x.title),p(!1)):p(w=>!w)},children:[te.jsx("a",{href:`#${x.id}`,children:x.title}),x.title==="Files"&&f&&te.jsxs("div",{ref:v,className:"absolute bg-gray-900 text-white rounded-lg shadow-lg mt-2 w-[120px] h-[90px]",children:[te.jsx("p",{className:"cursor-pointer hover:bg-gray-700 rounded transition-colors p-2",onClick:()=>{window.open("https://drive.google.com/file/d/1IhsoWRDqrMCzSFVfb-rRwkTClGgDHHpi/view?usp=drive_link","_blank")},children:"CV"}),te.jsx("div",{className:"border-t border-gray-600"})," ",te.jsx("p",{className:"cursor-pointer hover:bg-gray-700 rounded transition-colors p-2",onClick:()=>{window.open("https://drive.google.com/file/d/1-4CL8QjL5DyMKsj8GJM9vEASvKlyzPVM/view?usp=drive_link","_blank")},children:"Application"})]})]},x.id))}),te.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center hover:cursor-pointer",children:[te.jsx("img",{src:n?r5:i5,alt:"menu",className:"w-[28px] h-[28px] object-contain",onClick:()=>r(!n)}),te.jsx("div",{className:`${n?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:te.jsx("ul",{className:"list-none flex justify-end items-start flex-1 flex-col gap-4",children:nb.map(x=>te.jsxs("li",{className:`font-poppins font-medium cursor-pointer text-[16px] ${e===x.title?"text-white":"text-secondary"}`,onClick:()=>{r(!n),t(x.title)},children:[te.jsx("a",{href:`#${x.id}`,children:x.title}),x.title==="Files"&&f&&te.jsxs("div",{className:"absolute bg-gray-900 text-white rounded-lg shadow-lg mt-2 w-[120px] h-[90px]",children:[te.jsx("p",{className:"cursor-pointer hover:bg-gray-700 rounded transition-colors p-2",onClick:()=>window.open("/cv.pdf","_blank"),children:"CV"}),te.jsx("div",{className:"border-t border-gray-600"})," ",te.jsx("p",{className:"cursor-pointer hover:bg-gray-700 rounded transition-colors p-2",onClick:()=>window.open("/application.pdf","_blank"),children:"Application"})]})]},x.id))})})]})]})})},IM=i=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:i}}}),z0=(i,e,t,n)=>({hidden:{x:i==="left"?100:i==="right"?-100:0,y:i==="up"?100:i==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:n,ease:"easeOut"}}}),ib=(i,e,t,n)=>({hidden:{x:i==="left"?"-100%":i==="right"?"100%":0,y:i==="up"||i==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:n,ease:"easeOut"}}}),M5=(i,e)=>({hidden:{},show:{transition:{staggerChildren:i,delayChildren:e||0}}});var w5=Object.defineProperty,E5=Object.defineProperties,C5=Object.getOwnPropertyDescriptors,rb=Object.getOwnPropertySymbols,b5=Object.prototype.hasOwnProperty,T5=Object.prototype.propertyIsEnumerable,sb=(i,e,t)=>e in i?w5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Tp=(i,e)=>{for(var t in e||(e={}))b5.call(e,t)&&sb(i,t,e[t]);if(rb)for(var t of rb(e))T5.call(e,t)&&sb(i,t,e[t]);return i},Rp=(i,e)=>E5(i,C5(e)),E2=class extends q.Component{constructor(i){super(i),this.ref=Zh.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(i=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Rp(Tp({},this.state.style),{willChange:"transform"})})),this.setTransition(),i(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Rp(Tp({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(i=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),i(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Rp(Tp({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Rp(Tp({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(i=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),i(e)}getValues(i){const e=(i.nativeEvent.clientX-this.left)/this.width,t=(i.nativeEvent.clientY-this.top)/this.height,n=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-n*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),l=n*100,c=r*100;return{tiltX:s,tiltY:o,percentageX:l,percentageY:c}}updateElementPosition(){const i=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=i.left,this.top=i.top}update(i){const e=this.getValues(i);this.setState(Object.assign({},this.state,{style:Rp(Tp({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const i=Object.assign({},this.props.style,this.state.style);return te.jsx("div",{style:i,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const Hm=(i,e)=>function(){return te.jsxs(Po.section,{variants:M5(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Js.padding} max-w-7xl
            mx-auto relative z-0`,children:[te.jsx("span",{className:"hash-span",id:e,children:""}),te.jsx(i,{})]})},R5=({index:i,title:e,icon:t})=>te.jsx(E2,{className:"xs:w-[250px] w-full",children:te.jsx(Po.div,{variants:z0("right","spring",i*.5,.75),className:"w-full green-pink-gradient p-[1px] rounded-[20px] shadow-card",children:te.jsxs("div",{options:{max:45,scale:1,speed:450},className:"bg-tertiary rounded-[20px] py-5 px-12 min-h-[280px] flex justify-evenly items-center flex-col",children:[te.jsx("img",{src:t,alt:"web-development",className:"w-16 h-16 object-contain"}),te.jsx("h3",{className:"text-white text-[20px] font-bold text-center",children:e})]})})}),P5=()=>te.jsxs(te.Fragment,{children:[te.jsxs(Po.div,{variants:IM(),children:[te.jsx("p",{className:Js.sectionSubText,children:"Introduction"}),te.jsx("h2",{className:Js.sectionHeadText,children:"Overview."})]}),te.jsx(Po.p,{variants:z0("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"I'm a student software developer with experience in C# and JavaScript, and expertise in frameworks like React, Next.js, Angular , and Three.js. I'm a quick learner and look forward to new challenges and opportunities. I have some experince in cyber security as I have done couple of courses on it."}),te.jsx("div",{className:"mt-20 flex flex-wrap gap-10",children:v5.map((i,e)=>te.jsx(R5,{index:e,...i},i.title))})]}),I5=Hm(P5,"about"),B5=()=>te.jsx("div",{className:"flex flex-row flex-wrap justify-center gap-10",children:x5.map(i=>te.jsx("div",{className:"w-28 h-28",children:te.jsx(IH,{icon:i.icon})},i.name))}),D5=Hm(B5,"");var Pp={},tA={exports:{}};var ob;function C2(){return ob||(ob=1,(function(i){(function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var l=t.apply(null,s);l&&n.push(l)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){n.push(s.toString());continue}for(var c in s)e.call(s,c)&&s[c]&&n.push(c)}}}return n.join(" ")}i.exports?(t.default=t,i.exports=t):window.classNames=t})()})(tA)),tA.exports}var ab;function L5(){if(ab)return Pp;ab=1,Pp.__esModule=!0,Pp.default=void 0;var i=n(fd()),e=n(iP()),t=n(C2());function n(o){return o&&o.__esModule?o:{default:o}}const r=({animate:o=!0,className:l="",layout:c="2-columns",lineColor:f="#FFF",children:p})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",f),i.default.createElement("div",{className:(0,t.default)(l,"vertical-timeline",{"vertical-timeline--animate":o,"vertical-timeline--two-columns":c==="2-columns","vertical-timeline--one-column-left":c==="1-column"||c==="1-column-left","vertical-timeline--one-column-right":c==="1-column-right"})},p));r.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=r;return Pp.default=s,Pp}var Ip={};function nS(){return nS=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},nS.apply(this,arguments)}function F5(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,iS(i,e)}function iS(i,e){return iS=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},iS(i,e)}function N5(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}var rS=new Map,ky=new WeakMap,lb=0,b2=void 0;function O5(i){b2=i}function k5(i){return i?(ky.has(i)||(lb+=1,ky.set(i,lb.toString())),ky.get(i)):"0"}function U5(i){return Object.keys(i).sort().filter(function(e){return i[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?k5(i.root):i[e])}).toString()}function z5(i){var e=U5(i),t=rS.get(e);if(!t){var n=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(l){var c,f=l.isIntersecting&&r.some(function(p){return l.intersectionRatio>=p});i.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=f),(c=n.get(l.target))==null||c.forEach(function(p){p(f,l)})})},i);r=s.thresholds||(Array.isArray(i.threshold)?i.threshold:[i.threshold||0]),t={id:e,observer:s,elements:n},rS.set(e,t)}return t}function BM(i,e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=b2),typeof window.IntersectionObserver>"u"&&n!==void 0){var r=i.getBoundingClientRect();return e(n,{isIntersecting:n,target:i,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=z5(t),o=s.id,l=s.observer,c=s.elements,f=c.get(i)||[];return c.has(i)||c.set(i,f),f.push(e),l.observe(i),function(){f.splice(f.indexOf(e),1),f.length===0&&(c.delete(i),l.unobserve(i)),c.size===0&&(l.disconnect(),rS.delete(o))}}var H5=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function cb(i){return typeof i.children!="function"}var Gv=(function(i){F5(e,i);function e(n){var r;return r=i.call(this,n)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),cb(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!n.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,l=r.rootMargin,c=r.trackVisibility,f=r.delay,p=r.fallbackInView;this._unobserveCb=BM(this.node,this.handleChange,{threshold:s,root:o,rootMargin:l,trackVisibility:c,delay:f},p)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!cb(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var l=this.props,c=l.children,f=l.as,p=N5(l,H5);return q.createElement(f||"div",nS({ref:this.handleNode},p),c)},e})(q.Component);Gv.displayName="InView";Gv.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function G5(i){var e=i===void 0?{}:i,t=e.threshold,n=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,l=e.triggerOnce,c=e.skip,f=e.initialInView,p=e.fallbackInView,m=q.useRef(),y=q.useState({inView:!!f}),v=y[0],x=y[1],w=q.useCallback(function(M){m.current!==void 0&&(m.current(),m.current=void 0),!c&&M&&(m.current=BM(M,function(C,b){x({inView:C,entry:b}),b.isIntersecting&&l&&m.current&&(m.current(),m.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:n},p))},[Array.isArray(t)?t.toString():t,o,s,l,c,r,p,n]);q.useEffect(function(){!m.current&&v.entry&&!l&&!c&&x({inView:!!f})});var S=[w,v.inView,v.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const V5=Object.freeze(Object.defineProperty({__proto__:null,InView:Gv,default:Gv,defaultFallbackInView:O5,observe:BM,useInView:G5},Symbol.toStringTag,{value:"Module"})),W5=II(V5);var ub;function j5(){if(ub)return Ip;ub=1,Ip.__esModule=!0,Ip.default=void 0;var i=r(fd()),e=r(iP()),t=r(C2()),n=W5;function r(l){return l&&l.__esModule?l:{default:l}}const s=({children:l="",className:c="",contentArrowStyle:f=null,contentStyle:p=null,date:m="",dateClassName:y="",icon:v=null,iconClassName:x="",iconOnClick:w=null,onTimelineElementClick:S=null,iconStyle:M=null,id:C="",position:b="",style:R=null,textClassName:O="",intersectionObserverProps:F={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:N=!1})=>i.default.createElement(n.InView,F,({inView:U,ref:J})=>i.default.createElement("div",{ref:J,id:C,className:(0,t.default)(c,"vertical-timeline-element",{"vertical-timeline-element--left":b==="left","vertical-timeline-element--right":b==="right","vertical-timeline-element--no-children":l===""}),style:R},i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{style:M,onClick:w,className:(0,t.default)(x,"vertical-timeline-element-icon",{"bounce-in":U||N,"is-hidden":!(U||N)})},v),i.default.createElement("div",{style:p,onClick:S,className:(0,t.default)(O,"vertical-timeline-element-content",{"bounce-in":U||N,"is-hidden":!(U||N)})},i.default.createElement("div",{style:f,className:"vertical-timeline-element-content-arrow"}),l,i.default.createElement("span",{className:(0,t.default)(y,"vertical-timeline-element-date")},m)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var o=s;return Ip.default=o,Ip}var nA,fb;function X5(){return fb||(fb=1,nA={VerticalTimeline:L5().default,VerticalTimelineElement:j5().default}),nA}var T2=X5();const J5=({experience:i})=>te.jsxs(T2.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid #232631"},date:i.date,iconStyle:{background:i.iconBg},icon:te.jsx("div",{className:`flex justify-center items-center \r
      w-full h-full bg-white rounded-full`,children:te.jsx("img",{src:i.icon,alt:i.company_name,className:`w-[60%] h-[60%]\r
          object-contain`})}),children:[te.jsxs("div",{children:[te.jsx("h3",{className:`text-white text-[24px]\r
      font-bold`,children:i.title}),te.jsx("p",{className:`text-secondary text-[16px]\r
        font-semibold`,children:i.company_name})]}),te.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:i.points.map((e,t)=>te.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]}),K5=()=>te.jsxs(te.Fragment,{children:[te.jsxs(Po.div,{variants:IM(),children:[te.jsx("p",{className:`${Js.sectionSubText} text-center`,children:"What I have done so far"}),te.jsx("h2",{className:`${Js.sectionHeadText} text-center`,children:"Work Experience."})]}),te.jsx("div",{className:"mt-20 flex flex-col",children:te.jsx(T2.VerticalTimeline,{children:_5.map((i,e)=>te.jsx(J5,{experience:i},e))})})]}),Y5=Hm(K5,"work"),q5=({index:i,name:e,description:t,tags:n,image:r,source_code_link:s,demo_link:o})=>{const l=c=>{c.currentTarget,window.open(o,"_blank")};return te.jsx(Po.div,{onClick:l,variants:z0("up","spring",i*.5,.75),children:te.jsxs(E2,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[te.jsxs("div",{children:[te.jsxs("div",{className:"relative w-full h-[230px]",children:[te.jsx("img",{src:r,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),te.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:te.jsx("div",{onClick:()=>window.open(s,"_blank"),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:te.jsx("img",{src:n5,alt:"source code",className:"w-1/2 h-1/2 object-contain"})})})]}),te.jsx("h3",{className:"mt-5 text-white font-bold text-[24px]",children:e})]}),te.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t}),te.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:n.map(c=>te.jsxs("p",{className:`text-[14px] ${c.color}`,children:["#",c.name]},`${e}-${c.name}`))})]})})},Q5=()=>te.jsxs(te.Fragment,{children:[te.jsxs(Po.div,{variants:IM(),children:[te.jsx("p",{className:`${Js.sectionSubText} `,children:"My work"}),te.jsx("h2",{className:`${Js.sectionHeadText}`,children:"Projects."})]}),te.jsx("div",{className:"w-full flex",children:te.jsx(Po.p,{variants:z0("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects are some of my projects that are currently live on GitHub. Each project is briefly described with links to code repositories and live demos in it. You can simply click on the box which will open the live demo link to the project. It reflects my ability to solve problems, work with different technologies, and manage projects effectively."})}),te.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:A5.map((i,e)=>te.jsx(q5,{index:e,...i},`project-${e}`))})]}),Z5=Hm(Q5,""),gm={_origin:"https://api.emailjs.com"},$5=(i,e="https://api.emailjs.com")=>{gm._userID=i,gm._origin=e},R2=(i,e,t)=>{if(!i)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class hb{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const P2=(i,e,t={})=>new Promise((n,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const l=new hb(o);l.status===200||l.text==="OK"?n(l):r(l)}),s.addEventListener("error",({target:o})=>{r(new hb(o))}),s.open("POST",gm._origin+i,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),e8=(i,e,t,n)=>{const r=n||gm._userID;return R2(r,i,e),P2("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:r,service_id:i,template_id:e,template_params:t}),{"Content-type":"application/json"})},t8=i=>{let e;if(typeof i=="string"?e=document.querySelector(i):e=i,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},n8=(i,e,t,n)=>{const r=n||gm._userID,s=t8(t);R2(r,i,e);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",i),o.append("template_id",e),o.append("user_id",r),P2("/api/v1.0/email/send-form",o)},i8={init:$5,send:e8,sendForm:n8},r8=()=>{const i=q.useRef(),[e,t]=q.useState({name:"",email:"",message:""}),[n,r]=q.useState(!1),s=l=>{const{name:c,value:f}=l.target;t({...e,[c]:f})},o=l=>{l.preventDefault(),r(!0),e.email.length>0?i8.send(void 0,void 0,{from_name:e.name,to_name:"Subarna Gurung",from_email:e.email,to_email:"subarna.gurung7@gmail.com",message:e.message},void 0).then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible. :)"),t({name:"",email:"",message:""})},c=>{r(!1),console.log(c),alert("Something went wrong. :(")}):(alert("Enter your email"),r(!1))};return te.jsxs("div",{className:`xl:mt-12 xl:flex-row\r
      flex-col-reverse flex gap-10 overflow-hidden`,children:[te.jsxs(Po.div,{variants:ib("left","tween",.2,1),className:`flex-[0.75] bg-black-100 p-8\r
          rounded-2xl`,children:[te.jsx("p",{className:Js.sectionSubText,children:"Get in touch"}),te.jsx("p",{className:Js.sectionHeadText,children:"Contact."}),te.jsxs("form",{ref:i,onSubmit:o,className:"my-12 flex flex-col gap-8",children:[te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:`text-white\r
                 font-medium mb-4`,children:"Your Name"}),te.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your name",className:`bg-tertiary py-4 px-6\r
                  placeholder:text-secondary\r
                  text-white rounded-lg outlined-none\r
                  border-none font-medium`})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:`text-white\r
                 font-medium mb-4`,children:"Your Email"}),te.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your email",className:`bg-tertiary py-4 px-6\r
                  placeholder:text-secondary\r
                  text-white rounded-lg outlined-none\r
                  border-none font-medium`})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:`text-white\r
                 font-medium mb-4`,children:"Your Message"}),te.jsx("textarea",{rows:"7",name:"message",value:e.message,onChange:s,placeholder:"Enter your message",className:`bg-tertiary py-4 px-6\r
                  placeholder:text-secondary\r
                  text-white rounded-lg outlined-none\r
                  border-none font-medium`})]}),te.jsx("button",{type:"submit",className:`bg-tertiary py-3 px-8\r
                 outline-none w-fit text-white\r
                 font-bold shadow-md shadow-primary\r
                 rounded-xl`,children:n?"Sending...":"Send"})]})]}),te.jsx(Po.div,{variants:ib("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[550px] h-[350px]",children:te.jsx(RH,{})})]})},s8=Hm(r8,"contact"),o8="/assets/cross-CK-mKnUD.png";function a8({onDelete:i}){const e=q.useRef(0);q.useEffect(()=>{const r=new xd().load(o8),s=document.querySelector("canvas.webgl"),o=new om,l=new Bm(.7,.2,16,100),c=new jt,f=1e3,p=new Float32Array(f*3);for(let U=0;U<f*3;U++)p[U]=(Math.random()-.5)*(Math.random()*5);c.setAttribute("position",new pn(p,3));const m=new qu({size:.005}),y=new qu({size:.03,map:r,transparent:!0}),v=new am(l,m),x=new am(c,y);o.add(v,x);const w=new T0(16777215,.1);w.position.x=2,w.position.y=3,w.position.z=4,o.add(w);const S={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",()=>{S.width=window.innerWidth,S.height=window.innerHeight,M.aspect=S.width/S.height,M.updateProjectionMatrix(),C.setSize(S.width,S.height),C.setPixelRatio(Math.min(window.devicePixelRatio,2))});const M=new Ln(75,S.width/S.height,.1,100);M.position.x=0,M.position.y=0,M.position.z=2,o.add(M);const C=new FS({canvas:s,antialias:!0});C.setSize(S.width,S.height),C.setPixelRatio(Math.min(window.devicePixelRatio,2)),C.setClearColor(new it("#21282a"),1),document.addEventListener("mousemove",O);let b=0,R=0;function O(U){b=U.clientX,R=U.clientY}const F=new P0,N=()=>{const U=F.getElapsedTime();e.current>0?v.rotation.y=15*U:v.rotation.y=.5*U,x.rotation.y=-.1*U,b>0&&(x.rotation.x=-R*(U*8e-5),x.rotation.y=-b*(U*8e-5)),C.render(o,M),window.requestAnimationFrame(N)};N()},[]);const t=()=>{n(),setTimeout(i,1500)},n=()=>e.current=1;return te.jsxs("div",{className:"container",children:[te.jsxs("div",{className:"content",ref:e,children:[te.jsxs("h1",{children:["The Next ",te.jsx("br",{}),"Dimension"]}),te.jsx("h3",{onClick:t,className:"text-red-600",children:"Enter"})]}),te.jsx("canvas",{className:"webgl"})]})}const l8={autoPlay:!0,background:{color:{value:"#043564"},image:"url('https://vincentgarreau.com/particles.js/assets/img/kbLd9vb_new.gif')",position:"0 50%",repeat:"no-repeat",size:"26%",opacity:0},backgroundMask:{composite:"destination-out",cover:{color:{value:"#fff"},opacity:1},enable:!1},defaultThemes:{},delay:0,fullScreen:{enable:!0,zIndex:1},detectRetina:!0,duration:0,fpsLimit:120,interactivity:{detectsOn:"window",events:{onClick:{enable:!0,mode:"repulse"},onDiv:{selectors:[],enable:!1,mode:[],type:"circle"},onHover:{enable:!0,mode:"grab",parallax:{enable:!1,force:2,smooth:10}},resize:{delay:.5,enable:!0}},modes:{trail:{delay:1,pauseOnStop:!1,quantity:1},attract:{distance:200,duration:.4,easing:"ease-out-quad",factor:1,maxSpeed:50,speed:1},bounce:{distance:200},bubble:{distance:400,duration:2,mix:!1,opacity:8,size:40,divs:{distance:200,duration:.4,mix:!1,selectors:[]}},connect:{distance:80,links:{opacity:.5},radius:60},grab:{distance:200,links:{blink:!1,consent:!1,opacity:1}},push:{default:!0,groups:[],quantity:4},remove:{quantity:2},repulse:{distance:200,duration:.4,factor:100,speed:1,maxSpeed:50,easing:"ease-out-quad",divs:{distance:200,duration:.4,factor:100,speed:1,maxSpeed:50,easing:"ease-out-quad",selectors:[]}},slow:{factor:3,radius:200},light:{area:{gradient:{start:{value:"#ffffff"},stop:{value:"#000000"}},radius:1e3},shadow:{color:{value:"#000000"},length:2e3}}}},manualParticles:[],particles:{bounce:{horizontal:{random:{enable:!1,minimumValue:.1},value:1},vertical:{random:{enable:!1,minimumValue:.1},value:1}},collisions:{absorb:{speed:2},bounce:{horizontal:{random:{enable:!1,minimumValue:.1},value:1},vertical:{random:{enable:!1,minimumValue:.1},value:1}},enable:!1,maxSpeed:50,mode:"bounce",overlap:{enable:!0,retries:0}},color:{value:"#ffffff",animation:{h:{count:0,enable:!1,offset:0,speed:1,delay:0,decay:0,sync:!0},s:{count:0,enable:!1,offset:0,speed:1,delay:0,decay:0,sync:!0},l:{count:0,enable:!1,offset:0,speed:1,delay:0,decay:0,sync:!0}}},groups:{},move:{angle:{offset:0,value:90},attract:{distance:200,enable:!1,rotate:{x:600,y:1200}},center:{x:50,y:50,mode:"percent",radius:0},decay:0,distance:{},direction:"left",drift:0,enable:!0,gravity:{acceleration:9.81,enable:!1,inverse:!1,maxSpeed:50},path:{clamp:!0,delay:{random:{enable:!1,minimumValue:0},value:0},enable:!1,options:{}},outModes:{default:"out",bottom:"out",left:"out",right:"out",top:"out"},random:!1,size:!1,speed:10,spin:{acceleration:0,enable:!1},straight:!0,trail:{enable:!1,length:10,fill:{}},vibrate:!1,warp:!1},number:{density:{enable:!1,width:1920,height:1080},limit:0,value:100},opacity:{random:{enable:!1,minimumValue:.1},value:.5,animation:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!1,mode:"auto",startValue:"random",destroy:"none",minimumValue:.1}},reduceDuplicates:!1,shadow:{blur:0,color:{value:"#000"},enable:!1,offset:{x:0,y:0}},shape:{close:!0,fill:!0,options:{star:{sides:5},polygon:{sides:5}},type:"star"},size:{random:{enable:!0,minimumValue:1},value:{min:1,max:4},animation:{count:0,enable:!1,speed:40,decay:0,delay:0,sync:!1,mode:"auto",startValue:"random",destroy:"none",minimumValue:.1}},stroke:{width:0},zIndex:{random:{enable:!1,minimumValue:0},value:0,opacityRate:1,sizeRate:1,velocityRate:1},destroy:{bounds:{},mode:"none",split:{count:1,factor:{random:{enable:!1,minimumValue:0},value:3},rate:{random:{enable:!1,minimumValue:0},value:{min:4,max:9}},sizeOffset:!0,particles:{}}},roll:{darken:{enable:!1,value:0},enable:!1,enlighten:{enable:!1,value:0},mode:"vertical",speed:25},tilt:{random:{enable:!1,minimumValue:0},value:0,animation:{enable:!1,speed:0,decay:0,sync:!1},direction:"clockwise",enable:!1},twinkle:{lines:{enable:!1,frequency:.05,opacity:1},particles:{enable:!1,frequency:.05,opacity:1}},wobble:{distance:5,enable:!1,speed:{angle:50,move:10}},life:{count:0,delay:{random:{enable:!1,minimumValue:0},value:0,sync:!1},duration:{random:{enable:!1,minimumValue:1e-4},value:0,sync:!1}},rotate:{random:{enable:!1,minimumValue:0},value:0,animation:{enable:!1,speed:0,decay:0,sync:!1},direction:"clockwise",path:!1},orbit:{animation:{count:0,enable:!1,speed:1,decay:0,delay:0,sync:!1},enable:!1,opacity:1,rotation:{random:{enable:!1,minimumValue:0},value:45},width:1},links:{blink:!1,color:{value:"#ffffff"},consent:!1,distance:150,enable:!1,frequency:1,opacity:.4,shadow:{blur:5,color:{value:"#000"},enable:!1},triangles:{enable:!1,frequency:1},width:1,warp:!1},repulse:{random:{enable:!1,minimumValue:0},value:0,enabled:!1,distance:1,duration:1,factor:1,speed:1}},pauseOnBlur:!0,pauseOnOutsideViewport:!0,responsive:[],smooth:!1,style:{},themes:[],zLayers:100,motion:{disable:!1,reduce:{factor:4,value:!0}}},Kp="generated",c8="pointerdown",u8="pointerup",sS="pointerleave",f8="pointerout",tf="pointermove",h8="touchstart",db="touchend",d8="touchmove",p8="touchcancel",m8="resize",g8="visibilitychange",Ks="tsParticles - Error";class gs{constructor(e,t,n){if(this._updateFromAngle=(r,s)=>{this.x=Math.cos(r)*s,this.y=Math.sin(r)*s},!Eo(e)&&e){this.x=e.x,this.y=e.y;const r=e;this.z=r.z?r.z:0}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=n??0;else throw new Error(`${Ks} Vector3d not initialized correctly`)}static get origin(){return gs.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return gs.create(e.x,e.y,e.z)}static create(e,t,n){return new gs(e,t,n)}add(e){return gs.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return gs.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return gs.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return gs.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return gs.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:0}sub(e){return gs.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class Ui extends gs{constructor(e,t){super(e,t,0)}static get origin(){return Ui.create(0,0)}static clone(e){return Ui.create(e.x,e.y)}static create(e,t){return new Ui(e,t)}}let y8=Math.random;const oS=new Map;function iA(i,e){oS.get(i)||oS.set(i,e)}function I2(i){return oS.get(i)||(e=>e)}function zn(){return Io(y8(),0,1-1e-16)}function Io(i,e,t){return Math.min(Math.max(i,e),t)}function rA(i,e,t,n){return Math.floor((i*t+e*n)/(t+n))}function ts(i){const e=fc(i);let t=DM(i);return e===t&&(t=0),zn()*(e-t)+t}function Nt(i){return Eo(i)?i:ts(i)}function DM(i){return Eo(i)?i:i.min}function fc(i){return Eo(i)?i:i.max}function en(i,e){if(i===e||e===void 0&&Eo(i))return i;const t=DM(i),n=fc(i);return e!==void 0?{min:Math.min(t,e),max:Math.max(n,e)}:en(t,n)}function nf(i){const e=i.random,{enable:t,minimumValue:n}=pc(e)?{enable:e,minimumValue:0}:e;return Nt(t?en(i.value,n):i.value)}function Lr(i,e){const t=i.x-e.x,n=i.y-e.y;return{dx:t,dy:n,distance:Math.sqrt(t**2+n**2)}}function As(i,e){return Lr(i,e).distance}function v8(i,e,t){if(Eo(i))return i*Math.PI/180;switch(i){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(t.y-e.y,t.x-e.x);case"outside":return Math.atan2(e.y-t.y,e.x-t.x);default:return zn()*Math.PI*2}}function x8(i){const e=Ui.origin;return e.length=1,e.angle=i,e}function pb(i,e,t,n){return Ui.create(i.x*(t-n)/(t+n)+e.x*2*n/(t+n),i.y)}function _8(i){return{x:i.position?.x??zn()*i.size.width,y:i.position?.y??zn()*i.size.height}}function B2(i){return i?i.endsWith("%")?parseFloat(i)/100:parseFloat(i):1}const A8={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function rf(){return A8}function mb(i){const e={bounced:!1},{pSide:t,pOtherSide:n,rectSide:r,rectOtherSide:s,velocity:o,factor:l}=i;return n.min<s.min||n.min>s.max||n.max<s.min||n.max>s.max||(t.max>=r.min&&t.max<=(r.max+r.min)/2&&o>0||t.min<=r.max&&t.min>(r.max+r.min)/2&&o<0)&&(e.velocity=o*-l,e.bounced=!0),e}function S8(i,e){const t=zi(e,n=>i.matches(n));return Ss(t)?t.some(n=>n):t}function cd(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function M8(){return!cd()&&typeof matchMedia<"u"}function D2(i){if(M8())return matchMedia(i)}function w8(i){if(!(cd()||typeof MutationObserver>"u"))return new MutationObserver(i)}function ci(i,e){return i===e||Ss(e)&&e.indexOf(i)>-1}async function E8(i,e){try{await document.fonts.load(`${e??"400"} 36px '${i??"Verdana"}'`)}catch{}}function C8(i){return Math.floor(zn()*i.length)}function H0(i,e,t=!0){return i[e!==void 0&&t?e%i.length:C8(i)]}function LM(i,e,t,n,r){return b8(Gm(i,n??0),e,t,r)}function b8(i,e,t,n){let r=!0;return(!n||n==="bottom")&&(r=i.top<e.height+t.x),r&&(!n||n==="left")&&(r=i.right>t.x),r&&(!n||n==="right")&&(r=i.left<e.width+t.y),r&&(!n||n==="top")&&(r=i.bottom>t.y),r}function Gm(i,e){return{bottom:i.y+e,left:i.x-e,right:i.x+e,top:i.y-e}}function mr(i,...e){for(const t of e){if(t==null)continue;if(!Xh(t)){i=t;continue}const n=Array.isArray(t);n&&(Xh(i)||!i||!Array.isArray(i))?i=[]:!n&&(Xh(i)||!i||Array.isArray(i))&&(i={});for(const r in t){if(r==="__proto__")continue;const s=t,o=s[r],l=i;l[r]=Xh(o)&&Array.isArray(o)?o.map(c=>mr(l[r],c)):mr(l[r],o)}}return i}function FM(i,e){return!!N2(e,t=>t.enable&&ci(i,t.mode))}function NM(i,e,t){zi(e,n=>{const r=n.mode;n.enable&&ci(i,r)&&T8(n,t)})}function T8(i,e){const t=i.selectors;zi(t,n=>{e(n,i)})}function L2(i,e){if(!(!e||!i))return N2(i,t=>S8(e,t.selectors))}function aS(i){return{position:i.getPosition(),radius:i.getRadius(),mass:i.getMass(),velocity:i.velocity,factor:Ui.create(nf(i.options.bounce.horizontal),nf(i.options.bounce.vertical))}}function F2(i,e){const{x:t,y:n}=i.velocity.sub(e.velocity),[r,s]=[i.position,e.position],{dx:o,dy:l}=Lr(s,r);if(t*o+n*l<0)return;const c=-Math.atan2(l,o),f=i.mass,p=e.mass,m=i.velocity.rotate(c),y=e.velocity.rotate(c),v=pb(m,y,f,p),x=pb(y,m,f,p),w=v.rotate(-c),S=x.rotate(-c);i.velocity.x=w.x*i.factor.x,i.velocity.y=w.y*i.factor.y,e.velocity.x=S.x*e.factor.x,e.velocity.y=S.y*e.factor.y}function R8(i,e){const t=i.getPosition(),n=i.getRadius(),r=Gm(t,n),s=mb({pSide:{min:r.left,max:r.right},pOtherSide:{min:r.top,max:r.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:i.velocity.x,factor:nf(i.options.bounce.horizontal)});s.bounced&&(s.velocity!==void 0&&(i.velocity.x=s.velocity),s.position!==void 0&&(i.position.x=s.position));const o=mb({pSide:{min:r.top,max:r.bottom},pOtherSide:{min:r.left,max:r.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:i.velocity.y,factor:nf(i.options.bounce.vertical)});o.bounced&&(o.velocity!==void 0&&(i.velocity.y=o.velocity),o.position!==void 0&&(i.position.y=o.position))}function zi(i,e){return Ss(i)?i.map((t,n)=>e(t,n)):e(i,0)}function rl(i,e,t){return Ss(i)?H0(i,e,t):i}function N2(i,e){return Ss(i)?i.find((t,n)=>e(t,n)):e(i,0)?i:void 0}function O2(i,e){const t=i.value,n=i.animation,r={delayTime:Nt(n.delay)*1e3,enable:n.enable,value:Nt(i.value)*e,max:fc(t)*e,min:DM(t)*e,loops:0,maxLoops:Nt(n.count),time:0};if(n.enable){switch(r.decay=1-Nt(n.decay),n.mode){case"increase":r.status="increasing";break;case"decrease":r.status="decreasing";break;case"random":r.status=zn()>=.5?"increasing":"decreasing";break}const s=n.mode==="auto";switch(n.startValue){case"min":r.value=r.min,s&&(r.status="increasing");break;case"max":r.value=r.max,s&&(r.status="decreasing");break;case"random":default:r.value=ts(r),s&&(r.status=zn()>=.5?"increasing":"decreasing");break}}return r.initialValue=r.value,r}function P8(i,e){if(!(i.mode==="percent")){const{mode:r,...s}=i;return s}return"x"in i?{x:i.x/100*e.width,y:i.y/100*e.height}:{width:i.width/100*e.width,height:i.height/100*e.height}}function k2(i,e){return P8(i,e)}function pc(i){return typeof i=="boolean"}function wo(i){return typeof i=="string"}function Eo(i){return typeof i=="number"}function U2(i){return typeof i=="function"}function Xh(i){return typeof i=="object"&&i!==null}function Ss(i){return Array.isArray(i)}const Vv="random",Wy="mid",G0=new Map;function gb(i){G0.set(i.key,i)}function sA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function I8(i){for(const[,s]of G0)if(i.startsWith(s.stringPrefix))return s.parseString(i);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,t=i.replace(e,(s,o,l,c,f)=>o+o+l+l+c+c+(f!==void 0?f+f:"")),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,r=n.exec(t);return r?{a:r[4]!==void 0?parseInt(r[4],16)/255:1,b:parseInt(r[3],16),g:parseInt(r[2],16),r:parseInt(r[1],16)}:void 0}function Co(i,e,t=!0){if(!i)return;const n=wo(i)?{value:i}:i;if(wo(n.value))return z2(n.value,e,t);if(Ss(n.value))return Co({value:H0(n.value,e,t)});for(const[,r]of G0){const s=r.handleRangeColor(n);if(s)return s}}function z2(i,e,t=!0){if(!i)return;const n=wo(i)?{value:i}:i;if(wo(n.value))return n.value===Vv?G2():B8(n.value);if(Ss(n.value))return z2({value:H0(n.value,e,t)});for(const[,r]of G0){const s=r.handleColor(n);if(s)return s}}function ym(i,e,t=!0){const n=Co(i,e,t);return n?H2(n):void 0}function H2(i){const e=i.r/255,t=i.g/255,n=i.b/255,r=Math.max(e,t,n),s=Math.min(e,t,n),o={h:0,l:(r+s)/2,s:0};return r!==s&&(o.s=o.l<.5?(r-s)/(r+s):(r-s)/(2-r-s),o.h=e===r?(t-n)/(r-s):o.h=t===r?2+(n-e)/(r-s):4+(e-t)/(r-s)),o.l*=100,o.s*=100,o.h*=60,o.h<0&&(o.h+=360),o.h>=360&&(o.h-=360),o}function B8(i){return I8(i)}function ud(i){const e={b:0,g:0,r:0},t={h:i.h/360,l:i.l/100,s:i.s/100};if(!t.s)e.r=e.g=e.b=t.l;else{const n=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s,r=2*t.l-n;e.r=sA(r,n,t.h+1/3),e.g=sA(r,n,t.h),e.b=sA(r,n,t.h-1/3)}return e.r=Math.floor(e.r*255),e.g=Math.floor(e.g*255),e.b=Math.floor(e.b*255),e}function D8(i){const e=ud(i);return{a:i.a,b:e.b,g:e.g,r:e.r}}function G2(i){return{b:Math.floor(ts(en(0,256))),g:Math.floor(ts(en(0,256))),r:Math.floor(ts(en(0,256)))}}function sl(i,e){return`rgba(${i.r}, ${i.g}, ${i.b}, ${e??1})`}function vm(i,e){return`hsla(${i.h}, ${i.s}%, ${i.l}%, ${e??1})`}function OM(i,e,t,n){let r=i,s=e;return r.r===void 0&&(r=ud(i)),s.r===void 0&&(s=ud(e)),{b:rA(r.b,s.b,t,n),g:rA(r.g,s.g,t,n),r:rA(r.r,s.r,t,n)}}function lS(i,e,t){if(t===Vv)return G2();if(t===Wy){const n=i.getFillColor()??i.getStrokeColor(),r=e?.getFillColor()??e?.getStrokeColor();if(n&&r&&e)return OM(n,r,i.getRadius(),e.getRadius());{const s=n??r;if(s)return ud(s)}}else return t}function V2(i,e,t){const n=wo(i)?i:i.value;return n===Vv?t?Co({value:n}):e?Vv:Wy:n===Wy?Wy:Co({value:n})}function yb(i){return i!==void 0?{h:i.h.value,s:i.s.value,l:i.l.value}:void 0}function W2(i,e,t){const n={h:{enable:!1,value:i.h},s:{enable:!1,value:i.s},l:{enable:!1,value:i.l}};return e&&(oA(n.h,e.h,t),oA(n.s,e.s,t),oA(n.l,e.l,t)),n}function oA(i,e,t){i.enable=e.enable,i.enable?(i.velocity=Nt(e.speed)/100*t,i.decay=1-Nt(e.decay),i.status="increasing",i.loops=0,i.maxLoops=Nt(e.count),i.time=0,i.delayTime=Nt(e.delay)*1e3,e.sync||(i.velocity*=zn(),i.value*=zn()),i.initialValue=i.value):i.velocity=0}function Yp(i,e,t){i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.closePath()}function L8(i,e,t,n){i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.lineTo(n.x,n.y),i.closePath()}function F8(i,e,t){i.fillStyle=t??"rgba(0,0,0,0)",i.fillRect(0,0,e.width,e.height)}function N8(i,e,t,n){t&&(i.globalAlpha=n,i.drawImage(t,0,0,e.width,e.height),i.globalAlpha=1)}function aA(i,e){i.clearRect(0,0,e.width,e.height)}function O8(i){const{container:e,context:t,particle:n,delta:r,colorStyles:s,backgroundMask:o,composite:l,radius:c,opacity:f,shadow:p,transform:m}=i,y=n.getPosition(),v=n.rotation+(n.pathRotation?n.velocity.angle:0),x={sin:Math.sin(v),cos:Math.cos(v)},w={a:x.cos*(m.a??1),b:x.sin*(m.b??1),c:-x.sin*(m.c??1),d:x.cos*(m.d??1)};t.setTransform(w.a,w.b,w.c,w.d,y.x,y.y),t.beginPath(),o&&(t.globalCompositeOperation=l);const S=n.shadowColor;p.enable&&S&&(t.shadowBlur=p.blur,t.shadowColor=sl(S),t.shadowOffsetX=p.offset.x,t.shadowOffsetY=p.offset.y),s.fill&&(t.fillStyle=s.fill);const M=n.strokeWidth??0;t.lineWidth=M,s.stroke&&(t.strokeStyle=s.stroke),k8(e,t,n,c,f,r),M>0&&t.stroke(),n.close&&t.closePath(),n.fill&&t.fill(),U8(e,t,n,c,f,r),t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0)}function k8(i,e,t,n,r,s){if(!t.shape)return;const o=i.drawers.get(t.shape);o&&o.draw(e,t,n,r,s,i.retina.pixelRatio)}function U8(i,e,t,n,r,s){if(!t.shape)return;const o=i.drawers.get(t.shape);!o||!o.afterEffect||o.afterEffect(e,t,n,r,s,i.retina.pixelRatio)}function z8(i,e,t){e.draw&&e.draw(i,t)}function H8(i,e,t,n){e.drawParticle&&e.drawParticle(i,t,n)}function G8(i,e,t){return{h:i.h,s:i.s,l:i.l+(e==="darken"?-1:1)*t}}function V8(i,e,t){const n=e[t];n!==void 0&&(i[t]=(i[t]??1)*n)}class W8{constructor(e){this.container=e,this._applyPostDrawUpdaters=t=>{for(const n of this._postDrawUpdaters)n.afterDraw&&n.afterDraw(t)},this._applyPreDrawUpdaters=(t,n,r,s,o,l)=>{for(const c of this._preDrawUpdaters){if(c.getColorStyles){const{fill:f,stroke:p}=c.getColorStyles(n,t,r,s);f&&(o.fill=f),p&&(o.stroke=p)}if(c.getTransformValues){const f=c.getTransformValues(n);for(const p in f)V8(l,f,p)}c.beforeDraw&&c.beforeDraw(n)}},this._applyResizePlugins=()=>{for(const t of this._resizePlugins)t.resize&&t.resize()},this._getPluginParticleColors=t=>{let n,r;for(const s of this._colorPlugins)if(!n&&s.particleFillColor&&(n=ym(s.particleFillColor(t))),!r&&s.particleStrokeColor&&(r=ym(s.particleStrokeColor(t))),n&&r)break;return[n,r]},this._initCover=()=>{const t=this.container.actualOptions,n=t.backgroundMask.cover,r=n.color,s=Co(r);if(s){const o={...s,a:n.opacity};this._coverColorStyle=sl(o,o.a)}},this._initStyle=()=>{const t=this.element,n=this.container.actualOptions;if(t){this._fullScreen?(this._originalStyle=mr({},t.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const r in n.style){if(!r||!n.style)continue;const s=n.style[r];s&&t.style.setProperty(r,s,"important")}}},this._initTrail=async()=>{const t=this.container.actualOptions,n=t.particles.move.trail,r=n.fill;if(n.enable)if(r.color){const s=Co(r.color);if(!s)return;const o=t.particles.move.trail;this._trailFill={color:{...s},opacity:1/o.length}}else await new Promise((s,o)=>{if(!r.image)return;const l=document.createElement("img");l.addEventListener("load",()=>{this._trailFill={image:l,opacity:1/n.length},s()}),l.addEventListener("error",c=>{o(c.error)}),l.src=r.image})},this._paintBase=t=>{this.draw(n=>F8(n,this.size,t))},this._paintImage=(t,n)=>{this.draw(r=>N8(r,this.size,t,n))},this._repairStyle=()=>{const t=this.element;t&&(this._safeMutationObserver(n=>n.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(n=>n.observe(t,{attributes:!0})))},this._resetOriginalStyle=()=>{const t=this.element,n=this._originalStyle;if(!(t&&n))return;const r=t.style;r.position=n.position,r.zIndex=n.zIndex,r.top=n.top,r.left=n.left,r.width=n.width,r.height=n.height},this._safeMutationObserver=t=>{this._mutationObserver&&t(this._mutationObserver)},this._setFullScreenStyle=()=>{const t=this.element;if(!t)return;const n="important",r=t.style;r.setProperty("position","fixed",n),r.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),n),r.setProperty("top","0",n),r.setProperty("left","0",n),r.setProperty("width","100%",n),r.setProperty("height","100%",n)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,n=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&n?n.color?this._paintBase(sl(n.color,n.opacity)):n.image&&this._paintImage(n.image,n.opacity):this.draw(r=>{aA(r,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const n=e.getRadius();if(n<=0)return;const r=e.getFillColor(),s=e.getStrokeColor()??r;let[o,l]=this._getPluginParticleColors(e);o||(o=r),l||(l=s),!(!o&&!l)&&this.draw(c=>{const f=this.container,p=f.actualOptions,m=e.options.zIndex,y=(1-e.zIndexFactor)**m.opacityRate,v=e.bubble.opacity??e.opacity?.value??1,x=e.strokeOpacity??v,w=v*y,S=x*y,M={},C={fill:o?vm(o,w):void 0};C.stroke=l?vm(l,S):C.fill,this._applyPreDrawUpdaters(c,e,n,w,C,M),O8({container:f,context:c,particle:e,delta:t,colorStyles:C,backgroundMask:p.backgroundMask.enable,composite:p.backgroundMask.composite,radius:n*(1-e.zIndexFactor)**m.sizeRate,opacity:w,shadow:e.options.shadow,transform:M}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,n){this.draw(r=>H8(r,e,t,n))}drawPlugin(e,t){this.draw(n=>z8(n,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=w8(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){rf().error(e)}this.initBackground(),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,n=this.element;if(!n)return;const r=n.style;if(r){if(t.color){const s=Co(t.color);r.backgroundColor=s?sl(s,t.opacity):""}else r.backgroundColor="";r.backgroundImage=t.image||"",r.backgroundPosition=t.position||"",r.backgroundRepeat=t.repeat||"",r.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&Kp in e.dataset?e.dataset[Kp]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=mr({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(t=>{this.element&&t.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(aA(t,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.retina.pixelRatio,n=e.canvas.size,r={width:this.element.offsetWidth*t,height:this.element.offsetHeight*t};if(r.height===n.height&&r.width===n.width&&r.height===this.element.height&&r.width===this.element.width)return!1;const s={...n};return this.element.width=n.width=this.element.offsetWidth*t,this.element.height=n.height=this.element.offsetHeight*t,this.container.started&&(this.resizeFactor={width:n.width/s.width,height:n.height/s.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>aA(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}function zs(i,e,t,n,r){if(n){let s={passive:!0};pc(r)?s.capture=r:r!==void 0&&(s=r),i.addEventListener(e,t,s)}else{const s=r;i.removeEventListener(e,t,s)}}class j8{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const n=this.container,r=n.actualOptions;if(this._canPush){const s=n.interactivity.mouse,o=s.position;if(!o)return;s.clickPosition={...o},s.clickTime=new Date().getTime();const l=r.interactivity.events.onClick;zi(l.mode,c=>this.container.handleClickMode(c))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=t=>{const n=t,r=this.container,s=r.options,o=s.defaultThemes,l=n.matches?o.dark:o.light,c=s.themes.find(f=>f.name===l);c&&c.default.auto&&r.loadTheme(l)},this._handleVisibilityChange=()=>{const t=this.container,n=t.actualOptions;this._mouseTouchFinish(),n.pauseOnBlur&&(document&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.getAnimationStatus()?t.play(!0):t.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const t=this.container.canvas;t&&await t.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(t,n)=>{const r=this._handlers,s=this.container,o=s.actualOptions,l=s.interactivity.element;if(!l)return;const c=l,f=s.canvas.element;f&&(f.style.pointerEvents=c===f?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&(zs(l,tf,r.mouseMove,n),zs(l,h8,r.touchStart,n),zs(l,d8,r.touchMove,n),o.interactivity.events.onClick.enable?(zs(l,db,r.touchEndClick,n),zs(l,u8,r.mouseUp,n),zs(l,c8,r.mouseDown,n)):zs(l,db,r.touchEnd,n),zs(l,t,r.mouseLeave,n),zs(l,p8,r.touchCancel,n))},this._manageListeners=t=>{const n=this._handlers,r=this.container,s=r.actualOptions,o=s.interactivity.detectsOn,l=r.canvas.element;let c=sS;o==="window"?(r.interactivity.element=window,c=f8):o==="parent"&&l?r.interactivity.element=l.parentElement??l.parentNode:r.interactivity.element=l,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(c,t),document&&zs(document,g8,n.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const n=this._handlers,r=D2("(prefers-color-scheme: dark)");if(r){if(r.addEventListener!==void 0){zs(r,"change",n.themeChange,t);return}r.addListener!==void 0&&(t?r.addListener(n.oldThemeChange):r.removeListener(n.oldThemeChange))}},this._manageResize=t=>{const n=this._handlers,r=this.container;if(!r.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){zs(window,m8,n.resize,t);return}const o=r.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(async l=>{l.find(f=>f.target===o)&&await this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:n}=t;n.clicking=!0,n.downPosition=n.position},this._mouseTouchClick=t=>{const n=this.container,r=n.actualOptions,{mouse:s}=n.interactivity;s.inside=!0;let o=!1;const l=s.position;if(!(!l||!r.interactivity.events.onClick.enable)){for(const[,c]of n.plugins)if(c.clickPositionValid&&(o=c.clickPositionValid(l),o))break;o||this._doMouseTouchClick(t),s.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const n=t.mouse;delete n.position,delete n.clickPosition,delete n.downPosition,t.status=sS,n.inside=!1,n.clicking=!1},this._mouseTouchMove=t=>{const n=this.container,r=n.actualOptions,s=n.interactivity,o=n.canvas.element;if(!s||!s.element)return;s.mouse.inside=!0;let l;if(t.type.startsWith("pointer")){this._canPush=!0;const f=t;if(s.element===window){if(o){const p=o.getBoundingClientRect();l={x:f.clientX-p.left,y:f.clientY-p.top}}}else if(r.interactivity.detectsOn==="parent"){const p=f.target,m=f.currentTarget;if(p&&m&&o){const y=p.getBoundingClientRect(),v=m.getBoundingClientRect(),x=o.getBoundingClientRect();l={x:f.offsetX+2*y.left-(v.left+x.left),y:f.offsetY+2*y.top-(v.top+x.top)}}else l={x:f.offsetX??f.clientX,y:f.offsetY??f.clientY}}else f.target===o&&(l={x:f.offsetX??f.clientX,y:f.offsetY??f.clientY})}else if(this._canPush=t.type!=="touchmove",o){const f=t,p=f.touches[f.touches.length-1],m=o.getBoundingClientRect();l={x:p.clientX-(m.left??0),y:p.clientY-(m.top??0)}}const c=n.retina.pixelRatio;l&&(l.x*=c,l.y*=c),s.mouse.position=l,s.status=tf},this._touchEnd=t=>{const n=t,r=Array.from(n.changedTouches);for(const s of r)this._touches.delete(s.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const n=t,r=Array.from(n.changedTouches);for(const s of r)this._touches.delete(s.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const n=t,r=Array.from(n.changedTouches);for(const s of r)this._touches.set(s.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class er{constructor(){this.value=""}static create(e,t){const n=new er;return n.load(e),t!==void 0&&(wo(t)||Ss(t)?n.load({value:t}):n.load(t)),n}load(e){e?.value!==void 0&&(this.value=e.value)}}class X8{constructor(){this.color=new er,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=er.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class J8{constructor(){this.color=new er,this.color.value="#fff",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=er.create(this.color,e.color)),e.opacity!==void 0&&(this.opacity=e.opacity))}}class K8{constructor(){this.composite="destination-out",this.cover=new J8,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,n=wo(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0?t:{color:n})}e.enable!==void 0&&(this.enable=e.enable)}}}class Y8{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class q8{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}class vb{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return zi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=zi(e,t=>`#${t}`)}load(e){if(!e)return;const t=e.ids??e.elementId??e.el;t!==void 0&&(this.ids=t),e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type)}}class Q8{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class Z8{constructor(){this.enable=!1,this.mode=[],this.parallax=new Q8}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class $8{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class e6{constructor(){this.onClick=new q8,this.onDiv=new vb,this.onHover=new Z8,this.resize=new $8}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const t=e.onDiv??e.ondiv;t!==void 0&&(this.onDiv=zi(t,n=>{const r=new vb;return r.load(n),r})),this.onHover.load(e.onHover??e.onhover),pc(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class t6{constructor(e,t){this._engine=e,this._container=t}load(e){if(!e||!this._container)return;const t=this._engine.plugins.interactors.get(this._container);if(t)for(const n of t)n.loadModeOptions&&n.loadModeOptions(this,e)}}class j2{constructor(e,t){this.detectsOn="window",this.events=new e6,this.modes=new t6(e,t)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const t=e.detectsOn??e.detect_on;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}class n6{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=mr({},e.options)))}}class i6{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode==="screen"?this.mode="screen":this.mode="canvas"),e.options!==void 0&&(this.options=mr({},e.options)))}}class r6{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class s6{constructor(){this.name="",this.default=new r6}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=mr({},e.options)))}}class lA{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(e.count!==void 0&&(this.count=en(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(this.offset=en(e.offset)),e.speed!==void 0&&(this.speed=en(e.speed)),e.decay!==void 0&&(this.decay=en(e.decay)),e.delay!==void 0&&(this.delay=en(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class o6{constructor(){this.h=new lA,this.s=new lA,this.l=new lA}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class xm extends er{constructor(){super(),this.animation=new o6}static create(e,t){const n=new xm;return n.load(e),t!==void 0&&(wo(t)||Ss(t)?n.load({value:t}):n.load(t)),n}load(e){if(super.load(e),!e)return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}class a6{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class l6{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class c6{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=en(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=en(e.speed)),e.decay!==void 0&&(this.decay=en(e.decay)),e.delay!==void 0&&(this.delay=en(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class X2 extends c6{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue),e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class u6{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue))}}class Ec{constructor(){this.random=new u6,this.value=0}load(e){e&&(pc(e.random)?this.random.enable=e.random:this.random.load(e.random),e.value!==void 0&&(this.value=en(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class xb extends Ec{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class J2{constructor(){this.horizontal=new xb,this.vertical=new xb}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class f6{constructor(){this.absorb=new a6,this.bounce=new J2,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new l6}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=en(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class h6{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=en(e.offset)),e.value!==void 0&&(this.value=en(e.value)))}}class d6{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){if(!e)return;e.distance!==void 0&&(this.distance=en(e.distance)),e.enable!==void 0&&(this.enable=e.enable);const t=e.rotate?.x??e.rotateX;t!==void 0&&(this.rotate.x=t);const n=e.rotate?.y??e.rotateY;n!==void 0&&(this.rotate.y=n)}}class p6{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class m6{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=en(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=en(e.maxSpeed)))}}class g6{constructor(){this.clamp=!0,this.delay=new Ec,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=mr(this.options,e.options)))}}class y6{load(e){e&&(e.color!==void 0&&(this.color=er.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class v6{constructor(){this.enable=!1,this.length=10,this.fill=new y6}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),(e.fill!==void 0||e.fillColor!==void 0)&&this.fill.load(e.fill||{color:e.fillColor}),e.length!==void 0&&(this.length=e.length))}}class x6{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class _6{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=en(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=mr({},e.position)))}}class A6{constructor(){this.angle=new h6,this.attract=new d6,this.center=new p6,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new m6,this.path=new g6,this.outModes=new x6,this.random=!1,this.size=!1,this.speed=2,this.spin=new _6,this.straight=!1,this.trail=new v6,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(Eo(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=en(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Eo(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=en(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes??e.outMode??e.out_mode;t!==void 0&&(Xh(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path??e.noise),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=en(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class S6 extends X2{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){e?.opacity_min!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.opacity_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class M6 extends Ec{constructor(){super(),this.animation=new S6,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=en(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class w6{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width??e.area??e.value_area;t!==void 0&&(this.width=t);const n=e.height??e.factor;n!==void 0&&(this.height=n)}}class E6{constructor(){this.density=new w6,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const t=e.limit??e.max;t!==void 0&&(this.limit=t),e.value!==void 0&&(this.value=e.value)}}class C6{constructor(){this.blur=0,this.color=new er,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=er.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}const cA="character",uA="char",fA="image",hA="images",dA="polygon",pA="star";class b6{constructor(){this.loadShape=(e,t,n,r)=>{if(!e)return;const s=Ss(e),o=s?[]:{},l=s!==Ss(this.options[t]),c=s!==Ss(this.options[n]);l&&(this.options[t]=o),c&&r&&(this.options[n]=o),this.options[t]=mr(this.options[t]??o,e),(!this.options[n]||r)&&(this.options[n]=mr(this.options[n]??o,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[cA]??this.options[uA]}set character(e){this.options[uA]=this.options[cA]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options[fA]??this.options[hA]}set image(e){this.options[hA]=this.options[fA]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options[dA]??this.options[pA]}set polygon(e){this.options[pA]=this.options[dA]=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const t=e.options??e.custom;if(t!==void 0)for(const n in t){const r=t[n];r&&(this.options[n]=mr(this.options[n]??{},r))}this.loadShape(e.character,cA,uA,!0),this.loadShape(e.polygon,dA,pA,!1),this.loadShape(e.image??e.images,fA,hA,!0),e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class T6 extends X2{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){e?.size_min!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.size_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class R6 extends Ec{constructor(){super(),this.animation=new T6,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const t=e.animation??e.anim;t!==void 0&&(this.animation.load(t),this.value=en(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class _b{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=xm.create(this.color,e.color)),e.width!==void 0&&(this.width=en(e.width)),e.opacity!==void 0&&(this.opacity=en(e.opacity)))}}class P6 extends Ec{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class I6{constructor(e,t){this._engine=e,this._container=t,this.bounce=new J2,this.collisions=new f6,this.color=new xm,this.color.value="#fff",this.groups={},this.move=new A6,this.number=new E6,this.opacity=new M6,this.reduceDuplicates=!1,this.shadow=new C6,this.shape=new b6,this.size=new R6,this.stroke=new _b,this.zIndex=new P6}load(e){if(!e)return;if(this.bounce.load(e.bounce),this.color.load(xm.create(this.color,e.color)),e.groups!==void 0)for(const r in e.groups){const s=e.groups[r];s!==void 0&&(this.groups[r]=mr(this.groups[r]??{},s))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const t=e.move?.collisions??e.move?.bounce;t!==void 0&&(this.collisions.enable=t),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=mr({},e.interactivity));const n=e.stroke??e.shape?.stroke;if(n&&(this.stroke=zi(n,r=>{const s=new _b;return s.load(r),s})),this._container){const r=this._engine.plugins.updaters.get(this._container);if(r)for(const o of r)o.loadOptions&&o.loadOptions(this,e);const s=this._engine.plugins.interactors.get(this._container);if(s)for(const o of s)o.loadParticlesOptions&&o.loadParticlesOptions(this,e)}}}function K2(i,...e){for(const t of e)i.load(t)}function Y2(i,e,...t){const n=new I6(i,e);return K2(n,...t),n}class B6{constructor(e,t){this._findDefaultTheme=n=>this.themes.find(r=>r.default.value&&r.default.mode===n)??this.themes.find(r=>r.default.value&&r.default.mode==="any"),this._importPreset=n=>{this.load(this._engine.plugins.getPreset(n))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new X8,this.backgroundMask=new K8,this.defaultThemes={},this.delay=0,this.fullScreen=new Y8,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new j2(e,t),this.manualParticles=[],this.particles=Y2(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){if(!e)return;e.preset!==void 0&&zi(e.preset,o=>this._importPreset(o)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.delay!==void 0&&(this.delay=en(e.delay));const t=e.detectRetina??e.retina_detect;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=en(e.duration));const n=e.fpsLimit??e.fps_limit;n!==void 0&&(this.fpsLimit=n),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const r=e.fullScreen??e.backgroundMode;pc(r)?this.fullScreen.enable=r:this.fullScreen.load(r),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(o=>{const l=new n6;return l.load(o),l})),this.particles.load(e.particles),this.style=mr(this.style,e.style),this._engine.plugins.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const s=this._engine.plugins.interactors.get(this._container);if(s)for(const o of s)o.loadOptions&&o.loadOptions(this,e);if(e.responsive!==void 0)for(const o of e.responsive){const l=new i6;l.load(o),this.responsive.push(l)}if(this.responsive.sort((o,l)=>o.maxWidth-l.maxWidth),e.themes!==void 0)for(const o of e.themes){const l=this.themes.find(c=>c.name===o.name);if(l)l.load(o);else{const c=new s6;c.load(o),this.themes.push(c)}}this.defaultThemes.dark=this._findDefaultTheme("dark")?.name,this.defaultThemes.light=this._findDefaultTheme("light")?.name}setResponsive(e,t,n){this.load(n);const r=this.responsive.find(s=>s.mode==="screen"&&screen?s.maxWidth>screen.availWidth:s.maxWidth*t>e);return this.load(r?.options),r?.maxWidth}setTheme(e){if(e){const t=this.themes.find(n=>n.name===e);t&&this.load(t.options)}else{const t=D2("(prefers-color-scheme: dark)"),n=t&&t.matches,r=this._findDefaultTheme(n?"dark":"light");r&&this.load(r.options)}}}class D6{constructor(e,t){this.container=t,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&await t.interact(e)}handleClickMode(e){for(const t of this._externalInteractors)t.handleClickMode&&t.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e);break}e.init()}}async particlesInteract(e,t){for(const n of this._externalInteractors)n.clear(e,t);for(const n of this._particleInteractors)n.isEnabled(e)&&await n.interact(e,t)}async reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}const Ab=i=>{if(!ci(i.outMode,i.checkModes))return;const e=i.radius*2;i.coord>i.maxCoord-e?i.setCb(-i.radius):i.coord<e&&i.setCb(i.radius)};class L6{constructor(e,t,n,r,s,o){this.container=n,this._calcPosition=(l,c,f,p=0)=>{for(const[,C]of l.plugins){const b=C.particlePosition!==void 0?C.particlePosition(c,this):void 0;if(b)return gs.create(b.x,b.y,f)}const m=l.canvas.size,y=_8({size:m,position:c}),v=gs.create(y.x,y.y,f),x=this.getRadius(),w=this.options.move.outModes,S=C=>{Ab({outMode:C,checkModes:["bounce","bounce-horizontal"],coord:v.x,maxCoord:l.canvas.size.width,setCb:b=>v.x+=b,radius:x})},M=C=>{Ab({outMode:C,checkModes:["bounce","bounce-vertical"],coord:v.y,maxCoord:l.canvas.size.height,setCb:b=>v.y+=b,radius:x})};return S(w.left??w.default),S(w.right??w.default),M(w.top??w.default),M(w.bottom??w.default),this._checkOverlap(v,p)?this._calcPosition(l,void 0,f,p+1):v},this._calculateVelocity=()=>{const l=x8(this.direction),c=l.copy(),f=this.options.move;if(f.direction==="inside"||f.direction==="outside")return c;const p=Math.PI/180*Nt(f.angle.value),m=Math.PI/180*Nt(f.angle.offset),y={left:m-p/2,right:m+p/2};return f.straight||(c.angle+=ts(en(y.left,y.right))),f.random&&typeof f.speed=="number"&&(c.length*=zn()),c},this._checkOverlap=(l,c=0)=>{const f=this.options.collisions,p=this.getRadius();if(!f.enable)return!1;const m=f.overlap;if(m.enable)return!1;const y=m.retries;if(y>=0&&c>y)throw new Error(`${Ks} particle is overlapping and can't be placed`);return!!this.container.particles.find(v=>As(l,v.position)<p+v.getRadius())},this._getRollColor=l=>{if(!l||!this.roll||!this.backColor&&!this.roll.alter)return l;const c=this.roll.horizontal&&this.roll.vertical?2:1,f=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+f)/(Math.PI/c))%2?this.backColor?this.backColor:this.roll.alter?G8(l,this.roll.alter.type,this.roll.alter.value):l:l},this._initPosition=l=>{const c=this.container,f=Nt(this.options.zIndex.value);this.position=this._calcPosition(c,l,Io(f,0,c.zLayers)),this.initialPosition=this.position.copy();const p=c.canvas.size;switch(this.moveCenter={...k2(this.options.move.center,p),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=v8(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=Ui.origin},this._loadShapeData=(l,c)=>{const f=l.options[this.shape];if(f)return mr({close:l.close,fill:l.fill},rl(f,this.id,c))},this._engine=e,this.init(t,r,s,o)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,n=this.pathGenerator;for(const[,r]of t.plugins)r.particleDestroyed&&r.particleDestroyed(this,e);for(const r of t.particles.updaters)r.particleDestroyed&&r.particleDestroyed(this,e);n&&n.reset(this)}draw(e){const t=this.container;for(const[,n]of t.plugins)t.canvas.drawParticlePlugin(n,this,e);t.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??yb(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??yb(this.strokeColor))}init(e,t,n,r){const s=this.container,o=this._engine;this.id=e,this.group=r,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const l=s.retina.pixelRatio,c=s.actualOptions,f=Y2(this._engine,s,c.particles),p=f.shape.type,{reduceDuplicates:m}=f;this.shape=rl(p,this.id,m);const y=f.shape;if(n&&n.shape&&n.shape.type){const b=n.shape.type,R=rl(b,this.id,m);R&&(this.shape=R,y.load(n.shape))}this.shapeData=this._loadShapeData(y,m),f.load(n);const v=this.shapeData;v&&f.load(v.particles);const x=new j2(o,s);x.load(s.actualOptions.interactivity),x.load(f.interactivity),this.interactivity=x,this.fill=v?.fill??f.shape.fill,this.close=v?.close??f.shape.close,this.options=f;const w=this.options.move.path;this.pathDelay=nf(w.delay)*1e3,w.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(w.generator),this.pathGenerator&&s.addPath(w.generator,this.pathGenerator)&&this.pathGenerator.init(s)),s.retina.initParticle(this),this.size=O2(this.options.size,l),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-Nt(this.options.move.decay);const S=s.particles;S.needsSort=S.needsSort||S.lastZIndex<this.position.z,S.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/s.zLayers,this.sides=24;let M=s.drawers.get(this.shape);M||(M=this._engine.plugins.getShapeDrawer(this.shape),M&&s.drawers.set(this.shape,M)),M&&M.loadShape&&M.loadShape(this);const C=M?.getSidesCount;C&&(this.sides=C(this)),this.spawning=!1,this.shadowColor=Co(this.options.shadow.color);for(const b of s.particles.updaters)b.init(this);for(const b of s.particles.movers)b.init&&b.init(this);M&&M.particleInit&&M.particleInit(s,this);for(const[,b]of s.plugins)b.particleCreated&&b.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,n=this.position;return n.x>=-e&&n.y>=-e&&n.y<=t.height+e&&n.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class F6{constructor(e,t){this.position=e,this.particle=t}}class q2{constructor(e,t){this.position={x:e,y:t}}}class Bo extends q2{constructor(e,t,n,r){super(e,t),this.size={height:r,width:n}}contains(e){const t=this.size.width,n=this.size.height,r=this.position;return e.x>=r.x&&e.x<=r.x+t&&e.y>=r.y&&e.y<=r.y+n}intersects(e){e instanceof gr&&e.intersects(this);const t=this.size.width,n=this.size.height,r=this.position,s=e.position,o=e instanceof Bo?e.size:{width:0,height:0},l=o.width,c=o.height;return s.x<r.x+t&&s.x+l>r.x&&s.y<r.y+n&&s.y+c>r.y}}class gr extends q2{constructor(e,t,n){super(e,t),this.radius=n}contains(e){return As(e,this.position)<=this.radius}intersects(e){const t=this.position,n=e.position,r={x:Math.abs(n.x-t.x),y:Math.abs(n.y-t.y)},s=this.radius;if(e instanceof gr){const o=s+e.radius,l=Math.sqrt(r.x**2+r.y**2);return o>l}else if(e instanceof Bo){const{width:o,height:l}=e.size;return Math.pow(r.x-o,2)+Math.pow(r.y-l,2)<=s**2||r.x<=s+o&&r.y<=s+l||r.x<=o||r.y<=l}return!1}}class Wv{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:n,y:r}=this.rectangle.position,{width:s,height:o}=this.rectangle.size,{capacity:l}=this;for(let c=0;c<4;c++)this._subs.push(new Wv(new Bo(n+s/2*(c%2),r+o/2*(Math.round(c/2)-c%2),s/2,o/2),l));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t,n){const r=n||[];if(!e.intersects(this.rectangle))return[];for(const s of this._points)!e.contains(s.position)&&As(e.position,s.position)>s.particle.getRadius()&&(!t||t(s.particle))||r.push(s.particle);if(this._divided)for(const s of this._subs)s.query(e,t,r);return r}queryCircle(e,t,n){return this.query(new gr(e.x,e.y,t),n)}queryRectangle(e,t,n){return this.query(new Bo(e.x,e.y,t.width,t.height),n)}}const Sb=4,Mb=i=>new Bo(-i.width/4,-i.height/4,i.width*3/2,i.height*3/2);let N6=class{constructor(e,t){this._applyDensity=(r,s,o)=>{if(!r.number.density?.enable)return;const l=r.number,c=this._initDensityFactor(l.density),f=l.value,p=l.limit>0?l.limit:f,m=Math.min(f,p)*c+s,y=Math.min(this.count,this.filter(v=>v.group===o).length);this.limit=l.limit*c,y<m?this.push(Math.abs(m-y),void 0,r,o):y>m&&this.removeQuantity(y-m,o)},this._initDensityFactor=r=>{const s=this._container;if(!s.canvas.element||!r.enable)return 1;const o=s.canvas.element,l=s.retina.pixelRatio;return o.width*o.height/(r.factor*l**2*r.area)},this._pushParticle=(r,s,o,l)=>{try{let c=this.pool.pop();c?c.init(this._nextId,r,s,o):c=new L6(this._engine,this._nextId,this._container,r,s,o);let f=!0;return l&&(f=l(c)),f?(this._array.push(c),this._zArray.push(c),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:c}}),c):void 0}catch(c){rf().warning(`${Ks} adding particle: ${c}`);return}},this._removeParticle=(r,s,o)=>{const l=this._array[r];if(!l||l.group!==s)return!1;l.destroy(o);const c=this._zArray.indexOf(l);return this._array.splice(r,1),this._zArray.splice(c,1),this.pool.push(l),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:l}}),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new D6(e,t);const n=t.canvas.size;this.quadTree=new Wv(Mb(n),Sb),this.movers=this._engine.plugins.getMovers(t,!0),this.updaters=this._engine.plugins.getUpdaters(t,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,t=e.actualOptions;for(const n of t.manualParticles)this.addParticle(n.position?k2(n.position,e.canvas.size):void 0,n.options)}addParticle(e,t,n,r){const s=this._container,o=s.actualOptions,l=o.particles.number.limit;if(l>0){const c=this.count+1-l;c>0&&this.removeQuantity(c)}return this._pushParticle(e,t,n,r)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const t=this._container;t.canvas.clear(),await this.update(e);for(const[,n]of t.plugins)t.canvas.drawPlugin(n,e);for(const n of this._zArray)n.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){const e=this._container,t=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let n=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,r]of e.plugins)if(r.particlesInitialization!==void 0&&(n=r.particlesInitialization()),n)break;this._interactionManager.init();for(const[,r]of e.pathGenerators)r.init(e);if(this.addManualParticles(),!n){for(const r in t.particles.groups){const s=t.particles.groups[r];for(let o=this.count,l=0;l<s.number?.value&&o<t.particles.number.value;o++,l++)this.addParticle(void 0,s,r)}for(let r=this.count;r<t.particles.number.value;r++)this.addParticle()}}push(e,t,n,r){this.pushing=!0;for(let s=0;s<e;s++)this.addParticle(t?.position,n,r);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,t,n){this.removeAt(this._array.indexOf(e),void 0,t,n)}removeAt(e,t=1,n,r){if(e<0||e>this.count)return;let s=0;for(let o=e;s<t&&o<this.count;o++)this._removeParticle(o--,n,r)&&s++}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups;for(const n in t)this._applyDensity(t[n],0,n);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const t=this._container,n=new Set;this.quadTree=new Wv(Mb(t.canvas.size),Sb);for(const[,r]of t.pathGenerators)r.update();for(const[,r]of t.plugins)r.update&&r.update(e);for(const r of this._array){const s=t.canvas.resizeFactor;s&&!r.ignoresResizeRatio&&(r.position.x*=s.width,r.position.y*=s.height,r.initialPosition.x*=s.width,r.initialPosition.y*=s.height),r.ignoresResizeRatio=!1,await this._interactionManager.reset(r);for(const[,o]of this._container.plugins){if(r.destroyed)break;o.particleUpdate&&o.particleUpdate(r,e)}for(const o of this.movers)o.isEnabled(r)&&o.move(r,e);if(r.destroyed){n.add(r);continue}this.quadTree.insert(new F6(r.getPosition(),r))}if(n.size){const r=s=>!n.has(s);this._array=this.filter(r),this._zArray=this._zArray.filter(r),this.pool.push(...n)}await this._interactionManager.externalInteract(e);for(const r of this._array){for(const s of this.updaters)s.update(r,e);!r.destroyed&&!r.spawning&&await this._interactionManager.particlesInteract(r,e)}if(delete t.canvas.resizeFactor,this.needsSort){const r=this._zArray;r.sort((s,o)=>o.position.z-s.position.z||s.id-o.id),this.lastZIndex=r[r.length-1].position.z,this.needsSort=!1}}};class O6{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||cd()?1:window.devicePixelRatio,this.reduceFactor=1;const n=this.pixelRatio;if(e.canvas.element){const o=e.canvas.element;e.canvas.size.width=o.offsetWidth*n,e.canvas.size.height=o.offsetHeight*n}const r=t.particles,s=r.move;this.attractDistance=Nt(s.attract.distance)*n,this.maxSpeed=Nt(s.gravity.maxSpeed)*n,this.sizeAnimationSpeed=Nt(r.size.animation.speed)*n}initParticle(e){const t=e.options,n=this.pixelRatio,r=t.move,s=r.distance,o=e.retina;o.attractDistance=Nt(r.attract.distance)*n,o.moveDrift=Nt(r.drift)*n,o.moveSpeed=Nt(r.speed)*n,o.sizeAnimationSpeed=Nt(t.size.animation.speed)*n;const l=o.maxDistance;l.horizontal=s.horizontal!==void 0?s.horizontal*n:void 0,l.vertical=s.vertical!==void 0?s.vertical*n:void 0,o.maxSpeed=Nt(r.gravity.maxSpeed)*n}}function Xn(i){return i&&!i.destroyed}function k6(i,e=60,t=!1){return{value:i,factor:t?60/e:60*i/1e3}}function Fh(i,e,...t){const n=new B6(i,e);return K2(n,...t),n}const U6="default",wb={generate:i=>i.velocity,init:()=>{},update:()=>{},reset:()=>{}};class z6{constructor(e,t,n){this.id=t,this._intersectionManager=r=>{if(!(!Xn(this)||!this.actualOptions.pauseOnOutsideViewport))for(const s of r)s.target===this.interactivity.element&&(s.isIntersecting?this.play:this.pause)()},this._nextFrame=async r=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&r<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??=r;const s=k6(r-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(s.value),this.lastFrameTime=r,s.value>1e3){this.draw(!1);return}if(await this.particles.draw(s),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(s){rf().error(`${Ks} in animation loop`,s)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=n,this._initialSourceOptions=n,this.retina=new O6(this),this.canvas=new W8(this),this.particles=new N6(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=Fh(this._engine,this),this.actualOptions=Fh(this._engine,this),this._eventListeners=new j8(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(r=>this._intersectionManager(r))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!Xn(this))return;const t=this.interactivity.element;if(!t)return;const n=(m,y,v)=>{if(!Xn(this))return;const x=this.retina.pixelRatio,w={x:y.x*x,y:y.y*x},S=this.particles.quadTree.queryCircle(w,v*x);e(m,S)},r=m=>{if(!Xn(this))return;const y=m,v={x:y.offsetX||y.clientX,y:y.offsetY||y.clientY};n(m,v,1)},s=()=>{Xn(this)&&(f=!0,p=!1)},o=()=>{Xn(this)&&(p=!0)},l=m=>{if(Xn(this)){if(f&&!p){const y=m;let v=y.touches[y.touches.length-1];if(!v&&(v=y.changedTouches[y.changedTouches.length-1],!v))return;const x=this.canvas.element,w=x?x.getBoundingClientRect():void 0,S={x:v.clientX-(w?w.left:0),y:v.clientY-(w?w.top:0)};n(m,S,Math.max(v.radiusX,v.radiusY))}f=!1,p=!1}},c=()=>{Xn(this)&&(f=!1,p=!1)};let f=!1,p=!1;t.addEventListener("click",r),t.addEventListener("touchstart",s),t.addEventListener("touchmove",o),t.addEventListener("touchend",l),t.addEventListener("touchcancel",c)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,n=!1){return!Xn(this)||!n&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t??wb),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!Xn(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,n]of this.drawers)n.destroy&&n.destroy(this);for(const n of this.drawers.keys())this.drawers.delete(n);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),t=e.findIndex(n=>n===this);t>=0&&e.splice(t,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!Xn(this))return;let t=e;this._drawAnimationFrame=requestAnimationFrame(async n=>{t&&(this.lastFrameTime=void 0,t=!1),await this._nextFrame(n)})}async export(e,t={}){for(const[,n]of this.plugins){if(!n.export)continue;const r=await n.export(e,t);if(r.supported)return r.blob}rf().error(`${Ks} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&Xn(this)}handleClickMode(e){if(Xn(this)){this.particles.handleClickMode(e);for(const[,t]of this.plugins)t.handleClickMode&&t.handleClickMode(e)}}async init(){if(!Xn(this))return;const e=this._engine.plugins.getSupportedShapes();for(const n of e){const r=this._engine.plugins.getShapeDrawer(n);r&&this.drawers.set(n,r)}this._options=Fh(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=Fh(this._engine,this,this._options);const t=this._engine.plugins.getAvailablePlugins(this);for(const[n,r]of t)this.plugins.set(n,r);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=Nt(this.actualOptions.duration)*1e3,this._delay=Nt(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,n]of this.drawers)n.init&&await n.init(this);for(const[,n]of this.plugins)n.init&&await n.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,n]of this.plugins)n.particlesSetup&&n.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){Xn(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(Xn(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!Xn(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const[,n]of this.plugins)n.play&&n.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(t||!1)}async refresh(){if(Xn(this))return this.stop(),this.start()}async reset(){if(Xn(this))return this._initialSourceOptions=void 0,this._options=Fh(this._engine,this),this.actualOptions=Fh(this._engine,this,this._options),this.refresh()}setNoise(e,t,n){Xn(this)&&this.setPath(e,t,n)}setPath(e,t,n){if(!e||!Xn(this))return;const r={...wb};if(U2(e))r.generate=e,t&&(r.init=t),n&&(r.update=n);else{const s=r;r.generate=e.generate||s.generate,r.init=e.init||s.init,r.update=e.update||s.update}this.addPath(U6,r,!0)}async start(){!Xn(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,t]of this.plugins)t.start&&await t.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()},this._delay)}))}stop(){if(!(!Xn(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===e?!1:(this.responsiveMaxWidth=e,!0)}}class H6{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let n=this._listeners.get(e);n||(n=[],this._listeners.set(e,n)),n.push(t)}dispatchEvent(e,t){const n=this._listeners.get(e);n&&n.forEach(r=>r(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const n=this._listeners.get(e);if(!n)return;const r=n.length,s=n.indexOf(t);s<0||(r===1?this._listeners.delete(e):n.splice(s,1))}}function mA(i,e,t,n=!1){let r=e.get(i);return(!r||n)&&(r=[...t.values()].map(s=>s(i)),e.set(i,r)),r}class G6{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,t){this._initializers.interactors.set(e,t)}addParticleMover(e,t){this._initializers.movers.set(e,t)}addParticleUpdater(e,t){this._initializers.updaters.set(e,t)}addPathGenerator(e,t){!this.getPathGenerator(e)&&this.pathGenerators.set(e,t)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,t,n=!1){(n||!this.getPreset(e))&&this.presets.set(e,t)}addShapeDrawer(e,t){zi(e,n=>{!this.getShapeDrawer(n)&&this.drawers.set(n,t)})}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const t=new Map;for(const n of this.plugins)n.needsPlugin(e.actualOptions)&&t.set(n.id,n.getPlugin(e));return t}getInteractors(e,t=!1){return mA(e,this.interactors,this._initializers.interactors,t)}getMovers(e,t=!1){return mA(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,t=!1){return mA(e,this.updaters,this._initializers.updaters,t)}loadOptions(e,t){for(const n of this.plugins)n.loadOptions(e,t)}loadParticlesOptions(e,t,...n){const r=this.updaters.get(e);if(r)for(const s of r)s.loadOptions&&s.loadOptions(t,...n)}}async function V6(i){const e=rl(i.url,i.index);if(!e)return i.fallback;const t=await fetch(e);return t.ok?t.json():(rf().error(`${Ks} ${t.status} while retrieving config file`),i.fallback)}function W6(i){return!i.id&&!i.element&&!i.url&&!i.options}function j6(i){return!W6(i)}class X6{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new H6,this._initialized=!1,this.plugins=new G6(this)}get configs(){const e={};for(const[t,n]of this._configs)e[t]=n;return e}get version(){return"2.12.0"}addConfig(e,t){wo(e)?t&&(t.name=e,this._configs.set(e,t)):this._configs.set(e.name??"default",e)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,n=!0){this.plugins.addInteractor(e,t),await this.refresh(n)}async addMover(e,t,n=!0){this.plugins.addParticleMover(e,t),await this.refresh(n)}async addParticleUpdater(e,t,n=!0){this.plugins.addParticleUpdater(e,t),await this.refresh(n)}async addPathGenerator(e,t,n=!0){this.plugins.addPathGenerator(e,t),await this.refresh(n)}async addPlugin(e,t=!0){this.plugins.addPlugin(e),await this.refresh(t)}async addPreset(e,t,n=!1,r=!0){this.plugins.addPreset(e,t,n),await this.refresh(r)}async addShape(e,t,n,r,s,o=!0){let l,c=o,f,p,m;pc(n)?(c=n,f=void 0):f=n,pc(r)?(c=r,p=void 0):p=r,pc(s)?(c=s,m=void 0):m=s,U2(t)?l={afterEffect:p,destroy:m,draw:t,init:f}:l=t,this.plugins.addShapeDrawer(e,l),await this.refresh(c)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this._domArray}domItem(e){const t=this.dom(),n=t[e];if(!n||n.destroyed){t.splice(e,1);return}return n}init(){this._initialized||(this._initialized=!0)}async load(e,t){return this.loadFromArray(e,t)}async loadFromArray(e,t,n){let r;return j6(e)?r=e:(r={},wo(e)?r.id=e:r.options=e,Eo(t)?r.index=t:r.options=t??r.options,r.index=n??r.index),this._loadParams(r)}async loadJSON(e,t,n){let r,s;return Eo(t)||t===void 0?r=e:(s=e,r=t),this._loadParams({id:s,url:r,index:n})}async refresh(e=!0){e&&this.dom().forEach(t=>t.refresh())}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}async set(e,t,n,r){const s={index:r};return wo(e)?s.id=e:s.element=e,t instanceof HTMLElement?s.element=t:s.options=t,Eo(n)?s.index=n:s.options=n??s.options,this._loadParams(s)}async setJSON(e,t,n,r){const s={};return e instanceof HTMLElement?(s.element=e,s.url=t,s.index=n):(s.id=e,s.element=t,s.url=n,s.index=r),this._loadParams(s)}setOnClickHandler(e){const t=this.dom();if(!t.length)throw new Error(`${Ks} can only set click handlers after calling tsParticles.load()`);for(const n of t)n.addClickHandler(e)}async _loadParams(e){const t=e.id??`tsparticles${Math.floor(zn()*1e4)}`,{index:n,url:r}=e,s=r?await V6({fallback:e.options,url:r,index:n}):e.options;let o=e.element??document.getElementById(t);o||(o=document.createElement("div"),o.id=t,document.body.append(o));const l=rl(s,n),c=this.dom(),f=c.findIndex(y=>y.id===t);if(f>=0){const y=this.domItem(f);y&&!y.destroyed&&(y.destroy(),c.splice(f,1))}let p;if(o.tagName.toLowerCase()==="canvas")p=o,p.dataset[Kp]="false";else{const y=o.getElementsByTagName("canvas");y.length?(p=y[0],p.dataset[Kp]="false"):(p=document.createElement("canvas"),p.dataset[Kp]="true",o.appendChild(p))}p.style.width||(p.style.width="100%"),p.style.height||(p.style.height="100%");const m=new z6(this,t,l);return f>=0?c.splice(f,0,m):c.push(m),m.canvas.loadCanvas(p),await m.start(),m}}class J6{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,n=t.hsl??e.value;if(n.h!==void 0&&n.s!==void 0&&n.l!==void 0)return ud(n)}handleRangeColor(e){const t=e.value,n=t.hsl??e.value;if(n.h!==void 0&&n.l!==void 0)return ud({h:Nt(n.h),l:Nt(n.l),s:Nt(n.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,n=t.exec(e);return n?D8({a:n.length>4?B2(n[5]):1,h:parseInt(n[1],10),l:parseInt(n[3],10),s:parseInt(n[2],10)}):void 0}}class K6{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,n=t.rgb??e.value;if(n.r!==void 0)return n}handleRangeColor(e){const t=e.value,n=t.rgb??e.value;if(n.r!==void 0)return{r:Nt(n.r),g:Nt(n.g),b:Nt(n.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,n=t.exec(e);return n?{a:n.length>4?B2(n[5]):1,b:parseInt(n[3],10),g:parseInt(n[2],10),r:parseInt(n[1],10)}:void 0}}function Y6(){const i=new K6,e=new J6;gb(i),gb(e);const t=new X6;return t.init(),t}class ha{constructor(e){this.container=e,this.type="external"}}class kM{constructor(e){this.container=e,this.type="particles"}}const jv=Y6();cd()||(window.tsParticles=jv);const Jh=i=>typeof i=="object"&&i!==null;function Xv(i,e,t=()=>!1){if(!Jh(i)||!Jh(e))return i===e;const n=Object.keys(i).filter(s=>!t(s)),r=Object.keys(e).filter(s=>!t(s));if(n.length!==r.length)return!1;for(const s of n){const o=i[s],l=e[s];if(Jh(o)&&Jh(l)){if(o===e&&l===i)continue;if(!Xv(o,l,t))return!1}else if(Array.isArray(o)&&Array.isArray(l)){if(!Q2(o,l,t))return!1}else if(o!==l)return!1}return!0}function Q2(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){const r=i[n],s=e[n];if(Array.isArray(r)&&Array.isArray(s)){if(!Q2(r,s,t))return!1}else if(Jh(r)&&Jh(s)){if(!Xv(r,s,t))return!1}else if(r!==s)return!1}return!0}const Z2="tsparticles";let $2=class eI extends q.Component{constructor(e){super(e),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(e){const t=e.options??e.params,n=this.props.options??this.props.params;return e.url!==this.props.url||e.id!==this.props.id||e.canvasClassName!==this.props.canvasClassName||e.className!==this.props.className||e.height!==this.props.height||e.width!==this.props.width||!Xv(e.style,this.props.style)||e.init!==this.props.init||e.loaded!==this.props.loaded||!Xv(t,n,r=>r.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(jv),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:e,height:t,className:n,canvasClassName:r,id:s}=this.props;return Zh.createElement("div",{className:n,id:s},Zh.createElement("canvas",{className:r,style:{...this.props.style,width:e,height:t}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const e=this.props.id??eI.defaultProps.id??Z2,t=await jv.load({url:this.props.url,id:e,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=t),this.setState({library:t}),this.props.loaded&&await this.props.loaded(t)}};$2.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:Z2};class Jv{static init(e){const t=new Jv,n=e.selector;if(!n)throw new Error("No selector provided");const r=document.querySelector(n);if(!r)throw new Error("No element found for selector");return jv.set(n.replace(".","").replace("!",""),r,{fullScreen:{enable:!1},particles:{color:{value:e.color??"!000000"},links:{color:"random",distance:e.minDistance??120,enable:e.connectParticles??!1},move:{enable:!0,speed:e.speed??.5},number:{value:e.maxParticles??100},size:{value:{min:1,max:e.sizeVariations??3}}},responsive:e.responsive?.map(s=>({maxWidth:s.breakpoint,options:{particles:{color:{value:s.options?.color},links:{distance:s.options?.minDistance,enable:s.options?.connectParticles},number:{value:e.maxParticles},move:{enable:!0,speed:s.options?.speed},size:{value:s.options?.sizeVariations}}}}))}).then(s=>{t._container=s}),t}destroy(){const e=this._container;e&&e.destroy()}pauseAnimation(){const e=this._container;e&&e.pause()}resumeAnimation(){const e=this._container;e&&e.play()}}const q6=i=>{const e=(n,r)=>i.load(n,r);e.load=(n,r,s)=>{i.loadJSON(n,r).then(o=>{o&&s(o)}).catch(()=>{s(void 0)})},e.setOnClickHandler=n=>{i.setOnClickHandler(n)};const t=i.dom();return{particlesJS:e,pJSDom:t}},Q6=i=>{const{particlesJS:e,pJSDom:t}=q6(i);return window.particlesJS=e,window.pJSDom=t,window.Particles=Jv,{particlesJS:e,pJSDom:t,Particles:Jv}};function Z6(i){const e=i.initialPosition,{dx:t,dy:n}=Lr(e,i.position),r=Math.abs(t),s=Math.abs(n),{maxDistance:o}=i.retina,l=o.horizontal,c=o.vertical;if(!(!l&&!c)){if((l&&r>=l||c&&s>=c)&&!i.misplaced)i.misplaced=!!l&&r>l||!!c&&s>c,l&&(i.velocity.x=i.velocity.y/2-i.velocity.x),c&&(i.velocity.y=i.velocity.x/2-i.velocity.y);else if((!l||r<l)&&(!c||s<c)&&i.misplaced)i.misplaced=!1;else if(i.misplaced){const f=i.position,p=i.velocity;l&&(f.x<e.x&&p.x<0||f.x>e.x&&p.x>0)&&(p.x*=-zn()),c&&(f.y<e.y&&p.y<0||f.y>e.y&&p.y>0)&&(p.y*=-zn())}}}function $6(i,e,t,n,r,s){tW(i,s);const o=i.gravity,l=o?.enable&&o.inverse?-1:1;r&&t&&(i.velocity.x+=r*s.factor/(60*t)),o?.enable&&t&&(i.velocity.y+=l*(o.acceleration*s.factor)/(60*t));const c=i.moveDecay;i.velocity.multTo(c);const f=i.velocity.mult(t);o?.enable&&n>0&&(!o.inverse&&f.y>=0&&f.y>=n||o.inverse&&f.y<=0&&f.y<=-n)&&(f.y=l*n,t&&(i.velocity.y=f.y/t));const p=i.options.zIndex,m=(1-i.zIndexFactor)**p.velocityRate;f.multTo(m);const{position:y}=i;y.addTo(f),e.vibrate&&(y.x+=Math.sin(y.x*Math.cos(y.y)),y.y+=Math.cos(y.y*Math.sin(y.x)))}function eW(i,e){const t=i.container;if(!i.spin)return;const n={x:i.spin.direction==="clockwise"?Math.cos:Math.sin,y:i.spin.direction==="clockwise"?Math.sin:Math.cos};i.position.x=i.spin.center.x+i.spin.radius*n.x(i.spin.angle),i.position.y=i.spin.center.y+i.spin.radius*n.y(i.spin.angle),i.spin.radius+=i.spin.acceleration;const r=Math.max(t.canvas.size.width,t.canvas.size.height);i.spin.radius>r/2?(i.spin.radius=r/2,i.spin.acceleration*=-1):i.spin.radius<0&&(i.spin.radius=0,i.spin.acceleration*=-1),i.spin.angle+=e/100*(1-i.spin.radius/r)}function tW(i,e){const t=i.options,n=t.move.path;if(!n.enable)return;if(i.lastPathTime<=i.pathDelay){i.lastPathTime+=e.value;return}const s=i.pathGenerator?.generate(i,e);s&&i.velocity.addTo(s),n.clamp&&(i.velocity.x=Io(i.velocity.x,-1,1),i.velocity.y=Io(i.velocity.y,-1,1)),i.lastPathTime-=i.pathDelay}function nW(i){return i.slow.inRange?i.slow.factor:1}const iW=2;class rW{constructor(){this._initSpin=e=>{const t=e.container,n=e.options,r=n.move.spin;if(!r.enable)return;const s=r.position??{x:50,y:50},o={x:s.x/100*t.canvas.size.width,y:s.y/100*t.canvas.size.height},l=e.getPosition(),c=As(l,o),f=Nt(r.acceleration);e.retina.spinAcceleration=f*t.retina.pixelRatio,e.spin={center:o,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:c,acceleration:e.retina.spinAcceleration}}}init(e){const t=e.options,n=t.move.gravity;e.gravity={enable:n.enable,acceleration:Nt(n.acceleration),inverse:n.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){const n=e.options,r=n.move;if(!r.enable)return;const s=e.container,o=s.retina.pixelRatio,l=nW(e),c=(e.retina.moveSpeed??=Nt(r.speed)*o)*s.retina.reduceFactor,f=e.retina.moveDrift??=Nt(e.options.move.drift)*o,p=fc(n.size.value)*o,m=r.size?e.getRadius()/p:1,y=c*m*l*(t.factor||1)/iW,v=e.retina.maxSpeed??s.retina.maxSpeed;r.spin.enable?eW(e,y):$6(e,r,y,v,f,t),Z6(e)}}async function sW(i,e=!0){await i.addMover("base",()=>new rW,e)}class oW{draw(e,t,n){t.circleRange||(t.circleRange={min:0,max:Math.PI*2});const r=t.circleRange;e.arc(0,0,n,r.min,r.max,!1)}getSidesCount(){return 12}particleInit(e,t){const n=t.shapeData,r=n?.angle??{max:360,min:0};t.circleRange=Xh(r)?{min:r.min*Math.PI/180,max:r.max*Math.PI/180}:{min:0,max:r*Math.PI/180}}}async function aW(i,e=!0){await i.addShape("circle",new oW,e)}function gA(i,e,t,n,r){if(!e||!t.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=i.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const s=ts(t.offset),o=(e.velocity??0)*i.factor+s*3.6,l=e.decay??1;!r||e.status==="increasing"?(e.value+=o,e.value>n&&(e.loops||(e.loops=0),e.loops++,r&&(e.status="decreasing",e.value-=e.value%n))):(e.value-=o,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&l!==1&&(e.velocity*=l),e.value>n&&(e.value%=n)}function lW(i,e){const{h:t,s:n,l:r}=i.options.color.animation,{color:s}=i;if(!s)return;const{h:o,s:l,l:c}=s;o&&gA(e,o,t,360,!1),l&&gA(e,l,n,100,!0),c&&gA(e,c,r,100,!0)}class cW{constructor(e){this.container=e}init(e){const t=ym(e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=W2(t,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:t,s:n,l:r}=e.options.color.animation,{color:s}=e;return!e.destroyed&&!e.spawning&&(s?.h.value!==void 0&&t.enable||s?.s.value!==void 0&&n.enable||s?.l.value!==void 0&&r.enable)}update(e,t){lW(e,t)}}async function uW(i,e=!0){await i.addParticleUpdater("color",t=>new cW(t),e)}function fW(i,e,t,n){switch(i.options.opacity.animation.destroy){case"max":e>=n&&i.destroy();break;case"min":e<=t&&i.destroy();break}}function hW(i,e){const t=i.opacity;if(i.destroyed||!t?.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const n=t.min,r=t.max,s=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=r?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=(t.velocity??0)*e.factor;break;case"decreasing":t.value<=n?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=(t.velocity??0)*e.factor;break}t.velocity&&t.decay!==1&&(t.velocity*=s),fW(i,t.value,n,r),i.destroyed||(t.value=Io(t.value,n,r))}}class dW{constructor(e){this.container=e}init(e){const t=e.options.opacity;e.opacity=O2(t,1);const n=t.animation;n.enable&&(e.opacity.velocity=Nt(n.speed)/100*this.container.retina.reduceFactor,n.sync||(e.opacity.velocity*=zn()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&hW(e,t)}}async function pW(i,e=!0){await i.addParticleUpdater("opacity",t=>new dW(t),e)}function mW(i){if(i.outMode!=="bounce"&&i.outMode!=="bounce-horizontal"&&i.outMode!=="bounceHorizontal"&&i.outMode!=="split"||i.direction!=="left"&&i.direction!=="right")return;i.bounds.right<0&&i.direction==="left"?i.particle.position.x=i.size+i.offset.x:i.bounds.left>i.canvasSize.width&&i.direction==="right"&&(i.particle.position.x=i.canvasSize.width-i.size-i.offset.x);const e=i.particle.velocity.x;let t=!1;if(i.direction==="right"&&i.bounds.right>=i.canvasSize.width&&e>0||i.direction==="left"&&i.bounds.left<=0&&e<0){const r=nf(i.particle.options.bounce.horizontal);i.particle.velocity.x*=-r,t=!0}if(!t)return;const n=i.offset.x+i.size;i.bounds.right>=i.canvasSize.width&&i.direction==="right"?i.particle.position.x=i.canvasSize.width-n:i.bounds.left<=0&&i.direction==="left"&&(i.particle.position.x=n),i.outMode==="split"&&i.particle.destroy()}function gW(i){if(i.outMode!=="bounce"&&i.outMode!=="bounce-vertical"&&i.outMode!=="bounceVertical"&&i.outMode!=="split"||i.direction!=="bottom"&&i.direction!=="top")return;i.bounds.bottom<0&&i.direction==="top"?i.particle.position.y=i.size+i.offset.y:i.bounds.top>i.canvasSize.height&&i.direction==="bottom"&&(i.particle.position.y=i.canvasSize.height-i.size-i.offset.y);const e=i.particle.velocity.y;let t=!1;if(i.direction==="bottom"&&i.bounds.bottom>=i.canvasSize.height&&e>0||i.direction==="top"&&i.bounds.top<=0&&e<0){const r=nf(i.particle.options.bounce.vertical);i.particle.velocity.y*=-r,t=!0}if(!t)return;const n=i.offset.y+i.size;i.bounds.bottom>=i.canvasSize.height&&i.direction==="bottom"?i.particle.position.y=i.canvasSize.height-n:i.bounds.top<=0&&i.direction==="top"&&(i.particle.position.y=n),i.outMode==="split"&&i.particle.destroy()}class yW{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,t,n,r){if(!this.modes.includes(r))return;const s=this.container;let o=!1;for(const[,y]of s.plugins)if(y.particleBounce!==void 0&&(o=y.particleBounce(e,n,t)),o)break;if(o)return;const l=e.getPosition(),c=e.offset,f=e.getRadius(),p=Gm(l,f),m=s.canvas.size;mW({particle:e,outMode:r,direction:t,bounds:p,canvasSize:m,offset:c,size:f}),gW({particle:e,outMode:r,direction:t,bounds:p,canvasSize:m,offset:c,size:f})}}class vW{constructor(e){this.container=e,this.modes=["destroy"]}update(e,t,n,r){if(!this.modes.includes(r))return;const s=this.container;switch(e.outType){case"normal":case"outside":if(LM(e.position,s.canvas.size,Ui.origin,e.getRadius(),t))return;break;case"inside":{const{dx:o,dy:l}=Lr(e.position,e.moveCenter),{x:c,y:f}=e.velocity;if(c<0&&o>e.moveCenter.radius||f<0&&l>e.moveCenter.radius||c>=0&&o<-e.moveCenter.radius||f>=0&&l<-e.moveCenter.radius)return;break}}s.particles.remove(e,void 0,!0)}}class xW{constructor(e){this.container=e,this.modes=["none"]}update(e,t,n,r){if(!this.modes.includes(r)||e.options.move.distance.horizontal&&(t==="left"||t==="right")||e.options.move.distance.vertical&&(t==="top"||t==="bottom"))return;const s=e.options.move.gravity,o=this.container,l=o.canvas.size,c=e.getRadius();if(s.enable){const f=e.position;(!s.inverse&&f.y>l.height+c&&t==="bottom"||s.inverse&&f.y<-c&&t==="top")&&o.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=l.height+c||e.velocity.y<0&&e.position.y>=-c||e.velocity.x>0&&e.position.x<=l.width+c||e.velocity.x<0&&e.position.x>=-c)return;LM(e.position,o.canvas.size,Ui.origin,c,t)||o.particles.remove(e)}}}class _W{constructor(e){this.container=e,this.modes=["out"]}update(e,t,n,r){if(!this.modes.includes(r))return;const s=this.container;switch(e.outType){case"inside":{const{x:o,y:l}=e.velocity,c=Ui.origin;c.length=e.moveCenter.radius,c.angle=e.velocity.angle+Math.PI,c.addTo(Ui.create(e.moveCenter));const{dx:f,dy:p}=Lr(e.position,c);if(o<=0&&f>=0||l<=0&&p>=0||o>=0&&f<=0||l>=0&&p<=0)return;e.position.x=Math.floor(ts({min:0,max:s.canvas.size.width})),e.position.y=Math.floor(ts({min:0,max:s.canvas.size.height}));const{dx:m,dy:y}=Lr(e.position,e.moveCenter);e.direction=Math.atan2(-y,-m),e.velocity.angle=e.direction;break}default:{if(LM(e.position,s.canvas.size,Ui.origin,e.getRadius(),t))return;switch(e.outType){case"outside":{e.position.x=Math.floor(ts({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(ts({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:l}=Lr(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(l,o),e.velocity.angle=e.direction);break}case"normal":{const o=e.options.move.warp,l=s.canvas.size,c={bottom:l.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:l.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},f=e.getRadius(),p=Gm(e.position,f);t==="right"&&p.left>l.width+e.offset.x?(e.position.x=c.left,e.initialPosition.x=e.position.x,o||(e.position.y=zn()*l.height,e.initialPosition.y=e.position.y)):t==="left"&&p.right<-e.offset.x&&(e.position.x=c.right,e.initialPosition.x=e.position.x,o||(e.position.y=zn()*l.height,e.initialPosition.y=e.position.y)),t==="bottom"&&p.top>l.height+e.offset.y?(o||(e.position.x=zn()*l.width,e.initialPosition.x=e.position.x),e.position.y=c.top,e.initialPosition.y=e.position.y):t==="top"&&p.bottom<-e.offset.y&&(o||(e.position.x=zn()*l.width,e.initialPosition.x=e.position.x),e.position.y=c.bottom,e.initialPosition.y=e.position.y);break}}break}}}}class AW{constructor(e){this.container=e,this._updateOutMode=(t,n,r,s)=>{for(const o of this.updaters)o.update(t,s,n,r)},this.updaters=[new yW(e),new vW(e),new _W(e),new xW(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const n=e.options.move.outModes;this._updateOutMode(e,t,n.bottom??n.default,"bottom"),this._updateOutMode(e,t,n.left??n.default,"left"),this._updateOutMode(e,t,n.right??n.default,"right"),this._updateOutMode(e,t,n.top??n.default,"top")}}async function SW(i,e=!0){await i.addParticleUpdater("outModes",t=>new AW(t),e)}function MW(i,e,t,n){switch(i.options.size.animation.destroy){case"max":e>=n&&i.destroy();break;case"min":e<=t&&i.destroy();break}}function wW(i,e){const t=i.size;if(i.destroyed||!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const n=(t.velocity??0)*e.factor,r=t.min,s=t.max,o=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=e.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case"increasing":t.value>=s?(t.status="decreasing",t.loops||(t.loops=0),t.loops++):t.value+=n;break;case"decreasing":t.value<=r?(t.status="increasing",t.loops||(t.loops=0),t.loops++):t.value-=n}t.velocity&&o!==1&&(t.velocity*=o),MW(i,t.value,r,s),i.destroyed||(t.value=Io(t.value,r,s))}}class EW{init(e){const t=e.container,n=e.options.size,r=n.animation;r.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/100*t.retina.reduceFactor,r.sync||(e.size.velocity*=zn()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&wW(e,t)}}async function CW(i,e=!0){await i.addParticleUpdater("size",()=>new EW,e)}async function bW(i,e=!0){await sW(i,!1),await aW(i,!1),await uW(i,!1),await pW(i,!1),await SW(i,!1),await CW(i,!1),await i.refresh(e)}async function TW(){iA("ease-in-quad",i=>i**2),iA("ease-out-quad",i=>1-(1-i)**2),iA("ease-in-out-quad",i=>i<.5?2*i**2:1-(-2*i+2)**2/2)}class RW{constructor(){this.distance=200,this.duration=.4,this.easing="ease-out-quad",this.factor=1,this.maxSpeed=50,this.speed=1}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}let PW=class extends ha{constructor(e,t){super(t),this._clickAttract=()=>{const n=this.container;n.attract||(n.attract={particles:[]});const{attract:r}=n;if(r.finish||(r.count||(r.count=0),r.count++,r.count===n.particles.count&&(r.finish=!0)),r.clicking){const s=n.interactivity.mouse.clickPosition,o=n.retina.attractModeDistance;if(!o||o<0||!s)return;this._processAttract(s,o,new gr(s.x,s.y,o))}else r.clicking===!1&&(r.particles=[])},this._hoverAttract=()=>{const n=this.container,r=n.interactivity.mouse.position,s=n.retina.attractModeDistance;!s||s<0||!r||this._processAttract(r,s,new gr(r.x,r.y,s))},this._processAttract=(n,r,s)=>{const o=this.container,l=o.actualOptions.interactivity.modes.attract;if(!l)return;const c=o.particles.quadTree.query(s,f=>this.isEnabled(f));for(const f of c){const{dx:p,dy:m,distance:y}=Lr(f.position,n),v=l.speed*l.factor,x=Io(I2(l.easing)(1-y/r)*v,0,l.maxSpeed),w=Ui.create(y===0?v:p/y*x,y===0?v:m/y*x);f.position.subFrom(w)}},this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=n=>{const r=this.container.actualOptions,s=r.interactivity.modes.attract;if(!(!s||n!=="attract")){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},s.duration*1e3)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===tf,r=t.interactivity.events,s=r.onHover.enable,o=r.onHover.mode,l=r.onClick.enable,c=r.onClick.mode;n&&s&&ci("attract",o)?this._hoverAttract():l&&ci("attract",c)&&this._clickAttract()}isEnabled(e){const t=this.container,n=t.actualOptions,r=t.interactivity.mouse,s=(e?.interactivity??n.interactivity).events;if((!r.position||!s.onHover.enable)&&(!r.clickPosition||!s.onClick.enable))return!1;const o=s.onHover.mode,l=s.onClick.mode;return ci("attract",o)||ci("attract",l)}loadModeOptions(e,...t){e.attract||(e.attract=new RW);for(const n of t)e.attract.load(n?.attract)}reset(){}};async function IW(i,e=!0){await i.addInteractor("externalAttract",t=>new PW(i,t),e)}class BW{constructor(){this.distance=200}load(e){e&&e.distance!==void 0&&(this.distance=e.distance)}}class DW extends ha{constructor(e){super(e),this._processBounce=(t,n,r)=>{const s=this.container.particles.quadTree.query(r,o=>this.isEnabled(o));for(const o of s)r instanceof gr?F2(aS(o),{position:t,mass:n**2*Math.PI/2,velocity:Ui.origin,factor:Ui.origin}):r instanceof Bo&&R8(o,Gm(t,n))},this._processMouseBounce=()=>{const t=this.container,n=t.retina.pixelRatio,r=10*n,s=t.interactivity.mouse.position,o=t.retina.bounceModeDistance;!o||o<0||!s||this._processBounce(s,o,new gr(s.x,s.y,o+r))},this._singleSelectorBounce=(t,n)=>{const r=this.container,s=document.querySelectorAll(t);s.length&&s.forEach(o=>{const l=o,c=r.retina.pixelRatio,f={x:(l.offsetLeft+l.offsetWidth/2)*c,y:(l.offsetTop+l.offsetHeight/2)*c},p=l.offsetWidth/2*c,m=10*c,y=n.type==="circle"?new gr(f.x,f.y,p+m):new Bo(l.offsetLeft*c-m,l.offsetTop*c-m,l.offsetWidth*c+m*2,l.offsetHeight*c+m*2);this._processBounce(f,p,y)})}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=t.interactivity.events,r=e.interactivity.status===tf,s=n.onHover.enable,o=n.onHover.mode,l=n.onDiv;r&&s&&ci("bounce",o)?this._processMouseBounce():NM("bounce",l,(c,f)=>this._singleSelectorBounce(c,f))}isEnabled(e){const t=this.container,n=t.actualOptions,r=t.interactivity.mouse,s=(e?.interactivity??n.interactivity).events,o=s.onDiv;return r.position&&s.onHover.enable&&ci("bounce",s.onHover.mode)||FM("bounce",o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new BW);for(const n of t)e.bounce.load(n?.bounce)}reset(){}}async function LW(i,e=!0){await i.addInteractor("externalBounce",t=>new DW(t),e)}class tI{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(e){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=Ss(this.color)?void 0:this.color;this.color=zi(e.color,n=>er.create(t,n))}e.size!==void 0&&(this.size=e.size)}}}class FW extends tI{constructor(){super(),this.selectors=[]}get ids(){return zi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=zi(e,t=>`#${t}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class NW extends tI{load(e){super.load(e),e&&(this.divs=zi(e.divs,t=>{const n=new FW;return n.load(t),n}))}}function Eb(i,e,t,n){if(e>=t){const r=i+(e-t)*n;return Io(r,i,e)}else if(e<t){const r=i-(t-e)*n;return Io(r,e,i)}}class OW extends ha{constructor(e){super(e),this._clickBubble=()=>{const t=this.container,n=t.actualOptions,r=t.interactivity.mouse.clickPosition,s=n.interactivity.modes.bubble;if(!s||!r)return;t.bubble||(t.bubble={});const o=t.retina.bubbleModeDistance;if(!o||o<0)return;const l=t.particles.quadTree.queryCircle(r,o,f=>this.isEnabled(f)),{bubble:c}=t;for(const f of l){if(!c.clicking)continue;f.bubble.inRange=!c.durationEnd;const p=f.getPosition(),m=As(p,r),y=(new Date().getTime()-(t.interactivity.mouse.clickTime||0))/1e3;y>s.duration&&(c.durationEnd=!0),y>s.duration*2&&(c.clicking=!1,c.durationEnd=!1);const v={bubbleObj:{optValue:t.retina.bubbleModeSize,value:f.bubble.radius},particlesObj:{optValue:fc(f.options.size.value)*t.retina.pixelRatio,value:f.size.value},type:"size"};this._process(f,m,y,v);const x={bubbleObj:{optValue:s.opacity,value:f.bubble.opacity},particlesObj:{optValue:fc(f.options.opacity.value),value:f.opacity?.value??1},type:"opacity"};this._process(f,m,y,x),!c.durationEnd&&m<=o?this._hoverBubbleColor(f,m):delete f.bubble.color}},this._hoverBubble=()=>{const t=this.container,n=t.interactivity.mouse.position,r=t.retina.bubbleModeDistance;if(!r||r<0||n===void 0)return;const s=t.particles.quadTree.queryCircle(n,r,o=>this.isEnabled(o));for(const o of s){o.bubble.inRange=!0;const l=o.getPosition(),c=As(l,n),f=1-c/r;c<=r?f>=0&&t.interactivity.status===tf&&(this._hoverBubbleSize(o,f),this._hoverBubbleOpacity(o,f),this._hoverBubbleColor(o,f)):this.reset(o),t.interactivity.status===sS&&this.reset(o)}},this._hoverBubbleColor=(t,n,r)=>{const s=this.container.actualOptions,o=r??s.interactivity.modes.bubble;if(o){if(!t.bubble.finalColor){const l=o.color;if(!l)return;const c=rl(l);t.bubble.finalColor=ym(c)}if(t.bubble.finalColor)if(o.mix){t.bubble.color=void 0;const l=t.getFillColor();t.bubble.color=l?H2(OM(l,t.bubble.finalColor,1-n,n)):t.bubble.finalColor}else t.bubble.color=t.bubble.finalColor}},this._hoverBubbleOpacity=(t,n,r)=>{const s=this.container,o=s.actualOptions,l=r?.opacity??o.interactivity.modes.bubble?.opacity;if(!l)return;const c=t.options.opacity.value,f=t.opacity?.value??1,p=Eb(f,l,fc(c),n);p!==void 0&&(t.bubble.opacity=p)},this._hoverBubbleSize=(t,n,r)=>{const s=this.container,o=r?.size?r.size*s.retina.pixelRatio:s.retina.bubbleModeSize;if(o===void 0)return;const l=fc(t.options.size.value)*s.retina.pixelRatio,c=t.size.value,f=Eb(c,o,l,n);f!==void 0&&(t.bubble.radius=f)},this._process=(t,n,r,s)=>{const o=this.container,l=s.bubbleObj.optValue,c=o.actualOptions,f=c.interactivity.modes.bubble;if(!f||l===void 0)return;const p=f.duration,m=o.retina.bubbleModeDistance,y=s.particlesObj.optValue,v=s.bubbleObj.value,x=s.particlesObj.value||0,w=s.type;if(!(!m||m<0||l===y))if(o.bubble||(o.bubble={}),o.bubble.durationEnd)v&&(w==="size"&&delete t.bubble.radius,w==="opacity"&&delete t.bubble.opacity);else if(n<=m){if((v??x)!==l){const M=x-r*(x-l)/p;w==="size"&&(t.bubble.radius=M),w==="opacity"&&(t.bubble.opacity=M)}}else w==="size"&&delete t.bubble.radius,w==="opacity"&&delete t.bubble.opacity},this._singleSelectorHover=(t,n,r)=>{const s=this.container,o=document.querySelectorAll(n),l=s.actualOptions.interactivity.modes.bubble;!l||!o.length||o.forEach(c=>{const f=c,p=s.retina.pixelRatio,m={x:(f.offsetLeft+f.offsetWidth/2)*p,y:(f.offsetTop+f.offsetHeight/2)*p},y=f.offsetWidth/2*p,v=r.type==="circle"?new gr(m.x,m.y,y):new Bo(f.offsetLeft*p,f.offsetTop*p,f.offsetWidth*p,f.offsetHeight*p),x=s.particles.quadTree.query(v,w=>this.isEnabled(w));for(const w of x){if(!v.contains(w.getPosition()))continue;w.bubble.inRange=!0;const S=l.divs,M=L2(S,f);(!w.bubble.div||w.bubble.div!==f)&&(this.clear(w,t,!0),w.bubble.div=f),this._hoverBubbleSize(w,1,M),this._hoverBubbleOpacity(w,1,M),this._hoverBubbleColor(w,1,M)}})},e.bubble||(e.bubble={}),this.handleClickMode=t=>{t==="bubble"&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,n){e.bubble.inRange&&!n||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}async interact(e){const t=this.container.actualOptions,n=t.interactivity.events,r=n.onHover,s=n.onClick,o=r.enable,l=r.mode,c=s.enable,f=s.mode,p=n.onDiv;o&&ci("bubble",l)?this._hoverBubble():c&&ci("bubble",f)?this._clickBubble():NM("bubble",p,(m,y)=>this._singleSelectorHover(e,m,y))}isEnabled(e){const t=this.container,n=t.actualOptions,r=t.interactivity.mouse,s=(e?.interactivity??n.interactivity).events,{onClick:o,onDiv:l,onHover:c}=s,f=FM("bubble",l);return f||c.enable&&r.position||o.enable&&r.clickPosition?ci("bubble",c.mode)||ci("bubble",o.mode)||f:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new NW);for(const n of t)e.bubble.load(n?.bubble)}reset(e){e.bubble.inRange=!1}}async function kW(i,e=!0){await i.addInteractor("externalBubble",t=>new OW(t),e)}class UW{constructor(){this.opacity=.5}load(e){e&&e.opacity!==void 0&&(this.opacity=e.opacity)}}class zW{constructor(){this.distance=80,this.links=new UW,this.radius=60}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked),e.radius!==void 0&&(this.radius=e.radius))}}function HW(i,e,t,n){const r=Math.floor(t.getRadius()/e.getRadius()),s=e.getFillColor(),o=t.getFillColor();if(!s||!o)return;const l=e.getPosition(),c=t.getPosition(),f=OM(s,o,e.getRadius(),t.getRadius()),p=i.createLinearGradient(l.x,l.y,c.x,c.y);return p.addColorStop(0,vm(s,n)),p.addColorStop(r>1?1:r,sl(f,n)),p.addColorStop(1,vm(o,n)),p}function GW(i,e,t,n,r){Yp(i,n,r),i.lineWidth=e,i.strokeStyle=t,i.stroke()}function VW(i,e,t,n){const r=i.actualOptions,s=r.interactivity.modes.connect;if(s)return HW(e,t,n,s.links.opacity)}function WW(i,e,t){i.canvas.draw(n=>{const r=VW(i,n,e,t);if(!r)return;const s=e.getPosition(),o=t.getPosition();GW(n,e.retina.linksWidth??0,r,s,o)})}class jW extends ha{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}async interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const n=e.interactivity.mouse.position;if(!e.retina.connectModeDistance||e.retina.connectModeDistance<0||!e.retina.connectModeRadius||e.retina.connectModeRadius<0||!n)return;const r=Math.abs(e.retina.connectModeRadius),s=e.particles.quadTree.queryCircle(n,r,l=>this.isEnabled(l));let o=0;for(const l of s){const c=l.getPosition();for(const f of s.slice(o+1)){const p=f.getPosition(),m=Math.abs(e.retina.connectModeDistance),y=Math.abs(c.x-p.x),v=Math.abs(c.y-p.y);y<m&&v<m&&WW(e,l,f)}++o}}}isEnabled(e){const t=this.container,n=t.interactivity.mouse,r=(e?.interactivity??t.actualOptions.interactivity).events;return r.onHover.enable&&n.position?ci("connect",r.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new zW);for(const n of t)e.connect.load(n?.connect)}reset(){}}async function XW(i,e=!0){await i.addInteractor("externalConnect",t=>new jW(t),e)}class JW{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){e&&(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=er.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class KW{constructor(){this.distance=100,this.links=new JW}get lineLinked(){return this.links}set lineLinked(e){this.links=e}get line_linked(){return this.links}set line_linked(e){this.links=e}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links??e.lineLinked??e.line_linked))}}function YW(i,e,t,n,r,s){Yp(i,t,n),i.strokeStyle=sl(r,s),i.lineWidth=e,i.stroke()}function qW(i,e,t,n,r){i.canvas.draw(s=>{const o=e.getPosition();YW(s,e.retina.linksWidth??0,o,r,t,n)})}class QW extends ha{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=t.interactivity;if(!n.modes.grab||!n.events.onHover.enable||e.interactivity.status!==tf)return;const r=e.interactivity.mouse.position;if(!r)return;const s=e.retina.grabModeDistance;if(!s||s<0)return;const o=e.particles.quadTree.queryCircle(r,s,l=>this.isEnabled(l));for(const l of o){const c=l.getPosition(),f=As(c,r);if(f>s)continue;const p=n.modes.grab.links,m=p.opacity,y=m-f*m/s;if(y<=0)continue;const v=p.color??l.options.links?.color;if(!e.particles.grabLineColor&&v){const w=n.modes.grab.links;e.particles.grabLineColor=V2(v,w.blink,w.consent)}const x=lS(l,void 0,e.particles.grabLineColor);x&&qW(e,l,x,y,r)}}isEnabled(e){const t=this.container,n=t.interactivity.mouse,r=(e?.interactivity??t.actualOptions.interactivity).events;return r.onHover.enable&&!!n.position&&ci("grab",r.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new KW);for(const n of t)e.grab.load(n?.grab)}reset(){}}async function ZW(i,e=!0){await i.addInteractor("externalGrab",t=>new QW(t),e)}class $W extends ha{constructor(e){super(e),this.handleClickMode=t=>{if(t!=="pause")return;const n=this.container;n.getAnimationStatus()?n.pause():n.play()}}clear(){}init(){}async interact(){}isEnabled(){return!0}reset(){}}async function ej(i,e=!0){await i.addInteractor("externalPause",t=>new $W(t),e)}class tj{constructor(){this.default=!0,this.groups=[],this.quantity=4}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=en(e)}load(e){if(!e)return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(n=>n)),this.groups.length||(this.default=!0);const t=e.quantity??e.particles_nb;t!==void 0&&(this.quantity=en(t))}}class nj extends ha{constructor(e){super(e),this.handleClickMode=t=>{if(t!=="push")return;const n=this.container,r=n.actualOptions,s=r.interactivity.modes.push;if(!s)return;const o=Nt(s.quantity);if(o<=0)return;const l=H0([void 0,...s.groups]),c=l!==void 0?n.actualOptions.particles.groups[l]:void 0;n.particles.push(o,n.interactivity.mouse,c,l)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new tj);for(const n of t)e.push.load(n?.push)}reset(){}}async function ij(i,e=!0){await i.addInteractor("externalPush",t=>new nj(t),e)}class rj{constructor(){this.quantity=2}get particles_nb(){return this.quantity}set particles_nb(e){this.quantity=en(e)}load(e){if(!e)return;const t=e.quantity??e.particles_nb;t!==void 0&&(this.quantity=en(t))}}class sj extends ha{constructor(e){super(e),this.handleClickMode=t=>{const n=this.container,r=n.actualOptions;if(!r.interactivity.modes.remove||t!=="remove")return;const s=Nt(r.interactivity.modes.remove.quantity);n.particles.removeQuantity(s)}}clear(){}init(){}async interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new rj);for(const n of t)e.remove.load(n?.remove)}reset(){}}async function oj(i,e=!0){await i.addInteractor("externalRemove",t=>new sj(t),e)}class nI{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing="ease-out-quad"}load(e){e&&(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class aj extends nI{constructor(){super(),this.selectors=[]}get ids(){return zi(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=zi(e,t=>`#${t}`)}load(e){super.load(e),e&&(e.ids!==void 0&&(this.ids=e.ids),e.selectors!==void 0&&(this.selectors=e.selectors))}}class lj extends nI{load(e){super.load(e),e&&(this.divs=zi(e.divs,t=>{const n=new aj;return n.load(t),n}))}}class cj extends ha{constructor(e,t){super(t),this._clickRepulse=()=>{const n=this.container,r=n.actualOptions.interactivity.modes.repulse;if(!r)return;const s=n.repulse||{particles:[]};if(s.finish||(s.count||(s.count=0),s.count++,s.count===n.particles.count&&(s.finish=!0)),s.clicking){const o=n.retina.repulseModeDistance;if(!o||o<0)return;const l=Math.pow(o/6,3),c=n.interactivity.mouse.clickPosition;if(c===void 0)return;const f=new gr(c.x,c.y,l),p=n.particles.quadTree.query(f,m=>this.isEnabled(m));for(const m of p){const{dx:y,dy:v,distance:x}=Lr(c,m.position),w=x**2,S=r.speed,M=-l*S/w;if(w<=l){s.particles.push(m);const C=Ui.create(y,v);C.length=M,m.velocity.setTo(C)}}}else if(s.clicking===!1){for(const o of s.particles)o.velocity.setTo(o.initialVelocity);s.particles=[]}},this._hoverRepulse=()=>{const n=this.container,r=n.interactivity.mouse.position,s=n.retina.repulseModeDistance;!s||s<0||!r||this._processRepulse(r,s,new gr(r.x,r.y,s))},this._processRepulse=(n,r,s,o)=>{const l=this.container,c=l.particles.quadTree.query(s,p=>this.isEnabled(p)),f=l.actualOptions.interactivity.modes.repulse;if(f)for(const p of c){const{dx:m,dy:y,distance:v}=Lr(p.position,n),x=(o?.speed??f.speed)*f.factor,w=Io(I2(f.easing)(1-v/r)*x,0,f.maxSpeed),S=Ui.create(v===0?x:m/v*w,v===0?x:y/v*w);p.position.addTo(S)}},this._singleSelectorRepulse=(n,r)=>{const s=this.container,o=s.actualOptions.interactivity.modes.repulse;if(!o)return;const l=document.querySelectorAll(n);l.length&&l.forEach(c=>{const f=c,p=s.retina.pixelRatio,m={x:(f.offsetLeft+f.offsetWidth/2)*p,y:(f.offsetTop+f.offsetHeight/2)*p},y=f.offsetWidth/2*p,v=r.type==="circle"?new gr(m.x,m.y,y):new Bo(f.offsetLeft*p,f.offsetTop*p,f.offsetWidth*p,f.offsetHeight*p),x=o.divs,w=L2(x,f);this._processRepulse(m,y,v,w)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=n=>{const r=this.container.actualOptions,s=r.interactivity.modes.repulse;if(!s||n!=="repulse")return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const l of t.repulse.particles)this.isEnabled(l)&&l.velocity.setTo(l.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},s.duration*1e3)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}async interact(){const e=this.container,t=e.actualOptions,n=e.interactivity.status===tf,r=t.interactivity.events,s=r.onHover,o=s.enable,l=s.mode,c=r.onClick,f=c.enable,p=c.mode,m=r.onDiv;n&&o&&ci("repulse",l)?this._hoverRepulse():f&&ci("repulse",p)?this._clickRepulse():NM("repulse",m,(y,v)=>this._singleSelectorRepulse(y,v))}isEnabled(e){const t=this.container,n=t.actualOptions,r=t.interactivity.mouse,s=(e?.interactivity??n.interactivity).events,o=s.onDiv,l=s.onHover,c=s.onClick,f=FM("repulse",o);if(!(f||l.enable&&r.position||c.enable&&r.clickPosition))return!1;const p=l.mode,m=c.mode;return ci("repulse",p)||ci("repulse",m)||f}loadModeOptions(e,...t){e.repulse||(e.repulse=new lj);for(const n of t)e.repulse.load(n?.repulse)}reset(){}}async function uj(i,e=!0){await i.addInteractor("externalRepulse",t=>new cj(i,t),e)}class fj{constructor(){this.factor=3,this.radius=200}load(e){e&&(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}class hj extends ha{constructor(e){super(e)}clear(e,t,n){e.slow.inRange&&!n||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}async interact(){}isEnabled(e){const t=this.container,n=t.interactivity.mouse,r=(e?.interactivity??t.actualOptions.interactivity).events;return r.onHover.enable&&!!n.position&&ci("slow",r.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new fj);for(const n of t)e.slow.load(n?.slow)}reset(e){e.slow.inRange=!1;const t=this.container,n=t.actualOptions,r=t.interactivity.mouse.position,s=t.retina.slowModeRadius,o=n.interactivity.modes.slow;if(!o||!s||s<0||!r)return;const l=e.getPosition(),c=As(r,l),f=c/s,p=o.factor,{slow:m}=e;c>s||(m.inRange=!0,m.factor=f/p)}}async function dj(i,e=!0){await i.addInteractor("externalSlow",t=>new hj(t),e)}const yA=[0,4,2,1],Cb=[8,8,4,2];class pj{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((n,r)=>n+String.fromCharCode(r),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;do{t=this.data[this.pos++];for(let n=t;--n>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==0);return e}readSubBlocksBin(){let e=0,t=0;for(let r=0;(e=this.data[this.pos+r])!==0;r+=e+1)t+=e;const n=new Uint8Array(t);for(let r=0;(e=this.data[this.pos++])!==0;)for(let s=e;--s>=0;n[r++]=this.data[this.pos++]);return n}skipSubBlocks(){for(;this.data[this.pos]!==0;this.pos+=this.data[this.pos]+1);this.pos++}}function iI(i,e){const t=[];for(let n=0;n<e;n++)t.push({r:i.data[i.pos],g:i.data[i.pos+1],b:i.data[i.pos+2]}),i.pos+=3;return t}async function mj(i,e,t,n){switch(i.nextByte()){case 249:{const r=e.frames[t(!1)];i.pos++;const s=i.nextByte();r.GCreserved=(s&224)>>>5,r.disposalMethod=(s&28)>>>2,r.userInputDelayFlag=(s&2)===2;const o=(s&1)===1;r.delayTime=i.nextTwoBytes()*10;const l=i.nextByte();o&&n(l),i.pos++;break}case 255:{i.pos++;const r={identifier:i.getString(8),authenticationCode:i.getString(3),data:i.readSubBlocksBin()};e.applicationExtensions.push(r);break}case 254:{e.comments.push([t(!1),i.readSubBlocks()]);break}case 1:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");i.pos++,e.frames[t(!1)].plainTextData={left:i.nextTwoBytes(),top:i.nextTwoBytes(),width:i.nextTwoBytes(),height:i.nextTwoBytes(),charSize:{width:i.nextTwoBytes(),height:i.nextTwoBytes()},foregroundColor:i.nextByte(),backgroundColor:i.nextByte(),text:i.readSubBlocks()};break}default:i.skipSubBlocks();break}}async function gj(i,e,t,n,r,s){const o=e.frames[n(!0)];o.left=i.nextTwoBytes(),o.top=i.nextTwoBytes(),o.width=i.nextTwoBytes(),o.height=i.nextTwoBytes();const l=i.nextByte(),c=(l&128)===128,f=(l&64)===64;o.sortFlag=(l&32)===32,o.reserved=(l&24)>>>3;const p=1<<(l&7)+1;c&&(o.localColorTable=iI(i,p));const m=M=>{const{r:C,g:b,b:R}=(c?o.localColorTable:e.globalColorTable)[M];return{r:C,g:b,b:R,a:M===r(null)?t?~~((C+b+R)/3):0:255}},y=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(M){if(M instanceof DOMException&&M.name==="IndexSizeError")return null;throw M}})();if(y==null)throw new EvalError("GIF frame size is to large");const v=i.nextByte(),x=i.readSubBlocksBin(),w=1<<v,S=(M,C)=>{const b=M>>>3,R=M&7;return(x[b]+(x[b+1]<<8)+(x[b+2]<<16)&(1<<C)-1<<R)>>>R};if(f){for(let M=0,C=v+1,b=0,R=[[0]],O=0;O<4;O++)if(yA[O]<o.height)for(let F=0,N=0;;){const U=M;if(M=S(b,C),b+=C+1,M===w){C=v+1,R.length=w+2;for(let J=0;J<R.length;J++)R[J]=J<w?[J]:[]}else{M>=R.length?R.push(R[U].concat(R[U][0])):U!==w&&R.push(R[U].concat(R[M][0]));for(let J=0;J<R[M].length;J++){const{r:B,g:L,b:ne,a:ie}=m(R[M][J]);y.data.set([B,L,ne,ie],yA[O]*o.width+Cb[O]*N+F%(o.width*4)),F+=4}R.length===1<<C&&C<12&&C++}if(F===o.width*4*(N+1)&&(N++,yA[O]+Cb[O]*N>=o.height))break}o.image=y,o.bitmap=await createImageBitmap(y)}else{for(let M=0,C=v+1,b=0,R=[[0]],O=-4;;){const F=M;if(M=S(b,C),b+=C,M===w){C=v+1,R.length=w+2;for(let N=0;N<R.length;N++)R[N]=N<w?[N]:[]}else{if(M===w+1)break;M>=R.length?R.push(R[F].concat(R[F][0])):F!==w&&R.push(R[F].concat(R[M][0]));for(let N=0;N<R[M].length;N++){const{r:U,g:J,b:B,a:L}=m(R[M][N]);y.data.set([U,J,B,L],O+=4)}R.length>=1<<C&&C<12&&C++}}o.image=y,o.bitmap=await createImageBitmap(y)}}async function yj(i,e,t,n,r,s){switch(i.nextByte()){case 59:return!0;case 44:await gj(i,e,t,n,r);break;case 33:await mj(i,e,n,r);break;default:throw new EvalError("undefined block found")}return!1}function vj(i){for(const e of i.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function xj(i,e,t){t||(t=!1);const n=await fetch(i);if(!n.ok&&n.status===404)throw new EvalError("file not found");const r=await n.arrayBuffer(),s={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new pj(new Uint8ClampedArray(r));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");s.width=o.nextTwoBytes(),s.height=o.nextTwoBytes();const l=o.nextByte(),c=(l&128)===128;s.colorRes=(l&112)>>>4,s.sortFlag=(l&8)===8;const f=1<<(l&7)+1,p=o.nextByte();s.pixelAspectRatio=o.nextByte(),s.pixelAspectRatio!==0&&(s.pixelAspectRatio=(s.pixelAspectRatio+15)/64),c&&(s.globalColorTable=iI(o,f));const m=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(R){if(R instanceof DOMException&&R.name==="IndexSizeError")return null;throw R}})();if(m==null)throw new Error("GIF frame size is to large");const{r:y,g:v,b:x}=s.globalColorTable[p];m.data.set(c?[y,v,x,255]:[0,0,0,0]);for(let R=4;R<m.data.length;R*=2)m.data.copyWithin(R,0,R);s.backgroundImage=m;let w=-1,S=!0,M=-1;const C=R=>(R&&(S=!0),w),b=R=>(R!=null&&(M=R),M);try{do S&&(s.frames.push({left:0,top:0,width:0,height:0,disposalMethod:0,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),w++,M=-1,S=!1);while(!await yj(o,s,t,C,b,e));s.frames.length--;for(const R of s.frames){if(R.userInputDelayFlag&&R.delayTime===0){s.totalTime=1/0;break}s.totalTime+=R.delayTime}return s}catch(R){throw R instanceof EvalError?new Error(`error while parsing frame ${w} "${R.message}"`):R}}const _j=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function Aj(i,e,t){const{svgData:n}=i;if(!n)return"";const r=vm(e,t);if(n.includes("fill"))return n.replace(_j,()=>r);const s=n.indexOf(">");return`${n.substring(0,s)} fill="${r}"${n.substring(s)}`}async function V0(i){return new Promise(e=>{i.loading=!0;const t=new Image;i.element=t,t.addEventListener("load",()=>{i.loading=!1,e()}),t.addEventListener("error",()=>{i.element=void 0,i.error=!0,i.loading=!1,rf().error(`${Ks} loading image: ${i.source}`),e()}),t.src=i.source})}async function Sj(i){if(i.type!=="gif"){await V0(i);return}i.loading=!0;try{i.gifData=await xj(i.source),i.gifLoopCount=vj(i.gifData)??0,i.gifLoopCount===0&&(i.gifLoopCount=1/0)}catch{i.error=!0}i.loading=!1}async function Mj(i){if(i.type!=="svg"){await V0(i);return}i.loading=!0;const e=await fetch(i.source);e.ok?i.svgData=await e.text():(rf().error(`${Ks} Image not found`),i.error=!0),i.loading=!1}function wj(i,e,t,n){const r=Aj(i,t,n.opacity?.value??1),s={color:t,gif:e.gif,data:{...i,svgData:r},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor??e.replace_color,source:e.src};return new Promise(o=>{const l=new Blob([r],{type:"image/svg+xml"}),c=URL||window.URL||window.webkitURL||window,f=c.createObjectURL(l),p=new Image;p.addEventListener("load",()=>{s.loaded=!0,s.element=p,o(s),c.revokeObjectURL(f)}),p.addEventListener("error",async()=>{c.revokeObjectURL(f);const m={...i,error:!1,loading:!0};await V0(m),s.loaded=!0,s.element=m.element,o(s)}),p.src=f})}class Ej{constructor(e){this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${Ks} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??t.replace_color??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e,t,n,r,s){const o=t.image,l=o?.element;if(o){if(e.globalAlpha=r,o.gif&&o.gifData){const c=new OffscreenCanvas(o.gifData.width,o.gifData.height),f=c.getContext("2d");if(!f)throw new Error("could not create offscreen canvas context");f.imageSmoothingQuality="low",f.imageSmoothingEnabled=!1,f.clearRect(0,0,c.width,c.height),t.gifLoopCount===void 0&&(t.gifLoopCount=o.gifLoopCount??0);let p=t.gifFrame??0;const m={x:-o.gifData.width*.5,y:-o.gifData.height*.5},y=o.gifData.frames[p];if(t.gifTime===void 0&&(t.gifTime=0),!y.bitmap)return;switch(e.scale(n/o.gifData.width,n/o.gifData.height),y.disposalMethod){case 4:case 5:case 6:case 7:case 0:f.drawImage(y.bitmap,y.left,y.top),e.drawImage(c,m.x,m.y),f.clearRect(0,0,c.width,c.height);break;case 1:f.drawImage(y.bitmap,y.left,y.top),e.drawImage(c,m.x,m.y);break;case 2:f.drawImage(y.bitmap,y.left,y.top),e.drawImage(c,m.x,m.y),f.clearRect(0,0,c.width,c.height),o.gifData.globalColorTable.length===0?f.putImageData(o.gifData.frames[0].image,m.x+y.left,m.y+y.top):f.putImageData(o.gifData.backgroundImage,m.x,m.y);break;case 3:{const v=f.getImageData(0,0,c.width,c.height);f.drawImage(y.bitmap,y.left,y.top),e.drawImage(c,m.x,m.y),f.clearRect(0,0,c.width,c.height),f.putImageData(v,0,0)}break}if(t.gifTime+=s.value,t.gifTime>y.delayTime){if(t.gifTime-=y.delayTime,++p>=o.gifData.frames.length){if(--t.gifLoopCount<=0)return;p=0,f.clearRect(0,0,c.width,c.height)}t.gifFrame=p}e.scale(o.gifData.width/n,o.gifData.height/n)}else if(l){const c=o.ratio,f={x:-n,y:-n};e.drawImage(l,f.x,f.y,n*2,n*2/c)}e.globalAlpha=1}}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const n of t.preload)await this._engine.loadImage(n)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;this._engine.images.find(r=>r.name===t.name||r.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const n=this._engine.images,r=t.shapeData,s=t.getFillColor(),o=n.find(c=>c.name===r.name||c.source===r.src);if(!o)return;const l=r.replaceColor??r.replace_color??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let c;o.svgData&&s?c=await wj(o,r,s,t):c={color:s,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:r.width&&r.height?r.width/r.height:o.ratio??1,replaceColor:l,source:r.src},c.ratio||(c.ratio=1);const f=r.fill??t.fill,p=r.close??t.close,m={image:c,fill:f,close:p};t.image=m.image,t.fill=m.fill,t.close=m.close})()}}class Cj{constructor(){this.src="",this.gif=!1}load(e){e&&(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class bj{constructor(e){this.id="imagePreloader",this._engine=e}getPlugin(){return{}}loadOptions(e,t){if(!t||!t.preload)return;e.preload||(e.preload=[]);const n=e.preload;for(const r of t.preload){const s=n.find(o=>o.name===r.name||o.src===r.src);if(s)s.load(r);else{const o=new Cj;o.load(r),n.push(o)}}}needsPlugin(){return!0}}function Tj(i){i.loadImage||(i.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${Ks} no image source provided`);if(i.images||(i.images=[]),!i.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-3),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};i.images.push(t),await(e.gif?Sj:e.replaceColor?Mj:V0)(t)}catch{throw new Error(`${Ks} ${e.name??e.src} not found`)}})}async function Rj(i,e=!0){Tj(i);const t=new bj(i);await i.addPlugin(t,e),await i.addShape(["image","images"],new Ej(i),e)}class Pj extends Ec{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Ij extends Ec{constructor(){super(),this.random.minimumValue=1e-4,this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Bj{constructor(){this.count=0,this.delay=new Pj,this.duration=new Ij}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class Dj{constructor(e){this.container=e}init(e){const t=this.container,n=e.options,r=n.life;r&&(e.life={delay:t.retina.reduceFactor?Nt(r.delay.value)*(r.delay.sync?1:zn())/t.retina.reduceFactor*1e3:0,delayTime:0,duration:t.retina.reduceFactor?Nt(r.duration.value)*(r.duration.sync?1:zn())/t.retina.reduceFactor*1e3:0,time:0,count:r.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Bj);for(const n of t)e.life.load(n?.life)}update(e,t){if(!this.isEnabled(e)||!e.life)return;const n=e.life;let r=!1;if(e.spawning)if(n.delayTime+=t.value,n.delayTime>=e.life.delay)r=!0,e.spawning=!1,n.delayTime=0,n.time=0;else return;if(n.duration===-1||e.spawning||(r?n.time=0:n.time+=t.value,n.time<n.duration))return;if(n.time=0,e.life.count>0&&e.life.count--,e.life.count===0){e.destroy();return}const s=this.container.canvas.size,o=en(0,s.width),l=en(0,s.width);e.position.x=ts(o),e.position.y=ts(l),e.spawning=!0,n.delayTime=0,n.time=0,e.reset();const c=e.options.life;c&&(n.delay=Nt(c.delay.value)*1e3,n.duration=Nt(c.duration.value)*1e3)}}async function Lj(i,e=!0){await i.addParticleUpdater("life",t=>new Dj(t),e)}class Fj{draw(e,t,n){const r=t.shapeData;e.moveTo(-n/2,0),e.lineTo(n/2,0),e.lineCap=r?.cap??"butt"}getSidesCount(){return 1}}async function Nj(i,e=!0){await i.addShape("line",new Fj,e)}class Oj{init(){}isEnabled(e){return!cd()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,n=t.actualOptions,r=n.interactivity.events.onHover.parallax;if(cd()||!r.enable)return;const s=r.force,o=t.interactivity.mouse.position;if(!o)return;const l=t.canvas.size,c={x:l.width/2,y:l.height/2},f=r.smooth,p=e.getRadius()/s,m={x:(o.x-c.x)*p,y:(o.y-c.y)*p},{offset:y}=e;y.x+=(m.x-y.x)/f,y.y+=(m.y-y.y)/f}}async function kj(i,e=!0){await i.addMover("parallax",()=>new Oj,e)}class Uj extends kM{constructor(e){super(e)}clear(){}init(){}async interact(e){const t=this.container,n=e.retina.attractDistance??t.retina.attractDistance,r=e.getPosition(),s=t.particles.quadTree.queryCircle(r,n);for(const o of s){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const l=o.getPosition(),{dx:c,dy:f}=Lr(r,l),p=e.options.move.attract.rotate,m=c/(p.x*1e3),y=f/(p.y*1e3),v=o.size.value/e.size.value,x=1/v;e.velocity.x-=m*v,e.velocity.y-=y*v,o.velocity.x+=m*x,o.velocity.y+=y*x}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function zj(i,e=!0){await i.addInteractor("particlesAttract",t=>new Uj(t),e)}function bb(i,e,t,n,r,s){const o=Io(i.options.collisions.absorb.speed*r.factor/10,0,n);i.size.value+=o/2,t.size.value-=o,n<=s&&(t.size.value=0,t.destroy())}function Hj(i,e,t,n){const r=i.getRadius(),s=e.getRadius();r===void 0&&s!==void 0?i.destroy():r!==void 0&&s===void 0?e.destroy():r!==void 0&&s!==void 0&&(r>=s?bb(i,r,e,s,t,n):bb(e,s,i,r,t,n))}const Tb=i=>{i.collisionMaxSpeed===void 0&&(i.collisionMaxSpeed=Nt(i.options.collisions.maxSpeed)),i.velocity.length>i.collisionMaxSpeed&&(i.velocity.length=i.collisionMaxSpeed)};function rI(i,e){F2(aS(i),aS(e)),Tb(i),Tb(e)}function Gj(i,e){!i.unbreakable&&!e.unbreakable&&rI(i,e),i.getRadius()===void 0&&e.getRadius()!==void 0?i.destroy():i.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():i.getRadius()!==void 0&&e.getRadius()!==void 0&&(i.getRadius()>=e.getRadius()?e:i).destroy()}function Vj(i,e,t,n){switch(i.options.collisions.mode){case"absorb":{Hj(i,e,t,n);break}case"bounce":{rI(i,e);break}case"destroy":{Gj(i,e);break}}}class Wj extends kM{constructor(e){super(e)}clear(){}init(){}async interact(e,t){if(e.destroyed||e.spawning)return;const n=this.container,r=e.getPosition(),s=e.getRadius(),o=n.particles.quadTree.queryCircle(r,s*2);for(const l of o){if(e===l||!l.options.collisions.enable||e.options.collisions.mode!==l.options.collisions.mode||l.destroyed||l.spawning)continue;const c=l.getPosition(),f=l.getRadius();if(Math.abs(Math.round(r.z)-Math.round(c.z))>s+f)continue;const p=As(r,c),m=s+f;p>m||Vj(e,l,t,n.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function jj(i,e=!0){await i.addInteractor("particlesCollisions",t=>new Wj(t),e)}class Xj extends gr{constructor(e,t,n,r){super(e,t,n),this.canvasSize=r,this.canvasSize={...r}}contains(e){const{width:t,height:n}=this.canvasSize,{x:r,y:s}=e;return super.contains(e)||super.contains({x:r-t,y:s})||super.contains({x:r-t,y:s-n})||super.contains({x:r,y:s-n})}intersects(e){if(super.intersects(e))return!0;const t=e,n=e,r={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(n.radius!==void 0){const s=new gr(r.x,r.y,n.radius*2);return super.intersects(s)}else if(t.size!==void 0){const s=new Bo(r.x,r.y,t.size.width*2,t.size.height*2);return super.intersects(s)}return!1}}class Jj{constructor(){this.blur=5,this.color=new er,this.color.value="#000",this.enable=!1}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=er.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class Kj{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(e.color!==void 0&&(this.color=er.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Yj{constructor(){this.blink=!1,this.color=new er,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Jj,this.triangles=new Kj,this.width=1,this.warp=!1}load(e){e&&(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=er.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}function qj(i,e,t,n,r){const{dx:s,dy:o,distance:l}=Lr(i,e);if(!r||l<=t)return l;const c={x:Math.abs(s),y:Math.abs(o)},f={x:Math.min(c.x,n.width-c.x),y:Math.min(c.y,n.height-c.y)};return Math.sqrt(f.x**2+f.y**2)}class Qj extends kM{constructor(e){super(e),this._setColor=t=>{if(!t.options.links)return;const n=this.linkContainer,r=t.options.links;let s=r.id===void 0?n.particles.linksColor:n.particles.linksColors.get(r.id);if(s)return;const o=r.color;s=V2(o,r.blink,r.consent),r.id===void 0?n.particles.linksColor=s:n.particles.linksColors.set(r.id,s)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),n=this.container,r=n.canvas.size;if(t.x<0||t.y<0||t.x>r.width||t.y>r.height)return;const s=e.options.links,o=s.opacity,l=e.retina.linksDistance??0,c=s.warp,f=c?new Xj(t.x,t.y,l,r):new gr(t.x,t.y,l),p=n.particles.quadTree.query(f);for(const m of p){const y=m.options.links;if(e===m||!y?.enable||s.id!==y.id||m.spawning||m.destroyed||!m.links||e.links.some(S=>S.destination===m)||m.links.some(S=>S.destination===e))continue;const v=m.getPosition();if(v.x<0||v.y<0||v.x>r.width||v.y>r.height)continue;const x=qj(t,v,l,r,c&&y.warp);if(x>l)continue;const w=(1-x/l)*o;this._setColor(e),e.links.push({destination:m,opacity:w})}}isEnabled(e){return!!e.options.links?.enable}loadParticlesOptions(e,...t){e.links||(e.links=new Yj);for(const n of t)e.links.load(n?.links??n?.lineLinked??n?.line_linked)}reset(){}}async function Zj(i,e=!0){await i.addInteractor("particlesLinks",t=>new Qj(t),e)}function $j(i){let e=!1;const{begin:t,end:n,maxDistance:r,context:s,canvasSize:o,width:l,backgroundMask:c,colorLine:f,opacity:p,links:m}=i;if(As(t,n)<=r)Yp(s,t,n),e=!0;else if(m.warp){let v,x;const w={x:n.x-o.width,y:n.y},S=Lr(t,w);if(S.distance<=r){const M=t.y-S.dy/S.dx*t.x;v={x:0,y:M},x={x:o.width,y:M}}else{const M={x:n.x,y:n.y-o.height},C=Lr(t,M);if(C.distance<=r){const R=-(t.y-C.dy/C.dx*t.x)/(C.dy/C.dx);v={x:R,y:0},x={x:R,y:o.height}}else{const b={x:n.x-o.width,y:n.y-o.height},R=Lr(t,b);if(R.distance<=r){const O=t.y-R.dy/R.dx*t.x;v={x:-O/(R.dy/R.dx),y:O},x={x:v.x+o.width,y:v.y+o.height}}}}v&&x&&(Yp(s,t,v),Yp(s,n,x),e=!0)}if(!e)return;s.lineWidth=l,c.enable&&(s.globalCompositeOperation=c.composite),s.strokeStyle=sl(f,p);const{shadow:y}=m;if(y.enable){const v=Co(y.color);v&&(s.shadowBlur=y.blur,s.shadowColor=sl(v))}s.stroke()}function e7(i){const{context:e,pos1:t,pos2:n,pos3:r,backgroundMask:s,colorTriangle:o,opacityTriangle:l}=i;L8(e,t,n,r),s.enable&&(e.globalCompositeOperation=s.composite),e.fillStyle=sl(o,l),e.fill()}function t7(i){return i.sort((e,t)=>e-t),i.join("_")}function Rb(i,e){const t=t7(i.map(r=>r.id));let n=e.get(t);return n===void 0&&(n=zn(),e.set(t,n)),n}class n7{constructor(e){this.container=e,this._drawLinkLine=(t,n)=>{const r=t.options.links;if(!r?.enable)return;const s=this.container,o=s.actualOptions,l=n.destination,c=t.getPosition(),f=l.getPosition();let p=n.opacity;s.canvas.draw(m=>{let y;const v=t.options.twinkle?.lines;if(v?.enable){const M=v.frequency,C=Co(v.color);zn()<M&&C&&(y=C,p=Nt(v.opacity))}if(!y){const M=r.id!==void 0?s.particles.linksColors.get(r.id):s.particles.linksColor;y=lS(t,l,M)}if(!y)return;const x=t.retina.linksWidth??0,w=t.retina.linksDistance??0,{backgroundMask:S}=o;$j({context:m,width:x,begin:c,end:f,maxDistance:w,canvasSize:s.canvas.size,links:r,backgroundMask:S,colorLine:y,opacity:p})})},this._drawLinkTriangle=(t,n,r)=>{const s=t.options.links;if(!s?.enable)return;const o=s.triangles;if(!o.enable)return;const l=this.container,c=l.actualOptions,f=n.destination,p=r.destination,m=o.opacity??(n.opacity+r.opacity)/2;m<=0||l.canvas.draw(y=>{const v=t.getPosition(),x=f.getPosition(),w=p.getPosition(),S=t.retina.linksDistance??0;if(As(v,x)>S||As(w,x)>S||As(w,v)>S)return;let M=Co(o.color);if(!M){const C=s.id!==void 0?l.particles.linksColors.get(s.id):l.particles.linksColor;M=lS(t,f,C)}M&&e7({context:y,pos1:v,pos2:x,pos3:w,backgroundMask:c.backgroundMask,colorTriangle:M,opacityTriangle:m})})},this._drawTriangles=(t,n,r,s)=>{const o=r.destination;if(!(t.links?.triangles.enable&&o.options.links?.triangles.enable))return;const l=o.links?.filter(c=>{const f=this._getLinkFrequency(o,c.destination);return o.options.links&&f<=o.options.links.frequency&&s.findIndex(p=>p.destination===c.destination)>=0});if(l?.length)for(const c of l){const f=c.destination;this._getTriangleFrequency(n,o,f)>t.links.triangles.frequency||this._drawLinkTriangle(n,r,c)}},this._getLinkFrequency=(t,n)=>Rb([t,n],this._freqs.links),this._getTriangleFrequency=(t,n,r)=>Rb([t,n,r],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:n,options:r}=t;if(!n||n.length<=0)return;const s=n.filter(o=>r.links&&this._getLinkFrequency(t,o.destination)<=r.links.frequency);for(const o of s)this._drawTriangles(r,t,o,s),o.opacity>0&&(t.retina.linksWidth??0)>0&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this.container.retina.pixelRatio,{retina:n}=e,{distance:r,width:s}=e.options.links;n.linksDistance=r*t,n.linksWidth=s*t}particleDestroyed(e){e.links=[]}}class i7{constructor(){this.id="links"}getPlugin(e){return new n7(e)}loadOptions(){}needsPlugin(){return!0}}async function r7(i,e=!0){const t=new i7;await i.addPlugin(t,e)}async function s7(i,e=!0){await Zj(i,e),await r7(i,e)}class sI{draw(e,t,n){const r=this.getCenter(t,n),s=this.getSidesData(t,n),o=s.count.numerator*s.count.denominator,l=s.count.numerator/s.count.denominator,c=180*(l-2)/l,f=Math.PI-Math.PI*c/180;if(e){e.beginPath(),e.translate(r.x,r.y),e.moveTo(0,0);for(let p=0;p<o;p++)e.lineTo(s.length,0),e.translate(s.length,0),e.rotate(f)}}getSidesCount(e){const t=e.shapeData;return Math.round(Nt(t?.sides??t?.nb_sides??5))}}class o7 extends sI{getCenter(e,t){return{x:-t/(e.sides/3.5),y:-t/(2.66/3.5)}}getSidesData(e,t){const n=e.sides;return{count:{denominator:1,numerator:n},length:t*2.66/(n/3)}}}class a7 extends sI{getCenter(e,t){return{x:-t,y:t/1.66}}getSidesCount(){return 3}getSidesData(e,t){return{count:{denominator:2,numerator:3},length:t*2}}}async function l7(i,e=!0){await i.addShape("polygon",new o7,e)}async function c7(i,e=!0){await i.addShape("triangle",new a7,e)}async function u7(i,e=!0){await l7(i,e),await c7(i,e)}class f7{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=en(e.speed)),e.decay!==void 0&&(this.decay=en(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class h7 extends Ec{constructor(){super(),this.animation=new f7,this.direction="clockwise",this.path=!1,this.value=0}load(e){e&&(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}function d7(i,e){const t=i.rotate,n=i.options.rotate;if(!t||!n)return;const r=n.animation,s=(t.velocity??0)*e.factor,o=2*Math.PI,l=t.decay??1;if(r.enable){switch(t.status){case"increasing":t.value+=s,t.value>o&&(t.value-=o);break;case"decreasing":default:t.value-=s,t.value<0&&(t.value+=o);break}t.velocity&&l!==1&&(t.velocity*=l)}}class p7{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Nt(t.value)*Math.PI/180},e.pathRotation=t.path;let n=t.direction;switch(n==="random"&&(n=Math.floor(zn()*2)>0?"counter-clockwise":"clockwise"),n){case"counter-clockwise":case"counterClockwise":e.rotate.status="decreasing";break;case"clockwise":e.rotate.status="increasing";break}const r=t.animation;r.enable&&(e.rotate.decay=1-Nt(r.decay),e.rotate.velocity=Nt(r.speed)/360*this.container.retina.reduceFactor,r.sync||(e.rotate.velocity*=zn())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&t.animation.enable&&!t.path:!1}loadOptions(e,...t){e.rotate||(e.rotate=new h7);for(const n of t)e.rotate.load(n?.rotate)}update(e,t){this.isEnabled(e)&&(d7(e,t),e.rotation=e.rotate?.value??0)}}async function m7(i,e=!0){await i.addParticleUpdater("rotate",t=>new p7(t),e)}const g7=Math.sqrt(2);class y7{draw(e,t,n){const r=n/g7,s=r*2;e.rect(-r,-r,s,s)}getSidesCount(){return 4}}async function v7(i,e=!0){await i.addShape(["edge","square"],new y7,e)}class x7{draw(e,t,n){const r=t.sides,s=t.starInset??2;e.moveTo(0,0-n);for(let o=0;o<r;o++)e.rotate(Math.PI/r),e.lineTo(0,0-n*s),e.rotate(Math.PI/r),e.lineTo(0,0-n)}getSidesCount(e){const t=e.shapeData;return Math.round(Nt(t?.sides??t?.nb_sides??5))}particleInit(e,t){const n=t.shapeData,r=Nt(n?.inset??2);t.starInset=r}}async function _7(i,e=!0){await i.addShape("star",new x7,e)}function vA(i,e,t,n,r){if(!e||!t.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=i.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const s=ts(t.offset),o=(e.velocity??0)*i.factor+s*3.6,l=e.decay??1;!r||e.status==="increasing"?(e.value+=o,e.value>n&&(e.loops||(e.loops=0),e.loops++,r&&(e.status="decreasing",e.value-=e.value%n))):(e.value-=o,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&l!==1&&(e.velocity*=l),e.value>n&&(e.value%=n)}function A7(i,e){if(!i.strokeColor||!i.strokeAnimation)return;const{h:t,s:n,l:r}=i.strokeColor,{h:s,s:o,l}=i.strokeAnimation;t&&vA(e,t,s,360,!1),n&&vA(e,n,o,100,!0),r&&vA(e,r,l,100,!0)}class S7{constructor(e){this.container=e}init(e){const t=this.container,n=e.options,r=rl(n.stroke,e.id,n.reduceDuplicates);e.strokeWidth=Nt(r.width)*t.retina.pixelRatio,e.strokeOpacity=Nt(r.opacity??1),e.strokeAnimation=r.color?.animation;const s=ym(r.color)??e.getFillColor();s&&(e.strokeColor=W2(s,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:n}=e;return!e.destroyed&&!e.spawning&&!!t&&(n?.h.value!==void 0&&n.h.enable||n?.s.value!==void 0&&n.s.enable||n?.l.value!==void 0&&n.l.enable)}update(e,t){this.isEnabled(e)&&A7(e,t)}}async function M7(i,e=!0){await i.addParticleUpdater("strokeColor",t=>new S7(t),e)}const jy=["text","character","char"];class w7{draw(e,t,n,r){const s=t.shapeData;if(s===void 0)return;const o=s.value;if(o===void 0)return;t.text===void 0&&(t.text=rl(o,t.randomIndexData));const l=t.text,c=s.style??"",f=s.weight??"400",p=Math.round(n)*2,m=s.font??"Verdana",y=t.fill,v=l.length*n/2;e.font=`${c} ${f} ${p}px "${m}"`;const x={x:-v,y:n/2};e.globalAlpha=r,y?e.fillText(l,x.x,x.y):e.strokeText(l,x.x,x.y),e.globalAlpha=1}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(jy.find(n=>ci(n,t.particles.shape.type))){const n=jy.map(s=>t.particles.shape.options[s]).find(s=>!!s),r=[];zi(n,s=>{r.push(E8(s.font,s.weight))}),await Promise.all(r)}}particleInit(e,t){if(!t.shape||!jy.includes(t.shape))return;const n=t.shapeData;if(n===void 0)return;const r=n.value;r!==void 0&&(t.text=rl(r,t.randomIndexData))}}async function E7(i,e=!0){await i.addShape(jy,new w7,e)}async function C7(i,e=!0){Q6(i),await kj(i,!1),await IW(i,!1),await LW(i,!1),await kW(i,!1),await XW(i,!1),await ZW(i,!1),await ej(i,!1),await ij(i,!1),await oj(i,!1),await uj(i,!1),await dj(i,!1),await zj(i,!1),await jj(i,!1),await s7(i,!1),await TW(),await Rj(i,!1),await Nj(i,!1),await u7(i,!1),await v7(i,!1),await _7(i,!1),await E7(i,!1),await Lj(i,!1),await m7(i,!1),await M7(i,!1),await bW(i,e)}const b7=({nyanStateFromParent:i})=>{const e=q.useCallback(async n=>{await C7(n)},[]),t=q.useCallback(async n=>{await console.log()},[]);return te.jsx("div",{children:i?te.jsx($2,{id:"tsparticles",init:e,loaded:t,options:l8}):""})};function T7(){const[i,e]=q.useState(!1),[t,n]=q.useState(!0),[r,s]=q.useState(!1);q.useEffect(()=>{localStorage.getItem("hasSeenGate")?(n(!1),s(!0)):n(!0),e(!0)},[]);const o=()=>{localStorage.setItem("hasSeenGate","true"),n(!1),s(!0)},[l,c]=q.useState(),f=p=>{c(p)};return i?te.jsxs("div",{children:[t&&te.jsx(a8,{onDelete:o}),r&&te.jsx(cB,{children:te.jsxs("div",{className:"relative z-0 bg-primary",children:[te.jsxs("div",{className:`bg-hero-pattern bg-cover\r
          bg-no-repeat bg-center`,children:[te.jsx(S5,{nyanStateToParent:f}),te.jsx(Q9,{lightUpName:l})]}),te.jsx(I5,{}),te.jsx(Y5,{}),te.jsx(D5,{}),te.jsx(Z5,{}),te.jsxs("div",{className:"relative z-0",children:[te.jsx(s8,{}),te.jsx(GH,{})]}),te.jsx("div",{children:te.jsx(b7,{nyanStateFromParent:l})})]})})]}):null}HI.createRoot(document.getElementById("root")).render(te.jsx(T7,{}));
